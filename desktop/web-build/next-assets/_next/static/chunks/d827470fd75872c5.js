(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,57950,e=>{"use strict";let t,r,a,s;var i,n=e.i(76167),o=e.i(17961);let l=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),c=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let h=(0,o.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:s="",children:i,iconNode:n,...c},h)=>(0,o.createElement)("svg",{ref:h,...d,width:t,height:t,stroke:e,strokeWidth:a?24*Number(r)/Number(t):r,className:l("lucide",s),...!i&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1})(c)&&{"aria-hidden":"true"},...c},[...n.map(([e,t])=>(0,o.createElement)(e,t)),...Array.isArray(i)?i:[i]])),m=(e,t)=>{let r=(0,o.forwardRef)(({className:r,...a},s)=>(0,o.createElement)(h,{ref:s,iconNode:t,className:l(`lucide-${c(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...a}));return r.displayName=c(e),r},g=m("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]),u=m("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),p=m("book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]),x=m("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function y({activeTab:e,setActiveTab:t}){let r=[{id:"home",label:"Home",icon:g},{id:"dictionary",label:"Dictionary",icon:p},{id:"history",label:"History",icon:u},{id:"help",label:"Help",icon:x}];return(0,n.jsxs)("div",{className:"w-64 h-full bg-[#f8f9fa] border-r border-gray-200 flex flex-col p-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-8 px-2",children:[(0,n.jsx)("div",{className:"w-8 h-8 bg-black rounded-lg flex items-center justify-center text-white font-bold",children:"NV"}),(0,n.jsx)("span",{className:"text-xl font-bold text-gray-900",children:"Neato Voice"}),(0,n.jsx)("span",{className:"text-xs font-semibold text-blue-600 bg-blue-100 px-1.5 py-0.5 rounded ml-2",children:"Pro Trial"})]}),(0,n.jsx)("nav",{className:"flex-1 space-y-1",children:r.map(r=>(0,n.jsxs)("button",{onClick:()=>t(r.id),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${e===r.id?"bg-gray-200 text-gray-900":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[(0,n.jsx)(r.icon,{size:18}),r.label]},r.id))}),(0,n.jsxs)("div",{className:"mt-auto bg-white p-4 rounded-xl border border-gray-200 shadow-sm",children:[(0,n.jsx)("div",{className:"flex justify-between items-start mb-2",children:(0,n.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:"Pro Trial"})}),(0,n.jsxs)("div",{className:"mb-2",children:[(0,n.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"1 of 30 days used"}),(0,n.jsx)("div",{className:"w-full bg-gray-100 rounded-full h-1.5",children:(0,n.jsx)("div",{className:"bg-black h-1.5 rounded-full",style:{width:"3.3%"}})})]}),(0,n.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"Upgrade to Neato Pro before your trial ends"}),(0,n.jsx)("button",{className:"w-full bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium py-2 rounded-lg transition-colors",children:"Upgrade"})]}),(0,n.jsx)("div",{className:"mt-4 flex flex-col gap-1 text-gray-400 px-1 border-t border-gray-200 pt-4",children:(0,n.jsxs)("button",{onClick:()=>t("settings"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${"settings"===e?"bg-gray-200 text-gray-900":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[(0,n.jsx)("div",{className:"flex items-center justify-center",children:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),(0,n.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})}),"Settings"]})})]})}let b=m("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),f=m("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]),w=m("chart-no-axes-column-increasing",[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]]),v=m("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),k=m("megaphone",[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]]);function j({stats:e,lastTranscript:t}){let r=Math.floor(e.totalDictationTimeMs/6e4),a=Math.min(100,5*(e.dictionarySize||0)+2*(e.correctionsCount||0)+Math.floor(e.totalWords/100));return r>0&&e.totalWords,(0,n.jsxs)("div",{className:"p-8 bg-white h-full overflow-y-auto",children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Speak naturally, write perfectly – in any app"}),(0,n.jsxs)("p",{className:"text-gray-600",children:["Hold down the ",(0,n.jsx)("kbd",{className:"bg-gray-100 border border-gray-300 rounded px-1.5 py-0.5 text-sm font-mono text-gray-800",children:"Ctrl+Shift+Space"})," key, speak, and let go to insert spoken text."]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[(0,n.jsxs)("div",{className:"bg-white p-5 rounded-2xl border border-gray-100 shadow-sm flex flex-col justify-center items-center h-32 hover:shadow-md transition-shadow",title:"Your personalization score increases as you add dictionary words and use the app.",children:[(0,n.jsxs)("div",{className:"relative w-20 h-20 mb-2",children:[(0,n.jsx)("div",{className:"w-full h-full rounded-full border-4 border-blue-100"}),(0,n.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full flex items-center justify-center font-bold text-gray-900 text-xl",children:[a,"%"]})]}),(0,n.jsx)("div",{className:"text-xs text-gray-500",children:"Overall personalization"})]}),(0,n.jsxs)("div",{className:"bg-white p-5 rounded-2xl border border-gray-100 shadow-sm flex flex-col justify-center h-32 hover:shadow-md transition-shadow",title:"The number of times the AI had to fix your text or when you manually refined it.",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,n.jsx)(f,{size:18,className:"text-gray-400"}),(0,n.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:e.correctionsCount||0})]}),(0,n.jsx)("div",{className:"text-sm text-gray-500",children:"Corrections made"})]}),(0,n.jsxs)("div",{className:"bg-white p-5 rounded-2xl border border-gray-100 shadow-sm flex flex-col justify-center h-32 hover:shadow-md transition-shadow",title:"Total words dictated this week.",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,n.jsx)(w,{size:18,className:"text-gray-400"}),(0,n.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:(e.wordsThisWeek||0).toLocaleString()})]}),(0,n.jsx)("div",{className:"text-sm text-gray-500",children:"Words (This Week)"})]}),(0,n.jsxs)("div",{className:"bg-white p-5 rounded-2xl border border-gray-100 shadow-sm flex flex-col justify-center h-32 hover:shadow-md transition-shadow",title:"Total usage time since installation.",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,n.jsx)(b,{size:18,className:"text-gray-400"}),(0,n.jsxs)("span",{className:"text-2xl font-bold text-gray-900",children:[r," min"]})]}),(0,n.jsx)("div",{className:"text-sm text-gray-500",children:"Total dictation time"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[(0,n.jsxs)("div",{className:"bg-blue-50 p-6 rounded-2xl flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-bold text-gray-900 mb-1",children:"Refer friends"}),(0,n.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Get $5 credit for Neato Pro for every invite."}),(0,n.jsx)("button",{disabled:!0,className:"bg-gray-100 text-gray-400 px-4 py-1.5 rounded-lg text-sm font-medium shadow-none cursor-not-allowed",children:"Coming Soon"})]}),(0,n.jsx)(v,{size:48,className:"text-blue-200"})]}),(0,n.jsxs)("div",{className:"bg-orange-50 p-6 rounded-2xl flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-bold text-gray-900 mb-1",children:"Affiliate program"}),(0,n.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Earn 25% recurring commission for sharing Neato."}),(0,n.jsx)("button",{disabled:!0,className:"bg-gray-100 text-gray-400 px-4 py-1.5 rounded-lg text-sm font-medium shadow-none cursor-not-allowed",children:"Coming Soon"})]}),(0,n.jsx)(k,{size:48,className:"text-orange-200"})]})]}),(0,n.jsxs)("div",{className:"mt-8",children:[(0,n.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Last transcript"}),(0,n.jsx)("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-200 min-h-[100px] text-gray-600",children:t||"No transcript yet. Try dictating something!"})]}),(0,n.jsx)("div",{className:"mt-8 text-xs text-gray-400",children:"Version 1.0.0 • Check for updates"})]})}function N(){return"electronAPI"in window&&window.electronAPI?.isElectron===!0?window.electronAPI:null}let S=m("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),C=m("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function T(){let[e,t]=(0,o.useState)([]),[r,a]=(0,o.useState)(""),[s,i]=(0,o.useState)(!0);(0,o.useEffect)(()=>{l()},[]);let l=async()=>{try{let e=N();if(e){let r=await e.getDictionary();t(r||[])}}catch(e){console.error("Failed to load dictionary:",e)}finally{i(!1)}},c=async e=>{if(e?.preventDefault(),r.trim())try{let e=N();if(e){let s=await e.addDictionaryWord(r.trim());t(s),a("")}}catch(e){console.error("Failed to add word:",e)}},d=async e=>{try{let r=N();if(r){let a=await r.removeDictionaryWord(e);t(a)}}catch(e){console.error("Failed to remove word:",e)}};return(0,n.jsxs)("div",{className:"p-8 bg-white h-full overflow-y-auto",children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,n.jsx)("div",{className:"bg-blue-100 p-2 rounded-lg text-blue-600",children:(0,n.jsx)(p,{size:24})}),(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Personal Dictionary"})]}),(0,n.jsx)("p",{className:"text-gray-600 max-w-2xl",children:"Add custom words, names, or technical terms here. Neato Voice will learn to recognize them more accurately during dictation."})]}),(0,n.jsxs)("div",{className:"max-w-xl",children:[(0,n.jsxs)("form",{onSubmit:c,className:"flex gap-2 mb-6",children:[(0,n.jsx)("input",{type:"text",value:r,onChange:e=>a(e.target.value),placeholder:"Enter a word or phrase...",className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}),(0,n.jsxs)("button",{type:"submit",disabled:!r.trim(),className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-xl hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,n.jsx)(C,{size:18}),"Add"]})]}),s?(0,n.jsx)("div",{className:"text-center py-8 text-gray-400",children:"Loading dictionary..."}):0===e.length?(0,n.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-2xl border border-dashed border-gray-200",children:[(0,n.jsx)("p",{className:"text-gray-500",children:"No custom words yet."}),(0,n.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:'Add names like "Neato" or "Antigravity"'})]}):(0,n.jsx)("div",{className:"grid grid-cols-1 gap-2",children:e.map(e=>(0,n.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-100 group hover:border-gray-200 transition-colors",children:[(0,n.jsx)("span",{className:"font-medium text-gray-800",children:e}),(0,n.jsx)("button",{onClick:()=>d(e),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all opacity-0 group-hover:opacity-100",title:"Remove word",children:(0,n.jsx)(S,{size:16})})]},e))})]})]})}let R=m("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);function I(){let[e,t]=(0,o.useState)([]),[r,a]=(0,o.useState)("forever"),[s,i]=(0,o.useState)(!0);(0,o.useEffect)(()=>{l()},[]);let l=async()=>{let e=N();if(e)try{let[r,s]=await Promise.all([e.getHistory(),e.getRetentionSettings()]);t(r||[]),a(s||"forever")}catch(e){console.error("Failed to load history:",e)}finally{i(!1)}else i(!1)},c=async e=>{let r=e.target.value,s=N();s&&(await s.setRetentionSettings(r),a(r),t(await s.getHistory()||[]))},d=async()=>{if(!confirm("Are you sure you want to delete all history? This cannot be undone."))return;let e=N();e&&(await e.clearHistory(),t([]))};return(0,n.jsxs)("div",{className:"p-8 bg-white h-full flex flex-col",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,n.jsx)("div",{className:"bg-purple-100 p-2 rounded-lg text-purple-600",children:(0,n.jsx)(u,{size:24})}),(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"History"})]}),(0,n.jsx)("p",{className:"text-gray-600 text-sm",children:"Review your past dictations. Stored locally."})]}),(0,n.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"text-sm text-gray-500",children:"Auto-delete:"}),(0,n.jsxs)("select",{value:r,onChange:c,className:"bg-gray-50 border border-gray-200 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2",children:[(0,n.jsx)("option",{value:"never",children:"Never (Disable History)"}),(0,n.jsx)("option",{value:"24h",children:"After 24 Hours"}),(0,n.jsx)("option",{value:"1w",children:"After 1 Week"}),(0,n.jsx)("option",{value:"1m",children:"After 1 Month"}),(0,n.jsx)("option",{value:"forever",children:"Don't Auto-delete"})]})]}),e.length>0&&(0,n.jsxs)("button",{onClick:d,className:"text-red-500 text-xs hover:underline flex items-center gap-1",children:[(0,n.jsx)(S,{size:12})," Clear All History"]})]})]}),(0,n.jsx)("div",{className:"flex-1 overflow-y-auto pr-2",children:s?(0,n.jsx)("div",{className:"text-center py-10 text-gray-400",children:"Loading history..."}):0===e.length?(0,n.jsxs)("div",{className:"text-center py-16 bg-gray-50 rounded-2xl border border-dashed border-gray-200",children:[(0,n.jsx)(b,{className:"mx-auto text-gray-300 mb-3",size:48}),(0,n.jsx)("p",{className:"text-gray-500 font-medium",children:"No history yet"}),(0,n.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Dictations will appear here based on your retention settings."})]}):(0,n.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,n.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100 hover:border-gray-300 transition-all group",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,n.jsxs)("span",{className:"text-xs font-medium text-gray-400 flex items-center gap-1",children:[(0,n.jsx)(b,{size:12})," ",new Date(e.timestamp).toLocaleString()]}),(0,n.jsx)("button",{onClick:()=>{var t;return t=e.text,void navigator.clipboard.writeText(t)},className:"text-blue-600 opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-blue-50 rounded",title:"Copy to clipboard",children:(0,n.jsx)(R,{size:16})})]}),(0,n.jsx)("p",{className:"text-gray-800 whitespace-pre-wrap leading-relaxed",children:e.text})]},e.id))})})]})}let M=m("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),A=m("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]]),E=m("languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]),z=m("keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),P=m("mouse-pointer-click",[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]]);function L(){let[e,t]=(0,o.useState)([]),[r,a]=(0,o.useState)("default"),[s,i]=(0,o.useState)(!1),[l,c]=(0,o.useState)("Spanish"),[d,h]=(0,o.useState)("");(0,o.useEffect)(()=>{m(),g()},[]);let m=async()=>{let e=N();if(e)try{let t=await e.getSettings();if(console.log("[Settings] Loaded:",t),t){let e=t.translation||{enabled:!1,targetLanguage:"Spanish"};i(!!e.enabled),c(e.targetLanguage||"Spanish"),t.microphoneId&&a(t.microphoneId)}}catch(e){console.error("[Settings] Load error:",e)}},g=async()=>{try{await navigator.mediaDevices.getUserMedia({audio:!0});let e=(await navigator.mediaDevices.enumerateDevices()).filter(e=>"audioinput"===e.kind).map(e=>({deviceId:e.deviceId,label:e.label||`Microphone ${e.deviceId.slice(0,5)}...`}));t(e)}catch(e){console.error("Failed to load devices",e)}},u=async e=>{try{console.log("[Settings] Saving updates:",e),h("Saving...");let t=N();if(t){let n={translation:{enabled:e.translationEnabled??s,targetLanguage:e.targetLanguage??l},microphoneId:e.microphoneId??r};await t.saveSettings(n),void 0!==e.translationEnabled&&i(e.translationEnabled),void 0!==e.targetLanguage&&c(e.targetLanguage),void 0!==e.microphoneId&&a(e.microphoneId),h("Saved!"),setTimeout(()=>h(""),2e3)}else console.warn("No Electron API found"),h("Error: No API")}catch(e){console.error("[Settings] Save failed:",e),h(`Error: ${e.message}`)}};return(0,n.jsxs)("div",{className:"p-8 bg-white h-full flex flex-col overflow-y-auto",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,n.jsx)("div",{className:"bg-gray-100 p-2 rounded-lg text-gray-700",children:(0,n.jsx)(M,{size:24})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),(0,n.jsx)("p",{className:"text-gray-500 text-sm",children:"Configure your experience."})]})]}),(0,n.jsxs)("div",{className:"space-y-8 max-w-2xl",children:[(0,n.jsxs)("section",{className:"bg-gray-50 p-5 rounded-xl border border-gray-200",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-4 text-gray-900 font-semibold",children:[(0,n.jsx)(A,{size:18}),(0,n.jsx)("h2",{children:"Microphone Input"})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("label",{className:"block text-sm text-gray-600",children:"Select input device"}),(0,n.jsxs)("select",{value:r,onChange:e=>u({microphoneId:e.target.value}),className:"w-full bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5",children:[(0,n.jsx)("option",{value:"default",children:"Default System Microphone"}),e.map(e=>(0,n.jsx)("option",{value:e.deviceId,children:e.label},e.deviceId))]})]})]}),(0,n.jsxs)("section",{className:"bg-gray-50 p-5 rounded-xl border border-gray-200",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-4 text-gray-900 font-semibold",children:[(0,n.jsx)(E,{size:18}),(0,n.jsx)("h2",{children:"Translation Mode"})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"Translate output automatically"}),(0,n.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,n.jsx)("input",{type:"checkbox",checked:s,onChange:e=>u({translationEnabled:e.target.checked}),className:"sr-only peer"}),(0,n.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),s&&(0,n.jsxs)("div",{className:"animate-in fade-in slide-in-from-top-2 duration-200",children:[(0,n.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Target Language"}),(0,n.jsxs)("select",{value:l,onChange:e=>u({targetLanguage:e.target.value}),className:"w-full bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5",children:[(0,n.jsx)("option",{value:"Spanish",children:"Spanish"}),(0,n.jsx)("option",{value:"French",children:"French"}),(0,n.jsx)("option",{value:"German",children:"German"}),(0,n.jsx)("option",{value:"Italian",children:"Italian"}),(0,n.jsx)("option",{value:"Portuguese",children:"Portuguese"}),(0,n.jsx)("option",{value:"Chinese (Simplified)",children:"Chinese (Simplified)"}),(0,n.jsx)("option",{value:"Japanese",children:"Japanese"}),(0,n.jsx)("option",{value:"Korean",children:"Korean"}),(0,n.jsx)("option",{value:"Russian",children:"Russian"}),(0,n.jsx)("option",{value:"Dutch",children:"Dutch"})]}),(0,n.jsxs)("p",{className:"mt-2 text-xs text-gray-500",children:["Spoken text (English) will be translated to ",l," before pasting."]})]})]}),(0,n.jsxs)("section",{className:"bg-gray-50 p-5 rounded-xl border border-gray-200 opacity-75 relative overflow-hidden",children:[(0,n.jsx)("div",{className:"absolute top-3 right-3 bg-yellow-100 text-yellow-800 text-xs font-bold px-2 py-1 rounded-full border border-yellow-200",children:"COMING SOON"}),(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-4 text-gray-900 font-semibold",children:[(0,n.jsx)(z,{size:18}),(0,n.jsx)("h2",{children:"Press-to-Talk"})]}),(0,n.jsx)("p",{className:"text-sm text-gray-500 mb-3",children:"Hold a key to speak instead of toggling on/off."}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-sm text-gray-400",children:"Current Hotkey: Ctrl+Shift+Space (Toggle)"}),(0,n.jsx)("button",{disabled:!0,className:"bg-gray-200 text-gray-400 px-3 py-1 rounded text-sm cursor-not-allowed",children:"Configure"})]})]}),(0,n.jsxs)("section",{className:"bg-gray-50 p-5 rounded-xl border border-gray-200 opacity-75 relative overflow-hidden",children:[(0,n.jsx)("div",{className:"absolute top-3 right-3 bg-yellow-100 text-yellow-800 text-xs font-bold px-2 py-1 rounded-full border border-yellow-200",children:"COMING SOON"}),(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-4 text-gray-900 font-semibold",children:[(0,n.jsx)(P,{size:18}),(0,n.jsx)("h2",{children:"Custom Hotkeys"})]}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Customize the global shortcut to start/stop recording."})]})]}),d&&(0,n.jsx)("div",{className:"fixed bottom-8 right-8 bg-black text-white px-4 py-2 rounded-lg shadow-lg animate-in fade-in slide-in-from-bottom-2",children:d})]})}let H=m("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),D=m("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),W=m("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),O=m("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);function F(){return(0,n.jsx)("div",{className:"p-8 bg-gray-50 h-full overflow-y-auto custom-scrollbar",children:(0,n.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Help & Knowledge Base"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Everything you need to know to master Neato Voice."})]}),(0,n.jsx)($,{icon:(0,n.jsx)(W,{className:"text-blue-500"}),title:"Getting Started",children:(0,n.jsx)("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm space-y-4",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("h3",{className:"font-bold text-gray-900 mb-2 flex items-center gap-2",children:[(0,n.jsx)(z,{size:16})," Standard Dictation"]}),(0,n.jsx)("p",{className:"text-gray-600 mb-2",children:"To dictate text into any application (Word, Notepad, Slack, etc.):"}),(0,n.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-gray-600 ml-1",children:[(0,n.jsx)("li",{children:"Click inside the text field where you want to type."}),(0,n.jsxs)("li",{children:["Hold down ",(0,n.jsx)("kbd",{className:"bg-gray-100 border border-gray-300 rounded px-1.5 py-0.5 text-xs font-mono text-gray-800",children:"Ctrl + Shift + Space"}),"."]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"Wait for the beep (or red icon)"}),", then speak clearly."]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"Release"})," the keys when finished."]})]}),(0,n.jsxs)("div",{className:"mt-3 p-3 bg-blue-50 text-blue-800 rounded-lg text-sm flex gap-2 items-start",children:[(0,n.jsx)(D,{size:16,className:"mt-0.5 flex-shrink-0"}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Pro Tip:"})," There is a slight delay (0.5s) while the microphone warms up. If your first word is cut off, try pausing briefly after pressing the keys."]})]})]})})}),(0,n.jsx)($,{icon:(0,n.jsx)(H,{className:"text-green-500"}),title:"Translation",children:(0,n.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm space-y-4",children:[(0,n.jsx)("p",{className:"text-gray-600",children:"Neato Voice can translate your speech into another language in real-time."}),(0,n.jsxs)("div",{className:"border-l-4 border-green-100 pl-4 py-1",children:[(0,n.jsx)("h4",{className:"font-bold text-gray-900 text-sm mb-1",children:"Step 1: Configure Settings"}),(0,n.jsxs)("p",{className:"text-sm text-gray-600",children:["Go to the ",(0,n.jsx)("strong",{children:"Settings"}),' tab, enable "Translation", and select your Target Language (e.g., Spanish).']})]}),(0,n.jsxs)("div",{className:"border-l-4 border-green-100 pl-4 py-1",children:[(0,n.jsx)("h4",{className:"font-bold text-gray-900 text-sm mb-1",children:"Step 2: Use the Translation Hotkey"}),(0,n.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Use the dedicated translation hotkey:"}),(0,n.jsx)("kbd",{className:"bg-gray-100 border border-gray-300 rounded px-1.5 py-0.5 text-sm font-mono text-gray-800",children:"Ctrl + Alt + Space"})]}),(0,n.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg text-sm text-green-800 flex items-start gap-2",children:[(0,n.jsx)(D,{size:16,className:"mt-0.5 flex-shrink-0"}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Tip:"})," You can dictate in English and have it appear in Spanish, or dictate in Spanish and have it appear in English (if your target is English)."]})]})]})}),(0,n.jsx)($,{icon:(0,n.jsx)(M,{className:"text-orange-500"}),title:"Troubleshooting",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(_,{question:"Nothing happens when I press the hotkey",answer:"Ensure the app is running in the system tray. If Neato Voice is closed, the hotkeys won't work. Also, check if another application is using the same hotkey combination."}),(0,n.jsx)(_,{question:"The text types in the wrong place",answer:"Make sure your cursor is focused in the target text field BEFORE you verify the hotkey. Ideally, click the field, then look away and speak."}),(0,n.jsx)(_,{question:"It's not translating",answer:"1. Check Settings to ensure Translation is ON. 2. Verify you are using the correct hotkey (Ctrl + Alt + Space) for translation mode."}),(0,n.jsx)(_,{question:"My microphone isn't working",answer:"Go to Settings -> Microphone and ensure the correct input device is selected. You may need to restart the app after plugging in a new mic."})]})}),(0,n.jsx)($,{icon:(0,n.jsx)(O,{className:"text-red-500"}),title:"Limitations & Quotas",children:(0,n.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[(0,n.jsx)("h3",{className:"font-bold text-gray-900 mb-2",children:"Weekly Word Limit"}),(0,n.jsxs)("p",{className:"text-gray-600 mb-4",children:["The Free Plan includes ",(0,n.jsx)("strong",{children:"4,000 words per week"}),". This quota resets every 7 days."]}),(0,n.jsxs)("ul",{className:"list-disc list-inside text-sm text-gray-600 space-y-1",children:[(0,n.jsx)("li",{children:"Check your usage on the Dashboard stats."}),(0,n.jsx)("li",{children:"If you hit the limit, you will see a notification."}),(0,n.jsx)("li",{children:"Upgrade to Pro (Coming Soon) for unlimited dictation."})]})]})}),(0,n.jsx)("div",{className:"mt-8 text-center text-gray-400 text-sm",children:"Still need help? Email support@neatoventures.com"})]})})}function $({icon:e,title:t,children:r}){return(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,n.jsx)("div",{className:"p-2 bg-white rounded-lg shadow-sm border border-gray-100",children:o.default.cloneElement(e,{size:20})}),(0,n.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:t})]}),r]})}function _({question:e,answer:t}){return(0,n.jsxs)("div",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow",children:[(0,n.jsx)("h4",{className:"font-bold text-gray-900 mb-2 text-sm",children:e}),(0,n.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:t})]})}let V=e=>{let t,r=new Set,a=(e,a)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=a?a:"object"!=typeof s||null===s)?s:Object.assign({},t,s),r.forEach(r=>r(t,e))}},s=()=>t,i={setState:a,getState:s,getInitialState:()=>n,subscribe:e=>(r.add(e),()=>r.delete(e))},n=t=e(a,s,i);return i};function U(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var a;let s=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),i=null!=(a=r.getItem(e))?a:null;return i instanceof Promise?i.then(s):s(i)},setItem:(e,a)=>r.setItem(e,JSON.stringify(a,null==t?void 0:t.replacer)),removeItem:e=>r.removeItem(e)}}let q=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>q(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>q(t)(e)}}},B=(a=(i=(t=(e,t)=>({recordingState:"idle",errorMessage:null,rawTranscript:"",refinedText:"",showRawTranscript:!1,selectedProvider:"whisper",autoPunctuation:!0,audioLevel:0,setRecordingState:t=>e({recordingState:t}),setError:t=>e({errorMessage:t,recordingState:"error"}),setRawTranscript:t=>e({rawTranscript:t}),appendRawTranscript:t=>e(e=>({rawTranscript:e.rawTranscript+(e.rawTranscript?" ":"")+t})),setRefinedText:t=>e({refinedText:t}),appendRefinedText:t=>e(e=>({refinedText:e.refinedText+(e.refinedText?" ":"")+t})),clearAll:()=>e({rawTranscript:"",refinedText:""}),setAudioLevel:t=>e({audioLevel:t}),toggleRawTranscript:()=>e(e=>({showRawTranscript:!e.showRawTranscript})),setProvider:t=>e({selectedProvider:t})}),r={name:"neato-voice-storage",storage:U(()=>localStorage),partialize:e=>({showRawTranscript:e.showRawTranscript,selectedProvider:e.selectedProvider,autoPunctuation:e.autoPunctuation})},(e,a,s)=>{let i,n={storage:U(()=>window.localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...r},o=!1,l=0,c=new Set,d=new Set,h=n.storage;if(!h)return t((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),e(...t)},a,s);let m=()=>{let e=n.partialize({...a()});return h.setItem(n.name,{state:e,version:n.version})},g=s.setState;s.setState=(e,t)=>(g(e,t),m());let u=t((...t)=>(e(...t),m()),a,s);s.getInitialState=()=>u;let p=()=>{var t,r;if(!h)return;let s=++l;o=!1,c.forEach(e=>{var t;return e(null!=(t=a())?t:u)});let g=(null==(r=n.onRehydrateStorage)?void 0:r.call(n,null!=(t=a())?t:u))||void 0;return q(h.getItem.bind(h))(n.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===n.version)return[!1,e.state];else{if(n.migrate){let t=n.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(t=>{var r;if(s!==l)return;let[o,c]=t;if(e(i=n.merge(c,null!=(r=a())?r:u),!0),o)return m()}).then(()=>{s===l&&(null==g||g(i,void 0),i=a(),o=!0,d.forEach(e=>e(i)))}).catch(e=>{s===l&&(null==g||g(void 0,e))})};return s.persist={setOptions:e=>{n={...n,...e},e.storage&&(h=e.storage)},clearStorage:()=>{null==h||h.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:e=>(c.add(e),()=>{c.delete(e)}),onFinishHydration:e=>(d.add(e),()=>{d.delete(e)})},n.skipHydration||p(),i||u}))?V(i):V,Object.assign(s=e=>(function(e,t=e=>e){let r=o.default.useSyncExternalStore(e.subscribe,o.default.useCallback(()=>t(e.getState()),[e,t]),o.default.useCallback(()=>t(e.getInitialState()),[e,t]));return o.default.useDebugValue(r),r})(a,e),a),s);var G=e.i(31001);class J{name="Whisper.js (Local)";isLocal=!0;transcriber=null;mediaRecorder=null;stream=null;transcriptCallback=null;errorCallback=null;stateCallback=null;isProcessing=!1;isSupported(){return"MediaRecorder"in window&&"AudioContext"in window}async initialize(){this.emitState("initializing");try{void 0===G.default?(window.process={env:{},versions:{node:"18.0.0"},platform:"browser"},console.log("Polyfilled process global for Whisper")):G.default.versions||(G.default.versions={node:"18.0.0"}),console.log("Importing @xenova/transformers...");let t=await e.A(400);console.log("Import result:",t);let r=t.pipeline,a=t.env;if(!a)throw Error("Transformers 'env' is null or undefined");console.log("Env found. Backends:",a.backends),a.allowLocalModels=!0,a.allowRemoteModels=!1,a.useBrowserCache=!1,a.localModelPath="./models/",a.backends?.onnx?.wasm?a.backends.onnx.wasm.wasmPaths="./wasm/":console.warn("env.backends.onnx.wasm is missing!"),console.log("Starting Whisper pipeline initialization (Offline)...");let s=new Promise((e,t)=>setTimeout(()=>t(Error("Whisper initialization timed out")),6e4));this.transcriber=await Promise.race([r("automatic-speech-recognition","Xenova/whisper-tiny.en",{quantized:!0,local_files_only:!0,progress_callback:e=>{console.log("Offline Load:",e)}}),s]),this.emitState("ready")}catch(e){throw console.error("Failed to initialize Whisper",e),this.errorCallback&&this.errorCallback(e),this.emitState("error"),e}}async startListening(e){if(!this.transcriber)throw Error("Whisper not initialized");try{this.stream=await navigator.mediaDevices.getUserMedia({audio:!0}),this.mediaRecorder=new MediaRecorder(this.stream);let e=[];this.mediaRecorder.ondataavailable=t=>{t.data.size>0&&e.push(t.data)},this.mediaRecorder.onstop=async()=>{this.emitState("processing");let t=new Blob(e,{type:"audio/webm"});await this.transcribeAudio(t),this.emitState("ready")},this.mediaRecorder.start(),this.emitState("listening")}catch(e){this.errorCallback&&this.errorCallback(e),this.emitState("error")}}async stopListening(){this.mediaRecorder&&"inactive"!==this.mediaRecorder.state&&(this.mediaRecorder.stop(),this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null))}async transcribeAudio(e){try{let t=new AudioContext,r=await e.arrayBuffer(),a=(await t.decodeAudioData(r)).getChannelData(0),s=await this.transcriber(a,{chunk_length_s:30,stride_length_s:5,language:"english",task:"transcribe",return_timestamps:!1}),i=s.text||(Array.isArray(s)?s[0].text:"");this.emitTranscript(i.trim(),!0)}catch(e){console.error("Transcription failed",e),this.errorCallback&&this.errorCallback(e)}}onTranscript(e){this.transcriptCallback=e}onError(e){this.errorCallback=e}onStateChange(e){this.stateCallback=e}cleanup(){this.stopListening(),this.transcriber=null}emitTranscript(e,t){this.transcriptCallback&&this.transcriptCallback({text:e,isFinal:t})}emitState(e){this.stateCallback&&this.stateCallback(e)}}class K{name="Web Speech API (Browser)";isLocal=!1;recognition;transcriptCallback=null;errorCallback=null;stateCallback=null;isSupported(){return"SpeechRecognition"in window||"webkitSpeechRecognition"in window}async initialize(){if(!this.isSupported())throw Error("Web Speech API not supported in this browser");let e=window.SpeechRecognition||window.webkitSpeechRecognition;this.recognition=new e,this.recognition&&(this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.lang="en-US",this.recognition.onresult=e=>{let t="";for(let r=e.resultIndex;r<e.results.length;++r)e.results[r].isFinal?this.emitTranscript(e.results[r][0].transcript,!0):t+=e.results[r][0].transcript;t&&this.emitTranscript(t,!1)},this.recognition.onerror=e=>{this.errorCallback&&this.errorCallback(Error(e.error)),this.emitState("error")},this.recognition.onstart=()=>this.emitState("listening"),this.recognition.onend=()=>this.emitState("ready")),this.emitState("ready")}async startListening(e){if(this.recognition)try{this.recognition.start()}catch(e){console.error("Failed to start recognition",e)}}async stopListening(){this.recognition&&this.recognition.stop()}onTranscript(e){this.transcriptCallback=e}onError(e){this.errorCallback=e}onStateChange(e){this.stateCallback=e}cleanup(){this.recognition&&(this.recognition.stop(),this.recognition=null)}emitTranscript(e,t){this.transcriptCallback&&this.transcriptCallback({text:e,isFinal:t})}emitState(e){this.stateCallback&&this.stateCallback(e)}}class Y{name="Mock Provider (Testing)";isLocal=!0;transcriptCallback=null;errorCallback=null;stateCallback=null;isListening=!1;timeoutId=null;testPhrases=["i need to do three things one buy milk two call mom three finish the report","um this is a test uh you know to see if the refinement works","hello world this is a mock transcription for testing purposes"];currentPhraseIndex=0;isSupported(){return!0}async initialize(){console.log("[MockProvider] Initializing..."),this.emitState("ready")}async startListening(e){this.isListening||(console.log("[MockProvider] Starting mock transcription..."),this.isListening=!0,this.emitState("listening"),this.timeoutId=setTimeout(()=>{let e=this.testPhrases[this.currentPhraseIndex];this.currentPhraseIndex=(this.currentPhraseIndex+1)%this.testPhrases.length,console.log("[MockProvider] Emitting mock transcript:",e),this.emitTranscript(e,!0),this.isListening=!1,this.emitState("ready")},2e3))}async stopListening(){this.isListening&&(console.log("[MockProvider] Stopping mock transcription..."),this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.isListening=!1,this.emitState("ready"))}onTranscript(e){this.transcriptCallback=e}onError(e){this.errorCallback=e}onStateChange(e){this.stateCallback=e}cleanup(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.isListening=!1}emitTranscript(e,t){this.transcriptCallback&&this.transcriptCallback({text:e,isFinal:t})}emitState(e){this.stateCallback&&this.stateCallback(e)}}class Z{name="AssemblyAI (Real-time)";isLocal=!1;transcriptCallback=null;errorCallback=null;stateCallback=null;transcriber=null;isRecording=!1;isSupported(){return"MediaRecorder"in window}async initialize(){console.log("[AssemblyAI] Initializing..."),this.emitState("ready")}async startListening(t){if(!this.isRecording)try{console.log("[AssemblyAI] Starting real-time transcription with SDK..."),this.isRecording=!0,this.emitState("listening");let{RealtimeTranscriber:t}=await e.A(27646);this.transcriber=new t({apiKey:"72bba0a97f1f494a975b04dde808546f",sampleRate:16e3}),this.transcriber.on("open",()=>{console.log("[AssemblyAI] Connection opened")}),this.transcriber.on("error",e=>{console.error("[AssemblyAI] Error:",e),this.emitError(e)}),this.transcriber.on("close",()=>{console.log("[AssemblyAI] Connection closed"),this.isRecording=!1,this.emitState("ready")}),this.transcriber.on("transcript.partial",e=>{e.text&&this.emitTranscript(e.text,!1)}),this.transcriber.on("transcript.final",e=>{e.text&&this.emitTranscript(e.text,!0)}),await this.transcriber.connect(),console.log("[AssemblyAI] Connected successfully");let r=await navigator.mediaDevices.getUserMedia({audio:{sampleRate:16e3,channelCount:1,echoCancellation:!0,noiseSuppression:!0}});this.transcriber.stream(r),console.log("[AssemblyAI] Streaming audio...")}catch(e){console.error("[AssemblyAI] Failed to start:",e),this.emitError(e),this.isRecording=!1,this.emitState("error")}}async stopListening(){if(this.isRecording){console.log("[AssemblyAI] Stopping transcription...");try{this.transcriber&&(await this.transcriber.close(),this.transcriber=null)}catch(e){console.error("[AssemblyAI] Error closing transcriber:",e)}this.isRecording=!1,this.emitState("ready")}}onTranscript(e){this.transcriptCallback=e}onError(e){this.errorCallback=e}onStateChange(e){this.stateCallback=e}cleanup(){this.stopListening()}emitTranscript(e,t){this.transcriptCallback&&e.trim()&&this.transcriptCallback({text:e,isFinal:t})}emitError(e){this.errorCallback&&this.errorCallback(e)}emitState(e){this.stateCallback&&this.stateCallback(e)}}class Q{name="Deepgram (Real-time)";isLocal=!1;transcriptCallback=null;errorCallback=null;stateCallback=null;socket=null;mediaRecorder=null;isRecording=!1;isSupported(){return"MediaRecorder"in window}async initialize(){console.log("[Deepgram] Initializing..."),this.emitState("ready")}async startListening(e){if(!this.isRecording)try{console.log("[Deepgram] Starting real-time transcription..."),this.isRecording=!0,this.emitState("listening");let t=new URL("wss://api.deepgram.com/v1/listen");t.searchParams.append("model","nova-2"),t.searchParams.append("language","en-US"),t.searchParams.append("smart_format","true"),t.searchParams.append("punctuate","true"),t.searchParams.append("interim_results","true"),e?.keywords&&(e.keywords.forEach(e=>{e&&e.trim()&&t.searchParams.append("keywords",e.trim())}),console.log(`[Deepgram] Added ${e.keywords.length} keywords`)),this.socket=new WebSocket(t.toString(),["token","5bf3f9ffc2a9002ff57f73db7bc17d34ce1796a3"]),this.socket.onopen=()=>{console.log("[Deepgram] WebSocket connected"),this.startAudioCapture()},this.socket.onmessage=e=>{try{let t=JSON.parse(e.data);if(t.channel?.alternatives?.[0]?.transcript){let e=t.channel.alternatives[0].transcript;if(e.trim()){let r=t.is_final||!1;console.log(`[Deepgram] ${r?"Final":"Partial"}: ${e}`),this.emitTranscript(e,r)}}}catch(e){console.error("[Deepgram] Error parsing message:",e)}},this.socket.onerror=e=>{console.error("[Deepgram] WebSocket error:",e),this.emitError(Error("WebSocket connection failed"))},this.socket.onclose=e=>{console.log("[Deepgram] WebSocket closed:",e.code,e.reason),this.isRecording=!1,this.emitState("ready")}}catch(e){console.error("[Deepgram] Failed to start:",e),this.emitError(e),this.isRecording=!1,this.emitState("error")}}async startAudioCapture(){try{let e=await navigator.mediaDevices.getUserMedia({audio:{channelCount:1,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}}),t=MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?"audio/webm;codecs=opus":"audio/webm";this.mediaRecorder=new MediaRecorder(e,{mimeType:t}),this.mediaRecorder.ondataavailable=e=>{e.data.size>0&&this.socket?.readyState===WebSocket.OPEN&&this.socket.send(e.data)},this.mediaRecorder.onerror=e=>{console.error("[Deepgram] MediaRecorder error:",e),this.emitError(Error("Audio recording failed"))},this.mediaRecorder.start(250),console.log("[Deepgram] Audio capture started with",t)}catch(e){console.error("[Deepgram] Failed to capture audio:",e),this.emitError(e)}}async stopListening(){this.isRecording&&(console.log("[Deepgram] Stopping transcription..."),this.mediaRecorder&&"inactive"!==this.mediaRecorder.state&&(this.mediaRecorder.stop(),this.mediaRecorder.stream.getTracks().forEach(e=>e.stop()),this.mediaRecorder=null),this.socket&&(this.socket.readyState===WebSocket.OPEN&&this.socket.send(JSON.stringify({type:"CloseStream"})),this.socket.close(),this.socket=null),this.isRecording=!1,this.emitState("ready"))}onTranscript(e){this.transcriptCallback=e}onError(e){this.errorCallback=e}onStateChange(e){this.stateCallback=e}cleanup(){this.stopListening()}emitTranscript(e,t){this.transcriptCallback&&e.trim()&&this.transcriptCallback({text:e,isFinal:t})}emitError(e){this.errorCallback&&this.errorCallback(e)}emitState(e){this.stateCallback&&this.stateCallback(e)}}async function X(e=["assemblyai"]){let t=[];for(let r of e){let e=function(e){switch(e){case"whisper":return new J;case"webspeech":return new K;case"mock":return new Y;case"assemblyai":return new Z;case"deepgram":return new Q;default:return console.warn(`Unknown provider type ${e}, falling back to Deepgram`),new Q}}(r);if(e.isSupported())try{return await e.initialize(),e}catch(e){console.warn(`Provider ${r} failed to initialize:`,e),t.push(e);continue}}throw Error(`No voice provider available. Errors: ${t.map(e=>e.message).join(", ")}`)}async function ee(e){if(!e||!e.trim())return"";try{let t=await fetch("/api/refine",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e})});if(!t.ok)throw Error("Refinement failed");return(await t.json()).refinedText}catch(e){throw console.error("Refinement error:",e),e}}function et(){let[e,t]=(0,o.useState)("home"),[r,a]=(0,o.useState)({totalDictationTimeMs:0,totalWords:0,wordsThisWeek:0,weekStartDate:new Date().toISOString()}),{recordingState:s}=B(),i=B(e=>e.refinedText),l=B(e=>e.rawTranscript);return(0,o.useEffect)(()=>{let e=N();if(e){e.getStats().then(a);let t=setInterval(()=>{e.getStats().then(e=>{a(e)})},5e3);return()=>clearInterval(t)}},[]),!function(){let{selectedProvider:e,setRecordingState:t,setError:r,appendRawTranscript:a,setAudioLevel:s}=B(),i=(0,o.useRef)(null),n=(0,o.useRef)(null),[l,c]=(0,o.useState)(!1),[d,h]=(0,o.useState)(0);(0,o.useEffect)(()=>{let e=!0;return async function(){h(.1);try{let s=[...new Set(["deepgram"])];if(i.current=await X(s),h(1),!e)return;i.current.onTranscript(e=>{e.isFinal&&(console.log(`[Hook] Final transcript received (length: ${e.text.length})`),a(e.text))}),i.current.onError(e=>{console.error("Provider error:",e),r(e.message)}),i.current.onStateChange(e=>{"uninitialized"!==e&&"initializing"!==e&&t("listening"===e?"recording":"processing"===e?"processing":"error"===e?"error":"idle")}),c(!0)}catch(t){console.error("Failed to initialize voice provider",t),e&&r(t.message)}}(),()=>{e=!1,i.current&&i.current.cleanup()}},[e,a,r,t]);let m=(0,o.useCallback)(async()=>{let e;if(!i.current||!l)return;B.getState().clearAll(),console.log("[Hook] Starting recording, transcript cleared");let r=[],a=N();if(a)try{let[t,s]=await Promise.all([a.getDictionary(),a.getSettings()]);r=t||[],e=s?.microphoneId,console.log(`[Hook] Loaded ${r.length} dictionary words, Mic: ${e||"default"}`)}catch(e){console.error("[Hook] Failed to load resources",e)}await i.current.startListening({keywords:r,deviceId:e}),n.current=Date.now(),t("recording"),a&&a.setRecordingState&&a.setRecordingState(!0)},[l,t]),g=(0,o.useCallback)(async()=>{if(!i.current||!l)return;await i.current.stopListening(),t("processing");let e=N();e&&e.setRecordingState&&e.setRecordingState(!1);try{let e=B.getState().rawTranscript;if(console.log("[Hook] Raw transcript length:",e.length),e&&e.trim()){let t=e,r=N();if(console.log("[Hook] Protocol:",window.location.protocol,"Has electronAPI:",!!r),r){console.log("[Hook] Electron environment detected, refining via IPC...");try{let a=await r.getSettings(),s="true"===window.sessionStorage.getItem("temp_translation_mode"),i={translation:a?.translation};s&&(console.log("[Hook] Forced Translation Mode Active"),i={translation:{enabled:!0,targetLanguage:a?.translation?.targetLanguage||"Spanish"}},window.sessionStorage.removeItem("temp_translation_mode"));let n=await r.refineText(e,i);console.log("[Hook] IPC Refined transcript length:",n.length),B.getState().setRefinedText(n),t=n}catch(t){console.error("[Hook] IPC Refinement failed:",t),B.getState().setRefinedText(e)}}else try{console.log("[Hook] Web environment, refining transcript...");let r=await ee(e);console.log("[Hook] Refined transcript length:",r.length),B.getState().setRefinedText(r),t=r}catch(t){console.warn("[Hook] Refinement failed, using raw transcript:",t),B.getState().setRefinedText(e)}if(r){console.log("[Hook] Injecting text via Electron API (length: "+t.length+")"),r.injectText(t);let e=t.trim().split(/\s+/).length,a=Date.now()-(n.current||Date.now());r.updateStats({durationMs:a,wordCount:e}).catch(e=>console.error("Failed to update stats:",e)),r.addHistoryEntry(t).catch(e=>console.error("Failed to save history:",e))}else console.warn("[Hook] No Electron API available for text injection")}else console.warn("[Hook] No transcript to refine");t("idle")}catch(a){console.error("[Hook] Processing error:",a),r(a.message||"Processing failed"),t("error");let e=N();e&&e.setRecordingState&&e.setRecordingState(!1)}},[l,t,r]);(0,o.useEffect)(()=>{let e=N();if(e&&e.onToggleRecording)return console.log("[Hook] Registering hotkey listener"),e.onToggleRecording((e,t)=>{console.log("[Hook] Hotkey triggered",t),t?.mode==="translation"?window.sessionStorage.setItem("temp_translation_mode","true"):window.sessionStorage.removeItem("temp_translation_mode");let r=B.getState().recordingState;"recording"===r?g():("idle"===r||"error"===r)&&m()}),()=>{e.removeToggleRecordingListener&&e.removeToggleRecordingListener()}},[m,g])}(),(0,n.jsxs)("div",{className:"flex h-screen w-screen overflow-hidden bg-white",children:[(0,n.jsx)(y,{activeTab:e,setActiveTab:t}),(0,n.jsxs)("main",{className:"flex-1 h-full overflow-hidden relative",children:["home"===e&&(0,n.jsx)(j,{stats:r,lastTranscript:i||l}),"dictionary"===e&&(0,n.jsx)(T,{}),"history"===e&&(0,n.jsx)(I,{}),"settings"===e&&(0,n.jsx)(L,{}),"help"===e&&(0,n.jsx)(F,{}),"idle"!==s&&(0,n.jsx)("div",{className:"absolute inset-0 bg-black/10 backdrop-blur-sm z-50 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-2xl flex flex-col items-center animate-in fade-in zoom-in duration-200",children:[(0,n.jsx)("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-4 ${"recording"===s?"bg-red-100 text-red-600":"bg-blue-100 text-blue-600"}`,children:"recording"===s?(0,n.jsx)("div",{className:"w-8 h-8 bg-red-600 rounded-sm animate-pulse"}):(0,n.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}),(0,n.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"recording"===s?"Listening...":"Processing..."}),(0,n.jsx)("p",{className:"text-gray-500 mt-2 max-w-md text-center",children:l||"Speak now..."})]})})]})]})}e.s(["default",()=>et],57950)}]);
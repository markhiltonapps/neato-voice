(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,10070,(e,t,r)=>{!function(){"use strict";var e={815:function(e){function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,n,i,o){n=n||"&",i=i||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(n);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var u=e.length;l>0&&u>l&&(u=l);for(var c=0;c<u;++c){var d,h,p,f,g=e[c].replace(a,"%20"),m=g.indexOf(i);m>=0?(d=g.substr(0,m),h=g.substr(m+1)):(d=g,h=""),p=decodeURIComponent(d),f=decodeURIComponent(h),t(s,p)?r(s[p])?s[p].push(f):s[p]=[s[p],f]:s[p]=f}return s};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},577:function(e){var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,o,s,a){return(o=o||"&",s=s||"=",null===e&&(e=void 0),"object"==typeof e)?n(i(e),function(i){var a=encodeURIComponent(t(i))+s;return r(e[i])?n(e[i],function(e){return a+encodeURIComponent(t(e))}).join(o):a+encodeURIComponent(t(e[i]))}).join(o):a?encodeURIComponent(t(a))+s+encodeURIComponent(t(e)):""};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var i=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}}},r={};function n(t){var i=r[t];if(void 0!==i)return i.exports;var o=r[t]={exports:{}},s=!0;try{e[t](o,o.exports,n),s=!1}finally{s&&delete r[t]}return o.exports}n.ab="/ROOT/Typeless-Clone/neato-voice/web/node_modules/next/dist/compiled/querystring-es3/";var i={};!function(){var e=i;e.decode=e.parse=n(815),e.encode=e.stringify=n(577)}(),t.exports=i}()},96069,(e,t,r)=>{!function(){var r={452:function(t){"use strict";t.exports=e.r(10070)}},n={};function i(e){var t=n[e];if(void 0!==t)return t.exports;var o=n[e]={exports:{}},s=!0;try{r[e](o,o.exports,i),s=!1}finally{s&&delete n[e]}return o.exports}i.ab="/ROOT/Typeless-Clone/neato-voice/web/node_modules/next/dist/compiled/native-url/";var o={};!function(){var e,t=o,r=(e=i(452))&&"object"==typeof e&&"default"in e?e.default:e,n=/https?|ftp|gopher|file/;function s(e){"string"==typeof e&&(e=y(e));var t=function(e,t,r){var n=e.auth,i=e.hostname,o=e.protocol||"",s=e.pathname||"",a=e.hash||"",l=e.query||"",u=!1;n=n?encodeURIComponent(n).replace(/%3A/i,":")+"@":"",e.host?u=n+e.host:i&&(u=n+(~i.indexOf(":")?"["+i+"]":i),e.port&&(u+=":"+e.port)),l&&"object"==typeof l&&(l=t.encode(l));var c=e.search||l&&"?"+l||"";return o&&":"!==o.substr(-1)&&(o+=":"),e.slashes||(!o||r.test(o))&&!1!==u?(u="//"+(u||""),s&&"/"!==s[0]&&(s="/"+s)):u||(u=""),a&&"#"!==a[0]&&(a="#"+a),c&&"?"!==c[0]&&(c="?"+c),{protocol:o,host:u,pathname:s=s.replace(/[?#]/g,encodeURIComponent),search:c=c.replace("#","%23"),hash:a}}(e,r,n);return""+t.protocol+t.host+t.pathname+t.search+t.hash}var a="http://",l="w.w",u=a+l,c=/^([a-z0-9.+-]*:\/\/\/)([a-z0-9.+-]:\/*)?/i,d=/https?|ftp|gopher|file/;function h(e,t){var r="string"==typeof e?y(e):e;e="object"==typeof e?s(e):e;var n=y(t),i="";r.protocol&&!r.slashes&&(i=r.protocol,e=e.replace(r.protocol,""),i+="/"===t[0]||"/"===e[0]?"/":""),i&&n.protocol&&(i="",n.slashes||(i=n.protocol,t=t.replace(n.protocol,"")));var o=e.match(c);o&&!n.protocol&&(e=e.substr((i=o[1]+(o[2]||"")).length),/^\/\/[^/]/.test(t)&&(i=i.slice(0,-1)));var l=new URL(e,u+"/"),h=new URL(t,l).toString().replace(u,""),p=n.protocol||r.protocol;return p+=r.slashes||n.slashes?"//":"",!i&&p?h=h.replace(a,p):i&&(h=h.replace(a,"")),d.test(h)||~t.indexOf(".")||"/"===e.slice(-1)||"/"===t.slice(-1)||"/"!==h.slice(-1)||(h=h.slice(0,-1)),i&&(h=i+("/"===h[0]?h.substr(1):h)),h}function p(){}p.prototype.parse=y,p.prototype.format=s,p.prototype.resolve=h,p.prototype.resolveObject=h;var f=/^https?|ftp|gopher|file/,g=/^(.*?)([#?].*)/,m=/^([a-z0-9.+-]*:)(\/{0,3})(.*)/i,_=/^([a-z0-9.+-]*:)?\/\/\/*/i,b=/^([a-z0-9.+-]*:)(\/{0,2})\[(.*)\]$/i;function y(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!1),e&&"object"==typeof e&&e instanceof p)return e;var i=(e=e.trim()).match(g);e=i?i[1].replace(/\\/g,"/")+i[2]:e.replace(/\\/g,"/"),b.test(e)&&"/"!==e.slice(-1)&&(e+="/");var o=!/(^javascript)/.test(e)&&e.match(m),a=_.test(e),c="";o&&(f.test(o[1])||(c=o[1].toLowerCase(),e=""+o[2]+o[3]),o[2]||(a=!1,f.test(o[1])?(c=o[1],e=""+o[3]):e="//"+o[3]),3!==o[2].length&&1!==o[2].length||(c=o[1],e="/"+o[3]));var d,h=(i?i[1]:e).match(/^https?:\/\/[^/]+(:[0-9]+)(?=\/|$)/),y=h&&h[1],w=new p,v="",x="";try{d=new URL(e)}catch(t){v=t,c||n||!/^\/\//.test(e)||/^\/\/.+[@.]/.test(e)||(x="/",e=e.substr(1));try{d=new URL(e,u)}catch(e){return w.protocol=c,w.href=c,w}}w.slashes=a&&!x,w.host=d.host===l?"":d.host,w.hostname=d.hostname===l?"":d.hostname.replace(/(\[|\])/g,""),w.protocol=v?c||null:d.protocol,w.search=d.search.replace(/\\/g,"%5C"),w.hash=d.hash.replace(/\\/g,"%5C");var T=e.split("#");!w.search&&~T[0].indexOf("?")&&(w.search="?"),w.hash||""!==T[1]||(w.hash="#"),w.query=t?r.decode(d.search.substr(1)):w.search.substr(1),w.pathname=x+(o?function(e){return e.replace(/['^|`]/g,function(e){return"%"+e.charCodeAt().toString(16).toUpperCase()}).replace(/((?:%[0-9A-F]{2})+)/g,function(e,t){try{return decodeURIComponent(t).split("").map(function(e){var t=e.charCodeAt();return t>256||/^[a-z0-9]$/i.test(e)?e:"%"+t.toString(16).toUpperCase()}).join("")}catch(e){return t}})}(d.pathname):d.pathname),"about:"===w.protocol&&"blank"===w.pathname&&(w.protocol="",w.pathname=""),v&&"/"!==e[0]&&(w.pathname=w.pathname.substr(1)),c&&!f.test(c)&&"/"!==e.slice(-1)&&"/"===w.pathname&&(w.pathname=""),w.path=w.pathname+w.search,w.auth=[d.username,d.password].map(decodeURIComponent).filter(Boolean).join(":"),w.port=d.port,y&&!w.host.endsWith(y)&&(w.host+=y,w.port=y.slice(1)),w.href=x?""+w.pathname+w.search+w.hash:s(w);var S=/^(file)/.test(w.href)?["host","hostname"]:[];return Object.keys(w).forEach(function(e){~S.indexOf(e)||(w[e]=w[e]||null)}),w}t.parse=y,t.format=s,t.resolve=h,t.resolveObject=function(e,t){return y(h(e,t))},t.Url=p}(),t.exports=o}()},33726,e=>{"use strict";let t={},r=[],n=(e,n,i)=>{if(n&&"function"==typeof n.init&&"function"==typeof n.createSessionHandler){let o=t[e];if(void 0===o)t[e]={backend:n,priority:i};else if(o.priority>i)return;else if(o.priority===i&&o.backend!==n)throw Error(`cannot register backend "${e}" using priority ${i}`);if(i>=0){let n=r.indexOf(e);-1!==n&&r.splice(n,1);for(let n=0;n<r.length;n++)if(t[r[n]].priority<=i)return void r.splice(n,0,e);r.push(e)}return}throw TypeError("not a valid backend")},i=async e=>{let n=0===e.length?r:e,i=[];for(let e of n){let r=t[e];if(r){if(r.initialized)return r.backend;if(r.aborted)continue;let t=!!r.initPromise;try{return t||(r.initPromise=r.backend.init()),await r.initPromise,r.initialized=!0,r.backend}catch(n){t||i.push({name:e,err:n}),r.aborted=!0}finally{delete r.initPromise}}}throw Error(`no available backend found. ERR: ${i.map(e=>`[${e.name}] ${e.err}`).join(", ")}`)};e.s([],10554);class o{constructor(){this.wasm={},this.webgl={},this.logLevelInternal="warning"}set logLevel(e){if(void 0!==e){if("string"!=typeof e||-1===["verbose","info","warning","error","fatal"].indexOf(e))throw Error(`Unsupported logging level: ${e}`);this.logLevelInternal=e}}get logLevel(){return this.logLevelInternal}}let s=new o;e.s(["env",0,s],50239);let a="u">typeof BigInt64Array&&"function"==typeof BigInt64Array.from,l="u">typeof BigUint64Array&&"function"==typeof BigUint64Array.from,u=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),c=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);a&&(u.set("int64",BigInt64Array),c.set(BigInt64Array,"int64")),l&&(u.set("uint64",BigUint64Array),c.set(BigUint64Array,"uint64"));let d=e=>{let t=1;for(let r=0;r<e.length;r++){let n=e[r];if("number"!=typeof n||!Number.isSafeInteger(n))throw TypeError(`dims[${r}] must be an integer, got: ${n}`);if(n<0)throw RangeError(`dims[${r}] must be a non-negative integer, got: ${n}`);t*=n}return t};class h{constructor(e,t,r){let n,i,o;if("string"==typeof e)if(n=e,o=r,"string"===e){if(!Array.isArray(t))throw TypeError("A string tensor's data must be a string array.");i=t}else{const r=u.get(e);if(void 0===r)throw TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(t))i=r.from(t);else if(t instanceof r)i=t;else throw TypeError(`A ${n} tensor's data must be type of ${r}`)}else if(o=t,Array.isArray(e)){if(0===e.length)throw TypeError("Tensor type cannot be inferred from an empty array.");const t=typeof e[0];if("string"===t)n="string",i=e;else if("boolean"===t)n="bool",i=Uint8Array.from(e);else throw TypeError(`Invalid element type of data array: ${t}.`)}else{const t=c.get(e.constructor);if(void 0===t)throw TypeError(`Unsupported type for tensor data: ${e.constructor}.`);n=t,i=e}if(void 0===o)o=[i.length];else if(!Array.isArray(o))throw TypeError("A tensor's dims must be a number array");const s=d(o);if(s!==i.length)throw Error(`Tensor's size(${s}) does not match data length(${i.length}).`);this.dims=o,this.type=n,this.data=i,this.size=s}static bufferToTensor(e,t){let r,n;if(void 0===e)throw Error("Image buffer must be defined");if(void 0===t.height||void 0===t.width)throw Error("Image height and width must be defined");let{height:i,width:o}=t,s=t.norm;r=void 0===s||void 0===s.mean?255:s.mean,n=void 0===s||void 0===s.bias?0:s.bias;let a=void 0!==t.bitmapFormat?t.bitmapFormat:"RGBA",l=void 0!==t.tensorFormat&&void 0!==t.tensorFormat?t.tensorFormat:"RGB",u=i*o,c=new Float32Array("RGBA"===l?4*u:3*u),d=4,p=0,f=1,g=2,m=3,_=0,b=u,y=2*u,w=-1;"RGB"===a&&(d=3,p=0,f=1,g=2,m=-1),"RGBA"===l?w=3*u:"RBG"===l?(_=0,y=u,b=2*u):"BGR"===l&&(y=0,b=u,_=2*u);for(let t=0;t<u;t++,p+=d,g+=d,f+=d,m+=d)c[_++]=(e[p]+n)/r,c[b++]=(e[f]+n)/r,c[y++]=(e[g]+n)/r,-1!==w&&-1!==m&&(c[w++]=(e[m]+n)/r);return"RGBA"===l?new h("float32",c,[1,4,i,o]):new h("float32",c,[1,3,i,o])}static async fromImage(e,t){let r,n="u">typeof HTMLImageElement&&e instanceof HTMLImageElement,i="u">typeof ImageData&&e instanceof ImageData,o="u">typeof ImageBitmap&&e instanceof ImageBitmap,s="u">typeof String&&(e instanceof String||"string"==typeof e),a={};if(n){let n=document.createElement("canvas"),i=n.getContext("2d");if(null!=i){let o=e.naturalHeight,s=e.naturalWidth;if(void 0!==t&&void 0!==t.resizedHeight&&void 0!==t.resizedWidth&&(o=t.resizedHeight,s=t.resizedWidth),void 0!==t){if(a=t,void 0!==t.tensorFormat)throw Error("Image input config format must be RGBA for HTMLImageElement");if(a.tensorFormat="RGBA",void 0!==t.height&&t.height!==o)throw Error("Image input config height doesn't match HTMLImageElement height");if(a.height=o,void 0!==t.width&&t.width!==s)throw Error("Image input config width doesn't match HTMLImageElement width");a.width=s}else a.tensorFormat="RGBA",a.height=o,a.width=s;n.width=s,n.height=o,i.drawImage(e,0,0,s,o),r=i.getImageData(0,0,s,o).data}else throw Error("Can not access image data")}else if(i){let n,i,o="RGBA";if(void 0!==t&&void 0!==t.resizedWidth&&void 0!==t.resizedHeight?(n=t.resizedHeight,i=t.resizedWidth):(n=e.height,i=e.width),void 0!==t){if(a=t,void 0!==t.bitmapFormat&&t.bitmapFormat!==o)throw Error("Image input config format must be RGBA for ImageData");a.bitmapFormat="RGBA"}else a.bitmapFormat="RGBA";if(a.height=n,a.width=i,void 0!==t){let t=document.createElement("canvas");t.width=i,t.height=n;let o=t.getContext("2d");if(null!=o)o.putImageData(e,0,0),r=o.getImageData(0,0,i,n).data;else throw Error("Can not access image data")}else r=e.data}else if(o){if(void 0===t)throw Error("Please provide image config with format for Imagebitmap");if(void 0!==t.bitmapFormat)throw Error("Image input config format must be defined for ImageBitmap");let n=document.createElement("canvas").getContext("2d");if(null!=n){let i=e.height,o=e.width;if(n.drawImage(e,0,0,o,i),r=n.getImageData(0,0,o,i).data,void 0!==t){if(void 0!==t.height&&t.height!==i)throw Error("Image input config height doesn't match ImageBitmap height");if(a.height=i,void 0!==t.width&&t.width!==o)throw Error("Image input config width doesn't match ImageBitmap width");a.width=o}else a.height=i,a.width=o;return h.bufferToTensor(r,a)}throw Error("Can not access image data")}else if(s)return new Promise((r,n)=>{let i=document.createElement("canvas"),o=i.getContext("2d");if(!e||!o)return n();let s=new Image;s.crossOrigin="Anonymous",s.src=e,s.onload=()=>{i.width=s.width,i.height=s.height,o.drawImage(s,0,0,i.width,i.height);let e=o.getImageData(0,0,i.width,i.height);if(void 0!==t){if(void 0!==t.height&&t.height!==i.height)throw Error("Image input config height doesn't match ImageBitmap height");if(a.height=i.height,void 0!==t.width&&t.width!==i.width)throw Error("Image input config width doesn't match ImageBitmap width");a.width=i.width}else a.height=i.height,a.width=i.width;r(h.bufferToTensor(e.data,a))}});else throw Error("Input data provided is not supported - aborted tensor creation");if(void 0!==r)return h.bufferToTensor(r,a);throw Error("Input data provided is not supported - aborted tensor creation")}toImageData(e){var t,r;let n,i=document.createElement("canvas").getContext("2d");if(null!=i){let o=this.dims[3],s=this.dims[2],a=this.dims[1],l=void 0!==e&&void 0!==e.format?e.format:"RGB",u=void 0!==e&&(null==(t=e.norm)?void 0:t.mean)!==void 0?e.norm.mean:255,c=void 0!==e&&(null==(r=e.norm)?void 0:r.bias)!==void 0?e.norm.bias:0,d=s*o;if(void 0!==e){if(void 0!==e.height&&e.height!==s)throw Error("Image output config height doesn't match tensor height");if(void 0!==e.width&&e.width!==o)throw Error("Image output config width doesn't match tensor width");if(void 0!==e.format&&4===a&&"RGBA"!==e.format||3===a&&"RGB"!==e.format&&"BGR"!==e.format)throw Error("Tensor format doesn't match input tensor dims")}let h=4,p=0,f=1,g=2,m=3,_=0,b=d,y=2*d,w=-1;"RGBA"===l?(_=0,b=d,y=2*d,w=3*d):"RGB"===l?(_=0,b=d,y=2*d):"RBG"===l&&(_=0,y=d,b=2*d),n=i.createImageData(o,s);for(let e=0;e<s*o;p+=h,f+=h,g+=h,m+=h,e++)n.data[p]=(this.data[_++]-c)*u,n.data[f]=(this.data[b++]-c)*u,n.data[g]=(this.data[y++]-c)*u,n.data[m]=-1===w?255:(this.data[w++]-c)*u}else throw Error("Can not access image data");return n}reshape(e){return new h(this.type,this.data,e)}}let p=h;e.s(["Tensor",0,p],10566);class f{constructor(e){this.handler=e}async run(e,t,r){let n={},i={};if("object"!=typeof e||null===e||e instanceof p||Array.isArray(e))throw TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let o=!0;if("object"==typeof t){if(null===t)throw TypeError("Unexpected argument[1]: cannot be null.");if(t instanceof p)throw TypeError("'fetches' cannot be a Tensor");if(Array.isArray(t)){if(0===t.length)throw TypeError("'fetches' cannot be an empty array.");for(let e of(o=!1,t)){if("string"!=typeof e)throw TypeError("'fetches' must be a string array or an object.");if(-1===this.outputNames.indexOf(e))throw RangeError(`'fetches' contains invalid output name: ${e}.`);n[e]=null}if("object"==typeof r&&null!==r)i=r;else if(void 0!==r)throw TypeError("'options' must be an object.")}else{let e=!1,s=Object.getOwnPropertyNames(t);for(let r of this.outputNames)if(-1!==s.indexOf(r)){let i=t[r];(null===i||i instanceof p)&&(e=!0,o=!1,n[r]=i)}if(e){if("object"==typeof r&&null!==r)i=r;else if(void 0!==r)throw TypeError("'options' must be an object.")}else i=t}}else if(void 0!==t)throw TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let t of this.inputNames)if(void 0===e[t])throw Error(`input '${t}' is missing in 'feeds'.`);if(o)for(let e of this.outputNames)n[e]=null;let s=await this.handler.run(e,n,i),a={};for(let e in s)Object.hasOwnProperty.call(s,e)&&(a[e]=new p(s[e].type,s[e].data,s[e].dims));return a}static async create(e,t,r,n){let o,s={};if("string"==typeof e){if(o=e,"object"==typeof t&&null!==t)s=t;else if(void 0!==t)throw TypeError("'options' must be an object.")}else if(e instanceof Uint8Array){if(o=e,"object"==typeof t&&null!==t)s=t;else if(void 0!==t)throw TypeError("'options' must be an object.")}else if(e instanceof ArrayBuffer||"u">typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer){let i=e,a=0,l=e.byteLength;if("object"==typeof t&&null!==t)s=t;else if("number"==typeof t){if(!Number.isSafeInteger(a=t))throw RangeError("'byteOffset' must be an integer.");if(a<0||a>=i.byteLength)throw RangeError(`'byteOffset' is out of range [0, ${i.byteLength}).`);if(l=e.byteLength-a,"number"==typeof r){if(!Number.isSafeInteger(l=r))throw RangeError("'byteLength' must be an integer.");if(l<=0||a+l>i.byteLength)throw RangeError(`'byteLength' is out of range (0, ${i.byteLength-a}].`);if("object"==typeof n&&null!==n)s=n;else if(void 0!==n)throw TypeError("'options' must be an object.")}else if(void 0!==r)throw TypeError("'byteLength' must be a number.")}else if(void 0!==t)throw TypeError("'options' must be an object.");o=new Uint8Array(i,a,l)}else throw TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let a=(s.executionProviders||[]).map(e=>"string"==typeof e?e:e.name),l=await i(a);return new f(await l.createSessionHandler(o,s))}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}let g=f;e.s(["InferenceSession",0,g],54603),e.s([],61321),e.s([],67556),e.i(67556),e.i(10554),e.s(["registerBackend",0,n],34734),e.i(34734),e.i(50239),e.i(54603),e.i(10566),e.i(61321),e.s(["InferenceSession",0,g,"Tensor",0,p,"env",0,s,"registerBackend",0,n],33726)},89626,(__turbopack_context__,module,exports)=>{var __TURBOPACK__imported__module__31001__=__turbopack_context__.i(31001);!function(e,t){module.exports=t(__turbopack_context__.r(33726))}(self,__WEBPACK_EXTERNAL_MODULE__1670__=>(()=>{var __webpack_modules__={3474:(e,t,r)=>{var n;n=(n="u">typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",e.exports=function(e){function t(){return C.buffer!=D&&W(C.buffer),$}function i(){return C.buffer!=D&&W(C.buffer),L}function o(){return C.buffer!=D&&W(C.buffer),N}function s(){return C.buffer!=D&&W(C.buffer),R}function a(){return C.buffer!=D&&W(C.buffer),j}e=e||{},l||(l=void 0!==e?e:{}),l.ready=new Promise(function(e,t){u=e,c=t});var l,u,c,d,h,p,f,g,m,_=Object.assign({},l),b="./this.program",y=(e,t)=>{throw t},w="object"==typeof window,v="function"==typeof importScripts,x="object"==typeof __TURBOPACK__imported__module__31001__.default&&"object"==typeof __TURBOPACK__imported__module__31001__.default.versions&&"string"==typeof __TURBOPACK__imported__module__31001__.default.versions.node,T=l.ENVIRONMENT_IS_PTHREAD||!1,S="";function A(e){return l.locateFile?l.locateFile(e,S):S+e}if(x){let e;S=v?r(908).dirname(S)+"/":"//",m=()=>{g||(f=r(1384),g=r(908))},d=function(e,t){return m(),e=g.normalize(e),f.readFileSync(e,t?void 0:"utf8")},p=e=>((e=d(e,!0)).buffer||(e=new Uint8Array(e)),e),h=(e,t,r)=>{m(),e=g.normalize(e),f.readFile(e,function(e,n){e?r(e):t(n.buffer)})},1<__TURBOPACK__imported__module__31001__.default.argv.length&&(b=__TURBOPACK__imported__module__31001__.default.argv[1].replace(/\\/g,"/")),__TURBOPACK__imported__module__31001__.default.argv.slice(2),__TURBOPACK__imported__module__31001__.default.on("uncaughtException",function(e){if(!(e instanceof eu))throw e}),__TURBOPACK__imported__module__31001__.default.on("unhandledRejection",function(e){throw e}),y=(e,t)=>{if(J())throw __TURBOPACK__imported__module__31001__.default.exitCode=e,t;t instanceof eu||P("exiting due to exception: "+t),__TURBOPACK__imported__module__31001__.default.exit(e)},l.inspect=function(){return"[Emscripten Module object]"};try{e=r(9925)}catch(e){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),e}r.g.Worker=e.Worker}else(w||v)&&(v?S=self.location.href:"u">typeof document&&document.currentScript&&(S=document.currentScript.src),n&&(S=n),S=0!==S.indexOf("blob:")?S.substr(0,S.replace(/[?#].*/,"").lastIndexOf("/")+1):"",x||(d=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},v&&(p=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),h=(e,t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)}));x&&"u"<typeof performance&&(r.g.performance=r(6953).performance);var O=console.log.bind(console),k=console.warn.bind(console);x&&(m(),O=e=>f.writeSync(1,e+"\n"),k=e=>f.writeSync(2,e+"\n"));var E,M=l.print||O,P=l.printErr||k;Object.assign(l,_),_=null,l.thisProgram&&(b=l.thisProgram),l.quit&&(y=l.quit),l.wasmBinary&&(E=l.wasmBinary);var I=l.noExitRuntime||!1;"object"!=typeof WebAssembly&&eo("no native wasm support detected");var C,F,D,$,L,N,R,j,z=!1,B="u">typeof TextDecoder?new TextDecoder("utf8"):void 0;function U(e,t,r){var n=(t>>>=0)+r;for(r=t;e[r]&&!(r>=n);)++r;if(16<r-t&&e.buffer&&B)return B.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,r):e.subarray(t,r));for(n="";t<r;){var i=e[t++];if(128&i){var o=63&e[t++];if(192==(224&i))n+=String.fromCharCode((31&i)<<6|o);else{var s=63&e[t++];65536>(i=224==(240&i)?(15&i)<<12|o<<6|s:(7&i)<<18|o<<12|s<<6|63&e[t++])?n+=String.fromCharCode(i):(i-=65536,n+=String.fromCharCode(55296|i>>10,56320|1023&i))}}else n+=String.fromCharCode(i)}return n}function V(e,t){return(e>>>=0)?U(i(),e,t):""}function G(e,t,r,n){if(!(0<n))return 0;var i=r>>>=0;n=r+n-1;for(var o=0;o<e.length;++o){var s=e.charCodeAt(o);if(55296<=s&&57343>=s&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o)),127>=s){if(r>=n)break;t[r++>>>0]=s}else{if(2047>=s){if(r+1>=n)break;t[r++>>>0]=192|s>>6}else{if(65535>=s){if(r+2>=n)break;t[r++>>>0]=224|s>>12}else{if(r+3>=n)break;t[r++>>>0]=240|s>>18,t[r++>>>0]=128|s>>12&63}t[r++>>>0]=128|s>>6&63}t[r++>>>0]=128|63&s}}return t[r>>>0]=0,r-i}function q(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++r):t+=3}return t}function W(e){D=e,l.HEAP8=$=new Int8Array(e),l.HEAP16=new Int16Array(e),l.HEAP32=N=new Int32Array(e),l.HEAPU8=L=new Uint8Array(e),l.HEAPU16=new Uint16Array(e),l.HEAPU32=R=new Uint32Array(e),l.HEAPF32=new Float32Array(e),l.HEAPF64=j=new Float64Array(e)}T&&(D=l.buffer);var H=l.INITIAL_MEMORY||0x1000000;if(T)C=l.wasmMemory,D=l.buffer;else if(l.wasmMemory)C=l.wasmMemory;else if(!((C=new WebAssembly.Memory({initial:H/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw P("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),x&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");C&&(D=C.buffer),H=D.byteLength,W(D);var X,Y=[],K=[],Q=[],Z=[];function J(){return I||!1}function ee(){var e=l.preRun.shift();Y.unshift(e)}var et,er=0,en=null,ei=null;function eo(e){throw T?postMessage({cmd:"onAbort",arg:e}):l.onAbort&&l.onAbort(e),P(e="Aborted("+e+")"),z=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),c(e),e}function es(){return et.startsWith("data:application/octet-stream;base64,")}function ea(){var e=et;try{if(e==et&&E)return new Uint8Array(E);if(p)return p(e);throw"both async and sync fetching of the wasm failed"}catch(e){eo(e)}}et="ort-wasm-threaded.wasm",es()||(et=A(et));var el={};function eu(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function ec(e){(e=ef.Vb[e])||eo(),ef.mc(e)}function ed(e){var t=ef.Cc();if(!t)return 6;ef.ac.push(t),ef.Vb[e.Ub]=t,t.Ub=e.Ub;var r={cmd:"run",start_routine:e.Ic,arg:e.zc,pthread_ptr:e.Ub};return t.$b=()=>{r.time=performance.now(),t.postMessage(r,e.Nc)},t.loaded&&(t.$b(),delete t.$b),0}function eh(e){if(T)return eX(1,1,e);J()||(ef.oc(),l.onExit&&l.onExit(e),z=!0),y(e,new eu(e))}function ep(e,t){if(!t&&T)throw e_(e),"unwind";J()||T||(tl(),eg(Q),ta(0),e4[1].length&&e6(1,10),e4[2].length&&e6(2,10),ef.oc()),eh(e)}var ef={Yb:[],ac:[],qc:[],Vb:{},fc:function(){T&&ef.Ec()},Pc:function(){},Ec:function(){ef.receiveObjectTransfer=ef.Gc,ef.threadInitTLS=ef.pc,ef.setExitStatus=ef.nc,I=!1},nc:function(){},oc:function(){for(var e of Object.values(ef.Vb))ef.mc(e);for(e of ef.Yb)e.terminate();ef.Yb=[]},mc:function(e){var t=e.Ub;delete ef.Vb[t],ef.Yb.push(e),ef.ac.splice(ef.ac.indexOf(e),1),e.Ub=0,tp(t)},Gc:function(){},pc:function(){ef.qc.forEach(e=>e())},Fc:function(e,t){e.onmessage=r=>{var n=(r=r.data).cmd;if(e.Ub&&(ef.Bc=e.Ub),r.targetThread&&r.targetThread!=ti()){var i=ef.Vb[r.Qc];i?i.postMessage(r,r.transferList):P('Internal error! Worker sent a message "'+n+'" to target pthread '+r.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===n?eU(r.queue):"spawnThread"===n?ed(r):"cleanupThread"===n?ec(r.thread):"killThread"===n?(r=r.thread,n=ef.Vb[r],delete ef.Vb[r],n.terminate(),tp(r),ef.ac.splice(ef.ac.indexOf(n),1),n.Ub=0):"cancelThread"===n?ef.Vb[r.thread].postMessage({cmd:"cancel"}):"loaded"===n?(e.loaded=!0,t&&t(e),e.$b&&(e.$b(),delete e.$b)):"print"===n?M("Thread "+r.threadId+": "+r.text):"printErr"===n?P("Thread "+r.threadId+": "+r.text):"alert"===n?alert("Thread "+r.threadId+": "+r.text):"setimmediate"===r.target?e.postMessage(r):"onAbort"===n?l.onAbort&&l.onAbort(r.arg):n&&P("worker sent an unknown command "+n);ef.Bc=void 0},e.onerror=e=>{throw P("worker sent an error! "+e.filename+":"+e.lineno+": "+e.message),e},x&&(e.on("message",function(t){e.onmessage({data:t})}),e.on("error",function(t){e.onerror(t)}),e.on("detachedExit",function(){})),e.postMessage({cmd:"load",urlOrBlob:l.mainScriptUrlOrBlob||n,wasmMemory:C,wasmModule:F})},yc:function(){var e=A("ort-wasm-threaded.worker.js");ef.Yb.push(new Worker(e))},Cc:function(){return 0==ef.Yb.length&&(ef.yc(),ef.Fc(ef.Yb[0])),ef.Yb.pop()}};function eg(e){for(;0<e.length;)e.shift()(l)}function em(e){var t=t_();return e=e(),tb(t),e}function e_(e){if(T)return eX(2,0,e);try{ep(e)}catch(e){e instanceof eu||"unwind"==e||y(1,e)}}l.PThread=ef,l.establishStackSpace=function(){var e=ti(),t=o()[e+44>>2>>>0];e=o()[e+48>>2>>>0],tm(t,t-e),tb(t)};var eb=[];function ey(e){var t=eb[e];return t||(e>=eb.length&&(eb.length=e+1),eb[e]=t=X.get(e)),t}l.invokeEntryPoint=function(e,t){e=ey(e)(t),J()?ef.nc(e):tf(e)};var ew,ev,ex=[],eT=0,eS=0;function eA(e){this.Zb=e,this.Sb=e-24,this.xc=function(e){s()[this.Sb+4>>2>>>0]=e},this.bc=function(){return s()[this.Sb+4>>2>>>0]},this.wc=function(e){s()[this.Sb+8>>2>>>0]=e},this.Dc=function(){return s()[this.Sb+8>>2>>>0]},this.rc=function(){o()[this.Sb>>2>>>0]=0},this.hc=function(e){e=+!!e,t()[this.Sb+12>>>0]=e},this.uc=function(){return 0!=t()[this.Sb+12>>>0]},this.ic=function(e){e=+!!e,t()[this.Sb+13>>>0]=e},this.kc=function(){return 0!=t()[this.Sb+13>>>0]},this.fc=function(e,t){this.cc(0),this.xc(e),this.wc(t),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(o(),this.Sb>>2,1)},this.Hc=function(){return 1===Atomics.sub(o(),this.Sb>>2,1)},this.cc=function(e){s()[this.Sb+16>>2>>>0]=e},this.tc=function(){return s()[this.Sb+16>>2>>>0]},this.vc=function(){if(tv(this.bc()))return s()[this.Zb>>2>>>0];var e=this.tc();return 0!==e?e:this.Zb}}function eO(e){return ts(new eA(e).Sb)}function ek(e,t,r,n){return T?eX(3,1,e,t,r,n):eE(e,t,r,n)}function eE(e,t,r,n){if("u"<typeof SharedArrayBuffer)return P("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var i=[];return T&&0===i.length?ek(e,t,r,n):(e={Ic:r,Ub:e,zc:n,Nc:i},T?(e.Oc="spawnThread",postMessage(e,i),0):ed(e))}function eM(e,t,r){return T?eX(4,1,e,t,r):0}function eP(e,t){if(T)return eX(5,1,e,t)}function eI(e,t){if(T)return eX(6,1,e,t)}function eC(e,t,r){if(T)return eX(7,1,e,t,r)}function eF(e,t,r){return T?eX(8,1,e,t,r):0}function eD(e,t){if(T)return eX(9,1,e,t)}function e$(e,t,r){if(T)return eX(10,1,e,t,r)}function eL(e,t,r,n){if(T)return eX(11,1,e,t,r,n)}function eN(e,t,r,n){if(T)return eX(12,1,e,t,r,n)}function eR(e,t,r,n){if(T)return eX(13,1,e,t,r,n)}function ej(e){if(T)return eX(14,1,e)}function ez(e,t){if(T)return eX(15,1,e,t)}function eB(e,t,r){if(T)return eX(16,1,e,t,r)}function eU(e){Atomics.store(o(),e>>2,1),ti()&&th(e),Atomics.compareExchange(o(),e>>2,1,0)}function eV(e){return s()[e>>>2]+0x100000000*o()[e+4>>>2]}function eG(e,t,r,n,i,o){return T?eX(17,1,e,t,r,n,i,o):-52}function eq(e,t,r,n,i,o){if(T)return eX(18,1,e,t,r,n,i,o)}function eW(e){var r=q(e)+1,n=to(r);return n&&G(e,t(),n,r),n}function eH(e,t,r){function n(e){return(e=e.toTimeString().match(/\(([A-Za-z ]+)\)$/))?e[1]:"GMT"}if(T)return eX(19,1,e,t,r);var i=(new Date).getFullYear(),a=new Date(i,0,1),l=new Date(i,6,1);i=a.getTimezoneOffset();var u=l.getTimezoneOffset(),c=Math.max(i,u);o()[e>>2>>>0]=60*c,o()[t>>2>>>0]=Number(i!=u),e=n(a),t=n(l),e=eW(e),t=eW(t),u<i?(s()[r>>2>>>0]=e,s()[r+4>>2>>>0]=t):(s()[r>>2>>>0]=t,s()[r+4>>2>>>0]=e)}function eX(e,t){var r=arguments.length-2,n=arguments;return em(()=>{for(var i=ty(8*r),o=i>>3,s=0;s<r;s++){var l=n[2+s];a()[o+s>>>0]=l}return td(e,r,i,t)})}l.executeNotifiedProxyingQueue=eU,ev=x?()=>{var e=__TURBOPACK__imported__module__31001__.default.hrtime();return 1e3*e[0]+e[1]/1e6}:T?()=>performance.now()-l.__performance_now_clock_drift:()=>performance.now();var eY,eK=[],eQ={};function eZ(){if(!eY){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:b||"./this.program"};for(e in eQ)void 0===eQ[e]?delete t[e]:t[e]=eQ[e];var r=[];for(e in t)r.push(e+"="+t[e]);eY=r}return eY}function eJ(e,r){if(T)return eX(20,1,e,r);var n=0;return eZ().forEach(function(i,o){var a=r+n;for(o=s()[e+4*o>>2>>>0]=a,a=0;a<i.length;++a)t()[o++>>>0]=i.charCodeAt(a);t()[o>>>0]=0,n+=i.length+1}),0}function e0(e,t){if(T)return eX(21,1,e,t);var r=eZ();s()[e>>2>>>0]=r.length;var n=0;return r.forEach(function(e){n+=e.length+1}),s()[t>>2>>>0]=n,0}function e1(e){return T?eX(22,1,e):52}function e2(e,t,r,n){return T?eX(23,1,e,t,r,n):52}function e3(e,t,r,n,i){return T?eX(24,1,e,t,r,n,i):70}var e4=[null,[],[]];function e6(e,t){var r=e4[e];0===t||10===t?((1===e?M:P)(U(r,0)),r.length=0):r.push(t)}function e5(e,t,r,n){if(T)return eX(25,1,e,t,r,n);for(var o=0,a=0;a<r;a++){var l=s()[t>>2>>>0],u=s()[t+4>>2>>>0];t+=8;for(var c=0;c<u;c++)e6(e,i()[l+c>>>0]);o+=u}return s()[n>>2>>>0]=o,0}var e8=0;function e7(e){return 0==e%4&&(0!=e%100||0==e%400)}var e9=[31,29,31,30,31,30,31,31,30,31,30,31],te=[31,28,31,30,31,30,31,31,30,31,30,31];function tt(e,r,n,i){function s(e,t,r){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=r[0]+e;return e}function a(e,t){return s(e,t,"0")}function l(e,t){var r;function n(e){return 0>e?-1:+(0<e)}return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function u(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function c(e){var t=e.Wb;for(e=new Date(new Date(e.Xb+1900,0,1).getTime());0<t;){var r=e.getMonth(),n=(e7(e.getFullYear())?e9:te)[r];if(!(t>n-e.getDate())){e.setDate(e.getDate()+t);break}t-=n-e.getDate()+1,e.setDate(1),11>r?e.setMonth(r+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return r=new Date(e.getFullYear()+1,0,4),t=u(new Date(e.getFullYear(),0,4)),r=u(r),0>=l(t,e)?0>=l(r,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var d=o()[i+40>>2>>>0];for(var h in i={Lc:o()[i>>2>>>0],Kc:o()[i+4>>2>>>0],dc:o()[i+8>>2>>>0],jc:o()[i+12>>2>>>0],ec:o()[i+16>>2>>>0],Xb:o()[i+20>>2>>>0],Tb:o()[i+24>>2>>>0],Wb:o()[i+28>>2>>>0],Rc:o()[i+32>>2>>>0],Jc:o()[i+36>>2>>>0],Mc:d?V(d):""},n=V(n),d={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(RegExp(h,"g"),d[h]);var p="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),f="January February March April May June July August September October November December".split(" ");for(h in d={"%a":function(e){return p[e.Tb].substring(0,3)},"%A":function(e){return p[e.Tb]},"%b":function(e){return f[e.ec].substring(0,3)},"%B":function(e){return f[e.ec]},"%C":function(e){return a((e.Xb+1900)/100|0,2)},"%d":function(e){return a(e.jc,2)},"%e":function(e){return s(e.jc,2," ")},"%g":function(e){return c(e).toString().substring(2)},"%G":function(e){return c(e)},"%H":function(e){return a(e.dc,2)},"%I":function(e){return 0==(e=e.dc)?e=12:12<e&&(e-=12),a(e,2)},"%j":function(e){for(var t=0,r=0;r<=e.ec-1;t+=(e7(e.Xb+1900)?e9:te)[r++]);return a(e.jc+t,3)},"%m":function(e){return a(e.ec+1,2)},"%M":function(e){return a(e.Kc,2)},"%n":function(){return"\n"},"%p":function(e){return 0<=e.dc&&12>e.dc?"AM":"PM"},"%S":function(e){return a(e.Lc,2)},"%t":function(){return"	"},"%u":function(e){return e.Tb||7},"%U":function(e){return a(Math.floor((e.Wb+7-e.Tb)/7),2)},"%V":function(e){var t=Math.floor((e.Wb+7-(e.Tb+6)%7)/7);if(2>=(e.Tb+371-e.Wb-2)%7&&t++,t)53==t&&(4==(r=(e.Tb+371-e.Wb)%7)||3==r&&e7(e.Xb)||(t=1));else{t=52;var r=(e.Tb+7-e.Wb-1)%7;(4==r||5==r&&e7(e.Xb%400-1))&&t++}return a(t,2)},"%w":function(e){return e.Tb},"%W":function(e){return a(Math.floor((e.Wb+7-(e.Tb+6)%7)/7),2)},"%y":function(e){return(e.Xb+1900).toString().substring(2)},"%Y":function(e){return e.Xb+1900},"%z":function(e){var t=0<=(e=e.Jc);return(t?"+":"-")+String("0000"+((e=Math.abs(e)/60)/60*100+e%60)).slice(-4)},"%Z":function(e){return e.Mc},"%%":function(){return"%"}},n=n.replace(/%%/g,"\0\0"),d)n.includes(h)&&(n=n.replace(RegExp(h,"g"),d[h](i)));return(h=function(e){var t=Array(q(e)+1);return G(e,t,0,t.length),t}(n=n.replace(/\0\0/g,"%"))).length>r?0:(function(e,r){t().set(e,r>>>0)}(h,e),h.length-1)}ef.fc();var tr=[null,eh,e_,ek,eM,eP,eI,eC,eF,eD,e$,eL,eN,eR,ej,ez,eB,eG,eq,eH,eJ,e0,e1,e2,e3,e5],tn={b:function(e){return to(e+24)+24},n:function(e){return(e=new eA(e)).uc()||(e.hc(!0),eT--),e.ic(!1),ex.push(e),e.sc(),e.vc()},ma:function(e){throw P("Unexpected exception thrown, this is not properly supported - aborting"),z=!0,e},x:function(){tg(0);var e=ex.pop();if(e.Hc()&&!e.kc()){var t=e.Dc();t&&ey(t)(e.Zb),eO(e.Zb)}eS=0},e:function(){var e=eS;if(!e)return e8=0;var t=new eA(e);t.cc(e);var r=t.bc();if(!r)return e8=0,e;for(var n=Array.prototype.slice.call(arguments),i=0;i<n.length;i++){var o=n[i];if(0===o||o===r)break;if(tw(o,r,t.Sb+16))return e8=o,e}return e8=r,e},l:function(){var e=eS;if(!e)return e8=0;var t=new eA(e);t.cc(e);var r=t.bc();if(!r)return e8=0,e;for(var n=Array.prototype.slice.call(arguments),i=0;i<n.length;i++){var o=n[i];if(0===o||o===r)break;if(tw(o,r,t.Sb+16))return e8=o,e}return e8=r,e},h:function(){var e=eS;if(!e)return e8=0;var t=new eA(e);t.cc(e);var r=t.bc();if(!r)return e8=0,e;for(var n=Array.prototype.slice.call(arguments),i=0;i<n.length;i++){var o=n[i];if(0===o||o===r)break;if(tw(o,r,t.Sb+16))return e8=o,e}return e8=r,e},t:eO,M:function(){var e=ex.pop();e||eo("no exception to throw");var t=e.Zb;throw e.kc()||(ex.push(e),e.ic(!0),e.hc(!1),eT++),eS=t,t},c:function(e,t,r){throw new eA(e).fc(t,r),eS=e,eT++,e},pa:function(){return eT},Fa:function(e){tu(e,!v,1,!w),ef.pc()},T:function(e){T?postMessage({cmd:"cleanupThread",thread:e}):ec(e)},xa:eE,j:function(e){throw eS||(eS=e),e},H:eM,Ma:eP,ua:eI,wa:eC,oa:eF,Ka:eD,Ca:e$,Ja:eL,V:eN,va:eR,sa:ej,La:ez,ta:eB,Ta:function(){},X:function(){eo("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){eo("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(e,t,r,n){if(e==t)setTimeout(()=>eU(n));else if(T)postMessage({targetThread:e,cmd:"processProxyingQueue",queue:n});else{if(!(e=ef.Vb[e]))return;e.postMessage({cmd:"processProxyingQueue",queue:n})}return 1},Ea:function(){return -1},Pa:function(e,t){e=new Date(1e3*eV(e)),o()[t>>2>>>0]=e.getUTCSeconds(),o()[t+4>>2>>>0]=e.getUTCMinutes(),o()[t+8>>2>>>0]=e.getUTCHours(),o()[t+12>>2>>>0]=e.getUTCDate(),o()[t+16>>2>>>0]=e.getUTCMonth(),o()[t+20>>2>>>0]=e.getUTCFullYear()-1900,o()[t+24>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,o()[t+28>>2>>>0]=e},Qa:function(e,t){e=new Date(1e3*eV(e)),o()[t>>2>>>0]=e.getSeconds(),o()[t+4>>2>>>0]=e.getMinutes(),o()[t+8>>2>>>0]=e.getHours(),o()[t+12>>2>>>0]=e.getDate(),o()[t+16>>2>>>0]=e.getMonth(),o()[t+20>>2>>>0]=e.getFullYear()-1900,o()[t+24>>2>>>0]=e.getDay();var r=new Date(e.getFullYear(),0,1),n=(e.getTime()-r.getTime())/864e5|0;o()[t+28>>2>>>0]=n,o()[t+36>>2>>>0]=-60*e.getTimezoneOffset(),e=0|((n=new Date(e.getFullYear(),6,1).getTimezoneOffset())!=(r=r.getTimezoneOffset())&&e.getTimezoneOffset()==Math.min(r,n)),o()[t+32>>2>>>0]=e},Ra:function(e){var t=new Date(o()[e+20>>2>>>0]+1900,o()[e+16>>2>>>0],o()[e+12>>2>>>0],o()[e+8>>2>>>0],o()[e+4>>2>>>0],o()[e>>2>>>0],0),r=o()[e+32>>2>>>0],n=t.getTimezoneOffset(),i=new Date(t.getFullYear(),0,1),s=new Date(t.getFullYear(),6,1).getTimezoneOffset(),a=i.getTimezoneOffset(),l=Math.min(a,s);return 0>r?o()[e+32>>2>>>0]=Number(s!=a&&l==n):0<r!=(l==n)&&(s=Math.max(a,s),t.setTime(t.getTime()+6e4*((0<r?l:s)-n))),o()[e+24>>2>>>0]=t.getDay(),r=(t.getTime()-i.getTime())/864e5|0,o()[e+28>>2>>>0]=r,o()[e>>2>>>0]=t.getSeconds(),o()[e+4>>2>>>0]=t.getMinutes(),o()[e+8>>2>>>0]=t.getHours(),o()[e+12>>2>>>0]=t.getDate(),o()[e+16>>2>>>0]=t.getMonth(),t.getTime()/1e3|0},Aa:eG,Ba:eq,Sa:function e(t,r,n){e.Ac||(e.Ac=!0,eH(t,r,n))},y:function(){eo("")},U:function(){if(!x&&!v){var e="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";ew||(ew={}),ew[e]||(ew[e]=1,x&&(e="warning: "+e),P(e))}},ra:function(){return 0xffff0000},B:ev,Ia:function(e,t,r){i().copyWithin(e>>>0,t>>>0,t+r>>>0)},F:function(){return x?r(3993).cpus().length:navigator.hardwareConcurrency},Da:function(e,t,r){eK.length=t,r>>=3;for(var n=0;n<t;n++)eK[n]=a()[r+n>>>0];return(0>e?el[-e-1]:tr[e]).apply(null,eK)},qa:function(e){var t=i().length;if((e>>>=0)<=t||0xffff0000<e)return!1;for(var r=1;4>=r;r*=2){var n=t*(1+.2/r);n=Math.min(n,e+0x6000000);var o=Math;n=Math.max(e,n),o=o.min.call(o,0xffff0000,n+(65536-n%65536)%65536);e:{try{C.grow(o-D.byteLength+65535>>>16),W(C.buffer);var s=1;break e}catch(e){}s=void 0}if(s)return!0}return!1},Na:function(){throw"unwind"},Ga:eJ,Ha:e0,J:ep,I:e1,S:e2,ga:e3,R:e5,d:function(){return e8},na:function e(n,i){e.lc||(e.lc=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return()=>(crypto.getRandomValues(e),e[0])}if(x)try{var t=r(Object(function(){var e=Error("Cannot find module 'crypto'");throw e.code="MODULE_NOT_FOUND",e}()));return()=>t.randomBytes(1)[0]}catch(e){}return()=>eo("randomDevice")}());for(var o=0;o<i;o++)t()[n+o>>>0]=e.lc();return 0},ia:function(e,t,r){var n=t_();try{return ey(e)(t,r)}catch(e){if(tb(n),e!==e+0)throw e;tg(1,0)}},ja:function(e,t,r){var n=t_();try{return ey(e)(t,r)}catch(e){if(tb(n),e!==e+0)throw e;tg(1,0)}},K:function(e){var t=t_();try{return ey(e)()}catch(e){if(tb(t),e!==e+0)throw e;tg(1,0)}},f:function(e,t){var r=t_();try{return ey(e)(t)}catch(e){if(tb(r),e!==e+0)throw e;tg(1,0)}},P:function(e,t,r){var n=t_();try{return ey(e)(t,r)}catch(e){if(tb(n),e!==e+0)throw e;tg(1,0)}},Q:function(e,t,r){var n=t_();try{return ey(e)(t,r)}catch(e){if(tb(n),e!==e+0)throw e;tg(1,0)}},k:function(e,t,r){var n=t_();try{return ey(e)(t,r)}catch(e){if(tb(n),e!==e+0)throw e;tg(1,0)}},p:function(e,t,r,n){var i=t_();try{return ey(e)(t,r,n)}catch(e){if(tb(i),e!==e+0)throw e;tg(1,0)}},q:function(e,t,r,n,i){var o=t_();try{return ey(e)(t,r,n,i)}catch(e){if(tb(o),e!==e+0)throw e;tg(1,0)}},N:function(e,t,r,n,i,o){var s=t_();try{return ey(e)(t,r,n,i,o)}catch(e){if(tb(s),e!==e+0)throw e;tg(1,0)}},s:function(e,t,r,n,i,o){var s=t_();try{return ey(e)(t,r,n,i,o)}catch(e){if(tb(s),e!==e+0)throw e;tg(1,0)}},w:function(e,t,r,n,i,o,s){var a=t_();try{return ey(e)(t,r,n,i,o,s)}catch(e){if(tb(a),e!==e+0)throw e;tg(1,0)}},L:function(e,t,r,n,i,o,s,a){var l=t_();try{return ey(e)(t,r,n,i,o,s,a)}catch(e){if(tb(l),e!==e+0)throw e;tg(1,0)}},E:function(e,t,r,n,i,o,s,a,l,u,c,d){var h=t_();try{return ey(e)(t,r,n,i,o,s,a,l,u,c,d)}catch(e){if(tb(h),e!==e+0)throw e;tg(1,0)}},aa:function(e,t,r,n,i,o,s,a){var l=t_();try{return tP(e,t,r,n,i,o,s,a)}catch(e){if(tb(l),e!==e+0)throw e;tg(1,0)}},_:function(e,t,r,n,i,o,s){var a=t_();try{return tT(e,t,r,n,i,o,s)}catch(e){if(tb(a),e!==e+0)throw e;tg(1,0)}},Z:function(e,t,r,n,i){var o=t_();try{return tI(e,t,r,n,i)}catch(e){if(tb(o),e!==e+0)throw e;tg(1,0)}},ca:function(e,t,r,n){var i=t_();try{return tE(e,t,r,n)}catch(e){if(tb(i),e!==e+0)throw e;tg(1,0)}},$:function(e){var t=t_();try{return tx(e)}catch(e){if(tb(t),e!==e+0)throw e;tg(1,0)}},ba:function(e,t){var r=t_();try{return tM(e,t)}catch(e){if(tb(r),e!==e+0)throw e;tg(1,0)}},Y:function(e,t,r){var n=t_();try{return tS(e,t,r)}catch(e){if(tb(n),e!==e+0)throw e;tg(1,0)}},g:function(e){var t=t_();try{ey(e)()}catch(e){if(tb(t),e!==e+0)throw e;tg(1,0)}},r:function(e,t){var r=t_();try{ey(e)(t)}catch(e){if(tb(r),e!==e+0)throw e;tg(1,0)}},i:function(e,t,r){var n=t_();try{ey(e)(t,r)}catch(e){if(tb(n),e!==e+0)throw e;tg(1,0)}},ha:function(e,t,r,n){var i=t_();try{ey(e)(t,r,n)}catch(e){if(tb(i),e!==e+0)throw e;tg(1,0)}},m:function(e,t,r,n){var i=t_();try{ey(e)(t,r,n)}catch(e){if(tb(i),e!==e+0)throw e;tg(1,0)}},v:function(e,t,r,n,i){var o=t_();try{ey(e)(t,r,n,i)}catch(e){if(tb(o),e!==e+0)throw e;tg(1,0)}},u:function(e,t,r,n,i,o){var s=t_();try{ey(e)(t,r,n,i,o)}catch(e){if(tb(s),e!==e+0)throw e;tg(1,0)}},O:function(e,t,r,n,i,o,s){var a=t_();try{ey(e)(t,r,n,i,o,s)}catch(e){if(tb(a),e!==e+0)throw e;tg(1,0)}},A:function(e,t,r,n,i,o,s,a){var l=t_();try{ey(e)(t,r,n,i,o,s,a)}catch(e){if(tb(l),e!==e+0)throw e;tg(1,0)}},ka:function(e,t,r,n,i,o,s,a,l){var u=t_();try{ey(e)(t,r,n,i,o,s,a,l)}catch(e){if(tb(u),e!==e+0)throw e;tg(1,0)}},C:function(e,t,r,n,i,o,s,a,l,u,c){var d=t_();try{ey(e)(t,r,n,i,o,s,a,l,u,c)}catch(e){if(tb(d),e!==e+0)throw e;tg(1,0)}},D:function(e,t,r,n,i,o,s,a,l,u,c,d,h,p,f,g){var m=t_();try{ey(e)(t,r,n,i,o,s,a,l,u,c,d,h,p,f,g)}catch(e){if(tb(m),e!==e+0)throw e;tg(1,0)}},fa:function(e,t,r,n,i,o,s,a){var l=t_();try{tA(e,t,r,n,i,o,s,a)}catch(e){if(tb(l),e!==e+0)throw e;tg(1,0)}},da:function(e,t,r,n,i,o,s,a,l,u,c,d){var h=t_();try{tk(e,t,r,n,i,o,s,a,l,u,c,d)}catch(e){if(tb(h),e!==e+0)throw e;tg(1,0)}},ea:function(e,t,r,n,i,o){var s=t_();try{tO(e,t,r,n,i,o)}catch(e){if(tb(s),e!==e+0)throw e;tg(1,0)}},o:function(e){return e},a:C||l.wasmMemory,G:function(e){e8=e},la:tt,z:function(e,t,r,n){return tt(e,t,r,n)}};!function(){function e(e,t){l.asm=e.exports,ef.qc.push(l.asm.sb),X=l.asm.ub,K.unshift(l.asm.Va),F=t,T||(er--,l.monitorRunDependencies&&l.monitorRunDependencies(er),0==er&&(null!==en&&(clearInterval(en),en=null),ei&&(e=ei,ei=null,e())))}function t(t){e(t.instance,t.module)}function r(e){return(function(){if(!E&&(w||v)){if("function"==typeof fetch&&!et.startsWith("file://"))return fetch(et,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+et+"'";return e.arrayBuffer()}).catch(function(){return ea()});if(h)return new Promise(function(e,t){h(et,function(t){e(new Uint8Array(t))},t)})}return Promise.resolve().then(function(){return ea()})})().then(function(e){return WebAssembly.instantiate(e,n)}).then(function(e){return e}).then(e,function(e){P("failed to asynchronously prepare wasm: "+e),eo(e)})}var n={a:tn};if(T||(er++,l.monitorRunDependencies&&l.monitorRunDependencies(er)),l.instantiateWasm)try{return l.instantiateWasm(n,e)}catch(e){return P("Module.instantiateWasm callback failed with error: "+e),!1}(E||"function"!=typeof WebAssembly.instantiateStreaming||es()||et.startsWith("file://")||x||"function"!=typeof fetch?r(t):fetch(et,{credentials:"same-origin"}).then(function(e){return WebAssembly.instantiateStreaming(e,n).then(t,function(e){return P("wasm streaming compile failed: "+e),P("falling back to ArrayBuffer instantiation"),r(t)})})).catch(c)}(),l.___wasm_call_ctors=function(){return(l.___wasm_call_ctors=l.asm.Va).apply(null,arguments)},l._OrtInit=function(){return(l._OrtInit=l.asm.Wa).apply(null,arguments)},l._OrtCreateSessionOptions=function(){return(l._OrtCreateSessionOptions=l.asm.Xa).apply(null,arguments)},l._OrtAppendExecutionProvider=function(){return(l._OrtAppendExecutionProvider=l.asm.Ya).apply(null,arguments)},l._OrtAddSessionConfigEntry=function(){return(l._OrtAddSessionConfigEntry=l.asm.Za).apply(null,arguments)},l._OrtReleaseSessionOptions=function(){return(l._OrtReleaseSessionOptions=l.asm._a).apply(null,arguments)},l._OrtCreateSession=function(){return(l._OrtCreateSession=l.asm.$a).apply(null,arguments)},l._OrtReleaseSession=function(){return(l._OrtReleaseSession=l.asm.ab).apply(null,arguments)},l._OrtGetInputCount=function(){return(l._OrtGetInputCount=l.asm.bb).apply(null,arguments)},l._OrtGetOutputCount=function(){return(l._OrtGetOutputCount=l.asm.cb).apply(null,arguments)},l._OrtGetInputName=function(){return(l._OrtGetInputName=l.asm.db).apply(null,arguments)},l._OrtGetOutputName=function(){return(l._OrtGetOutputName=l.asm.eb).apply(null,arguments)},l._OrtFree=function(){return(l._OrtFree=l.asm.fb).apply(null,arguments)},l._OrtCreateTensor=function(){return(l._OrtCreateTensor=l.asm.gb).apply(null,arguments)},l._OrtGetTensorData=function(){return(l._OrtGetTensorData=l.asm.hb).apply(null,arguments)},l._OrtReleaseTensor=function(){return(l._OrtReleaseTensor=l.asm.ib).apply(null,arguments)},l._OrtCreateRunOptions=function(){return(l._OrtCreateRunOptions=l.asm.jb).apply(null,arguments)},l._OrtAddRunConfigEntry=function(){return(l._OrtAddRunConfigEntry=l.asm.kb).apply(null,arguments)},l._OrtReleaseRunOptions=function(){return(l._OrtReleaseRunOptions=l.asm.lb).apply(null,arguments)},l._OrtRun=function(){return(l._OrtRun=l.asm.mb).apply(null,arguments)},l._OrtEndProfiling=function(){return(l._OrtEndProfiling=l.asm.nb).apply(null,arguments)};var ti=l._pthread_self=function(){return(ti=l._pthread_self=l.asm.ob).apply(null,arguments)},to=l._malloc=function(){return(to=l._malloc=l.asm.pb).apply(null,arguments)},ts=l._free=function(){return(ts=l._free=l.asm.qb).apply(null,arguments)},ta=l._fflush=function(){return(ta=l._fflush=l.asm.rb).apply(null,arguments)};l.__emscripten_tls_init=function(){return(l.__emscripten_tls_init=l.asm.sb).apply(null,arguments)};var tl=l.___funcs_on_exit=function(){return(tl=l.___funcs_on_exit=l.asm.tb).apply(null,arguments)},tu=l.__emscripten_thread_init=function(){return(tu=l.__emscripten_thread_init=l.asm.vb).apply(null,arguments)};l.__emscripten_thread_crashed=function(){return(l.__emscripten_thread_crashed=l.asm.wb).apply(null,arguments)};var tc,td=l._emscripten_run_in_main_runtime_thread_js=function(){return(td=l._emscripten_run_in_main_runtime_thread_js=l.asm.xb).apply(null,arguments)},th=l.__emscripten_proxy_execute_task_queue=function(){return(th=l.__emscripten_proxy_execute_task_queue=l.asm.yb).apply(null,arguments)},tp=l.__emscripten_thread_free_data=function(){return(tp=l.__emscripten_thread_free_data=l.asm.zb).apply(null,arguments)},tf=l.__emscripten_thread_exit=function(){return(tf=l.__emscripten_thread_exit=l.asm.Ab).apply(null,arguments)},tg=l._setThrew=function(){return(tg=l._setThrew=l.asm.Bb).apply(null,arguments)},tm=l._emscripten_stack_set_limits=function(){return(tm=l._emscripten_stack_set_limits=l.asm.Cb).apply(null,arguments)},t_=l.stackSave=function(){return(t_=l.stackSave=l.asm.Db).apply(null,arguments)},tb=l.stackRestore=function(){return(tb=l.stackRestore=l.asm.Eb).apply(null,arguments)},ty=l.stackAlloc=function(){return(ty=l.stackAlloc=l.asm.Fb).apply(null,arguments)},tw=l.___cxa_can_catch=function(){return(tw=l.___cxa_can_catch=l.asm.Gb).apply(null,arguments)},tv=l.___cxa_is_pointer_type=function(){return(tv=l.___cxa_is_pointer_type=l.asm.Hb).apply(null,arguments)},tx=l.dynCall_j=function(){return(tx=l.dynCall_j=l.asm.Ib).apply(null,arguments)},tT=l.dynCall_iiiiij=function(){return(tT=l.dynCall_iiiiij=l.asm.Jb).apply(null,arguments)},tS=l.dynCall_jii=function(){return(tS=l.dynCall_jii=l.asm.Kb).apply(null,arguments)},tA=l.dynCall_viiiiij=function(){return(tA=l.dynCall_viiiiij=l.asm.Lb).apply(null,arguments)},tO=l.dynCall_vjji=function(){return(tO=l.dynCall_vjji=l.asm.Mb).apply(null,arguments)},tk=l.dynCall_viiijjjii=function(){return(tk=l.dynCall_viiijjjii=l.asm.Nb).apply(null,arguments)},tE=l.dynCall_iij=function(){return(tE=l.dynCall_iij=l.asm.Ob).apply(null,arguments)},tM=l.dynCall_ji=function(){return(tM=l.dynCall_ji=l.asm.Pb).apply(null,arguments)},tP=l.dynCall_iiiiiij=function(){return(tP=l.dynCall_iiiiiij=l.asm.Qb).apply(null,arguments)},tI=l.dynCall_iiij=function(){return(tI=l.dynCall_iiij=l.asm.Rb).apply(null,arguments)};function tC(){function e(){if(!tc&&(tc=!0,l.calledRun=!0,!z)&&(T||eg(K),u(l),l.onRuntimeInitialized&&l.onRuntimeInitialized(),!T)){if(l.postRun)for("function"==typeof l.postRun&&(l.postRun=[l.postRun]);l.postRun.length;){var e=l.postRun.shift();Z.unshift(e)}eg(Z)}}if(!(0<er))if(T)u(l),T||eg(K),postMessage({cmd:"loaded"});else{if(l.preRun)for("function"==typeof l.preRun&&(l.preRun=[l.preRun]);l.preRun.length;)ee();eg(Y),0<er||(l.setStatus?(l.setStatus("Running..."),setTimeout(function(){setTimeout(function(){l.setStatus("")},1),e()},1)):e())}}if(l.UTF8ToString=V,l.stringToUTF8=function(e,t,r){return G(e,i(),t,r)},l.lengthBytesUTF8=q,l.keepRuntimeAlive=J,l.wasmMemory=C,l.stackSave=t_,l.stackRestore=tb,l.stackAlloc=ty,l.ExitStatus=eu,l.PThread=ef,ei=function e(){tc||tC(),tc||(ei=e)},l.preInit)for("function"==typeof l.preInit&&(l.preInit=[l.preInit]);0<l.preInit.length;)l.preInit.pop()();return tC(),e.ready}},932:(e,t,r)=>{var n;n=(n="u">typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",e.exports=function(e){e=e||{},t||(t=void 0!==e?e:{}),t.ready=new Promise(function(e,t){i=e,o=t});var t,i,o,s,a,l,u,c,d,h=Object.assign({},t),p="./this.program",f=(e,t)=>{throw t},g="object"==typeof window,m="function"==typeof importScripts,_="object"==typeof __TURBOPACK__imported__module__31001__.default&&"object"==typeof __TURBOPACK__imported__module__31001__.default.versions&&"string"==typeof __TURBOPACK__imported__module__31001__.default.versions.node,b="";_?(b=m?r(908).dirname(b)+"/":"//",d=()=>{c||(u=r(1384),c=r(908))},s=function(e,t){return d(),e=c.normalize(e),u.readFileSync(e,t?void 0:"utf8")},l=e=>((e=s(e,!0)).buffer||(e=new Uint8Array(e)),e),a=(e,t,r)=>{d(),e=c.normalize(e),u.readFile(e,function(e,n){e?r(e):t(n.buffer)})},1<__TURBOPACK__imported__module__31001__.default.argv.length&&(p=__TURBOPACK__imported__module__31001__.default.argv[1].replace(/\\/g,"/")),__TURBOPACK__imported__module__31001__.default.argv.slice(2),__TURBOPACK__imported__module__31001__.default.on("uncaughtException",function(e){if(!(e instanceof Q))throw e}),__TURBOPACK__imported__module__31001__.default.on("unhandledRejection",function(e){throw e}),f=(e,t)=>{if(x||0<B)throw __TURBOPACK__imported__module__31001__.default.exitCode=e,t;t instanceof Q||v("exiting due to exception: "+t),__TURBOPACK__imported__module__31001__.default.exit(e)},t.inspect=function(){return"[Emscripten Module object]"}):(g||m)&&(m?b=self.location.href:"u">typeof document&&document.currentScript&&(b=document.currentScript.src),n&&(b=n),b=0!==b.indexOf("blob:")?b.substr(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1):"",s=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},m&&(l=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),a=(e,t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)});var y,w=t.print||console.log.bind(console),v=t.printErr||console.warn.bind(console);Object.assign(t,h),h=null,t.thisProgram&&(p=t.thisProgram),t.quit&&(f=t.quit),t.wasmBinary&&(y=t.wasmBinary);var x=t.noExitRuntime||!1;"object"!=typeof WebAssembly&&H("no native wasm support detected");var T,S,A,O,k,E,M=!1,P="u">typeof TextDecoder?new TextDecoder("utf8"):void 0;function I(e,t,r){var n=(t>>>=0)+r;for(r=t;e[r]&&!(r>=n);)++r;if(16<r-t&&e.buffer&&P)return P.decode(e.subarray(t,r));for(n="";t<r;){var i=e[t++];if(128&i){var o=63&e[t++];if(192==(224&i))n+=String.fromCharCode((31&i)<<6|o);else{var s=63&e[t++];65536>(i=224==(240&i)?(15&i)<<12|o<<6|s:(7&i)<<18|o<<12|s<<6|63&e[t++])?n+=String.fromCharCode(i):(i-=65536,n+=String.fromCharCode(55296|i>>10,56320|1023&i))}}else n+=String.fromCharCode(i)}return n}function C(e,t){return(e>>>=0)?I(O,e,t):""}function F(e,t,r,n){if(!(0<n))return 0;var i=r>>>=0;n=r+n-1;for(var o=0;o<e.length;++o){var s=e.charCodeAt(o);if(55296<=s&&57343>=s&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o)),127>=s){if(r>=n)break;t[r++>>>0]=s}else{if(2047>=s){if(r+1>=n)break;t[r++>>>0]=192|s>>6}else{if(65535>=s){if(r+2>=n)break;t[r++>>>0]=224|s>>12}else{if(r+3>=n)break;t[r++>>>0]=240|s>>18,t[r++>>>0]=128|s>>12&63}t[r++>>>0]=128|s>>6&63}t[r++>>>0]=128|63&s}}return t[r>>>0]=0,r-i}function D(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++r):t+=3}return t}function $(){var e=T.buffer;S=e,t.HEAP8=A=new Int8Array(e),t.HEAP16=new Int16Array(e),t.HEAP32=k=new Int32Array(e),t.HEAPU8=O=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAPU32=E=new Uint32Array(e),t.HEAPF32=new Float32Array(e),t.HEAPF64=new Float64Array(e)}var L,N=[],R=[],j=[],z=[],B=0;function U(){var e=t.preRun.shift();N.unshift(e)}var V,G=0,q=null,W=null;function H(e){throw t.onAbort&&t.onAbort(e),v(e="Aborted("+e+")"),M=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),o(e),e}function X(){return V.startsWith("data:application/octet-stream;base64,")}if(V="ort-wasm.wasm",!X()){var Y=V;V=t.locateFile?t.locateFile(Y,b):b+Y}function K(){var e=V;try{if(e==V&&y)return new Uint8Array(y);if(l)return l(e);throw"both async and sync fetching of the wasm failed"}catch(e){H(e)}}function Q(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Z(e){for(;0<e.length;)e.shift()(t)}var J=[],ee=0,et=0;function er(e){this.Db=e,this.zb=e-24,this.Ub=function(e){E[this.zb+4>>2>>>0]=e},this.Eb=function(){return E[this.zb+4>>2>>>0]},this.Sb=function(e){E[this.zb+8>>2>>>0]=e},this.Wb=function(){return E[this.zb+8>>2>>>0]},this.Tb=function(){k[this.zb>>2>>>0]=0},this.Ib=function(e){A[this.zb+12>>>0]=+!!e},this.Pb=function(){return 0!=A[this.zb+12>>>0]},this.Jb=function(e){A[this.zb+13>>>0]=+!!e},this.Lb=function(){return 0!=A[this.zb+13>>>0]},this.Rb=function(e,t){this.Fb(0),this.Ub(e),this.Sb(t),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){k[this.zb>>2>>>0]+=1},this.Xb=function(){var e=k[this.zb>>2>>>0];return k[this.zb>>2>>>0]=e-1,1===e},this.Fb=function(e){E[this.zb+16>>2>>>0]=e},this.Ob=function(){return E[this.zb+16>>2>>>0]},this.Qb=function(){if(eE(this.Eb()))return E[this.Db>>2>>>0];var e=this.Ob();return 0!==e?e:this.Db}}function en(e){return ew(new er(e).zb)}var ei=[];function eo(e){var t=ei[e];return t||(e>=ei.length&&(ei.length=e+1),ei[e]=t=L.get(e)),t}function es(e){var t=D(e)+1,r=ey(t);return r&&F(e,A,r,t),r}var ea={};function el(){if(!eu){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(e in ea)void 0===ea[e]?delete t[e]:t[e]=ea[e];var r=[];for(e in t)r.push(e+"="+t[e]);eu=r}return eu}var eu,ec=[null,[],[]];function ed(e,t){var r=ec[e];0===t||10===t?((1===e?w:v)(I(r,0)),r.length=0):r.push(t)}var eh=0;function ep(e){return 0==e%4&&(0!=e%100||0==e%400)}var ef=[31,29,31,30,31,30,31,31,30,31,30,31],eg=[31,28,31,30,31,30,31,31,30,31,30,31];function em(e,t,r,n){function i(e,t,r){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=r[0]+e;return e}function o(e,t){return i(e,t,"0")}function s(e,t){var r;function n(e){return 0>e?-1:+(0<e)}return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function a(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function l(e){var t=e.Bb;for(e=new Date(new Date(e.Cb+1900,0,1).getTime());0<t;){var r=e.getMonth(),n=(ep(e.getFullYear())?ef:eg)[r];if(!(t>n-e.getDate())){e.setDate(e.getDate()+t);break}t-=n-e.getDate()+1,e.setDate(1),11>r?e.setMonth(r+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return r=new Date(e.getFullYear()+1,0,4),t=a(new Date(e.getFullYear(),0,4)),r=a(r),0>=s(t,e)?0>=s(r,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var u=k[n+40>>2>>>0];for(var c in n={$b:k[n>>2>>>0],Zb:k[n+4>>2>>>0],Gb:k[n+8>>2>>>0],Kb:k[n+12>>2>>>0],Hb:k[n+16>>2>>>0],Cb:k[n+20>>2>>>0],Ab:k[n+24>>2>>>0],Bb:k[n+28>>2>>>0],bc:k[n+32>>2>>>0],Yb:k[n+36>>2>>>0],ac:u?C(u):""},r=C(r),u={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(RegExp(c,"g"),u[c]);var d="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),h="January February March April May June July August September October November December".split(" ");for(c in u={"%a":function(e){return d[e.Ab].substring(0,3)},"%A":function(e){return d[e.Ab]},"%b":function(e){return h[e.Hb].substring(0,3)},"%B":function(e){return h[e.Hb]},"%C":function(e){return o((e.Cb+1900)/100|0,2)},"%d":function(e){return o(e.Kb,2)},"%e":function(e){return i(e.Kb,2," ")},"%g":function(e){return l(e).toString().substring(2)},"%G":function(e){return l(e)},"%H":function(e){return o(e.Gb,2)},"%I":function(e){return 0==(e=e.Gb)?e=12:12<e&&(e-=12),o(e,2)},"%j":function(e){for(var t=0,r=0;r<=e.Hb-1;t+=(ep(e.Cb+1900)?ef:eg)[r++]);return o(e.Kb+t,3)},"%m":function(e){return o(e.Hb+1,2)},"%M":function(e){return o(e.Zb,2)},"%n":function(){return"\n"},"%p":function(e){return 0<=e.Gb&&12>e.Gb?"AM":"PM"},"%S":function(e){return o(e.$b,2)},"%t":function(){return"	"},"%u":function(e){return e.Ab||7},"%U":function(e){return o(Math.floor((e.Bb+7-e.Ab)/7),2)},"%V":function(e){var t=Math.floor((e.Bb+7-(e.Ab+6)%7)/7);if(2>=(e.Ab+371-e.Bb-2)%7&&t++,t)53==t&&(4==(r=(e.Ab+371-e.Bb)%7)||3==r&&ep(e.Cb)||(t=1));else{t=52;var r=(e.Ab+7-e.Bb-1)%7;(4==r||5==r&&ep(e.Cb%400-1))&&t++}return o(t,2)},"%w":function(e){return e.Ab},"%W":function(e){return o(Math.floor((e.Bb+7-(e.Ab+6)%7)/7),2)},"%y":function(e){return(e.Cb+1900).toString().substring(2)},"%Y":function(e){return e.Cb+1900},"%z":function(e){var t=0<=(e=e.Yb);return(t?"+":"-")+String("0000"+((e=Math.abs(e)/60)/60*100+e%60)).slice(-4)},"%Z":function(e){return e.ac},"%%":function(){return"%"}},r=r.replace(/%%/g,"\0\0"),u)r.includes(c)&&(r=r.replace(RegExp(c,"g"),u[c](n)));return(c=function(e){var t=Array(D(e)+1);return F(e,t,0,t.length),t}(r=r.replace(/\0\0/g,"%"))).length>t?0:(A.set(c,e>>>0),c.length-1)}var e_={a:function(e){return ey(e+24)+24},m:function(e){return(e=new er(e)).Pb()||(e.Ib(!0),ee--),e.Jb(!1),J.push(e),e.Nb(),e.Qb()},ia:function(e){throw v("Unexpected exception thrown, this is not properly supported - aborting"),M=!0,e},w:function(){eT(0);var e=J.pop();if(e.Xb()&&!e.Lb()){var t=e.Wb();t&&eo(t)(e.Db),en(e.Db)}et=0},d:function(){var e=et;if(!e)return eh=0;var t=new er(e);t.Fb(e);var r=t.Eb();if(!r)return eh=0,e;for(var n=Array.prototype.slice.call(arguments),i=0;i<n.length;i++){var o=n[i];if(0===o||o===r)break;if(ek(o,r,t.zb+16))return eh=o,e}return eh=r,e},k:function(){var e=et;if(!e)return eh=0;var t=new er(e);t.Fb(e);var r=t.Eb();if(!r)return eh=0,e;for(var n=Array.prototype.slice.call(arguments),i=0;i<n.length;i++){var o=n[i];if(0===o||o===r)break;if(ek(o,r,t.zb+16))return eh=o,e}return eh=r,e},g:function(){var e=et;if(!e)return eh=0;var t=new er(e);t.Fb(e);var r=t.Eb();if(!r)return eh=0,e;for(var n=Array.prototype.slice.call(arguments),i=0;i<n.length;i++){var o=n[i];if(0===o||o===r)break;if(ek(o,r,t.zb+16))return eh=o,e}return eh=r,e},s:en,L:function(){var e=J.pop();e||H("no exception to throw");var t=e.Db;throw e.Lb()||(J.push(e),e.Jb(!0),e.Ib(!1),ee++),et=t,t},b:function(e,t,r){throw new er(e).Rb(t,r),et=e,ee++,e},la:function(){return ee},i:function(e){throw et||(et=e),e},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){H("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){H("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(e,t){e=new Date(1e3*(E[e>>>2]+0x100000000*k[e+4>>>2])),k[t>>2>>>0]=e.getUTCSeconds(),k[t+4>>2>>>0]=e.getUTCMinutes(),k[t+8>>2>>>0]=e.getUTCHours(),k[t+12>>2>>>0]=e.getUTCDate(),k[t+16>>2>>>0]=e.getUTCMonth(),k[t+20>>2>>>0]=e.getUTCFullYear()-1900,k[t+24>>2>>>0]=e.getUTCDay(),k[t+28>>2>>>0]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(e,t){e=new Date(1e3*(E[e>>>2]+0x100000000*k[e+4>>>2])),k[t>>2>>>0]=e.getSeconds(),k[t+4>>2>>>0]=e.getMinutes(),k[t+8>>2>>>0]=e.getHours(),k[t+12>>2>>>0]=e.getDate(),k[t+16>>2>>>0]=e.getMonth(),k[t+20>>2>>>0]=e.getFullYear()-1900,k[t+24>>2>>>0]=e.getDay();var r=new Date(e.getFullYear(),0,1);k[t+28>>2>>>0]=(e.getTime()-r.getTime())/864e5|0,k[t+36>>2>>>0]=-60*e.getTimezoneOffset();var n=new Date(e.getFullYear(),6,1).getTimezoneOffset();r=r.getTimezoneOffset(),k[t+32>>2>>>0]=0|(n!=r&&e.getTimezoneOffset()==Math.min(r,n))},Fa:function(e){var t=new Date(k[e+20>>2>>>0]+1900,k[e+16>>2>>>0],k[e+12>>2>>>0],k[e+8>>2>>>0],k[e+4>>2>>>0],k[e>>2>>>0],0),r=k[e+32>>2>>>0],n=t.getTimezoneOffset(),i=new Date(t.getFullYear(),0,1),o=new Date(t.getFullYear(),6,1).getTimezoneOffset(),s=i.getTimezoneOffset(),a=Math.min(s,o);return 0>r?k[e+32>>2>>>0]=Number(o!=s&&a==n):0<r!=(a==n)&&(o=Math.max(s,o),t.setTime(t.getTime()+6e4*((0<r?a:o)-n))),k[e+24>>2>>>0]=t.getDay(),k[e+28>>2>>>0]=(t.getTime()-i.getTime())/864e5|0,k[e>>2>>>0]=t.getSeconds(),k[e+4>>2>>>0]=t.getMinutes(),k[e+8>>2>>>0]=t.getHours(),k[e+12>>2>>>0]=t.getDate(),k[e+16>>2>>>0]=t.getMonth(),t.getTime()/1e3|0},sa:function(){return -52},ta:function(){},Ga:function e(t,r,n){e.Vb||(e.Vb=!0,function(e,t,r){function n(e){return(e=e.toTimeString().match(/\(([A-Za-z ]+)\)$/))?e[1]:"GMT"}var i=(new Date).getFullYear(),o=new Date(i,0,1),s=new Date(i,6,1);i=o.getTimezoneOffset();var a=s.getTimezoneOffset();k[e>>2>>>0]=60*Math.max(i,a),k[t>>2>>>0]=Number(i!=a),e=n(o),t=n(s),e=es(e),t=es(t),a<i?(E[r>>2>>>0]=e,E[r+4>>2>>>0]=t):(E[r>>2>>>0]=t,E[r+4>>2>>>0]=e)}(t,r,n))},B:function(){H("")},ma:function(){return 0xffff0000},I:_?()=>{var e=__TURBOPACK__imported__module__31001__.default.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.now(),xa:function(e,t,r){O.copyWithin(e>>>0,t>>>0,t+r>>>0)},G:function(e){var t=O.length;if(0xffff0000<(e>>>=0))return!1;for(var r=1;4>=r;r*=2){var n=t*(1+.2/r);n=Math.min(n,e+0x6000000);var i=Math;n=Math.max(e,n),i=i.min.call(i,0xffff0000,n+(65536-n%65536)%65536);e:{try{T.grow(i-S.byteLength+65535>>>16),$();var o=1;break e}catch(e){}o=void 0}if(o)return!0}return!1},va:function(e,t){var r=0;return el().forEach(function(n,i){var o=t+r;for(i=E[e+4*i>>2>>>0]=o,o=0;o<n.length;++o)A[i++>>>0]=n.charCodeAt(o);A[i>>>0]=0,r+=n.length+1}),0},wa:function(e,t){var r=el();E[e>>2>>>0]=r.length;var n=0;return r.forEach(function(e){n+=e.length+1}),E[t>>2>>>0]=n,0},ba:function(e){x||0<B||(ex(),Z(j),ev(0),ec[1].length&&ed(1,10),ec[2].length&&ed(2,10)),x||0<B||(t.onExit&&t.onExit(e),M=!0),f(e,new Q(e))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(e,t,r,n){for(var i=0,o=0;o<r;o++){var s=E[t>>2>>>0],a=E[t+4>>2>>>0];t+=8;for(var l=0;l<a;l++)ed(e,O[s+l>>>0]);i+=a}return E[n>>2>>>0]=i,0},c:function(){return eh},ja:function e(t,n){e.Mb||(e.Mb=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return()=>(crypto.getRandomValues(e),e[0])}if(_)try{var t=r(Object(function(){var e=Error("Cannot find module 'crypto'");throw e.code="MODULE_NOT_FOUND",e}()));return()=>t.randomBytes(1)[0]}catch(e){}return()=>H("randomDevice")}());for(var i=0;i<n;i++)A[t+i>>>0]=e.Mb();return 0},ea:function(e,t,r){var n=eS();try{return eo(e)(t,r)}catch(e){if(eA(n),e!==e+0)throw e;eT(1,0)}},fa:function(e,t,r){var n=eS();try{return eo(e)(t,r)}catch(e){if(eA(n),e!==e+0)throw e;eT(1,0)}},J:function(e){var t=eS();try{return eo(e)()}catch(e){if(eA(t),e!==e+0)throw e;eT(1,0)}},e:function(e,t){var r=eS();try{return eo(e)(t)}catch(e){if(eA(r),e!==e+0)throw e;eT(1,0)}},N:function(e,t,r){var n=eS();try{return eo(e)(t,r)}catch(e){if(eA(n),e!==e+0)throw e;eT(1,0)}},O:function(e,t,r){var n=eS();try{return eo(e)(t,r)}catch(e){if(eA(n),e!==e+0)throw e;eT(1,0)}},j:function(e,t,r){var n=eS();try{return eo(e)(t,r)}catch(e){if(eA(n),e!==e+0)throw e;eT(1,0)}},o:function(e,t,r,n){var i=eS();try{return eo(e)(t,r,n)}catch(e){if(eA(i),e!==e+0)throw e;eT(1,0)}},p:function(e,t,r,n,i){var o=eS();try{return eo(e)(t,r,n,i)}catch(e){if(eA(o),e!==e+0)throw e;eT(1,0)}},M:function(e,t,r,n,i,o){var s=eS();try{return eo(e)(t,r,n,i,o)}catch(e){if(eA(s),e!==e+0)throw e;eT(1,0)}},r:function(e,t,r,n,i,o){var s=eS();try{return eo(e)(t,r,n,i,o)}catch(e){if(eA(s),e!==e+0)throw e;eT(1,0)}},v:function(e,t,r,n,i,o,s){var a=eS();try{return eo(e)(t,r,n,i,o,s)}catch(e){if(eA(a),e!==e+0)throw e;eT(1,0)}},K:function(e,t,r,n,i,o,s,a){var l=eS();try{return eo(e)(t,r,n,i,o,s,a)}catch(e){if(eA(l),e!==e+0)throw e;eT(1,0)}},D:function(e,t,r,n,i,o,s,a,l,u,c,d){var h=eS();try{return eo(e)(t,r,n,i,o,s,a,l,u,c,d)}catch(e){if(eA(h),e!==e+0)throw e;eT(1,0)}},X:function(e,t,r,n,i,o,s,a){var l=eS();try{return eN(e,t,r,n,i,o,s,a)}catch(e){if(eA(l),e!==e+0)throw e;eT(1,0)}},V:function(e,t,r,n,i,o,s){var a=eS();try{return eP(e,t,r,n,i,o,s)}catch(e){if(eA(a),e!==e+0)throw e;eT(1,0)}},U:function(e,t,r,n,i){var o=eS();try{return eR(e,t,r,n,i)}catch(e){if(eA(o),e!==e+0)throw e;eT(1,0)}},Z:function(e,t,r,n){var i=eS();try{return e$(e,t,r,n)}catch(e){if(eA(i),e!==e+0)throw e;eT(1,0)}},W:function(e){var t=eS();try{return eM(e)}catch(e){if(eA(t),e!==e+0)throw e;eT(1,0)}},Y:function(e,t){var r=eS();try{return eL(e,t)}catch(e){if(eA(r),e!==e+0)throw e;eT(1,0)}},T:function(e,t,r){var n=eS();try{return eI(e,t,r)}catch(e){if(eA(n),e!==e+0)throw e;eT(1,0)}},f:function(e){var t=eS();try{eo(e)()}catch(e){if(eA(t),e!==e+0)throw e;eT(1,0)}},q:function(e,t){var r=eS();try{eo(e)(t)}catch(e){if(eA(r),e!==e+0)throw e;eT(1,0)}},h:function(e,t,r){var n=eS();try{eo(e)(t,r)}catch(e){if(eA(n),e!==e+0)throw e;eT(1,0)}},da:function(e,t,r,n){var i=eS();try{eo(e)(t,r,n)}catch(e){if(eA(i),e!==e+0)throw e;eT(1,0)}},l:function(e,t,r,n){var i=eS();try{eo(e)(t,r,n)}catch(e){if(eA(i),e!==e+0)throw e;eT(1,0)}},t:function(e,t,r,n,i){var o=eS();try{eo(e)(t,r,n,i)}catch(e){if(eA(o),e!==e+0)throw e;eT(1,0)}},u:function(e,t,r,n,i,o){var s=eS();try{eo(e)(t,r,n,i,o)}catch(e){if(eA(s),e!==e+0)throw e;eT(1,0)}},x:function(e,t,r,n,i,o,s){var a=eS();try{eo(e)(t,r,n,i,o,s)}catch(e){if(eA(a),e!==e+0)throw e;eT(1,0)}},z:function(e,t,r,n,i,o,s,a){var l=eS();try{eo(e)(t,r,n,i,o,s,a)}catch(e){if(eA(l),e!==e+0)throw e;eT(1,0)}},ga:function(e,t,r,n,i,o,s,a,l){var u=eS();try{eo(e)(t,r,n,i,o,s,a,l)}catch(e){if(eA(u),e!==e+0)throw e;eT(1,0)}},A:function(e,t,r,n,i,o,s,a,l,u,c){var d=eS();try{eo(e)(t,r,n,i,o,s,a,l,u,c)}catch(e){if(eA(d),e!==e+0)throw e;eT(1,0)}},C:function(e,t,r,n,i,o,s,a,l,u,c,d,h,p,f,g){var m=eS();try{eo(e)(t,r,n,i,o,s,a,l,u,c,d,h,p,f,g)}catch(e){if(eA(m),e!==e+0)throw e;eT(1,0)}},aa:function(e,t,r,n,i,o,s,a){var l=eS();try{eC(e,t,r,n,i,o,s,a)}catch(e){if(eA(l),e!==e+0)throw e;eT(1,0)}},_:function(e,t,r,n,i,o,s,a,l,u,c,d){var h=eS();try{eD(e,t,r,n,i,o,s,a,l,u,c,d)}catch(e){if(eA(h),e!==e+0)throw e;eT(1,0)}},$:function(e,t,r,n,i,o){var s=eS();try{eF(e,t,r,n,i,o)}catch(e){if(eA(s),e!==e+0)throw e;eT(1,0)}},n:function(e){return e},F:function(e){eh=e},ha:em,y:function(e,t,r,n){return em(e,t,r,n)}};!function(){function e(e){t.asm=e.exports,T=t.asm.Ka,$(),L=t.asm.ib,R.unshift(t.asm.La),G--,t.monitorRunDependencies&&t.monitorRunDependencies(G),0==G&&(null!==q&&(clearInterval(q),q=null),W&&(e=W,W=null,e()))}function r(t){e(t.instance)}function n(e){return(function(){if(!y&&(g||m)){if("function"==typeof fetch&&!V.startsWith("file://"))return fetch(V,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+V+"'";return e.arrayBuffer()}).catch(function(){return K()});if(a)return new Promise(function(e,t){a(V,function(t){e(new Uint8Array(t))},t)})}return Promise.resolve().then(function(){return K()})})().then(function(e){return WebAssembly.instantiate(e,i)}).then(function(e){return e}).then(e,function(e){v("failed to asynchronously prepare wasm: "+e),H(e)})}var i={a:e_};if(G++,t.monitorRunDependencies&&t.monitorRunDependencies(G),t.instantiateWasm)try{return t.instantiateWasm(i,e)}catch(e){return v("Module.instantiateWasm callback failed with error: "+e),!1}(y||"function"!=typeof WebAssembly.instantiateStreaming||X()||V.startsWith("file://")||_||"function"!=typeof fetch?n(r):fetch(V,{credentials:"same-origin"}).then(function(e){return WebAssembly.instantiateStreaming(e,i).then(r,function(e){return v("wasm streaming compile failed: "+e),v("falling back to ArrayBuffer instantiation"),n(r)})})).catch(o)}(),t.___wasm_call_ctors=function(){return(t.___wasm_call_ctors=t.asm.La).apply(null,arguments)},t._OrtInit=function(){return(t._OrtInit=t.asm.Ma).apply(null,arguments)},t._OrtCreateSessionOptions=function(){return(t._OrtCreateSessionOptions=t.asm.Na).apply(null,arguments)},t._OrtAppendExecutionProvider=function(){return(t._OrtAppendExecutionProvider=t.asm.Oa).apply(null,arguments)},t._OrtAddSessionConfigEntry=function(){return(t._OrtAddSessionConfigEntry=t.asm.Pa).apply(null,arguments)},t._OrtReleaseSessionOptions=function(){return(t._OrtReleaseSessionOptions=t.asm.Qa).apply(null,arguments)},t._OrtCreateSession=function(){return(t._OrtCreateSession=t.asm.Ra).apply(null,arguments)},t._OrtReleaseSession=function(){return(t._OrtReleaseSession=t.asm.Sa).apply(null,arguments)},t._OrtGetInputCount=function(){return(t._OrtGetInputCount=t.asm.Ta).apply(null,arguments)},t._OrtGetOutputCount=function(){return(t._OrtGetOutputCount=t.asm.Ua).apply(null,arguments)},t._OrtGetInputName=function(){return(t._OrtGetInputName=t.asm.Va).apply(null,arguments)},t._OrtGetOutputName=function(){return(t._OrtGetOutputName=t.asm.Wa).apply(null,arguments)},t._OrtFree=function(){return(t._OrtFree=t.asm.Xa).apply(null,arguments)},t._OrtCreateTensor=function(){return(t._OrtCreateTensor=t.asm.Ya).apply(null,arguments)},t._OrtGetTensorData=function(){return(t._OrtGetTensorData=t.asm.Za).apply(null,arguments)},t._OrtReleaseTensor=function(){return(t._OrtReleaseTensor=t.asm._a).apply(null,arguments)},t._OrtCreateRunOptions=function(){return(t._OrtCreateRunOptions=t.asm.$a).apply(null,arguments)},t._OrtAddRunConfigEntry=function(){return(t._OrtAddRunConfigEntry=t.asm.ab).apply(null,arguments)},t._OrtReleaseRunOptions=function(){return(t._OrtReleaseRunOptions=t.asm.bb).apply(null,arguments)},t._OrtRun=function(){return(t._OrtRun=t.asm.cb).apply(null,arguments)},t._OrtEndProfiling=function(){return(t._OrtEndProfiling=t.asm.db).apply(null,arguments)};var eb,ey=t._malloc=function(){return(ey=t._malloc=t.asm.eb).apply(null,arguments)},ew=t._free=function(){return(ew=t._free=t.asm.fb).apply(null,arguments)},ev=t._fflush=function(){return(ev=t._fflush=t.asm.gb).apply(null,arguments)},ex=t.___funcs_on_exit=function(){return(ex=t.___funcs_on_exit=t.asm.hb).apply(null,arguments)},eT=t._setThrew=function(){return(eT=t._setThrew=t.asm.jb).apply(null,arguments)},eS=t.stackSave=function(){return(eS=t.stackSave=t.asm.kb).apply(null,arguments)},eA=t.stackRestore=function(){return(eA=t.stackRestore=t.asm.lb).apply(null,arguments)},eO=t.stackAlloc=function(){return(eO=t.stackAlloc=t.asm.mb).apply(null,arguments)},ek=t.___cxa_can_catch=function(){return(ek=t.___cxa_can_catch=t.asm.nb).apply(null,arguments)},eE=t.___cxa_is_pointer_type=function(){return(eE=t.___cxa_is_pointer_type=t.asm.ob).apply(null,arguments)},eM=t.dynCall_j=function(){return(eM=t.dynCall_j=t.asm.pb).apply(null,arguments)},eP=t.dynCall_iiiiij=function(){return(eP=t.dynCall_iiiiij=t.asm.qb).apply(null,arguments)},eI=t.dynCall_jii=function(){return(eI=t.dynCall_jii=t.asm.rb).apply(null,arguments)},eC=t.dynCall_viiiiij=function(){return(eC=t.dynCall_viiiiij=t.asm.sb).apply(null,arguments)},eF=t.dynCall_vjji=function(){return(eF=t.dynCall_vjji=t.asm.tb).apply(null,arguments)},eD=t.dynCall_viiijjjii=function(){return(eD=t.dynCall_viiijjjii=t.asm.ub).apply(null,arguments)},e$=t.dynCall_iij=function(){return(e$=t.dynCall_iij=t.asm.vb).apply(null,arguments)},eL=t.dynCall_ji=function(){return(eL=t.dynCall_ji=t.asm.wb).apply(null,arguments)},eN=t.dynCall_iiiiiij=function(){return(eN=t.dynCall_iiiiiij=t.asm.xb).apply(null,arguments)},eR=t.dynCall_iiij=function(){return(eR=t.dynCall_iiij=t.asm.yb).apply(null,arguments)};function ej(){function e(){if(!eb&&(eb=!0,t.calledRun=!0,!M)){if(Z(R),i(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;){var e=t.postRun.shift();z.unshift(e)}Z(z)}}if(!(0<G)){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)U();Z(N),0<G||(t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),e()},1)):e())}}if(t.UTF8ToString=C,t.stringToUTF8=function(e,t,r){return F(e,O,t,r)},t.lengthBytesUTF8=D,t.stackSave=eS,t.stackRestore=eA,t.stackAlloc=eO,W=function e(){eb||ej(),eb||(W=e)},t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();return ej(),e.ready}},4537:e=>{"use strict";e.exports=function(e,t){for(var r=Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(i,s){r[n]=function(e){if(o)if(o=!1,e)s(e);else{for(var t=Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];i.apply(null,t)}};try{e.apply(t||null,r)}catch(e){o&&(o=!1,s(e))}})}},7419:(e,t)=>{"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var n=Array(64),i=Array(123),o=0;o<64;)i[n[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;r.encode=function(e,t,r){for(var i,o=null,s=[],a=0,l=0;t<r;){var u=e[t++];switch(l){case 0:s[a++]=n[u>>2],i=(3&u)<<4,l=1;break;case 1:s[a++]=n[i|u>>4],i=(15&u)<<2,l=2;break;case 2:s[a++]=n[i|u>>6],s[a++]=n[63&u],l=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return l&&(s[a++]=n[i],s[a++]=61,1===l&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var s="invalid encoding";r.decode=function(e,t,r){for(var n,o=r,a=0,l=0;l<e.length;){var u=e.charCodeAt(l++);if(61===u&&a>1)break;if(void 0===(u=i[u]))throw Error(s);switch(a){case 0:n=u,a=1;break;case 1:t[r++]=n<<2|(48&u)>>4,n=u,a=2;break;case 2:t[r++]=(15&n)<<4|(60&u)>>2,n=u,a=3;break;case 3:t[r++]=(3&n)<<6|u,a=0}}if(1===a)throw Error(s);return r-o},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},9211:e=>{"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},945:e=>{"use strict";function t(e){return"u">typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3]}function o(e,n,i){t[0]=e,n[i]=r[3],n[i+1]=r[2],n[i+2]=r[1],n[i+3]=r[0]}function s(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function a(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?i:o,e.writeFloatBE=n?o:i,e.readFloatLE=n?s:a,e.readFloatBE=n?a:s}():function(){function t(e,t,r,n){var i=+(t<0);if(i&&(t=-t),0===t)e(1/t>0?0:0x80000000,r,n);else if(isNaN(t))e(0x7fc00000,r,n);else if(t>34028234663852886e22)e((i<<31|0x7f800000)>>>0,r,n);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,r,n)}}function s(e,t,r){var n=e(t,r),i=2*(n>>31)+1,o=n>>>23&255,s=8388607&n;return 255===o?s?NaN:1/0*i:0===o?1401298464324817e-60*i*s:i*Math.pow(2,o-150)*(s+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,n),e.readFloatLE=s.bind(null,i),e.readFloatBE=s.bind(null,o)}(),"u">typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3],n[i+4]=r[4],n[i+5]=r[5],n[i+6]=r[6],n[i+7]=r[7]}function o(e,n,i){t[0]=e,n[i]=r[7],n[i+1]=r[6],n[i+2]=r[5],n[i+3]=r[4],n[i+4]=r[3],n[i+5]=r[2],n[i+6]=r[1],n[i+7]=r[0]}function s(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function a(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?i:o,e.writeDoubleBE=n?o:i,e.readDoubleLE=n?s:a,e.readDoubleBE=n?a:s}():function(){function t(e,t,r,n,i,o){var s,a=+(n<0);if(a&&(n=-n),0===n)e(0,i,o+t),e(1/n>0?0:0x80000000,i,o+r);else if(isNaN(n))e(0,i,o+t),e(0x7ff80000,i,o+r);else if(n>17976931348623157e292)e(0,i,o+t),e((a<<31|0x7ff00000)>>>0,i,o+r);else if(n<22250738585072014e-324)e((s=n/5e-324)>>>0,i,o+t),e((a<<31|s/0x100000000)>>>0,i,o+r);else{var l=Math.floor(Math.log(n)/Math.LN2);1024===l&&(l=1023),e(0x10000000000000*(s=n*Math.pow(2,-l))>>>0,i,o+t),e((a<<31|l+1023<<20|1048576*s&1048575)>>>0,i,o+r)}}function s(e,t,r,n,i){var o=e(n,i+t),s=e(n,i+r),a=2*(s>>31)+1,l=s>>>20&2047,u=0x100000000*(1048575&s)+o;return 2047===l?u?NaN:1/0*a:0===l?5e-324*a*u:a*Math.pow(2,l-1075)*(u+0x10000000000000)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,n,4,0),e.readDoubleLE=s.bind(null,i,0,4),e.readDoubleBE=s.bind(null,o,4,0)}(),e}function r(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function n(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function i(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function o(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},7199:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}module.exports=inquire},6662:e=>{"use strict";e.exports=function(e,t,r){var n=r||8192,i=n>>>1,o=null,s=n;return function(r){if(r<1||r>i)return e(r);s+r>n&&(o=e(n),s=0);var a=t.call(o,s,s+=r);return 7&s&&(s=1+(7|s)),a}}},4997:(e,t)=>{"use strict";var r=t;r.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var n,i=null,o=[],s=0;t<r;)(n=e[t++])<128?o[s++]=n:n>191&&n<224?o[s++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[s++]=55296+(n>>10),o[s++]=56320+(1023&n)):o[s++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0);return i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))},r.write=function(e,t,r){for(var n,i,o=r,s=0;s<e.length;++s)(n=e.charCodeAt(s))<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(55296==(64512&n)&&56320==(64512&(i=e.charCodeAt(s+1)))?(n=65536+((1023&n)<<10)+(1023&i),++s,t[r++]=n>>18|240,t[r++]=n>>12&63|128):t[r++]=n>>12|224,t[r++]=n>>6&63|128),t[r++]=63&n|128);return r-o}},3442:(e,t)=>{"use strict";t.__esModule=!0,t.Guid=function(){function e(t){if(!t)throw TypeError("Invalid argument; `value` has no value.");this.value=e.EMPTY,t&&e.isGuid(t)&&(this.value=t)}return e.isGuid=function(t){var r=t.toString();return t&&(t instanceof e||e.validator.test(r))},e.create=function(){return new e([e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-"))},e.createEmpty=function(){return new e("emptyguid")},e.parse=function(t){return new e(t)},e.raw=function(){return[e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-")},e.gen=function(e){for(var t="",r=0;r<e;r++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t},e.prototype.equals=function(t){return e.isGuid(t)&&this.value===t.toString()},e.prototype.isEmpty=function(){return this.value===e.EMPTY},e.prototype.toString=function(){return this.value},e.prototype.toJSON=function(){return{value:this.value}},e.validator=RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),e.EMPTY="00000000-0000-0000-0000-000000000000",e}()},3720:e=>{e.exports=r;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function n(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=n;var i={},o={};function s(e,t){var r,n,s;return t?(s=0<=(e>>>=0)&&e<256)&&(n=o[e])?n:(r=l(e,(0|e)<0?-1:0,!0),s&&(o[e]=r),r):(s=-128<=(e|=0)&&e<128)&&(n=i[e])?n:(r=l(e,e<0?-1:0,!1),s&&(i[e]=r),r)}function a(e,t){if(isNaN(e))return t?_:m;if(t){if(e<0)return _;if(e>=p)return x}else{if(e<=-f)return T;if(e+1>=f)return v}return e<0?a(-e,t).neg():l(e%h|0,e/h|0,t)}function l(e,t,n){return new r(e,t,n)}r.fromInt=s,r.fromNumber=a,r.fromBits=l;var u=Math.pow;function c(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if("number"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return c(e.substring(1),t,r).neg();for(var n,i=a(u(r,8)),o=m,s=0;s<e.length;s+=8){var l=Math.min(8,e.length-s),d=parseInt(e.substring(s,s+l),r);if(l<8){var h=a(u(r,l));o=o.mul(h).add(a(d))}else o=(o=o.mul(i)).add(a(d))}return o.unsigned=t,o}function d(e,t){return"number"==typeof e?a(e,t):"string"==typeof e?c(e,t):l(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=c,r.fromValue=d;var h=0x100000000,p=0xffffffffffffffff,f=0xffffffffffffffff/2,g=s(0x1000000),m=s(0);r.ZERO=m;var _=s(0,!0);r.UZERO=_;var b=s(1);r.ONE=b;var y=s(1,!0);r.UONE=y;var w=s(-1);r.NEG_ONE=w;var v=l(-1,0x7fffffff,!1);r.MAX_VALUE=v;var x=l(-1,-1,!0);r.MAX_UNSIGNED_VALUE=x;var T=l(0,-0x80000000,!1);r.MIN_VALUE=T;var S=r.prototype;S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},S.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(T)){var t=a(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=a(u(e,6),this.unsigned),o=this,s="";;){var l=o.div(i),c=(o.sub(l.mul(i)).toInt()>>>0).toString(e);if((o=l).isZero())return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(T)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},S.isZero=function(){return 0===this.high&&0===this.low},S.eqz=S.isZero,S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return 1==(1&this.low)},S.isEven=function(){return 0==(1&this.low)},S.equals=function(e){return n(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},S.eq=S.equals,S.notEquals=function(e){return!this.eq(e)},S.neq=S.notEquals,S.ne=S.notEquals,S.lessThan=function(e){return 0>this.comp(e)},S.lt=S.lessThan,S.lessThanOrEqual=function(e){return 0>=this.comp(e)},S.lte=S.lessThanOrEqual,S.le=S.lessThanOrEqual,S.greaterThan=function(e){return this.comp(e)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(e){return this.comp(e)>=0},S.gte=S.greaterThanOrEqual,S.ge=S.greaterThanOrEqual,S.compare=function(e){if(n(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(T)?T:this.not().add(b)},S.neg=S.negate,S.add=function(e){n(e)||(e=d(e));var t,r,i,o=this.high>>>16,s=65535&this.high,a=this.low>>>16,u=65535&this.low,c=e.high>>>16,h=65535&e.high,p=e.low>>>16,f=0;return i=0+((t=0+((r=0+(u+(65535&e.low)))>>>16)+(a+p))>>>16),f+=(i+=s+h)>>>16,f+=o+c,l((t&=65535)<<16|(r&=65535),(f&=65535)<<16|(i&=65535),this.unsigned)},S.subtract=function(e){return n(e)||(e=d(e)),this.add(e.neg())},S.sub=S.subtract,S.multiply=function(e){if(this.isZero())return m;if(n(e)||(e=d(e)),t)return l(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return m;if(this.eq(T))return e.isOdd()?T:m;if(e.eq(T))return this.isOdd()?T:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return a(this.toNumber()*e.toNumber(),this.unsigned);var r,i,o,s=this.high>>>16,u=65535&this.high,c=this.low>>>16,h=65535&this.low,p=e.high>>>16,f=65535&e.high,_=e.low>>>16,b=65535&e.low,y=0;return o=0+((r=0+((i=0+h*b)>>>16)+c*b)>>>16),r&=65535,o+=(r+=h*_)>>>16,y+=(o+=u*b)>>>16,o&=65535,y+=(o+=c*_)>>>16,o&=65535,y+=(o+=h*f)>>>16,y+=s*b+u*_+c*f+h*p,l((r&=65535)<<16|(i&=65535),(y&=65535)<<16|(o&=65535),this.unsigned)},S.mul=S.multiply,S.divide=function(e){if(n(e)||(e=d(e)),e.isZero())throw Error("division by zero");if(t)return this.unsigned||-0x80000000!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?_:m;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return _;if(e.gt(this.shru(1)))return y;o=_}else{if(this.eq(T))return e.eq(b)||e.eq(w)?T:e.eq(T)?b:(r=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?b:w:(i=this.sub(e.mul(r)),o=r.add(i.div(e)));if(e.eq(T))return this.unsigned?_:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=m}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var r,i,o,s=Math.ceil(Math.log(r)/Math.LN2),c=s<=48?1:u(2,s-48),h=a(r),p=h.mul(e);p.isNegative()||p.gt(i);)p=(h=a(r-=c,this.unsigned)).mul(e);h.isZero()&&(h=b),o=o.add(h),i=i.sub(p)}return o},S.div=S.divide,S.modulo=function(e){return n(e)||(e=d(e)),t?l((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},S.mod=S.modulo,S.rem=S.modulo,S.not=function(){return l(~this.low,~this.high,this.unsigned)},S.and=function(e){return n(e)||(e=d(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},S.or=function(e){return n(e)||(e=d(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},S.xor=function(e){return n(e)||(e=d(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},S.shiftLeft=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(e){if(n(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):l(32===e?t:t>>>e-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.shr_u=S.shiftRightUnsigned,S.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},S.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},S.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},1446:(e,t,r)=>{"use strict";var n,i,o,s=r(2100),a=s.Reader,l=s.Writer,u=s.util,c=s.roots.default||(s.roots.default={});(o={}).Version=((i=Object.create(n={}))[n[0]="_START_VERSION"]=0,i[n[1]="IR_VERSION_2017_10_10"]=1,i[n[2]="IR_VERSION_2017_10_30"]=2,i[n[3]="IR_VERSION_2017_11_3"]=3,i[n[4]="IR_VERSION_2019_1_22"]=4,i[n[5]="IR_VERSION"]=5,i),o.AttributeProto=function(){function e(e){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.name="",e.prototype.refAttrName="",e.prototype.docString="",e.prototype.type=0,e.prototype.f=0,e.prototype.i=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.s=u.newBuffer([]),e.prototype.t=null,e.prototype.g=null,e.prototype.floats=u.emptyArray,e.prototype.ints=u.emptyArray,e.prototype.strings=u.emptyArray,e.prototype.tensors=u.emptyArray,e.prototype.graphs=u.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=l.create()),null!=e.name&&e.hasOwnProperty("name")&&t.uint32(10).string(e.name),null!=e.f&&e.hasOwnProperty("f")&&t.uint32(21).float(e.f),null!=e.i&&e.hasOwnProperty("i")&&t.uint32(24).int64(e.i),null!=e.s&&e.hasOwnProperty("s")&&t.uint32(34).bytes(e.s),null!=e.t&&e.hasOwnProperty("t")&&c.onnx.TensorProto.encode(e.t,t.uint32(42).fork()).ldelim(),null!=e.g&&e.hasOwnProperty("g")&&c.onnx.GraphProto.encode(e.g,t.uint32(50).fork()).ldelim(),null!=e.floats&&e.floats.length){t.uint32(58).fork();for(var r=0;r<e.floats.length;++r)t.float(e.floats[r]);t.ldelim()}if(null!=e.ints&&e.ints.length){for(t.uint32(66).fork(),r=0;r<e.ints.length;++r)t.int64(e.ints[r]);t.ldelim()}if(null!=e.strings&&e.strings.length)for(r=0;r<e.strings.length;++r)t.uint32(74).bytes(e.strings[r]);if(null!=e.tensors&&e.tensors.length)for(r=0;r<e.tensors.length;++r)c.onnx.TensorProto.encode(e.tensors[r],t.uint32(82).fork()).ldelim();if(null!=e.graphs&&e.graphs.length)for(r=0;r<e.graphs.length;++r)c.onnx.GraphProto.encode(e.graphs[r],t.uint32(90).fork()).ldelim();return null!=e.docString&&e.hasOwnProperty("docString")&&t.uint32(106).string(e.docString),null!=e.type&&e.hasOwnProperty("type")&&t.uint32(160).int32(e.type),null!=e.refAttrName&&e.hasOwnProperty("refAttrName")&&t.uint32(170).string(e.refAttrName),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.onnx.AttributeProto;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.name=e.string();break;case 21:n.refAttrName=e.string();break;case 13:n.docString=e.string();break;case 20:n.type=e.int32();break;case 2:n.f=e.float();break;case 3:n.i=e.int64();break;case 4:n.s=e.bytes();break;case 5:n.t=c.onnx.TensorProto.decode(e,e.uint32());break;case 6:n.g=c.onnx.GraphProto.decode(e,e.uint32());break;case 7:if(n.floats&&n.floats.length||(n.floats=[]),2==(7&i))for(var o=e.uint32()+e.pos;e.pos<o;)n.floats.push(e.float());else n.floats.push(e.float());break;case 8:if(n.ints&&n.ints.length||(n.ints=[]),2==(7&i))for(o=e.uint32()+e.pos;e.pos<o;)n.ints.push(e.int64());else n.ints.push(e.int64());break;case 9:n.strings&&n.strings.length||(n.strings=[]),n.strings.push(e.bytes());break;case 10:n.tensors&&n.tensors.length||(n.tensors=[]),n.tensors.push(c.onnx.TensorProto.decode(e,e.uint32()));break;case 11:n.graphs&&n.graphs.length||(n.graphs=[]),n.graphs.push(c.onnx.GraphProto.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.name&&e.hasOwnProperty("name")&&!u.isString(e.name))return"name: string expected";if(null!=e.refAttrName&&e.hasOwnProperty("refAttrName")&&!u.isString(e.refAttrName))return"refAttrName: string expected";if(null!=e.docString&&e.hasOwnProperty("docString")&&!u.isString(e.docString))return"docString: string expected";if(null!=e.type&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(null!=e.f&&e.hasOwnProperty("f")&&"number"!=typeof e.f)return"f: number expected";if(null!=e.i&&e.hasOwnProperty("i")&&!(u.isInteger(e.i)||e.i&&u.isInteger(e.i.low)&&u.isInteger(e.i.high)))return"i: integer|Long expected";if(null!=e.s&&e.hasOwnProperty("s")&&!(e.s&&"number"==typeof e.s.length||u.isString(e.s)))return"s: buffer expected";if(null!=e.t&&e.hasOwnProperty("t")&&(t=c.onnx.TensorProto.verify(e.t)))return"t."+t;if(null!=e.g&&e.hasOwnProperty("g")&&(t=c.onnx.GraphProto.verify(e.g)))return"g."+t;if(null!=e.floats&&e.hasOwnProperty("floats")){if(!Array.isArray(e.floats))return"floats: array expected";for(var t,r=0;r<e.floats.length;++r)if("number"!=typeof e.floats[r])return"floats: number[] expected"}if(null!=e.ints&&e.hasOwnProperty("ints")){if(!Array.isArray(e.ints))return"ints: array expected";for(r=0;r<e.ints.length;++r)if(!(u.isInteger(e.ints[r])||e.ints[r]&&u.isInteger(e.ints[r].low)&&u.isInteger(e.ints[r].high)))return"ints: integer|Long[] expected"}if(null!=e.strings&&e.hasOwnProperty("strings")){if(!Array.isArray(e.strings))return"strings: array expected";for(r=0;r<e.strings.length;++r)if(!(e.strings[r]&&"number"==typeof e.strings[r].length||u.isString(e.strings[r])))return"strings: buffer[] expected"}if(null!=e.tensors&&e.hasOwnProperty("tensors")){if(!Array.isArray(e.tensors))return"tensors: array expected";for(r=0;r<e.tensors.length;++r)if(t=c.onnx.TensorProto.verify(e.tensors[r]))return"tensors."+t}if(null!=e.graphs&&e.hasOwnProperty("graphs")){if(!Array.isArray(e.graphs))return"graphs: array expected";for(r=0;r<e.graphs.length;++r)if(t=c.onnx.GraphProto.verify(e.graphs[r]))return"graphs."+t}return null},e.fromObject=function(e){if(e instanceof c.onnx.AttributeProto)return e;var t=new c.onnx.AttributeProto;switch(null!=e.name&&(t.name=String(e.name)),null!=e.refAttrName&&(t.refAttrName=String(e.refAttrName)),null!=e.docString&&(t.docString=String(e.docString)),e.type){case"UNDEFINED":case 0:t.type=0;break;case"FLOAT":case 1:t.type=1;break;case"INT":case 2:t.type=2;break;case"STRING":case 3:t.type=3;break;case"TENSOR":case 4:t.type=4;break;case"GRAPH":case 5:t.type=5;break;case"FLOATS":case 6:t.type=6;break;case"INTS":case 7:t.type=7;break;case"STRINGS":case 8:t.type=8;break;case"TENSORS":case 9:t.type=9;break;case"GRAPHS":case 10:t.type=10}if(null!=e.f&&(t.f=Number(e.f)),null!=e.i&&(u.Long?(t.i=u.Long.fromValue(e.i)).unsigned=!1:"string"==typeof e.i?t.i=parseInt(e.i,10):"number"==typeof e.i?t.i=e.i:"object"==typeof e.i&&(t.i=new u.LongBits(e.i.low>>>0,e.i.high>>>0).toNumber())),null!=e.s&&("string"==typeof e.s?u.base64.decode(e.s,t.s=u.newBuffer(u.base64.length(e.s)),0):e.s.length&&(t.s=e.s)),null!=e.t){if("object"!=typeof e.t)throw TypeError(".onnx.AttributeProto.t: object expected");t.t=c.onnx.TensorProto.fromObject(e.t)}if(null!=e.g){if("object"!=typeof e.g)throw TypeError(".onnx.AttributeProto.g: object expected");t.g=c.onnx.GraphProto.fromObject(e.g)}if(e.floats){if(!Array.isArray(e.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");t.floats=[];for(var r=0;r<e.floats.length;++r)t.floats[r]=Number(e.floats[r])}if(e.ints){if(!Array.isArray(e.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(t.ints=[],r=0;r<e.ints.length;++r)u.Long?(t.ints[r]=u.Long.fromValue(e.ints[r])).unsigned=!1:"string"==typeof e.ints[r]?t.ints[r]=parseInt(e.ints[r],10):"number"==typeof e.ints[r]?t.ints[r]=e.ints[r]:"object"==typeof e.ints[r]&&(t.ints[r]=new u.LongBits(e.ints[r].low>>>0,e.ints[r].high>>>0).toNumber())}if(e.strings){if(!Array.isArray(e.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(t.strings=[],r=0;r<e.strings.length;++r)"string"==typeof e.strings[r]?u.base64.decode(e.strings[r],t.strings[r]=u.newBuffer(u.base64.length(e.strings[r])),0):e.strings[r].length&&(t.strings[r]=e.strings[r])}if(e.tensors){if(!Array.isArray(e.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(t.tensors=[],r=0;r<e.tensors.length;++r){if("object"!=typeof e.tensors[r])throw TypeError(".onnx.AttributeProto.tensors: object expected");t.tensors[r]=c.onnx.TensorProto.fromObject(e.tensors[r])}}if(e.graphs){if(!Array.isArray(e.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(t.graphs=[],r=0;r<e.graphs.length;++r){if("object"!=typeof e.graphs[r])throw TypeError(".onnx.AttributeProto.graphs: object expected");t.graphs[r]=c.onnx.GraphProto.fromObject(e.graphs[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.floats=[],r.ints=[],r.strings=[],r.tensors=[],r.graphs=[]),t.defaults){if(r.name="",r.f=0,u.Long){var n=new u.Long(0,0,!1);r.i=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.i=t.longs===String?"0":0;t.bytes===String?r.s="":(r.s=[],t.bytes!==Array&&(r.s=u.newBuffer(r.s))),r.t=null,r.g=null,r.docString="",r.type=t.enums===String?"UNDEFINED":0,r.refAttrName=""}if(null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),null!=e.f&&e.hasOwnProperty("f")&&(r.f=t.json&&!isFinite(e.f)?String(e.f):e.f),null!=e.i&&e.hasOwnProperty("i")&&("number"==typeof e.i?r.i=t.longs===String?String(e.i):e.i:r.i=t.longs===String?u.Long.prototype.toString.call(e.i):t.longs===Number?new u.LongBits(e.i.low>>>0,e.i.high>>>0).toNumber():e.i),null!=e.s&&e.hasOwnProperty("s")&&(r.s=t.bytes===String?u.base64.encode(e.s,0,e.s.length):t.bytes===Array?Array.prototype.slice.call(e.s):e.s),null!=e.t&&e.hasOwnProperty("t")&&(r.t=c.onnx.TensorProto.toObject(e.t,t)),null!=e.g&&e.hasOwnProperty("g")&&(r.g=c.onnx.GraphProto.toObject(e.g,t)),e.floats&&e.floats.length){r.floats=[];for(var i=0;i<e.floats.length;++i)r.floats[i]=t.json&&!isFinite(e.floats[i])?String(e.floats[i]):e.floats[i]}if(e.ints&&e.ints.length)for(r.ints=[],i=0;i<e.ints.length;++i)"number"==typeof e.ints[i]?r.ints[i]=t.longs===String?String(e.ints[i]):e.ints[i]:r.ints[i]=t.longs===String?u.Long.prototype.toString.call(e.ints[i]):t.longs===Number?new u.LongBits(e.ints[i].low>>>0,e.ints[i].high>>>0).toNumber():e.ints[i];if(e.strings&&e.strings.length)for(r.strings=[],i=0;i<e.strings.length;++i)r.strings[i]=t.bytes===String?u.base64.encode(e.strings[i],0,e.strings[i].length):t.bytes===Array?Array.prototype.slice.call(e.strings[i]):e.strings[i];if(e.tensors&&e.tensors.length)for(r.tensors=[],i=0;i<e.tensors.length;++i)r.tensors[i]=c.onnx.TensorProto.toObject(e.tensors[i],t);if(e.graphs&&e.graphs.length)for(r.graphs=[],i=0;i<e.graphs.length;++i)r.graphs[i]=c.onnx.GraphProto.toObject(e.graphs[i],t);return null!=e.docString&&e.hasOwnProperty("docString")&&(r.docString=e.docString),null!=e.type&&e.hasOwnProperty("type")&&(r.type=t.enums===String?c.onnx.AttributeProto.AttributeType[e.type]:e.type),null!=e.refAttrName&&e.hasOwnProperty("refAttrName")&&(r.refAttrName=e.refAttrName),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.AttributeType=function(){var e={},t=Object.create(e);return t[e[0]="UNDEFINED"]=0,t[e[1]="FLOAT"]=1,t[e[2]="INT"]=2,t[e[3]="STRING"]=3,t[e[4]="TENSOR"]=4,t[e[5]="GRAPH"]=5,t[e[6]="FLOATS"]=6,t[e[7]="INTS"]=7,t[e[8]="STRINGS"]=8,t[e[9]="TENSORS"]=9,t[e[10]="GRAPHS"]=10,t}(),e}(),o.ValueInfoProto=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.name="",e.prototype.type=null,e.prototype.docString="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.name&&e.hasOwnProperty("name")&&t.uint32(10).string(e.name),null!=e.type&&e.hasOwnProperty("type")&&c.onnx.TypeProto.encode(e.type,t.uint32(18).fork()).ldelim(),null!=e.docString&&e.hasOwnProperty("docString")&&t.uint32(26).string(e.docString),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.onnx.ValueInfoProto;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.name=e.string();break;case 2:n.type=c.onnx.TypeProto.decode(e,e.uint32());break;case 3:n.docString=e.string();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.name&&e.hasOwnProperty("name")&&!u.isString(e.name))return"name: string expected";if(null!=e.type&&e.hasOwnProperty("type")){var t=c.onnx.TypeProto.verify(e.type);if(t)return"type."+t}return null!=e.docString&&e.hasOwnProperty("docString")&&!u.isString(e.docString)?"docString: string expected":null},e.fromObject=function(e){if(e instanceof c.onnx.ValueInfoProto)return e;var t=new c.onnx.ValueInfoProto;if(null!=e.name&&(t.name=String(e.name)),null!=e.type){if("object"!=typeof e.type)throw TypeError(".onnx.ValueInfoProto.type: object expected");t.type=c.onnx.TypeProto.fromObject(e.type)}return null!=e.docString&&(t.docString=String(e.docString)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.name="",r.type=null,r.docString=""),null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),null!=e.type&&e.hasOwnProperty("type")&&(r.type=c.onnx.TypeProto.toObject(e.type,t)),null!=e.docString&&e.hasOwnProperty("docString")&&(r.docString=e.docString),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e}(),o.NodeProto=function(){function e(e){if(this.input=[],this.output=[],this.attribute=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.input=u.emptyArray,e.prototype.output=u.emptyArray,e.prototype.name="",e.prototype.opType="",e.prototype.domain="",e.prototype.attribute=u.emptyArray,e.prototype.docString="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=l.create()),null!=e.input&&e.input.length)for(var r=0;r<e.input.length;++r)t.uint32(10).string(e.input[r]);if(null!=e.output&&e.output.length)for(r=0;r<e.output.length;++r)t.uint32(18).string(e.output[r]);if(null!=e.name&&e.hasOwnProperty("name")&&t.uint32(26).string(e.name),null!=e.opType&&e.hasOwnProperty("opType")&&t.uint32(34).string(e.opType),null!=e.attribute&&e.attribute.length)for(r=0;r<e.attribute.length;++r)c.onnx.AttributeProto.encode(e.attribute[r],t.uint32(42).fork()).ldelim();return null!=e.docString&&e.hasOwnProperty("docString")&&t.uint32(50).string(e.docString),null!=e.domain&&e.hasOwnProperty("domain")&&t.uint32(58).string(e.domain),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.onnx.NodeProto;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.input&&n.input.length||(n.input=[]),n.input.push(e.string());break;case 2:n.output&&n.output.length||(n.output=[]),n.output.push(e.string());break;case 3:n.name=e.string();break;case 4:n.opType=e.string();break;case 7:n.domain=e.string();break;case 5:n.attribute&&n.attribute.length||(n.attribute=[]),n.attribute.push(c.onnx.AttributeProto.decode(e,e.uint32()));break;case 6:n.docString=e.string();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.input&&e.hasOwnProperty("input")){if(!Array.isArray(e.input))return"input: array expected";for(var t=0;t<e.input.length;++t)if(!u.isString(e.input[t]))return"input: string[] expected"}if(null!=e.output&&e.hasOwnProperty("output")){if(!Array.isArray(e.output))return"output: array expected";for(t=0;t<e.output.length;++t)if(!u.isString(e.output[t]))return"output: string[] expected"}if(null!=e.name&&e.hasOwnProperty("name")&&!u.isString(e.name))return"name: string expected";if(null!=e.opType&&e.hasOwnProperty("opType")&&!u.isString(e.opType))return"opType: string expected";if(null!=e.domain&&e.hasOwnProperty("domain")&&!u.isString(e.domain))return"domain: string expected";if(null!=e.attribute&&e.hasOwnProperty("attribute")){if(!Array.isArray(e.attribute))return"attribute: array expected";for(t=0;t<e.attribute.length;++t){var r=c.onnx.AttributeProto.verify(e.attribute[t]);if(r)return"attribute."+r}}return null!=e.docString&&e.hasOwnProperty("docString")&&!u.isString(e.docString)?"docString: string expected":null},e.fromObject=function(e){if(e instanceof c.onnx.NodeProto)return e;var t=new c.onnx.NodeProto;if(e.input){if(!Array.isArray(e.input))throw TypeError(".onnx.NodeProto.input: array expected");t.input=[];for(var r=0;r<e.input.length;++r)t.input[r]=String(e.input[r])}if(e.output){if(!Array.isArray(e.output))throw TypeError(".onnx.NodeProto.output: array expected");for(t.output=[],r=0;r<e.output.length;++r)t.output[r]=String(e.output[r])}if(null!=e.name&&(t.name=String(e.name)),null!=e.opType&&(t.opType=String(e.opType)),null!=e.domain&&(t.domain=String(e.domain)),e.attribute){if(!Array.isArray(e.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(t.attribute=[],r=0;r<e.attribute.length;++r){if("object"!=typeof e.attribute[r])throw TypeError(".onnx.NodeProto.attribute: object expected");t.attribute[r]=c.onnx.AttributeProto.fromObject(e.attribute[r])}}return null!=e.docString&&(t.docString=String(e.docString)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.input=[],r.output=[],r.attribute=[]),t.defaults&&(r.name="",r.opType="",r.docString="",r.domain=""),e.input&&e.input.length){r.input=[];for(var n=0;n<e.input.length;++n)r.input[n]=e.input[n]}if(e.output&&e.output.length)for(r.output=[],n=0;n<e.output.length;++n)r.output[n]=e.output[n];if(null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),null!=e.opType&&e.hasOwnProperty("opType")&&(r.opType=e.opType),e.attribute&&e.attribute.length)for(r.attribute=[],n=0;n<e.attribute.length;++n)r.attribute[n]=c.onnx.AttributeProto.toObject(e.attribute[n],t);return null!=e.docString&&e.hasOwnProperty("docString")&&(r.docString=e.docString),null!=e.domain&&e.hasOwnProperty("domain")&&(r.domain=e.domain),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e}(),o.ModelProto=function(){function e(e){if(this.opsetImport=[],this.metadataProps=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.irVersion=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.opsetImport=u.emptyArray,e.prototype.producerName="",e.prototype.producerVersion="",e.prototype.domain="",e.prototype.modelVersion=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.docString="",e.prototype.graph=null,e.prototype.metadataProps=u.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=l.create()),null!=e.irVersion&&e.hasOwnProperty("irVersion")&&t.uint32(8).int64(e.irVersion),null!=e.producerName&&e.hasOwnProperty("producerName")&&t.uint32(18).string(e.producerName),null!=e.producerVersion&&e.hasOwnProperty("producerVersion")&&t.uint32(26).string(e.producerVersion),null!=e.domain&&e.hasOwnProperty("domain")&&t.uint32(34).string(e.domain),null!=e.modelVersion&&e.hasOwnProperty("modelVersion")&&t.uint32(40).int64(e.modelVersion),null!=e.docString&&e.hasOwnProperty("docString")&&t.uint32(50).string(e.docString),null!=e.graph&&e.hasOwnProperty("graph")&&c.onnx.GraphProto.encode(e.graph,t.uint32(58).fork()).ldelim(),null!=e.opsetImport&&e.opsetImport.length)for(var r=0;r<e.opsetImport.length;++r)c.onnx.OperatorSetIdProto.encode(e.opsetImport[r],t.uint32(66).fork()).ldelim();if(null!=e.metadataProps&&e.metadataProps.length)for(r=0;r<e.metadataProps.length;++r)c.onnx.StringStringEntryProto.encode(e.metadataProps[r],t.uint32(114).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.onnx.ModelProto;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.irVersion=e.int64();break;case 8:n.opsetImport&&n.opsetImport.length||(n.opsetImport=[]),n.opsetImport.push(c.onnx.OperatorSetIdProto.decode(e,e.uint32()));break;case 2:n.producerName=e.string();break;case 3:n.producerVersion=e.string();break;case 4:n.domain=e.string();break;case 5:n.modelVersion=e.int64();break;case 6:n.docString=e.string();break;case 7:n.graph=c.onnx.GraphProto.decode(e,e.uint32());break;case 14:n.metadataProps&&n.metadataProps.length||(n.metadataProps=[]),n.metadataProps.push(c.onnx.StringStringEntryProto.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.irVersion&&e.hasOwnProperty("irVersion")&&!(u.isInteger(e.irVersion)||e.irVersion&&u.isInteger(e.irVersion.low)&&u.isInteger(e.irVersion.high)))return"irVersion: integer|Long expected";if(null!=e.opsetImport&&e.hasOwnProperty("opsetImport")){if(!Array.isArray(e.opsetImport))return"opsetImport: array expected";for(var t,r=0;r<e.opsetImport.length;++r)if(t=c.onnx.OperatorSetIdProto.verify(e.opsetImport[r]))return"opsetImport."+t}if(null!=e.producerName&&e.hasOwnProperty("producerName")&&!u.isString(e.producerName))return"producerName: string expected";if(null!=e.producerVersion&&e.hasOwnProperty("producerVersion")&&!u.isString(e.producerVersion))return"producerVersion: string expected";if(null!=e.domain&&e.hasOwnProperty("domain")&&!u.isString(e.domain))return"domain: string expected";if(null!=e.modelVersion&&e.hasOwnProperty("modelVersion")&&!(u.isInteger(e.modelVersion)||e.modelVersion&&u.isInteger(e.modelVersion.low)&&u.isInteger(e.modelVersion.high)))return"modelVersion: integer|Long expected";if(null!=e.docString&&e.hasOwnProperty("docString")&&!u.isString(e.docString))return"docString: string expected";if(null!=e.graph&&e.hasOwnProperty("graph")&&(t=c.onnx.GraphProto.verify(e.graph)))return"graph."+t;if(null!=e.metadataProps&&e.hasOwnProperty("metadataProps")){if(!Array.isArray(e.metadataProps))return"metadataProps: array expected";for(r=0;r<e.metadataProps.length;++r)if(t=c.onnx.StringStringEntryProto.verify(e.metadataProps[r]))return"metadataProps."+t}return null},e.fromObject=function(e){if(e instanceof c.onnx.ModelProto)return e;var t=new c.onnx.ModelProto;if(null!=e.irVersion&&(u.Long?(t.irVersion=u.Long.fromValue(e.irVersion)).unsigned=!1:"string"==typeof e.irVersion?t.irVersion=parseInt(e.irVersion,10):"number"==typeof e.irVersion?t.irVersion=e.irVersion:"object"==typeof e.irVersion&&(t.irVersion=new u.LongBits(e.irVersion.low>>>0,e.irVersion.high>>>0).toNumber())),e.opsetImport){if(!Array.isArray(e.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");t.opsetImport=[];for(var r=0;r<e.opsetImport.length;++r){if("object"!=typeof e.opsetImport[r])throw TypeError(".onnx.ModelProto.opsetImport: object expected");t.opsetImport[r]=c.onnx.OperatorSetIdProto.fromObject(e.opsetImport[r])}}if(null!=e.producerName&&(t.producerName=String(e.producerName)),null!=e.producerVersion&&(t.producerVersion=String(e.producerVersion)),null!=e.domain&&(t.domain=String(e.domain)),null!=e.modelVersion&&(u.Long?(t.modelVersion=u.Long.fromValue(e.modelVersion)).unsigned=!1:"string"==typeof e.modelVersion?t.modelVersion=parseInt(e.modelVersion,10):"number"==typeof e.modelVersion?t.modelVersion=e.modelVersion:"object"==typeof e.modelVersion&&(t.modelVersion=new u.LongBits(e.modelVersion.low>>>0,e.modelVersion.high>>>0).toNumber())),null!=e.docString&&(t.docString=String(e.docString)),null!=e.graph){if("object"!=typeof e.graph)throw TypeError(".onnx.ModelProto.graph: object expected");t.graph=c.onnx.GraphProto.fromObject(e.graph)}if(e.metadataProps){if(!Array.isArray(e.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(t.metadataProps=[],r=0;r<e.metadataProps.length;++r){if("object"!=typeof e.metadataProps[r])throw TypeError(".onnx.ModelProto.metadataProps: object expected");t.metadataProps[r]=c.onnx.StringStringEntryProto.fromObject(e.metadataProps[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.opsetImport=[],r.metadataProps=[]),t.defaults){if(u.Long){var n=new u.Long(0,0,!1);r.irVersion=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.irVersion=t.longs===String?"0":0;r.producerName="",r.producerVersion="",r.domain="",u.Long?(n=new u.Long(0,0,!1),r.modelVersion=t.longs===String?n.toString():t.longs===Number?n.toNumber():n):r.modelVersion=t.longs===String?"0":0,r.docString="",r.graph=null}if(null!=e.irVersion&&e.hasOwnProperty("irVersion")&&("number"==typeof e.irVersion?r.irVersion=t.longs===String?String(e.irVersion):e.irVersion:r.irVersion=t.longs===String?u.Long.prototype.toString.call(e.irVersion):t.longs===Number?new u.LongBits(e.irVersion.low>>>0,e.irVersion.high>>>0).toNumber():e.irVersion),null!=e.producerName&&e.hasOwnProperty("producerName")&&(r.producerName=e.producerName),null!=e.producerVersion&&e.hasOwnProperty("producerVersion")&&(r.producerVersion=e.producerVersion),null!=e.domain&&e.hasOwnProperty("domain")&&(r.domain=e.domain),null!=e.modelVersion&&e.hasOwnProperty("modelVersion")&&("number"==typeof e.modelVersion?r.modelVersion=t.longs===String?String(e.modelVersion):e.modelVersion:r.modelVersion=t.longs===String?u.Long.prototype.toString.call(e.modelVersion):t.longs===Number?new u.LongBits(e.modelVersion.low>>>0,e.modelVersion.high>>>0).toNumber():e.modelVersion),null!=e.docString&&e.hasOwnProperty("docString")&&(r.docString=e.docString),null!=e.graph&&e.hasOwnProperty("graph")&&(r.graph=c.onnx.GraphProto.toObject(e.graph,t)),e.opsetImport&&e.opsetImport.length){r.opsetImport=[];for(var i=0;i<e.opsetImport.length;++i)r.opsetImport[i]=c.onnx.OperatorSetIdProto.toObject(e.opsetImport[i],t)}if(e.metadataProps&&e.metadataProps.length)for(r.metadataProps=[],i=0;i<e.metadataProps.length;++i)r.metadataProps[i]=c.onnx.StringStringEntryProto.toObject(e.metadataProps[i],t);return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e}(),o.StringStringEntryProto=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.key="",e.prototype.value="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.key&&e.hasOwnProperty("key")&&t.uint32(10).string(e.key),null!=e.value&&e.hasOwnProperty("value")&&t.uint32(18).string(e.value),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.onnx.StringStringEntryProto;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.key=e.string();break;case 2:n.value=e.string();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.key&&e.hasOwnProperty("key")&&!u.isString(e.key)?"key: string expected":null!=e.value&&e.hasOwnProperty("value")&&!u.isString(e.value)?"value: string expected":null},e.fromObject=function(e){if(e instanceof c.onnx.StringStringEntryProto)return e;var t=new c.onnx.StringStringEntryProto;return null!=e.key&&(t.key=String(e.key)),null!=e.value&&(t.value=String(e.value)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.key="",r.value=""),null!=e.key&&e.hasOwnProperty("key")&&(r.key=e.key),null!=e.value&&e.hasOwnProperty("value")&&(r.value=e.value),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e}(),o.TensorAnnotation=function(){function e(e){if(this.quantParameterTensorNames=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.tensorName="",e.prototype.quantParameterTensorNames=u.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=l.create()),null!=e.tensorName&&e.hasOwnProperty("tensorName")&&t.uint32(10).string(e.tensorName),null!=e.quantParameterTensorNames&&e.quantParameterTensorNames.length)for(var r=0;r<e.quantParameterTensorNames.length;++r)c.onnx.StringStringEntryProto.encode(e.quantParameterTensorNames[r],t.uint32(18).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.onnx.TensorAnnotation;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.tensorName=e.string();break;case 2:n.quantParameterTensorNames&&n.quantParameterTensorNames.length||(n.quantParameterTensorNames=[]),n.quantParameterTensorNames.push(c.onnx.StringStringEntryProto.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.tensorName&&e.hasOwnProperty("tensorName")&&!u.isString(e.tensorName))return"tensorName: string expected";if(null!=e.quantParameterTensorNames&&e.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(e.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var t=0;t<e.quantParameterTensorNames.length;++t){var r=c.onnx.StringStringEntryProto.verify(e.quantParameterTensorNames[t]);if(r)return"quantParameterTensorNames."+r}}return null},e.fromObject=function(e){if(e instanceof c.onnx.TensorAnnotation)return e;var t=new c.onnx.TensorAnnotation;if(null!=e.tensorName&&(t.tensorName=String(e.tensorName)),e.quantParameterTensorNames){if(!Array.isArray(e.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");t.quantParameterTensorNames=[];for(var r=0;r<e.quantParameterTensorNames.length;++r){if("object"!=typeof e.quantParameterTensorNames[r])throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");t.quantParameterTensorNames[r]=c.onnx.StringStringEntryProto.fromObject(e.quantParameterTensorNames[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.quantParameterTensorNames=[]),t.defaults&&(r.tensorName=""),null!=e.tensorName&&e.hasOwnProperty("tensorName")&&(r.tensorName=e.tensorName),e.quantParameterTensorNames&&e.quantParameterTensorNames.length){r.quantParameterTensorNames=[];for(var n=0;n<e.quantParameterTensorNames.length;++n)r.quantParameterTensorNames[n]=c.onnx.StringStringEntryProto.toObject(e.quantParameterTensorNames[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e}(),o.GraphProto=function(){function e(e){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.node=u.emptyArray,e.prototype.name="",e.prototype.initializer=u.emptyArray,e.prototype.docString="",e.prototype.input=u.emptyArray,e.prototype.output=u.emptyArray,e.prototype.valueInfo=u.emptyArray,e.prototype.quantizationAnnotation=u.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=l.create()),null!=e.node&&e.node.length)for(var r=0;r<e.node.length;++r)c.onnx.NodeProto.encode(e.node[r],t.uint32(10).fork()).ldelim();if(null!=e.name&&e.hasOwnProperty("name")&&t.uint32(18).string(e.name),null!=e.initializer&&e.initializer.length)for(r=0;r<e.initializer.length;++r)c.onnx.TensorProto.encode(e.initializer[r],t.uint32(42).fork()).ldelim();if(null!=e.docString&&e.hasOwnProperty("docString")&&t.uint32(82).string(e.docString),null!=e.input&&e.input.length)for(r=0;r<e.input.length;++r)c.onnx.ValueInfoProto.encode(e.input[r],t.uint32(90).fork()).ldelim();if(null!=e.output&&e.output.length)for(r=0;r<e.output.length;++r)c.onnx.ValueInfoProto.encode(e.output[r],t.uint32(98).fork()).ldelim();if(null!=e.valueInfo&&e.valueInfo.length)for(r=0;r<e.valueInfo.length;++r)c.onnx.ValueInfoProto.encode(e.valueInfo[r],t.uint32(106).fork()).ldelim();if(null!=e.quantizationAnnotation&&e.quantizationAnnotation.length)for(r=0;r<e.quantizationAnnotation.length;++r)c.onnx.TensorAnnotation.encode(e.quantizationAnnotation[r],t.uint32(114).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.onnx.GraphProto;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.node&&n.node.length||(n.node=[]),n.node.push(c.onnx.NodeProto.decode(e,e.uint32()));break;case 2:n.name=e.string();break;case 5:n.initializer&&n.initializer.length||(n.initializer=[]),n.initializer.push(c.onnx.TensorProto.decode(e,e.uint32()));break;case 10:n.docString=e.string();break;case 11:n.input&&n.input.length||(n.input=[]),n.input.push(c.onnx.ValueInfoProto.decode(e,e.uint32()));break;case 12:n.output&&n.output.length||(n.output=[]),n.output.push(c.onnx.ValueInfoProto.decode(e,e.uint32()));break;case 13:n.valueInfo&&n.valueInfo.length||(n.valueInfo=[]),n.valueInfo.push(c.onnx.ValueInfoProto.decode(e,e.uint32()));break;case 14:n.quantizationAnnotation&&n.quantizationAnnotation.length||(n.quantizationAnnotation=[]),n.quantizationAnnotation.push(c.onnx.TensorAnnotation.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.node&&e.hasOwnProperty("node")){if(!Array.isArray(e.node))return"node: array expected";for(var t,r=0;r<e.node.length;++r)if(t=c.onnx.NodeProto.verify(e.node[r]))return"node."+t}if(null!=e.name&&e.hasOwnProperty("name")&&!u.isString(e.name))return"name: string expected";if(null!=e.initializer&&e.hasOwnProperty("initializer")){if(!Array.isArray(e.initializer))return"initializer: array expected";for(r=0;r<e.initializer.length;++r)if(t=c.onnx.TensorProto.verify(e.initializer[r]))return"initializer."+t}if(null!=e.docString&&e.hasOwnProperty("docString")&&!u.isString(e.docString))return"docString: string expected";if(null!=e.input&&e.hasOwnProperty("input")){if(!Array.isArray(e.input))return"input: array expected";for(r=0;r<e.input.length;++r)if(t=c.onnx.ValueInfoProto.verify(e.input[r]))return"input."+t}if(null!=e.output&&e.hasOwnProperty("output")){if(!Array.isArray(e.output))return"output: array expected";for(r=0;r<e.output.length;++r)if(t=c.onnx.ValueInfoProto.verify(e.output[r]))return"output."+t}if(null!=e.valueInfo&&e.hasOwnProperty("valueInfo")){if(!Array.isArray(e.valueInfo))return"valueInfo: array expected";for(r=0;r<e.valueInfo.length;++r)if(t=c.onnx.ValueInfoProto.verify(e.valueInfo[r]))return"valueInfo."+t}if(null!=e.quantizationAnnotation&&e.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(e.quantizationAnnotation))return"quantizationAnnotation: array expected";for(r=0;r<e.quantizationAnnotation.length;++r)if(t=c.onnx.TensorAnnotation.verify(e.quantizationAnnotation[r]))return"quantizationAnnotation."+t}return null},e.fromObject=function(e){if(e instanceof c.onnx.GraphProto)return e;var t=new c.onnx.GraphProto;if(e.node){if(!Array.isArray(e.node))throw TypeError(".onnx.GraphProto.node: array expected");t.node=[];for(var r=0;r<e.node.length;++r){if("object"!=typeof e.node[r])throw TypeError(".onnx.GraphProto.node: object expected");t.node[r]=c.onnx.NodeProto.fromObject(e.node[r])}}if(null!=e.name&&(t.name=String(e.name)),e.initializer){if(!Array.isArray(e.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(t.initializer=[],r=0;r<e.initializer.length;++r){if("object"!=typeof e.initializer[r])throw TypeError(".onnx.GraphProto.initializer: object expected");t.initializer[r]=c.onnx.TensorProto.fromObject(e.initializer[r])}}if(null!=e.docString&&(t.docString=String(e.docString)),e.input){if(!Array.isArray(e.input))throw TypeError(".onnx.GraphProto.input: array expected");for(t.input=[],r=0;r<e.input.length;++r){if("object"!=typeof e.input[r])throw TypeError(".onnx.GraphProto.input: object expected");t.input[r]=c.onnx.ValueInfoProto.fromObject(e.input[r])}}if(e.output){if(!Array.isArray(e.output))throw TypeError(".onnx.GraphProto.output: array expected");for(t.output=[],r=0;r<e.output.length;++r){if("object"!=typeof e.output[r])throw TypeError(".onnx.GraphProto.output: object expected");t.output[r]=c.onnx.ValueInfoProto.fromObject(e.output[r])}}if(e.valueInfo){if(!Array.isArray(e.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(t.valueInfo=[],r=0;r<e.valueInfo.length;++r){if("object"!=typeof e.valueInfo[r])throw TypeError(".onnx.GraphProto.valueInfo: object expected");t.valueInfo[r]=c.onnx.ValueInfoProto.fromObject(e.valueInfo[r])}}if(e.quantizationAnnotation){if(!Array.isArray(e.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(t.quantizationAnnotation=[],r=0;r<e.quantizationAnnotation.length;++r){if("object"!=typeof e.quantizationAnnotation[r])throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");t.quantizationAnnotation[r]=c.onnx.TensorAnnotation.fromObject(e.quantizationAnnotation[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.node=[],r.initializer=[],r.input=[],r.output=[],r.valueInfo=[],r.quantizationAnnotation=[]),t.defaults&&(r.name="",r.docString=""),e.node&&e.node.length){r.node=[];for(var n=0;n<e.node.length;++n)r.node[n]=c.onnx.NodeProto.toObject(e.node[n],t)}if(null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),e.initializer&&e.initializer.length)for(r.initializer=[],n=0;n<e.initializer.length;++n)r.initializer[n]=c.onnx.TensorProto.toObject(e.initializer[n],t);if(null!=e.docString&&e.hasOwnProperty("docString")&&(r.docString=e.docString),e.input&&e.input.length)for(r.input=[],n=0;n<e.input.length;++n)r.input[n]=c.onnx.ValueInfoProto.toObject(e.input[n],t);if(e.output&&e.output.length)for(r.output=[],n=0;n<e.output.length;++n)r.output[n]=c.onnx.ValueInfoProto.toObject(e.output[n],t);if(e.valueInfo&&e.valueInfo.length)for(r.valueInfo=[],n=0;n<e.valueInfo.length;++n)r.valueInfo[n]=c.onnx.ValueInfoProto.toObject(e.valueInfo[n],t);if(e.quantizationAnnotation&&e.quantizationAnnotation.length)for(r.quantizationAnnotation=[],n=0;n<e.quantizationAnnotation.length;++n)r.quantizationAnnotation[n]=c.onnx.TensorAnnotation.toObject(e.quantizationAnnotation[n],t);return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e}(),o.TensorProto=function(){function e(e){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.dims=u.emptyArray,e.prototype.dataType=0,e.prototype.segment=null,e.prototype.floatData=u.emptyArray,e.prototype.int32Data=u.emptyArray,e.prototype.stringData=u.emptyArray,e.prototype.int64Data=u.emptyArray,e.prototype.name="",e.prototype.docString="",e.prototype.rawData=u.newBuffer([]),e.prototype.externalData=u.emptyArray,e.prototype.dataLocation=0,e.prototype.doubleData=u.emptyArray,e.prototype.uint64Data=u.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=l.create()),null!=e.dims&&e.dims.length){t.uint32(10).fork();for(var r=0;r<e.dims.length;++r)t.int64(e.dims[r]);t.ldelim()}if(null!=e.dataType&&e.hasOwnProperty("dataType")&&t.uint32(16).int32(e.dataType),null!=e.segment&&e.hasOwnProperty("segment")&&c.onnx.TensorProto.Segment.encode(e.segment,t.uint32(26).fork()).ldelim(),null!=e.floatData&&e.floatData.length){for(t.uint32(34).fork(),r=0;r<e.floatData.length;++r)t.float(e.floatData[r]);t.ldelim()}if(null!=e.int32Data&&e.int32Data.length){for(t.uint32(42).fork(),r=0;r<e.int32Data.length;++r)t.int32(e.int32Data[r]);t.ldelim()}if(null!=e.stringData&&e.stringData.length)for(r=0;r<e.stringData.length;++r)t.uint32(50).bytes(e.stringData[r]);if(null!=e.int64Data&&e.int64Data.length){for(t.uint32(58).fork(),r=0;r<e.int64Data.length;++r)t.int64(e.int64Data[r]);t.ldelim()}if(null!=e.name&&e.hasOwnProperty("name")&&t.uint32(66).string(e.name),null!=e.rawData&&e.hasOwnProperty("rawData")&&t.uint32(74).bytes(e.rawData),null!=e.doubleData&&e.doubleData.length){for(t.uint32(82).fork(),r=0;r<e.doubleData.length;++r)t.double(e.doubleData[r]);t.ldelim()}if(null!=e.uint64Data&&e.uint64Data.length){for(t.uint32(90).fork(),r=0;r<e.uint64Data.length;++r)t.uint64(e.uint64Data[r]);t.ldelim()}if(null!=e.docString&&e.hasOwnProperty("docString")&&t.uint32(98).string(e.docString),null!=e.externalData&&e.externalData.length)for(r=0;r<e.externalData.length;++r)c.onnx.StringStringEntryProto.encode(e.externalData[r],t.uint32(106).fork()).ldelim();return null!=e.dataLocation&&e.hasOwnProperty("dataLocation")&&t.uint32(112).int32(e.dataLocation),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.onnx.TensorProto;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:if(n.dims&&n.dims.length||(n.dims=[]),2==(7&i))for(var o=e.uint32()+e.pos;e.pos<o;)n.dims.push(e.int64());else n.dims.push(e.int64());break;case 2:n.dataType=e.int32();break;case 3:n.segment=c.onnx.TensorProto.Segment.decode(e,e.uint32());break;case 4:if(n.floatData&&n.floatData.length||(n.floatData=[]),2==(7&i))for(o=e.uint32()+e.pos;e.pos<o;)n.floatData.push(e.float());else n.floatData.push(e.float());break;case 5:if(n.int32Data&&n.int32Data.length||(n.int32Data=[]),2==(7&i))for(o=e.uint32()+e.pos;e.pos<o;)n.int32Data.push(e.int32());else n.int32Data.push(e.int32());break;case 6:n.stringData&&n.stringData.length||(n.stringData=[]),n.stringData.push(e.bytes());break;case 7:if(n.int64Data&&n.int64Data.length||(n.int64Data=[]),2==(7&i))for(o=e.uint32()+e.pos;e.pos<o;)n.int64Data.push(e.int64());else n.int64Data.push(e.int64());break;case 8:n.name=e.string();break;case 12:n.docString=e.string();break;case 9:n.rawData=e.bytes();break;case 13:n.externalData&&n.externalData.length||(n.externalData=[]),n.externalData.push(c.onnx.StringStringEntryProto.decode(e,e.uint32()));break;case 14:n.dataLocation=e.int32();break;case 10:if(n.doubleData&&n.doubleData.length||(n.doubleData=[]),2==(7&i))for(o=e.uint32()+e.pos;e.pos<o;)n.doubleData.push(e.double());else n.doubleData.push(e.double());break;case 11:if(n.uint64Data&&n.uint64Data.length||(n.uint64Data=[]),2==(7&i))for(o=e.uint32()+e.pos;e.pos<o;)n.uint64Data.push(e.uint64());else n.uint64Data.push(e.uint64());break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.dims&&e.hasOwnProperty("dims")){if(!Array.isArray(e.dims))return"dims: array expected";for(var t,r=0;r<e.dims.length;++r)if(!(u.isInteger(e.dims[r])||e.dims[r]&&u.isInteger(e.dims[r].low)&&u.isInteger(e.dims[r].high)))return"dims: integer|Long[] expected"}if(null!=e.dataType&&e.hasOwnProperty("dataType")&&!u.isInteger(e.dataType))return"dataType: integer expected";if(null!=e.segment&&e.hasOwnProperty("segment")&&(t=c.onnx.TensorProto.Segment.verify(e.segment)))return"segment."+t;if(null!=e.floatData&&e.hasOwnProperty("floatData")){if(!Array.isArray(e.floatData))return"floatData: array expected";for(r=0;r<e.floatData.length;++r)if("number"!=typeof e.floatData[r])return"floatData: number[] expected"}if(null!=e.int32Data&&e.hasOwnProperty("int32Data")){if(!Array.isArray(e.int32Data))return"int32Data: array expected";for(r=0;r<e.int32Data.length;++r)if(!u.isInteger(e.int32Data[r]))return"int32Data: integer[] expected"}if(null!=e.stringData&&e.hasOwnProperty("stringData")){if(!Array.isArray(e.stringData))return"stringData: array expected";for(r=0;r<e.stringData.length;++r)if(!(e.stringData[r]&&"number"==typeof e.stringData[r].length||u.isString(e.stringData[r])))return"stringData: buffer[] expected"}if(null!=e.int64Data&&e.hasOwnProperty("int64Data")){if(!Array.isArray(e.int64Data))return"int64Data: array expected";for(r=0;r<e.int64Data.length;++r)if(!(u.isInteger(e.int64Data[r])||e.int64Data[r]&&u.isInteger(e.int64Data[r].low)&&u.isInteger(e.int64Data[r].high)))return"int64Data: integer|Long[] expected"}if(null!=e.name&&e.hasOwnProperty("name")&&!u.isString(e.name))return"name: string expected";if(null!=e.docString&&e.hasOwnProperty("docString")&&!u.isString(e.docString))return"docString: string expected";if(null!=e.rawData&&e.hasOwnProperty("rawData")&&!(e.rawData&&"number"==typeof e.rawData.length||u.isString(e.rawData)))return"rawData: buffer expected";if(null!=e.externalData&&e.hasOwnProperty("externalData")){if(!Array.isArray(e.externalData))return"externalData: array expected";for(r=0;r<e.externalData.length;++r)if(t=c.onnx.StringStringEntryProto.verify(e.externalData[r]))return"externalData."+t}if(null!=e.dataLocation&&e.hasOwnProperty("dataLocation"))switch(e.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(null!=e.doubleData&&e.hasOwnProperty("doubleData")){if(!Array.isArray(e.doubleData))return"doubleData: array expected";for(r=0;r<e.doubleData.length;++r)if("number"!=typeof e.doubleData[r])return"doubleData: number[] expected"}if(null!=e.uint64Data&&e.hasOwnProperty("uint64Data")){if(!Array.isArray(e.uint64Data))return"uint64Data: array expected";for(r=0;r<e.uint64Data.length;++r)if(!(u.isInteger(e.uint64Data[r])||e.uint64Data[r]&&u.isInteger(e.uint64Data[r].low)&&u.isInteger(e.uint64Data[r].high)))return"uint64Data: integer|Long[] expected"}return null},e.fromObject=function(e){if(e instanceof c.onnx.TensorProto)return e;var t=new c.onnx.TensorProto;if(e.dims){if(!Array.isArray(e.dims))throw TypeError(".onnx.TensorProto.dims: array expected");t.dims=[];for(var r=0;r<e.dims.length;++r)u.Long?(t.dims[r]=u.Long.fromValue(e.dims[r])).unsigned=!1:"string"==typeof e.dims[r]?t.dims[r]=parseInt(e.dims[r],10):"number"==typeof e.dims[r]?t.dims[r]=e.dims[r]:"object"==typeof e.dims[r]&&(t.dims[r]=new u.LongBits(e.dims[r].low>>>0,e.dims[r].high>>>0).toNumber())}if(null!=e.dataType&&(t.dataType=0|e.dataType),null!=e.segment){if("object"!=typeof e.segment)throw TypeError(".onnx.TensorProto.segment: object expected");t.segment=c.onnx.TensorProto.Segment.fromObject(e.segment)}if(e.floatData){if(!Array.isArray(e.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(t.floatData=[],r=0;r<e.floatData.length;++r)t.floatData[r]=Number(e.floatData[r])}if(e.int32Data){if(!Array.isArray(e.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(t.int32Data=[],r=0;r<e.int32Data.length;++r)t.int32Data[r]=0|e.int32Data[r]}if(e.stringData){if(!Array.isArray(e.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(t.stringData=[],r=0;r<e.stringData.length;++r)"string"==typeof e.stringData[r]?u.base64.decode(e.stringData[r],t.stringData[r]=u.newBuffer(u.base64.length(e.stringData[r])),0):e.stringData[r].length&&(t.stringData[r]=e.stringData[r])}if(e.int64Data){if(!Array.isArray(e.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(t.int64Data=[],r=0;r<e.int64Data.length;++r)u.Long?(t.int64Data[r]=u.Long.fromValue(e.int64Data[r])).unsigned=!1:"string"==typeof e.int64Data[r]?t.int64Data[r]=parseInt(e.int64Data[r],10):"number"==typeof e.int64Data[r]?t.int64Data[r]=e.int64Data[r]:"object"==typeof e.int64Data[r]&&(t.int64Data[r]=new u.LongBits(e.int64Data[r].low>>>0,e.int64Data[r].high>>>0).toNumber())}if(null!=e.name&&(t.name=String(e.name)),null!=e.docString&&(t.docString=String(e.docString)),null!=e.rawData&&("string"==typeof e.rawData?u.base64.decode(e.rawData,t.rawData=u.newBuffer(u.base64.length(e.rawData)),0):e.rawData.length&&(t.rawData=e.rawData)),e.externalData){if(!Array.isArray(e.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(t.externalData=[],r=0;r<e.externalData.length;++r){if("object"!=typeof e.externalData[r])throw TypeError(".onnx.TensorProto.externalData: object expected");t.externalData[r]=c.onnx.StringStringEntryProto.fromObject(e.externalData[r])}}switch(e.dataLocation){case"DEFAULT":case 0:t.dataLocation=0;break;case"EXTERNAL":case 1:t.dataLocation=1}if(e.doubleData){if(!Array.isArray(e.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(t.doubleData=[],r=0;r<e.doubleData.length;++r)t.doubleData[r]=Number(e.doubleData[r])}if(e.uint64Data){if(!Array.isArray(e.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(t.uint64Data=[],r=0;r<e.uint64Data.length;++r)u.Long?(t.uint64Data[r]=u.Long.fromValue(e.uint64Data[r])).unsigned=!0:"string"==typeof e.uint64Data[r]?t.uint64Data[r]=parseInt(e.uint64Data[r],10):"number"==typeof e.uint64Data[r]?t.uint64Data[r]=e.uint64Data[r]:"object"==typeof e.uint64Data[r]&&(t.uint64Data[r]=new u.LongBits(e.uint64Data[r].low>>>0,e.uint64Data[r].high>>>0).toNumber(!0))}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.dims=[],r.floatData=[],r.int32Data=[],r.stringData=[],r.int64Data=[],r.doubleData=[],r.uint64Data=[],r.externalData=[]),t.defaults&&(r.dataType=0,r.segment=null,r.name="",t.bytes===String?r.rawData="":(r.rawData=[],t.bytes!==Array&&(r.rawData=u.newBuffer(r.rawData))),r.docString="",r.dataLocation=t.enums===String?"DEFAULT":0),e.dims&&e.dims.length){r.dims=[];for(var n=0;n<e.dims.length;++n)"number"==typeof e.dims[n]?r.dims[n]=t.longs===String?String(e.dims[n]):e.dims[n]:r.dims[n]=t.longs===String?u.Long.prototype.toString.call(e.dims[n]):t.longs===Number?new u.LongBits(e.dims[n].low>>>0,e.dims[n].high>>>0).toNumber():e.dims[n]}if(null!=e.dataType&&e.hasOwnProperty("dataType")&&(r.dataType=e.dataType),null!=e.segment&&e.hasOwnProperty("segment")&&(r.segment=c.onnx.TensorProto.Segment.toObject(e.segment,t)),e.floatData&&e.floatData.length)for(r.floatData=[],n=0;n<e.floatData.length;++n)r.floatData[n]=t.json&&!isFinite(e.floatData[n])?String(e.floatData[n]):e.floatData[n];if(e.int32Data&&e.int32Data.length)for(r.int32Data=[],n=0;n<e.int32Data.length;++n)r.int32Data[n]=e.int32Data[n];if(e.stringData&&e.stringData.length)for(r.stringData=[],n=0;n<e.stringData.length;++n)r.stringData[n]=t.bytes===String?u.base64.encode(e.stringData[n],0,e.stringData[n].length):t.bytes===Array?Array.prototype.slice.call(e.stringData[n]):e.stringData[n];if(e.int64Data&&e.int64Data.length)for(r.int64Data=[],n=0;n<e.int64Data.length;++n)"number"==typeof e.int64Data[n]?r.int64Data[n]=t.longs===String?String(e.int64Data[n]):e.int64Data[n]:r.int64Data[n]=t.longs===String?u.Long.prototype.toString.call(e.int64Data[n]):t.longs===Number?new u.LongBits(e.int64Data[n].low>>>0,e.int64Data[n].high>>>0).toNumber():e.int64Data[n];if(null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),null!=e.rawData&&e.hasOwnProperty("rawData")&&(r.rawData=t.bytes===String?u.base64.encode(e.rawData,0,e.rawData.length):t.bytes===Array?Array.prototype.slice.call(e.rawData):e.rawData),e.doubleData&&e.doubleData.length)for(r.doubleData=[],n=0;n<e.doubleData.length;++n)r.doubleData[n]=t.json&&!isFinite(e.doubleData[n])?String(e.doubleData[n]):e.doubleData[n];if(e.uint64Data&&e.uint64Data.length)for(r.uint64Data=[],n=0;n<e.uint64Data.length;++n)"number"==typeof e.uint64Data[n]?r.uint64Data[n]=t.longs===String?String(e.uint64Data[n]):e.uint64Data[n]:r.uint64Data[n]=t.longs===String?u.Long.prototype.toString.call(e.uint64Data[n]):t.longs===Number?new u.LongBits(e.uint64Data[n].low>>>0,e.uint64Data[n].high>>>0).toNumber(!0):e.uint64Data[n];if(null!=e.docString&&e.hasOwnProperty("docString")&&(r.docString=e.docString),e.externalData&&e.externalData.length)for(r.externalData=[],n=0;n<e.externalData.length;++n)r.externalData[n]=c.onnx.StringStringEntryProto.toObject(e.externalData[n],t);return null!=e.dataLocation&&e.hasOwnProperty("dataLocation")&&(r.dataLocation=t.enums===String?c.onnx.TensorProto.DataLocation[e.dataLocation]:e.dataLocation),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.DataType=function(){var e={},t=Object.create(e);return t[e[0]="UNDEFINED"]=0,t[e[1]="FLOAT"]=1,t[e[2]="UINT8"]=2,t[e[3]="INT8"]=3,t[e[4]="UINT16"]=4,t[e[5]="INT16"]=5,t[e[6]="INT32"]=6,t[e[7]="INT64"]=7,t[e[8]="STRING"]=8,t[e[9]="BOOL"]=9,t[e[10]="FLOAT16"]=10,t[e[11]="DOUBLE"]=11,t[e[12]="UINT32"]=12,t[e[13]="UINT64"]=13,t[e[14]="COMPLEX64"]=14,t[e[15]="COMPLEX128"]=15,t[e[16]="BFLOAT16"]=16,t}(),e.Segment=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.begin=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.end=u.Long?u.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.begin&&e.hasOwnProperty("begin")&&t.uint32(8).int64(e.begin),null!=e.end&&e.hasOwnProperty("end")&&t.uint32(16).int64(e.end),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.onnx.TensorProto.Segment;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.begin=e.int64();break;case 2:n.end=e.int64();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.begin&&e.hasOwnProperty("begin")&&!(u.isInteger(e.begin)||e.begin&&u.isInteger(e.begin.low)&&u.isInteger(e.begin.high))?"begin: integer|Long expected":null!=e.end&&e.hasOwnProperty("end")&&!(u.isInteger(e.end)||e.end&&u.isInteger(e.end.low)&&u.isInteger(e.end.high))?"end: integer|Long expected":null},e.fromObject=function(e){if(e instanceof c.onnx.TensorProto.Segment)return e;var t=new c.onnx.TensorProto.Segment;return null!=e.begin&&(u.Long?(t.begin=u.Long.fromValue(e.begin)).unsigned=!1:"string"==typeof e.begin?t.begin=parseInt(e.begin,10):"number"==typeof e.begin?t.begin=e.begin:"object"==typeof e.begin&&(t.begin=new u.LongBits(e.begin.low>>>0,e.begin.high>>>0).toNumber())),null!=e.end&&(u.Long?(t.end=u.Long.fromValue(e.end)).unsigned=!1:"string"==typeof e.end?t.end=parseInt(e.end,10):"number"==typeof e.end?t.end=e.end:"object"==typeof e.end&&(t.end=new u.LongBits(e.end.low>>>0,e.end.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(u.Long){var n=new u.Long(0,0,!1);r.begin=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.begin=t.longs===String?"0":0;u.Long?(n=new u.Long(0,0,!1),r.end=t.longs===String?n.toString():t.longs===Number?n.toNumber():n):r.end=t.longs===String?"0":0}return null!=e.begin&&e.hasOwnProperty("begin")&&("number"==typeof e.begin?r.begin=t.longs===String?String(e.begin):e.begin:r.begin=t.longs===String?u.Long.prototype.toString.call(e.begin):t.longs===Number?new u.LongBits(e.begin.low>>>0,e.begin.high>>>0).toNumber():e.begin),null!=e.end&&e.hasOwnProperty("end")&&("number"==typeof e.end?r.end=t.longs===String?String(e.end):e.end:r.end=t.longs===String?u.Long.prototype.toString.call(e.end):t.longs===Number?new u.LongBits(e.end.low>>>0,e.end.high>>>0).toNumber():e.end),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e}(),e.DataLocation=function(){var e={},t=Object.create(e);return t[e[0]="DEFAULT"]=0,t[e[1]="EXTERNAL"]=1,t}(),e}(),o.TensorShapeProto=function(){function e(e){if(this.dim=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.dim=u.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=l.create()),null!=e.dim&&e.dim.length)for(var r=0;r<e.dim.length;++r)c.onnx.TensorShapeProto.Dimension.encode(e.dim[r],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.onnx.TensorShapeProto;e.pos<r;){var i=e.uint32();i>>>3==1?(n.dim&&n.dim.length||(n.dim=[]),n.dim.push(c.onnx.TensorShapeProto.Dimension.decode(e,e.uint32()))):e.skipType(7&i)}return n},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.dim&&e.hasOwnProperty("dim")){if(!Array.isArray(e.dim))return"dim: array expected";for(var t=0;t<e.dim.length;++t){var r=c.onnx.TensorShapeProto.Dimension.verify(e.dim[t]);if(r)return"dim."+r}}return null},e.fromObject=function(e){if(e instanceof c.onnx.TensorShapeProto)return e;var t=new c.onnx.TensorShapeProto;if(e.dim){if(!Array.isArray(e.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");t.dim=[];for(var r=0;r<e.dim.length;++r){if("object"!=typeof e.dim[r])throw TypeError(".onnx.TensorShapeProto.dim: object expected");t.dim[r]=c.onnx.TensorShapeProto.Dimension.fromObject(e.dim[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.dim=[]),e.dim&&e.dim.length){r.dim=[];for(var n=0;n<e.dim.length;++n)r.dim[n]=c.onnx.TensorShapeProto.Dimension.toObject(e.dim[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.Dimension=function(){var e;function t(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return t.prototype.dimValue=u.Long?u.Long.fromBits(0,0,!1):0,t.prototype.dimParam="",t.prototype.denotation="",Object.defineProperty(t.prototype,"value",{get:u.oneOfGetter(e=["dimValue","dimParam"]),set:u.oneOfSetter(e)}),t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=l.create()),null!=e.dimValue&&e.hasOwnProperty("dimValue")&&t.uint32(8).int64(e.dimValue),null!=e.dimParam&&e.hasOwnProperty("dimParam")&&t.uint32(18).string(e.dimParam),null!=e.denotation&&e.hasOwnProperty("denotation")&&t.uint32(26).string(e.denotation),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.onnx.TensorShapeProto.Dimension;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.dimValue=e.int64();break;case 2:n.dimParam=e.string();break;case 3:n.denotation=e.string();break;default:e.skipType(7&i)}}return n},t.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(null!=e.dimValue&&e.hasOwnProperty("dimValue")&&(t.value=1,!(u.isInteger(e.dimValue)||e.dimValue&&u.isInteger(e.dimValue.low)&&u.isInteger(e.dimValue.high))))return"dimValue: integer|Long expected";if(null!=e.dimParam&&e.hasOwnProperty("dimParam")){if(1===t.value)return"value: multiple values";if(t.value=1,!u.isString(e.dimParam))return"dimParam: string expected"}return null!=e.denotation&&e.hasOwnProperty("denotation")&&!u.isString(e.denotation)?"denotation: string expected":null},t.fromObject=function(e){if(e instanceof c.onnx.TensorShapeProto.Dimension)return e;var t=new c.onnx.TensorShapeProto.Dimension;return null!=e.dimValue&&(u.Long?(t.dimValue=u.Long.fromValue(e.dimValue)).unsigned=!1:"string"==typeof e.dimValue?t.dimValue=parseInt(e.dimValue,10):"number"==typeof e.dimValue?t.dimValue=e.dimValue:"object"==typeof e.dimValue&&(t.dimValue=new u.LongBits(e.dimValue.low>>>0,e.dimValue.high>>>0).toNumber())),null!=e.dimParam&&(t.dimParam=String(e.dimParam)),null!=e.denotation&&(t.denotation=String(e.denotation)),t},t.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.denotation=""),null!=e.dimValue&&e.hasOwnProperty("dimValue")&&("number"==typeof e.dimValue?r.dimValue=t.longs===String?String(e.dimValue):e.dimValue:r.dimValue=t.longs===String?u.Long.prototype.toString.call(e.dimValue):t.longs===Number?new u.LongBits(e.dimValue.low>>>0,e.dimValue.high>>>0).toNumber():e.dimValue,t.oneofs&&(r.value="dimValue")),null!=e.dimParam&&e.hasOwnProperty("dimParam")&&(r.dimParam=e.dimParam,t.oneofs&&(r.value="dimParam")),null!=e.denotation&&e.hasOwnProperty("denotation")&&(r.denotation=e.denotation),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},t}(),e}(),o.TypeProto=function(){var e;function t(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return t.prototype.tensorType=null,t.prototype.denotation="",Object.defineProperty(t.prototype,"value",{get:u.oneOfGetter(e=["tensorType"]),set:u.oneOfSetter(e)}),t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=l.create()),null!=e.tensorType&&e.hasOwnProperty("tensorType")&&c.onnx.TypeProto.Tensor.encode(e.tensorType,t.uint32(10).fork()).ldelim(),null!=e.denotation&&e.hasOwnProperty("denotation")&&t.uint32(50).string(e.denotation),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.onnx.TypeProto;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.tensorType=c.onnx.TypeProto.Tensor.decode(e,e.uint32());break;case 6:n.denotation=e.string();break;default:e.skipType(7&i)}}return n},t.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.tensorType&&e.hasOwnProperty("tensorType")){var t=c.onnx.TypeProto.Tensor.verify(e.tensorType);if(t)return"tensorType."+t}return null!=e.denotation&&e.hasOwnProperty("denotation")&&!u.isString(e.denotation)?"denotation: string expected":null},t.fromObject=function(e){if(e instanceof c.onnx.TypeProto)return e;var t=new c.onnx.TypeProto;if(null!=e.tensorType){if("object"!=typeof e.tensorType)throw TypeError(".onnx.TypeProto.tensorType: object expected");t.tensorType=c.onnx.TypeProto.Tensor.fromObject(e.tensorType)}return null!=e.denotation&&(t.denotation=String(e.denotation)),t},t.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.denotation=""),null!=e.tensorType&&e.hasOwnProperty("tensorType")&&(r.tensorType=c.onnx.TypeProto.Tensor.toObject(e.tensorType,t),t.oneofs&&(r.value="tensorType")),null!=e.denotation&&e.hasOwnProperty("denotation")&&(r.denotation=e.denotation),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},t.Tensor=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.elemType=0,e.prototype.shape=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.elemType&&e.hasOwnProperty("elemType")&&t.uint32(8).int32(e.elemType),null!=e.shape&&e.hasOwnProperty("shape")&&c.onnx.TensorShapeProto.encode(e.shape,t.uint32(18).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.onnx.TypeProto.Tensor;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.elemType=e.int32();break;case 2:n.shape=c.onnx.TensorShapeProto.decode(e,e.uint32());break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.elemType&&e.hasOwnProperty("elemType")&&!u.isInteger(e.elemType))return"elemType: integer expected";if(null!=e.shape&&e.hasOwnProperty("shape")){var t=c.onnx.TensorShapeProto.verify(e.shape);if(t)return"shape."+t}return null},e.fromObject=function(e){if(e instanceof c.onnx.TypeProto.Tensor)return e;var t=new c.onnx.TypeProto.Tensor;if(null!=e.elemType&&(t.elemType=0|e.elemType),null!=e.shape){if("object"!=typeof e.shape)throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");t.shape=c.onnx.TensorShapeProto.fromObject(e.shape)}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.elemType=0,r.shape=null),null!=e.elemType&&e.hasOwnProperty("elemType")&&(r.elemType=e.elemType),null!=e.shape&&e.hasOwnProperty("shape")&&(r.shape=c.onnx.TensorShapeProto.toObject(e.shape,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e}(),t}(),o.OperatorSetIdProto=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.domain="",e.prototype.version=u.Long?u.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.domain&&e.hasOwnProperty("domain")&&t.uint32(10).string(e.domain),null!=e.version&&e.hasOwnProperty("version")&&t.uint32(16).int64(e.version),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.onnx.OperatorSetIdProto;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.domain=e.string();break;case 2:n.version=e.int64();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.domain&&e.hasOwnProperty("domain")&&!u.isString(e.domain)?"domain: string expected":null!=e.version&&e.hasOwnProperty("version")&&!(u.isInteger(e.version)||e.version&&u.isInteger(e.version.low)&&u.isInteger(e.version.high))?"version: integer|Long expected":null},e.fromObject=function(e){if(e instanceof c.onnx.OperatorSetIdProto)return e;var t=new c.onnx.OperatorSetIdProto;return null!=e.domain&&(t.domain=String(e.domain)),null!=e.version&&(u.Long?(t.version=u.Long.fromValue(e.version)).unsigned=!1:"string"==typeof e.version?t.version=parseInt(e.version,10):"number"==typeof e.version?t.version=e.version:"object"==typeof e.version&&(t.version=new u.LongBits(e.version.low>>>0,e.version.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults)if(r.domain="",u.Long){var n=new u.Long(0,0,!1);r.version=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.version=t.longs===String?"0":0;return null!=e.domain&&e.hasOwnProperty("domain")&&(r.domain=e.domain),null!=e.version&&e.hasOwnProperty("version")&&("number"==typeof e.version?r.version=t.longs===String?String(e.version):e.version:r.version=t.longs===String?u.Long.prototype.toString.call(e.version):t.longs===Number?new u.LongBits(e.version.low>>>0,e.version.high>>>0).toNumber():e.version),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e}(),c.onnx=o,e.exports=c},2100:(e,t,r)=>{"use strict";e.exports=r(9482)},9482:(e,t,r)=>{"use strict";var n=t;function i(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(1173),n.BufferWriter=r(3155),n.Reader=r(1408),n.BufferReader=r(593),n.util=r(9693),n.rpc=r(5994),n.roots=r(5054),n.configure=i,i()},1408:(e,t,r)=>{"use strict";e.exports=l;var n,i=r(9693),o=i.LongBits,s=i.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e,this.pos=0,this.len=e.length}var u,c="u">typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new l(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new l(e);throw Error("illegal buffer")},d=function(){return i.Buffer?function(e){return(l.create=function(e){return i.Buffer.isBuffer(e)?new n(e):c(e)})(e)}:c};function h(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new o(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}l.create=d(),l.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,l.prototype.uint32=(u=0xffffffff,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return u;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return u}),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},l.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},l.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},l.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},l.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do if(this.pos>=this.len)throw a(this);while(128&this.buf[this.pos++])return this},l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},l._configure=function(e){n=e,l.create=d(),n._configure();var t=i.Long?"toLong":"toNumber";i.merge(l.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},593:(e,t,r)=>{"use strict";e.exports=o;var n=r(1408);(o.prototype=Object.create(n.prototype)).constructor=o;var i=r(9693);function o(e){n.call(this,e)}o._configure=function(){i.Buffer&&(o.prototype._slice=i.Buffer.prototype.slice)},o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},o._configure()},5054:e=>{"use strict";e.exports={}},5994:(e,t,r)=>{"use strict";t.Service=r(7948)},7948:(e,t,r)=>{"use strict";e.exports=i;var n=r(9693);function i(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!t,this.responseDelimited=!!r}(i.prototype=Object.create(n.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,r,i,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return n.asPromise(e,a,t,r,i,o);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(e,r){if(e)return a.emit("error",e,t),s(e);if(null!==r){if(!(r instanceof i))try{r=i[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",r,t),s(null,r)}a.end(!0)})}catch(e){return a.emit("error",e,t),void setTimeout(function(){s(e)},0)}setTimeout(function(){s(Error("already ended"))},0)},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(e,t,r)=>{"use strict";e.exports=i;var n=r(9693);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=i.zero=new i(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/0x100000000>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>0xffffffff&&(r=0,++n>0xffffffff&&(n=0))),new i(r,n)},i.from=function(e){if("number"==typeof e)return i.fromNumber(e);if(n.isString(e)){if(!n.Long)return i.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):o},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+0x100000000*r)}return this.lo+0x100000000*this.hi},i.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,!!e):{low:0|this.lo,high:0|this.hi,unsigned:!!e}};var a=String.prototype.charCodeAt;i.fromHash=function(e){return e===s?o:new i((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},9693:function(e,t,r){"use strict";var n=t;function i(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)void 0!==e[n[i]]&&r||(e[n[i]]=t[n[i]]);return e}function o(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:Error().stack||""}),r&&i(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}n.asPromise=r(4537),n.base64=r(7419),n.EventEmitter=r(9211),n.float=r(945),n.inquire=r(7199),n.utf8=r(4997),n.pool=r(6662),n.LongBits=r(1945),n.isNode=!!(void 0!==r.g&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),n.global=n.isNode&&r.g||"u">typeof window&&window||"u">typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"u"<typeof Uint8Array?e:new Uint8Array(e)},n.Array="u">typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(!!t)},n.merge=i,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=o,n.ProtocolError=o("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},1173:(e,t,r)=>{"use strict";e.exports=d;var n,i=r(9693),o=i.LongBits,s=i.base64,a=i.utf8;function l(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function u(){}function c(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new l(u,0,0),this.tail=this.head,this.states=null}var h=function(){return i.Buffer?function(){return(d.create=function(){return new n})()}:function(){return new d}};function p(e,t,r){t[r]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function m(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}d.create=h(),d.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(d.alloc=i.pool(d.alloc,i.Array.prototype.subarray)),d.prototype._push=function(e,t,r){return this.tail=this.tail.next=new l(e,t,r),this.len+=t,this},f.prototype=Object.create(l.prototype),f.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<0x10000000?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(g,10,o.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=o.from(e);return this._push(g,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(g,t.length(),t)},d.prototype.bool=function(e){return this._push(p,1,+!!e)},d.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=o.from(e);return this._push(m,4,t.lo)._push(m,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var _=i.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(i.isString(e)){var r=d.alloc(t=s.length(e));s.decode(e,r,0),e=r}return this.uint32(t)._push(_,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},d.prototype.fork=function(){return this.states=new c(this),this.head=this.tail=new l(u,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(u,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},d._configure=function(e){n=e,d.create=h(),n._configure()}},3155:(e,t,r)=>{"use strict";e.exports=o;var n=r(1173);(o.prototype=Object.create(n.prototype)).constructor=o;var i=r(9693);function o(){n.call(this)}function s(e,t,r){e.length<40?i.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}o._configure=function(){o.alloc=i._Buffer_allocUnsafe,o.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},o.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o.writeBytesBuffer,t,e),this},o.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},o._configure()},7714:(e,t,r)=>{"use strict";t.R=void 0;let n=r(6919),i=r(7448);t.R=new class{async init(){}async createSessionHandler(e,t){let r=new n.Session(t);return await r.loadModel(e),new i.OnnxjsSessionHandler(r)}}},4200:(e,t,r)=>{"use strict";t.c8=t.rX=void 0;let n=r(1670),i=r(5381),o=r(2157),s=r(2306);t.rX=()=>{if(("number"!=typeof n.env.wasm.initTimeout||n.env.wasm.initTimeout<0)&&(n.env.wasm.initTimeout=0),"boolean"!=typeof n.env.wasm.simd&&(n.env.wasm.simd=!0),"boolean"!=typeof n.env.wasm.proxy&&(n.env.wasm.proxy=!1),"number"!=typeof n.env.wasm.numThreads||!Number.isInteger(n.env.wasm.numThreads)||n.env.wasm.numThreads<=0){let e="u"<typeof navigator?(0,i.cpus)().length:navigator.hardwareConcurrency;n.env.wasm.numThreads=Math.min(4,Math.ceil((e||1)/2))}},t.c8=new class{async init(){(0,t.rX)(),await (0,o.initWasm)()}async createSessionHandler(e,t){let r=new s.OnnxruntimeWebAssemblySessionHandler;return await r.loadModel(e,t),Promise.resolve(r)}}},6018:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(1670),t);let o=r(1670);{let e=r(7714).R;(0,o.registerBackend)("webgl",e,-10)}{let e=r(4200).c8;(0,o.registerBackend)("cpu",e,10),(0,o.registerBackend)("wasm",e,10),(0,o.registerBackend)("xnnpack",e,9)}},246:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAttributeWithCacheKey=void 0;class r{constructor(e){Object.assign(this,e)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map(e=>`${this[e]}`).join(";")),this._cacheKey}}t.createAttributeWithCacheKey=e=>new r(e)},7778:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Attribute=void 0;let n=r(1446),i=r(9395),o=r(9162),s=r(2517);var a=i.onnxruntime.experimental.fbs;class l{constructor(e){if(this._attributes=new Map,null!=e){for(const t of e)t instanceof n.onnx.AttributeProto?this._attributes.set(t.name,[l.getValue(t),l.getType(t)]):t instanceof a.Attribute&&this._attributes.set(t.name(),[l.getValue(t),l.getType(t)]);if(this._attributes.size<e.length)throw Error("duplicated attribute names")}}set(e,t,r){this._attributes.set(e,[r,t])}delete(e){this._attributes.delete(e)}getFloat(e,t){return this.get(e,"float",t)}getInt(e,t){return this.get(e,"int",t)}getString(e,t){return this.get(e,"string",t)}getTensor(e,t){return this.get(e,"tensor",t)}getFloats(e,t){return this.get(e,"floats",t)}getInts(e,t){return this.get(e,"ints",t)}getStrings(e,t){return this.get(e,"strings",t)}getTensors(e,t){return this.get(e,"tensors",t)}get(e,t,r){let n=this._attributes.get(e);if(void 0===n){if(void 0!==r)return r;throw Error(`required attribute not found: ${e}`)}if(n[1]!==t)throw Error(`type mismatch: expected ${t} but got ${n[1]}`);return n[0]}static getType(e){let t=e instanceof n.onnx.AttributeProto?e.type:e.type();switch(t){case n.onnx.AttributeProto.AttributeType.FLOAT:return"float";case n.onnx.AttributeProto.AttributeType.INT:return"int";case n.onnx.AttributeProto.AttributeType.STRING:return"string";case n.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case n.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case n.onnx.AttributeProto.AttributeType.INTS:return"ints";case n.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case n.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw Error(`attribute type is not supported yet: ${n.onnx.AttributeProto.AttributeType[t]}`)}}static getValue(e){let t=e instanceof n.onnx.AttributeProto?e.type:e.type();if(t===n.onnx.AttributeProto.AttributeType.GRAPH||t===n.onnx.AttributeProto.AttributeType.GRAPHS)throw Error("graph attribute is not supported yet");let r=this.getValueNoCheck(e);if(t===n.onnx.AttributeProto.AttributeType.INT&&s.LongUtil.isLong(r))return s.LongUtil.longToNumber(r);if(t===n.onnx.AttributeProto.AttributeType.INTS){let e=r,t=Array(e.length);for(let r=0;r<e.length;r++){let n=e[r];t[r]=s.LongUtil.longToNumber(n)}return t}if(t===n.onnx.AttributeProto.AttributeType.TENSOR)return e instanceof n.onnx.AttributeProto?o.Tensor.fromProto(r):o.Tensor.fromOrtTensor(r);if(t===n.onnx.AttributeProto.AttributeType.TENSORS){if(e instanceof n.onnx.AttributeProto)return r.map(e=>o.Tensor.fromProto(e));if(e instanceof a.Attribute)return r.map(e=>o.Tensor.fromOrtTensor(e))}if(t===n.onnx.AttributeProto.AttributeType.STRING&&e instanceof n.onnx.AttributeProto){let e=r;return(0,s.decodeUtf8String)(e)}return t===n.onnx.AttributeProto.AttributeType.STRINGS&&e instanceof n.onnx.AttributeProto?r.map(s.decodeUtf8String):r}static getValueNoCheck(e){return e instanceof n.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(e):this.getValueNoCheckFromOrtFormat(e)}static getValueNoCheckFromOnnxFormat(e){switch(e.type){case n.onnx.AttributeProto.AttributeType.FLOAT:return e.f;case n.onnx.AttributeProto.AttributeType.INT:return e.i;case n.onnx.AttributeProto.AttributeType.STRING:return e.s;case n.onnx.AttributeProto.AttributeType.TENSOR:return e.t;case n.onnx.AttributeProto.AttributeType.GRAPH:return e.g;case n.onnx.AttributeProto.AttributeType.FLOATS:return e.floats;case n.onnx.AttributeProto.AttributeType.INTS:return e.ints;case n.onnx.AttributeProto.AttributeType.STRINGS:return e.strings;case n.onnx.AttributeProto.AttributeType.TENSORS:return e.tensors;case n.onnx.AttributeProto.AttributeType.GRAPHS:return e.graphs;default:throw Error(`unsupported attribute type: ${n.onnx.AttributeProto.AttributeType[e.type]}`)}}static getValueNoCheckFromOrtFormat(e){switch(e.type()){case a.AttributeType.FLOAT:return e.f();case a.AttributeType.INT:return e.i();case a.AttributeType.STRING:return e.s();case a.AttributeType.TENSOR:return e.t();case a.AttributeType.GRAPH:return e.g();case a.AttributeType.FLOATS:return e.floatsArray();case a.AttributeType.INTS:{let t=[];for(let r=0;r<e.intsLength();r++)t.push(e.ints(r));return t}case a.AttributeType.STRINGS:{let t=[];for(let r=0;r<e.stringsLength();r++)t.push(e.strings(r));return t}case a.AttributeType.TENSORS:{let t=[];for(let r=0;r<e.tensorsLength();r++)t.push(e.tensors(r));return t}default:throw Error(`unsupported attribute type: ${a.AttributeType[e.type()]}`)}}}t.Attribute=l},7091:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveBackend=t.backend=void 0;let n=r(5038),i=new Map;async function o(e){let r=t.backend;if(void 0!==r[e]&&function(e){let t=e;return"initialize"in t&&"function"==typeof t.initialize&&"createSessionHandler"in t&&"function"==typeof t.createSessionHandler&&"dispose"in t&&"function"==typeof t.dispose}(r[e])){let t=r[e],n=t.initialize();if("object"==typeof n&&"then"in n&&(n=await n),n)return i.set(e,t),t}}t.backend={webgl:new n.WebGLBackend},t.resolveBackend=async function e(t){if(!t)return e(["webgl"]);for(let e of"string"==typeof t?[t]:t){let t=i.get(e);if(t)return t;let r=await o(e);if(r)return r}throw Error("no available backend to use")}},5038:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLBackend=void 0;let n=r(1670),i=r(6231),o=r(6416),s=r(7305);t.WebGLBackend=class{get contextId(){return n.env.webgl.contextId}set contextId(e){n.env.webgl.contextId=e}get matmulMaxBatchSize(){return n.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(e){n.env.webgl.matmulMaxBatchSize=e}get textureCacheMode(){return n.env.webgl.textureCacheMode}set textureCacheMode(e){n.env.webgl.textureCacheMode=e}get pack(){return n.env.webgl.pack}set pack(e){n.env.webgl.pack=e}get async(){return n.env.webgl.async}set async(e){n.env.webgl.async=e}initialize(){try{return this.glContext=(0,s.createWebGLContext)(this.contextId),"number"!=typeof this.matmulMaxBatchSize&&(this.matmulMaxBatchSize=16),"string"!=typeof this.textureCacheMode&&(this.textureCacheMode="full"),"boolean"!=typeof this.pack&&(this.pack=!1),"boolean"!=typeof this.async&&(this.async=!1),i.Logger.setWithEnv(n.env),i.Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(e){return i.Logger.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${e}`),!1}}createSessionHandler(e){return new o.WebGLSessionHandler(this,e)}dispose(){this.glContext.dispose()}}},5107:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CoordsGlslLib=void 0;let n=r(2517),i=r(8520),o=r(5060),s=r(7859),a=r(9390);class l extends i.GlslLib{constructor(e){super(e)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new i.GlslLibRoutine("\n      vec2 offsetToCoords(int offset, int width, int height) {\n        int t = offset / width;\n        int s = offset - t*width;\n        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);\n        return coords;\n      }\n      ")}}coordsToOffset(){return{coordsToOffset:new i.GlslLibRoutine("\n      int coordsToOffset(vec2 coords, int width, int height) {\n        float s = coords.s * float(width);\n        float t = coords.t * float(height);\n        int offset = int(t) * width + int(s);\n        return offset;\n      }\n      ")}}getOutputSamplingSnippet(){let e=this.context.outputTextureLayout;return e.isPacked?this.getPackedOutputSamplingSnippet(e):this.getUnpackedOutputSamplingSnippet(e)}getPackedOutputSamplingSnippet(e){let t=e.unpackedShape,r=[e.width,e.height],n={},s="getOutputCoords";switch(t.length){case 0:n[s]=this.getOutputScalarCoords();break;case 1:n[s]=this.getOutputPacked1DCoords(t,r);break;case 2:n[s]=this.getOutputPacked2DCoords(t,r);break;case 3:n[s]=this.getOutputPacked3DCoords(t,r);break;default:n[s]=this.getOutputPackedNDCoords(t,r)}let a=`
      void setOutput(vec4 val) {
        ${(0,o.getGlsl)(this.context.glContext.version).output} = val;
      }
    `;return n.floatTextureSetRGBA=new i.GlslLibRoutine(a),n}getUnpackedOutputSamplingSnippet(e){let t=e.unpackedShape,r=[e.width,e.height],n={},s="getOutputCoords";switch(t.length){case 0:n[s]=this.getOutputScalarCoords();break;case 1:n[s]=this.getOutputUnpacked1DCoords(t,r);break;case 2:n[s]=this.getOutputUnpacked2DCoords(t,r);break;case 3:n[s]=this.getOutputUnpacked3DCoords(t,r);break;case 4:n[s]=this.getOutputUnpacked4DCoords(t,r);break;case 5:n[s]=this.getOutputUnpacked5DCoords(t,r);break;case 6:n[s]=this.getOutputUnpacked6DCoords(t,r);break;default:throw Error(`Unsupported output dimensionality: ${t.length}`)}let a=`
        void setOutput(float val) {
          ${(0,o.getGlsl)(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `;return n.floatTextureSetR=new i.GlslLibRoutine(a),n}getOutputScalarCoords(){return new i.GlslLibRoutine("\n      int getOutputCoords() {\n        return 0;\n      }\n    ")}getOutputPacked1DCoords(e,t){let r=t,n="";return n=1===r[0]?`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${r[1]}.0);
          }
        `:1===r[1]?`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${r[0]}.0);
          }
        `:`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${r[0]}, ${r[1]}));
          return 2 * (resTexRC.y * ${r[0]} + resTexRC.x);
        }
      `,new i.GlslLibRoutine(n)}getOutputPacked2DCoords(e,t){let r="";if(n.ArrayUtil.arraysEqual(e,t))return r=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${t[0]}, ${t[1]}));
        }
      `,new i.GlslLibRoutine(r);let o=t,s=Math.ceil(e[1]/2);return r=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${o[0]}, ${o[1]}));

          int index = resTexRC.y * ${o[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${s}) * 2;
          int c = 2 * (index / ${s});

          return ivec2(r, c);
        }
      `,new i.GlslLibRoutine(r)}getOutputPacked3DCoords(e,t){let r=[t[0],t[1]],n=Math.ceil(e[2]/2),o=n*Math.ceil(e[1]/2),s=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${r[0]}, ${r[1]}));
          int index = resTexRC.y * ${r[0]} + resTexRC.x;

          int b = index / ${o};
          index -= b * ${o};

          // reverse r and c order for packed texture
          int r = imod(index, ${n}) * 2;
          int c = 2 * (index / ${n});

          return ivec3(b, r, c);
        }
      `;return new i.GlslLibRoutine(s)}getOutputPackedNDCoords(e,t){let r=[t[0],t[1]],n=Math.ceil(e[e.length-1]/2),o=n*Math.ceil(e[e.length-2]/2),s=o,a="",l="b, r, c";for(let t=2;t<e.length-1;t++)s*=e[e.length-t-1],a=`
      int b${t} = index / ${s};
      index -= b${t} * ${s};
    `+a,l=`b${t}, `+l;let u=`
      ivec${e.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${r[0]}, ${r[1]}));
        int index = resTexRC.y * ${r[0]} + resTexRC.x;

        ${a}

        int b = index / ${o};
        index -= b * ${o};

        // reverse r and c order for packed texture
        int r = imod(index, ${n}) * 2;
        int c = 2 * (index / ${n});

        return ivec${e.length}(${l});
      }
    `;return new i.GlslLibRoutine(u)}getOutputUnpacked1DCoords(e,t){let r=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${t[0]}, ${t[1]}));
          return resTexRC.y * ${t[0]} + resTexRC.x;
        }
      `;return new i.GlslLibRoutine(r)}getOutputUnpacked2DCoords(e,t){let r=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${t[0]}, ${t[1]}));
          int index = resTexRC.y * ${t[0]} + resTexRC.x;
          int r = index / ${e[1]};
          int c = index - r * ${e[1]};
          return ivec2(r, c);
        }
      `;return new i.GlslLibRoutine(r)}getOutputUnpacked3DCoords(e,t){let r="",n=e.length,o=null;n<2&&(o=[]),(o=Array(n-1))[n-2]=e[n-1];for(let t=n-3;t>=0;--t)o[t]=o[t+1]*e[t+1];let s=["r","c","d"],a=o.map((e,t)=>`int ${s[t]} = index / ${e}; ${t===o.length-1?`int ${s[t+1]} = index - ${s[t]} * ${e}`:`index -= ${s[t]} * ${e}`};`).join("");return r=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${t[0]}, ${t[1]}));
          int index = resTexRC.y * ${t[0]} + resTexRC.x;
          ${a}
          return ivec3(r, c, d);
        }
      `,new i.GlslLibRoutine(r)}getOutputUnpacked4DCoords(e,t){let r="",n=e.length,o=null;n<2&&(o=[]),(o=Array(n-1))[n-2]=e[n-1];for(let t=n-3;t>=0;--t)o[t]=o[t+1]*e[t+1];let s=["r","c","d","d2"],a=o.map((e,t)=>`int ${s[t]} = index / ${e}; ${t===o.length-1?`int ${s[t+1]} = index - ${s[t]} * ${e}`:`index -= ${s[t]} * ${e}`};`).join("");return r=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${t[0]}, ${t[1]}));
          int index = resTexRC.y * ${t[0]} + resTexRC.x;
          ${a}
          return ivec4(r, c, d, d2);
        }
      `,new i.GlslLibRoutine(r)}getOutputUnpacked5DCoords(e,t){let r="",n=e.length,o=null;n<2&&(o=[]),(o=Array(n-1))[n-2]=e[n-1];for(let t=n-3;t>=0;--t)o[t]=o[t+1]*e[t+1];let s=["r","c","d","d2","d3"],a=o.map((e,t)=>`int ${s[t]} = index / ${e}; ${t===o.length-1?`int ${s[t+1]} = index - ${s[t]} * ${e}`:`index -= ${s[t]} * ${e}`};`).join("");return r=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${t[0]}, ${t[1]}));
          int index = resTexRC.y * ${t[0]} + resTexRC.x;
          ${a}
          return ivec5(r, c, d, d2, d3);
        }
      `,new i.GlslLibRoutine(r)}getOutputUnpacked6DCoords(e,t){let r="",n=e.length,o=null;n<2&&(o=[]),(o=Array(n-1))[n-2]=e[n-1];for(let t=n-3;t>=0;--t)o[t]=o[t+1]*e[t+1];let s=["r","c","d","d2","d3","d4"],a=o.map((e,t)=>`int ${s[t]} = index / ${e}; ${t===o.length-1?`int ${s[t+1]} = index - ${s[t]} * ${e}`:`index -= ${s[t]} * ${e}`};`).join("");return r=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${t[0]}, ${t[1]}));
         int index = resTexRC.y * ${t[0]} + resTexRC.x;
         ${a}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new i.GlslLibRoutine(r)}getCommonUtilFuncs(){let e={},t="uvFromFlat";e[t]=new i.GlslLibRoutine("\n    vec2 uvFromFlat(int texNumR, int texNumC, int index) {\n      int texC = index / texNumR;\n      int texR = index - texC * texNumR;\n      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to\n      //       v.\n      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);\n    }\n    "),e[t="packedUVfrom1D"]=new i.GlslLibRoutine("\n      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n        int texelIndex = index / 2;\n        int texR = texelIndex / texNumC;\n        int texC = texelIndex - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),e[t="packedUVfrom2D"]=new i.GlslLibRoutine("\n      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {\n        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n        int texR = texelIndex / texNumC;\n        int texC = texelIndex - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),e[t="packedUVfrom3D"]=new i.GlslLibRoutine("\n      vec2 packedUVfrom3D(int texNumR, int texNumC,\n          int texelsInBatch, int texelsInLogicalRow, int b,\n          int row, int col) {\n        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n        int texR = index / texNumC;\n        int texC = index - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),t="sampleTexture";let r=(0,o.getGlsl)(this.context.glContext.version);return e[t]=new i.GlslLibRoutine(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${r.texture2D}(textureSampler, uv).r;
        }`),e}getInputsSamplingSnippets(){let e={},t=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((r,n)=>{let i=this.context.inputTextureLayouts[n],o=(0,a.generateShaderFuncNameFromInputSamplerName)(r);i.isPacked?e[o]=this.getPackedSamplerFromInput(o,r,i):e[o]=this.getUnpackedSamplerFromInput(o,r,i);let s=(0,a.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(r);i.unpackedShape.length<=t.unpackedShape.length&&(i.isPacked?e[s]=this.getPackedSamplerAtOutputCoords(s,i,t,r):e[s]=this.getUnpackedSamplerAtOutputCoords(s,i,t,r))}),e}getPackedSamplerAtOutputCoords(e,t,r,o){let s,l=t.unpackedShape,u=r.unpackedShape,c=o,d=(0,a.generateShaderFuncNameFromInputSamplerName)(c),h=l.length,p=u.length,f=n.BroadcastUtil.getBroadcastDims(l,u),g=(0,a.getCoordsDataType)(p),m=p-h,_=(0,a.getGlChannels)();s=0===h?"":p<2&&f.length>=1?"coords = 0;":f.map(e=>`coords.${_[e+m]} = 0;`).join("\n");let b="";b=p<2&&h>0?"coords":l.map((e,t)=>`coords.${_[t+m]}`).join(", ");let y="return outputValue;",w=1===n.ShapeUtil.size(l),v=1===n.ShapeUtil.size(u);if(1!==h||w||v){if(w&&!v)y=1===p?"\n          return vec4(outputValue.x, outputValue.x, 0., 0.);\n        ":"\n          return vec4(outputValue.x);\n        ";else if(f.length){let e=h-2,t=h-1;f.indexOf(e)>-1&&f.indexOf(t)>-1?y="return vec4(outputValue.x);":f.indexOf(e)>-1?y="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":f.indexOf(t)>-1&&(y="return vec4(outputValue.xx, outputValue.zz);")}}else y="\n        return vec4(outputValue.xy, outputValue.xy);\n      ";let x=`
      vec4 ${e}() {
        ${g} coords = getOutputCoords();
        
        int lastDim = coords.${_[p-1]};
        coords.${_[p-1]} = coords.${_[p-2]};
        coords.${_[p-2]} = lastDim;
      
        ${s}
        vec4 outputValue = ${d}(${b});
        ${y}
      }
    `;return new i.GlslLibRoutine(x,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(e,t,r,o){let s,l=[r.width,r.height],u=[t.width,t.height],c=t.unpackedShape.length,d=r.unpackedShape.length,h=t.unpackedShape,p=r.unpackedShape,f=(0,a.generateShaderFuncNameFromInputSamplerName)(o);if(c===d&&n.ArrayUtil.arraysEqual(u,l)){let t=`
          float ${e}() {
            return sampleTexture(${o}, TexCoords);
          }
        `;return new i.GlslLibRoutine(t,["coordinates.sampleTexture"])}let g=(0,a.getCoordsDataType)(d),m=n.BroadcastUtil.getBroadcastDims(h,p),_=d-c,b=(0,a.getGlChannels)();s=0===c?"":d<2&&m.length>=1?"coords = 0;":m.map(e=>`coords.${b[e+_]} = 0;`).join("\n");let y="";y=d<2&&c>0?"coords":t.unpackedShape.map((e,t)=>`coords.${b[t+_]}`).join(", ");let w=`
        float ${e}() {
          ${g} coords = getOutputCoords();
          ${s}
          return ${f}(${y});
        }
      `;return new i.GlslLibRoutine(w,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(e,t,r){switch(r.unpackedShape.length){case 0:return this.getPackedSamplerScalar(e,t);case 1:return this.getPackedSampler1D(e,t,r);case 2:return this.getPackedSampler2D(e,t,r);case 3:return this.getPackedSampler3D(e,t,r);default:return this.getPackedSamplerND(e,t,r)}}getUnpackedSamplerFromInput(e,t,r){let n=r.unpackedShape;switch(n.length){case 0:return this.getUnpackedSamplerScalar(e,t,r);case 1:return this.getUnpackedSampler1D(e,t,r);case 2:return this.getUnpackedSampler2D(e,t,r);case 3:return this.getUnpackedSampler3D(e,t,r);case 4:return this.getUnpackedSampler4D(e,t,r);case 5:return this.getUnpackedSampler5D(e,t,r);case 6:return this.getUnpackedSampler6D(e,t,r);default:throw Error(`Unsupported dimension ${n.length}-D`)}}getPackedSamplerScalar(e,t){let r=`
          vec4 ${e}() {
            return ${(0,o.getGlsl)(this.context.glContext.version).texture2D}(${t}, halfCR);
          }
        `;return new i.GlslLibRoutine(r)}getPackedSampler1D(e,t,r){let n=[r.width,r.height],s=[n[1],n[0]],a=(0,o.getGlsl)(this.context.glContext.version),l=`vec4 ${e}(int index) {
      vec2 uv = packedUVfrom1D(
      ${s[0]}, ${s[1]}, index);
      return ${a.texture2D}(${t}, uv);
    }`;return new i.GlslLibRoutine(l,["coordinates.packedUVfrom1D"])}getPackedSampler2D(e,t,r){let s=r.unpackedShape,a=[r.width,r.height],l=(0,o.getGlsl)(this.context.glContext.version),u=a[0],c=a[1];if(null!=a&&n.ArrayUtil.arraysEqual(s,a)){let r=`vec4 ${e}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${c}.0, ${u}.0);
        return ${l.texture2D}(${t}, uv);
      }`;return new i.GlslLibRoutine(r)}let d=a,h=Math.ceil(s[1]/2),p=`vec4 ${e}(int row, int col) {
      vec2 uv = packedUVfrom2D(${d[1]}, ${d[0]}, ${h}, row, col);
      return ${l.texture2D}(${t}, uv);
    }`;return new i.GlslLibRoutine(p,["coordinates.packedUVfrom2D"])}getPackedSampler3D(e,t,r){let n=r.unpackedShape,s=[r.width,r.height],l=[s[0],s[1]],u=(0,o.getGlsl)(this.context.glContext.version);if(1===n[0]){let o=n.slice(1),s=[1,2],l=(0,a.squeezeInputShape)(n,o),u=["b","row","col"],c=JSON.parse(JSON.stringify(r));c.unpackedShape=l;let d=this.getPackedSamplerFromInput(e,t,c),h=`${d.routineBody}
      vec4 ${e}(int b, int row, int col) {
        return ${e}(${(0,a.getSqueezedParams)(u,s)});
      } `;return new i.GlslLibRoutine(h,d.dependencies)}let c=l[0],d=l[1],h=Math.ceil(n[2]/2),p=`vec4 ${e}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${d}, ${c}, ${h*Math.ceil(n[1]/2)}, ${h}, b, row, col);
      return ${u.texture2D}(${t}, uv);}`;return new i.GlslLibRoutine(p,["coordinates.packedUVfrom3D"])}getPackedSamplerND(e,t,r){let n=r.unpackedShape,s=n.length,a=[r.width,r.height],l=(0,o.getGlsl)(this.context.glContext.version),u=[a[0],a[1]],c=u[1],d=u[0],h=Math.ceil(n[s-1]/2),p=h*Math.ceil(n[s-2]/2),f="int b, int row, int col",g=`b * ${p} + (row / 2) * ${h} + (col / 2)`;for(let e=2;e<s-1;e++)f=`int b${e}, `+f,p*=n[s-e-1],g=`b${e} * ${p} + `+g;let m=`vec4 ${e}(${f}) {
      int index = ${g};
      int texR = index / ${d};
      int texC = index - texR * ${d};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}, ${c});
      return ${l.texture2D}(${t}, uv);
    }`;return new i.GlslLibRoutine(m)}getUnpackedSamplerScalar(e,t,r){let[n,o]=[r.width,r.height];if(1===n&&1===o){let r=`
          float ${e}() {
            return sampleTexture(${t}, halfCR);
          }
        `;return new i.GlslLibRoutine(r,["coordinates.sampleTexture"])}let s=`
        float ${e}() {
          int offset_${t} = coordsToOffset(TexCoords, ${n}, ${o});
          vec2 uv = uvFromFlat(${n}, ${o}, offset_${t});
          return sampleTexture(${t}, uv);
        }
      `;return new i.GlslLibRoutine(s,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(e,t,r){let n=r.width,o=r.height;if(1===o&&1===n){let r=`
        float ${e}(int index) {
          return sampleTexture(${t}, halfCR);
        }
      `;return new i.GlslLibRoutine(r,["coordinates.sampleTexture"])}if(1===o){let r=`
          float ${e}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${n}.0, 0.5);
            return sampleTexture(${t}, uv);
          }
        `;return new i.GlslLibRoutine(r,["coordinates.sampleTexture"])}if(1===n){let r=`
          float ${e}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${o}.0);
            return sampleTexture(${t}, uv);
          }
        `;return new i.GlslLibRoutine(r,["coordinates.sampleTexture"])}let s=`
        float ${e}(int index) {
          vec2 uv = uvFromFlat(${n}, ${o}, index);
          return sampleTexture(${t}, uv);
        }
      `;return new i.GlslLibRoutine(s,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(e,t,r){let o=r.unpackedShape,l=[r.height,r.width];if(null!=l&&n.ArrayUtil.arraysEqual(o,l)){let r=`
          float ${e}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${l[1]}.0, ${l[0]}.0);
            return sampleTexture(${t}, uv);
          }
        `;return new i.GlslLibRoutine(r,["coordinates.sampleTexture"])}let{newShape:u,keptDims:c}=(0,s.squeezeShape)(o),d=u;if(d.length<o.length){let n=(0,a.squeezeInputShape)(o,d),s=JSON.parse(JSON.stringify(r));s.unpackedShape=n;let l=["col","row"],u=`
          ${this.getUnpackedSamplerFromInput(e,t,s).routineBody}
          float ${e}(int row, int col) {
            return ${e}(${(0,a.getSqueezedParams)(l,c)});
          }
        `;return new i.GlslLibRoutine(u,["coordinates.sampleTexture"])}let h=l[1],p=l[0];if(1===p){let r=`
          float ${e}(int row, int col) {
            int offset_${t} = coordsToOffset(TexCoords, ${h}, ${p});
            float index = dot(vec3(row, col, offset_${t}), vec3(${o[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${h}.0);
            return sampleTexture(${t}, uv);
          }
        `;return new i.GlslLibRoutine(r,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(1===h){let r=`
          float ${e}(int row, int col) {
            int offset_${t} = coordsToOffset(TexCoords, ${h}, ${p});
            float index = dot(vec3(row, col, offset_${t}), vec3(${o[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${p}.0, 0.5);
            return sampleTexture(${t}, uv);
          }
        `;return new i.GlslLibRoutine(r,["coordinates.sampleTexture","coordinates.coordsToOffset"])}let f=`
        float ${e}(int row, int col) {
          int index = col * ${o[1]} + row;
          vec2 uv = uvFromFlat(${h}, ${p}, index);
          return sampleTexture(${t}, uv);
        }
      `;return new i.GlslLibRoutine(f,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(e,t,r){let n=r.unpackedShape,o=n[1]*n[2],l=n[2],{newShape:u,keptDims:c}=(0,s.squeezeShape)(n),d=u;if(d.length<n.length){let o=(0,a.squeezeInputShape)(n,d),s=["batch","col","row"],l=JSON.parse(JSON.stringify(r));l.unpackedShape=o;let u=this.getUnpackedSamplerFromInput(e,t,l),h=c.reverse(),p=`
          ${u.routineBody}
          float ${e}(int batch, int row, int col) {
            return ${e}(${(0,a.getSqueezedParams)(s,h)});
          }
        `;return new i.GlslLibRoutine(p,u.dependencies)}let h=`
          float ${e}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${o} + col * ${l} + row;
            vec2 uv = uvFromFlat(${r.width}, ${r.height}, index);
            return sampleTexture(${t}, uv);
          }
      `;return new i.GlslLibRoutine(h,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(e,t,r){let n=r.unpackedShape,o=n[3],s=n[2]*o,a=`
        float ${e}(int row, int col, int depth, int depth2) {
          int index = row * ${n[1]*s} + col * ${s} +
              depth2 * ${o} + depth;
          vec2 uv = uvFromFlat(${r.width}, ${r.height}, index);
          return sampleTexture(${t}, uv);
        }
      `;return new i.GlslLibRoutine(a,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(e,t,r){let n=r.unpackedShape,o=n[4],l=n[3]*o,u=n[2]*l,c=n[1]*u,{newShape:d,keptDims:h}=(0,s.squeezeShape)(n);if(d.length<n.length){let o=(0,a.squeezeInputShape)(n,d),s=["row","col","depth","depth2","depth3"],l=JSON.parse(JSON.stringify(r));l.unpackedShape=o;let u=`
          ${this.getUnpackedSamplerFromInput(e,t,l).routineBody}
          float ${e}(int row, int col, int depth, int depth2, int depth3) {
            return ${e}(${(0,a.getSqueezedParams)(s,h)});
          }
        `;return new i.GlslLibRoutine(u,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let p=`
        float ${e}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${c} + col * ${u} + depth * ${l} +
          depth3 * ${o} + depth2;
          vec2 uv = uvFromFlat(${r.width}, ${r.height}, index);
          return sampleTexture(${t}, uv);
        }
      `;return new i.GlslLibRoutine(p,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(e,t,r){let n=r.unpackedShape,o=n[5],l=n[4]*o,u=n[3]*l,c=n[2]*u,d=n[1]*c,{newShape:h,keptDims:p}=(0,s.squeezeShape)(n);if(h.length<n.length){let o=(0,a.squeezeInputShape)(n,h),s=["row","col","depth","depth2","depth3","depth4"],l=JSON.parse(JSON.stringify(r));l.unpackedShape=o;let u=`
            ${this.getUnpackedSamplerFromInput(e,t,l).routineBody}
            float ${e}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${e}(${(0,a.getSqueezedParams)(s,p)});
            }
          `;return new i.GlslLibRoutine(u,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let f=`
          float ${e}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${d} + col * ${c} + depth * ${u} +
            depth2 * ${l} + depth3 * ${o} + depth4;
            vec2 uv = uvFromFlat(${r.width}, ${r.height}, index);
            return sampleTexture(${t}, uv);
          }
        `;return new i.GlslLibRoutine(f,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){let e=this.context.outputTextureLayout,t=e.shape.length,r=e.strides,n=e.width,o=e.height,s=[];for(let e=0;e<t-1;++e)s.push(`
        c[${e}] = offset / ${r[e]};`),s.push(`
        offset -= c[${e}] * ${r[e]};`);s.push(`
        c[${t-1}] = offset;`);let a=`
      void toVec(vec2 texCoords, out int c[${t}]) {
        int offset = coordsToOffset(texCoords, ${n}, ${o});
        ${s.join("")}
      }
      void toVec(int offset, out int c[${t}]) {
        ${s.join("")}
      }
    `;return{toVec:new i.GlslLibRoutine(a,["coordinates.coordsToOffset"])}}valueFrom(){let e={};return this.context.programInfo.inputNames.forEach((t,r)=>{let n=this.context.inputTextureLayouts[r],o=(n.unpackedShape.length>0?n.unpackedShape:n.shape).length,s=`_${t}`;e[s]=new i.GlslLibRoutine(this.getValueFromSingle(t,o,n.width,n.height,!1),[`shapeUtils.indicesToOffset${s}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),e[s+="_T"]=new i.GlslLibRoutine(this.getValueFromSingle(t,o,n.width,n.height,!0),[`shapeUtils.indicesToOffset${s}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),e}getValueFromSingle(e,t,r,n,i){let s=`_${e}`;return i&&(s+="_T"),`
        float ${s}(int m[${t}]) {
          int offset = indicesToOffset${s}(m);
          vec2 coords = offsetToCoords(offset, ${r}, ${n});
          float value = getColorAsFloat(${(0,o.getGlsl)(this.context.glContext.version).texture2D}(${e}, coords));
          return value;
        }
        `}getPackedValueFrom(e,t,r,n,i){let s=`_${e}_Pack`;return i&&(s+="_T"),`
        vec4 ${s}(int m[${t}]) {
          int offset = indicesToOffset_${e}(m);
          vec2 coords = offsetToCoords(offset, ${r}, ${n});
          return ${(0,o.getGlsl)(this.context.glContext.version).texture2D}(${e}, coords);
        }
        `}}t.CoordsGlslLib=l},8520:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TopologicalSortGlslRoutines=t.GlslLibRoutineNode=t.GlslLibRoutine=t.GlslLib=t.GlslContext=t.FunctionType=void 0,(r=t.FunctionType||(t.FunctionType={}))[r.ValueBased=0]="ValueBased",r[r.Positional=1]="Positional",t.GlslContext=class{constructor(e,t,r,n){this.glContext=e,this.programInfo=t,this.inputTextureLayouts=r,this.outputTextureLayout=n}},t.GlslLib=class{constructor(e){this.context=e}},t.GlslLibRoutine=class{constructor(e,t){this.routineBody=e,this.dependencies=t}},t.GlslLibRoutineNode=class{constructor(e,t,r){this.name=e,this.dependencies=r||[],t&&(this.routineBody=t)}addDependency(e){e&&this.dependencies.push(e)}},t.TopologicalSortGlslRoutines=class{static returnOrderedNodes(e){if(!e||0===e.length)return[];if(1===e.length)return e;let t=new Set,r=new Set,n=[];return this.createOrderedNodes(e,t,r,n),n}static createOrderedNodes(e,t,r,n){for(let i=0;i<e.length;++i)this.dfsTraverse(e[i],t,r,n)}static dfsTraverse(e,t,r,n){if(!e||r.has(e.name))return;if(t.has(e.name))throw Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");t.add(e.name);let i=e.dependencies;if(i&&i.length>0)for(let e=0;e<i.length;++e)this.dfsTraverse(i[e],t,r,n);n.push(e),r.add(e.name),t.delete(e.name)}}},7341:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EncodingGlslLib=void 0;let n=r(8520);class i extends n.GlslLib{constructor(e){super(e)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new n.GlslLibRoutine("highp vec4 encode(highp float f) {\n        return vec4(f, 0.0, 0.0, 0.0);\n      }\n        ")}}decodeFloat32(){return{decode:new n.GlslLibRoutine("highp float decode(highp vec4 rgba) {\n        return rgba.r;\n      }\n        ")}}encodeUint8(){let e=i.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new n.GlslLibRoutine(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${e}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){let e=i.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new n.GlslLibRoutine(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${e}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){let e=new ArrayBuffer(4),t=new Uint32Array(e),r=new Uint8Array(e);if(t[0]=0xdeadbeef,239===r[0])return!0;if(222===r[0])return!1;throw Error("unknown endianness")}}t.EncodingGlslLib=i},9894:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FragColorGlslLib=void 0;let n=r(8520),i=r(5060);class o extends n.GlslLib{constructor(e){super(e)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){let e=(0,i.getGlsl)(this.context.glContext.version);return{setFragColor:new n.GlslLibRoutine(`
        void setFragColor(float value) {
            ${e.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new n.GlslLibRoutine("\n        float getColorAsFloat(vec4 color) {\n            return decode(color);\n        }\n        ",["encoding.decode"])}}}t.FragColorGlslLib=o},2848:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.replaceInlines=void 0;let r=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;t.replaceInlines=function(e){let t,n={};for(;null!==(t=r.exec(e));){let e=t[3].split(",").map(e=>{let t=e.trim().split(" ");return t&&2===t.length?{type:t[0],name:t[1]}:null}).filter(e=>null!==e);n[t[2]]={params:e,body:t[4]}}for(let r in n){let i=RegExp("(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",r),"gm");for(;null!==(t=i.exec(e));){let i=t[1],o=t[2],s=t[3].split(","),a=i?`${i} ${o};`:"",l=n[r].body,u="";n[r].params.forEach((e,t)=>{e&&(u+=`${e.type} ${e.name} = ${s[t]};
`)}),l=(l=`${u}
 ${l}`).replace("return",`${o} = `);let c=`
      ${a}
      {
        ${l}
      }
      `;e=e.replace(t[0],c)}}return e.replace(r,"")}},8879:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GlslPreprocessor=void 0;let n=r(8520),i=r(2848),o=r(5483),s=r(5060);t.GlslPreprocessor=class{constructor(e,t,r,i){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new n.GlslContext(e,t,r,i),Object.keys(o.glslRegistry).forEach(e=>{let t=new o.glslRegistry[e](this.context);this.libs[e]=t});const s=this.glslLibRoutineDependencyGraph;for(const e in this.libs){const t=this.libs[e].getFunctions();for(const r in t){let i;const o=e+"."+r;s[o]?(i=s[o]).routineBody=t[r].routineBody:(i=new n.GlslLibRoutineNode(o,t[r].routineBody),s[o]=i);const a=t[r].dependencies;if(a)for(let e=0;e<a.length;++e)if(s[a[e]])i.addDependency(s[a[e]]);else{const t=new n.GlslLibRoutineNode(a[e]);s[a[e]]=t,i.addDependency(t)}}}}preprocess(){let e=this.context.programInfo,t=e.shaderSource;return this.context.programInfo.hasMain||(t=`${t}
      ${(0,s.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),t=(0,i.replaceInlines)(t),`${(0,s.getFragShaderPreamble)(this.context.glContext.version)}
    ${this.getUniforms(e.inputNames,e.variables)}
    ${this.getImports(t)}
    ${t}`}getImports(e){let t=this.selectGlslLibRoutinesToBeIncluded(e);if(0===t.length)return"";let r="";for(let e=0;e<t.length;++e){if(!t[e].routineBody)throw Error(`Missing body for the Glsl Library routine: ${t[e].name}`);r+=t[e].routineBody+"\n"}return r}selectGlslLibRoutinesToBeIncluded(e){let t=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(r=>{let n=r.split(".")[1];-1!==e.indexOf(n)&&t.push(this.glslLibRoutineDependencyGraph[r])}),n.TopologicalSortGlslRoutines.returnOrderedNodes(t)}getUniforms(e,t){let r=[];if(e)for(let t of e)r.push(`uniform sampler2D ${t};`);if(t)for(let e of t)r.push(`uniform ${e.type} ${e.name}${e.arrayLength?`[${e.arrayLength}]`:""};`);return r.join("\n")}}},5483:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.glslRegistry=void 0;let n=r(5107),i=r(7341),o=r(9894),s=r(2655),a=r(3891);t.glslRegistry={encoding:i.EncodingGlslLib,fragcolor:o.FragColorGlslLib,vec:a.VecGlslLib,shapeUtils:s.ShapeUtilsGlslLib,coordinates:n.CoordsGlslLib}},2655:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeUtilsGlslLib=void 0;let n=r(8520);class i extends n.GlslLib{constructor(e){super(e)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){let e=this.context.outputTextureLayout.shape.length,t={};return this.context.programInfo.inputNames.forEach((r,i)=>{let o=this.context.inputTextureLayouts[i].unpackedShape;if(o.length<=e){let i=o.length,s=e-i,a=`bcastIndices_${r}`,l="";for(let e=0;e<i;++e)l+=`
          realIndices[${e}] = int( mod(float(bcastedIndices[${s+e}]), ${o[e]}.0) );
          `;let u=`
        void ${a} (int bcastedIndices[${e}], out int realIndices[${i}]) {
          ${l}
        }
        `;t[a]=new n.GlslLibRoutine(u)}}),t}bcastMatmulIndex(){let e=this.context.outputTextureLayout.shape.length,t={};return this.context.programInfo.inputNames.forEach((r,i)=>{let o=this.context.inputTextureLayouts[i].shape;if(!(o.length<2||o.length>e)){let i=o.length,s=e-i,a=`bcastMatmulIndices_${r}`,l="";for(let e=0;e<i-2;++e)l+=`
          realIndices[${e}] = int( mod(float(bcastedIndices[${s+e}]), ${o[e]}.0) );
          `;let u=`
        void ${a}(int bcastedIndices[${e}], out int realIndices[${i}]) {
          ${l}
          realIndices[${i-1}] = bcastedIndices[${e-1}];
          realIndices[${i-2}] = bcastedIndices[${e-2}];
        }
        `;t[a]=new n.GlslLibRoutine(u)}}),t}indicesToOffset(){let e={};return this.context.programInfo.inputNames.forEach((t,r)=>{let o=this.context.inputTextureLayouts[r].shape,s=this.context.inputTextureLayouts[r].strides,a=o.length,l=`indicesToOffset_${t}`;e[l]=new n.GlslLibRoutine(i.indexToOffsetSingle(l,a,s)),e[l=`indicesToOffset_${t}_T`]=new n.GlslLibRoutine(i.indexToOffsetSingle(l,a,s.slice().reverse()))}),e}static indexToOffsetSingle(e,t,r){let n="";for(let e=t-1;e>=0;--e)n+=`
        offset += indices[${e}] * ${r[e]};
        `;return`
      int ${e}(int indices[${t}]) {
        int offset = 0;
        ${n}
        return offset;
      }
      `}offsetToIndices(){let e={};return this.context.programInfo.inputNames.forEach((t,r)=>{let o=this.context.inputTextureLayouts[r].shape,s=this.context.inputTextureLayouts[r].strides,a=o.length,l=`offsetToIndices_${t}`;e[l]=new n.GlslLibRoutine(i.offsetToIndicesSingle(l,a,s)),e[l=`offsetToIndices_${t}_T`]=new n.GlslLibRoutine(i.offsetToIndicesSingle(l,a,s.slice().reverse()))}),e}static offsetToIndicesSingle(e,t,r){let n=[];for(let e=0;e<t-1;++e)n.push(`
      indices[${e}] = offset / ${r[e]};`),n.push(`
        offset -= indices[${e}] * ${r[e]};`);return n.push(`
      indices[${t-1}] = offset;`),`
      void ${e}(int offset, out int indices[${t}]) {
        ${n.join("")}
      }
      `}incrementIndices(){let e={};return this.context.programInfo.inputNames.forEach((t,r)=>{let i=this.context.inputTextureLayouts[r].shape,o=i.length,s=`incrementIndices_${t}`,a="";for(let e=0;e<o;++e)a+=`
        shape[${e}] = ${i[e]};`;let l=`
        void ${s}(int axis, out int indices[${o}]) {
          int shape[${o}];
          ${a};
          for(int i = ${o} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;e[s]=new n.GlslLibRoutine(l)}),e}}t.ShapeUtilsGlslLib=i},5060:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultFragShaderMain=t.getFragShaderPreamble=t.getVertexShaderSource=t.getGlsl=void 0;let r={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},n={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function i(e){return 1===e?r:n}t.getGlsl=i,t.getVertexShaderSource=function(e){let t=i(e);return`${t.version}
      precision highp float;
      ${t.attribute} vec3 position;
      ${t.attribute} vec2 textureCoord;

      ${t.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`},t.getFragShaderPreamble=function(e){let t=i(e);return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFrag} vec2 TexCoords;
    ${t.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `},t.getDefaultFragShaderMain=function(e,t){return`
  void main() {
    int indices[${t}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${i(e).output} = result;
  }
  `}},3891:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VecGlslLib=void 0;let n=r(8520);class i extends n.GlslLib{constructor(e){super(e)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){let e=this.context.outputTextureLayout.shape.length,t={add:"+=",sub:"-=",mul:"*=",div:"/="},r={};for(let i in t){let o=`${i}Vec`,s="";for(let r=0;r<e;++r)s+=`
          dest[${r}] ${t[i]} src[${r}];
          `;let a=`
        void ${o}(int src[${e}], out int dest[${e}]) {
          ${s}
        }
        `;r[o]=new n.GlslLibRoutine(a)}return r}copyVec(){let e=this.context.outputTextureLayout.shape.length,t="";for(let r=0;r<e;++r)t+=`
        dest[${r}] = src[${r}];
        `;let r=`
      void copyVec(int src[${e}], out int dest[${e}]) {
        ${t}
      }
      `;return{copyVec:new n.GlslLibRoutine(r)}}setVecItem(){let e=this.context.outputTextureLayout.shape.length,t=`
        if(index < 0)
            index =${e} + index;
        if (index == 0)
            m[0] = value;
        `;for(let r=1;r<e-1;++r)t+=`
        else if (index == ${r})
            m[${r}] = value;
            `;t+=`
        else
            m[${e-1}] = value;
        `;let r=`
      void setVecItem(out int m[${e}], int index, int value) {
        ${t}
      }
        `;return{setVecItem:new n.GlslLibRoutine(r)}}getVecItem(){let e=this.context.outputTextureLayout.shape.length,t=`
        if(index < 0)
            index = ${e} + index;
        if (index == 0)
            return m[0];
      `;for(let r=1;r<e-1;++r)t+=`
        else if (index == ${r})
            return m[${r}];
      `;t+=`
        else
            return m[${e-1}];
        `;let r=`
      int getVecItem(int m[${e}], int index) {
        ${t}
      }
    `;return{getVecItem:new n.GlslLibRoutine(r)}}}t.VecGlslLib=i},8316:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLInferenceHandler=void 0;let n=r(6231),i=r(9162),o=r(2517),s=r(2403),a=r(7019),l=r(8710),u=r(5611),c=r(4057),d=r(2039);t.WebGLInferenceHandler=class{constructor(e){this.session=e,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(e,t){return(0,c.calculateTextureWidthAndHeight)(this.session.layoutStrategy,e,t)}executeProgram(e,t){if(t.length<e.inputNames.length)throw Error(`Input size mustn't be less than ${e.inputNames.length}.`);if(e.inputNames.length!==e.inputTypes.length)throw Error("input names size does not match input types");let r=[];for(let n=0;n<e.inputNames.length;++n)r[n]=this.getOrCreateTextureData(t[n],e.inputTypes[n]);let n=((e,t)=>{let r=t.map(e=>`${e.unpackedShape.join(",")};${e.width}x${e.height}`).join("_"),n=e.name;return e.cacheHint&&(n+="["+e.cacheHint+"]"),n+=":"+r})(e,r),i=this.session.programManager.getArtifact(n),o=i?i.programInfo:"function"==typeof e.get?e.get():e,s=(0,c.createTextureLayoutFromTextureType)(this.session.layoutStrategy,o.output.dims,o.output.textureType),a=this.createTextureData(s,o.output.type);return i||(i=this.session.programManager.build(o,r,a),this.session.programManager.setArtifact(n,i)),this.runProgram(i,r,a),a}run(e,t){return this.executeProgram(e,t).tensor}runProgram(e,t,r){for(let r=0;r<t.length;++r)if(!!t[r].isPacked!=(e.programInfo.inputTypes[r]===d.TextureType.packed))throw Error(`input[${r}] property packed inconsistent`);if(!!r.isPacked!=(e.programInfo.output.textureType===d.TextureType.packed))throw Error("output property packed inconsistent");this.session.programManager.run(e,t,r)}getOrCreateTextureData(e,t){let r=this.getTextureData(e.dataId,t===d.TextureType.packed);if(!r&&(r=this.getTextureData(e.dataId,t!==d.TextureType.packed)))return t===d.TextureType.packed?this.pack(r):this.unpack(r);if(!r){let n=(0,c.createTextureLayoutFromTextureType)(this.session.layoutStrategy,e.dims,t);if(t===d.TextureType.packedLastDimension){let r=1,n=4,i=e.dims;if(4===i.length){let o=[i[0],Math.ceil(i[1]*i[2]*i[3]/n)],s=(0,c.createTextureLayoutFromTextureType)(this.session.layoutStrategy,o,t),a=e.numberData;if(i[1]*i[2]*i[3]%n!=0){let t=i[0],o=i[1]*i[2]*i[3],s=Math.ceil(o*r/n)*n;a=new Float32Array(t*s);for(let n=0;n<t;++n){let t=n*o,i=n*s+n%r*o;a.set(e.numberData.subarray(t,t+o),i)}}return this.createTextureData(s,e.type,a,e,1)}}if(t===d.TextureType.packed){let t=(0,c.createTextureLayoutFromShape)(this.session.layoutStrategy,e.dims,1,[],{reverseWH:!0}),n=this.createTextureData(t,e.type,e.numberData,e,1);r=this.pack(n)}else r=this.createTextureData(n,e.type,e.numberData,e,1)}return r}createTextureDataFromLayoutBindTensor(e,t,r,n){return this.createTextureData(e,t,r,n,1)}createTextureData(e,t,r,i,o){n.Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(e)}]`);let s=this.session.textureManager.createTextureFromLayout(t,e,r,o);return this.createTextureDataFromTexture(e,t,s,i)}reshapeUnpacked(e,t){let r=this.getOrCreateTextureData(e,d.TextureType.unpacked),n={channels:r.channels,height:r.height,width:r.width,shape:0!==t.length?t:[1],strides:o.ShapeUtil.computeStrides(t),unpackedShape:t};return this.createTextureDataFromTexture(n,e.type,r.texture).tensor}reshapePacked(e,t){let r=this.getOrCreateTextureData(e,d.TextureType.packed);if((0,a.isReshapeCheap)(e.dims,t)){let n={channels:r.channels,height:r.height,width:r.width,shape:0!==t.length?t:[1],strides:o.ShapeUtil.computeStrides(t),unpackedShape:t,isPacked:!0};return this.createTextureDataFromTexture(n,e.type,r.texture).tensor}let n=(0,a.processDims3D)(e.dims),i=(0,a.processDims3D)(t),s=this.reshapePacked(e,n),l=this.run((0,a.createPackedReshape3DProgramInfoLoader)(this,s,i),[s]);return this.reshapePacked(l,t)}cast(e,t){let r=this.getOrCreateTextureData(e,d.TextureType.unpacked);return this.createTextureDataFromTexture(r,t,r.texture).tensor}createTextureDataFromTexture(e,t,r,n,o){let s=Object.assign(Object.assign({},e),{tensor:n||new i.Tensor(e.unpackedShape,t,e=>this.readTexture(s),async e=>this.readTextureAsync(s),void 0,o),texture:r});return this.setTextureData(s.tensor.dataId,s,e.isPacked),s}getTextureData(e,t=!1){return this.session.isInitializer(e)?this.session.getTextureData(e,t):t?this.packedTextureDataCache.get(e):this.unpackedTextureDataCache.get(e)}setTextureData(e,t,r=!1){this.session.isInitializer(e)?this.session.setTextureData(e,t,r):(r?this.packedTextureDataCache:this.unpackedTextureDataCache).set(e,t)}isTextureLayoutCached(e,t=!1){return!!this.getTextureData(e.dataId,t)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(e=>this.session.textureManager.releaseTexture(e)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(e=>this.session.textureManager.releaseTexture(e)),this.unpackedTextureDataCache=new Map}readTexture(e){return e.isPacked?this.readTexture(this.unpack(e)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(e,e.tensor.type,e.channels):this.session.textureManager.readUint8TextureAsFloat((0,l.encodeAsUint8)(this,e))}async readTextureAsync(e){return e.isPacked?this.readTextureAsync(this.unpack(e)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(e,e.tensor.type,e.channels):this.session.textureManager.readUint8TextureAsFloat((0,l.encodeAsUint8)(this,e))}pack(e){return this.executeProgram((0,s.createPackProgramInfoLoader)(this,e.tensor),[e.tensor])}unpack(e){return this.executeProgram((0,u.createUnpackProgramInfoLoader)(this,e.tensor),[e.tensor])}}},1640:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WEBGL_OP_RESOLVE_RULES=void 0;let s=r(2898),a=o(r(7839)),l=r(4196),u=r(2069),c=r(8138),d=r(9663),h=r(5193),p=r(7992),f=r(1253),g=r(4776),m=r(6572),_=r(3346),b=r(5623),y=r(2870),w=r(2143),v=r(4939),x=r(718),T=r(2268),S=r(8117),A=r(2278),O=r(5524),k=r(5975),E=r(3933),M=r(6558),P=r(5723),I=r(3738),C=o(r(4909)),F=r(8428),D=r(9793);t.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",C.abs],["Acos","","7+",C.acos],["Add","","7+",a.add],["And","","7+",a.and],["Asin","","7+",C.asin],["Atan","","7+",C.atan],["AveragePool","","7+",w.averagePool,w.parseAveragePoolAttributes],["BatchNormalization","","7+",s.batchNormalization,s.parseBatchNormalizationAttributes],["Cast","","6+",l.cast,l.parseCastAttributes],["Ceil","","6+",C.ceil],["Clip","","6-10",C.clip,C.parseClipAttributes],["Clip","","11+",C.clipV11],["Concat","","4+",u.concat,u.parseConcatAttributes],["Conv","","1+",c.conv,c.parseConvAttributes],["ConvTranspose","","1+",d.convTranspose,d.parseConvTransposeAttributes],["Cos","","7+",C.cos],["Div","","7+",a.div],["Dropout","","7+",C.identity],["DepthToSpace","","1+",h.depthToSpace,h.parseDepthToSpaceAttributes],["Equal","","7+",a.equal],["Elu","","6+",C.elu,C.parseEluAttributes],["Exp","","6+",C.exp],["Flatten","","1+",p.flatten,p.parseFlattenAttributes],["Floor","","6+",C.floor],["FusedConv","com.microsoft","1+",c.conv,c.parseConvAttributes],["Gather","","1+",f.gather,f.parseGatherAttributes],["Gemm","","7-10",g.gemm,g.parseGemmAttributesV7],["Gemm","","11+",g.gemm,g.parseGemmAttributesV11],["GlobalAveragePool","","1+",w.globalAveragePool,w.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",w.globalMaxPool],["Greater","","7+",a.greater],["Identity","","1+",C.identity],["ImageScaler","","1+",m.imageScaler,m.parseImageScalerAttributes],["InstanceNormalization","","6+",_.instanceNormalization,_.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",C.leakyRelu,C.parseLeakyReluAttributes],["Less","","7+",a.less],["Log","","6+",C.log],["MatMul","","1+",b.matMul,b.parseMatMulAttributes],["MaxPool","","1+",w.maxPool,w.parseMaxPoolAttributes],["Mul","","7+",a.mul],["Neg","","6+",C.neg],["Not","","1+",C.not],["Or","","7+",a.or],["Pad","","2-10",y.padV2,y.parsePadAttributesV2],["Pad","","11+",y.padV11,y.parsePadAttributesV11],["Pow","","7+",a.pow],["PRelu","","7+",a.pRelu],["ReduceLogSum","","1+",v.reduceLogSum,v.parseReduceAttributes],["ReduceMax","","1+",v.reduceMax,v.parseReduceAttributes],["ReduceMean","","1+",v.reduceMean,v.parseReduceAttributes],["ReduceMin","","1+",v.reduceMin,v.parseReduceAttributes],["ReduceProd","","1+",v.reduceProd,v.parseReduceAttributes],["ReduceSum","","1-12",v.reduceSum,v.parseReduceAttributes],["ReduceSumSquare","","1+",v.reduceLogSumSquare,v.parseReduceAttributes],["Relu","","6+",C.relu],["Reshape","","5+",x.reshape],["Resize","","10",T.resize,T.parseResizeAttributesV10],["Resize","","11+",T.resize,T.parseResizeAttributesV11],["Shape","","1+",S.shape],["Sigmoid","","6+",C.sigmoid],["Sin","","7+",C.sin],["Slice","","10+",A.sliceV10],["Slice","","1-9",A.slice,A.parseSliceAttributes],["Softmax","","1-12",O.softmax,O.parseSoftmaxAttributes],["Softmax","","13+",O.softmaxV13,O.parseSoftmaxAttributesV13],["Split","","2-12",k.split,k.parseSplitAttributes],["Sqrt","","6+",C.sqrt],["Squeeze","","1-12",E.squeeze,E.parseSqueezeAttributes],["Squeeze","","13+",E.squeezeV13],["Sub","","7+",a.sub],["Sum","","6+",M.sum],["Tan","","7+",C.tan],["Tanh","","6+",C.tanh],["Tile","","6+",P.tile],["Transpose","","1+",I.transpose,I.parseTransposeAttributes],["Upsample","","7-8",D.upsample,D.parseUpsampleAttributesV7],["Upsample","","9",D.upsample,D.parseUpsampleAttributesV9],["Unsqueeze","","1-12",F.unsqueeze,F.parseUnsqueezeAttributes],["Unsqueeze","","13+",F.unsqueezeV13],["Xor","","7+",a.xor]]},2898:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBatchNormalizationAttributes=t.batchNormalization=void 0;let n=r(246),i=r(5060),o=r(2039),s={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[o.TextureType.unpacked,o.TextureType.unpacked,o.TextureType.unpacked,o.TextureType.unpacked,o.TextureType.unpacked]};t.batchNormalization=(e,t,r)=>(l(t),[e.run(Object.assign(Object.assign({},s),{cacheHint:r.cacheKey,get:()=>a(e,t,r)}),t)]),t.parseBatchNormalizationAttributes=e=>{let t=e.attributes.getFloat("epsilon",1e-5),r=e.attributes.getFloat("momentum",.9),i=e.attributes.getInt("spatial",1);return(0,n.createAttributeWithCacheKey)({epsilon:t,momentum:r,spatial:i})};let a=(e,t,r)=>{let n=(0,i.getGlsl)(e.session.backend.glContext.version),a=t[0].dims.length,[l,u]=e.calculateTextureWidthAndHeight(t[1].dims,o.TextureType.unpacked),c=`
  float process(int[${a}] indices) {
    vec2 position = offsetToCoords(indices[1], ${l}, ${u});
    float scale = getColorAsFloat(${n.texture2D}(Scale, position));
    float mean = getColorAsFloat(${n.texture2D}(Mean, position));
    float variance = getColorAsFloat(${n.texture2D}(Variance, position));
    float b = getColorAsFloat(${n.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${r.epsilon})) ) + b;
  }`;return Object.assign(Object.assign({},s),{output:{dims:t[0].dims,type:t[0].type,textureType:o.TextureType.unpacked},shaderSource:c})},l=e=>{if(!e||5!==e.length)throw Error("BatchNormalization requires 5 inputs.");let t=e[0],r=e[1],n=e[2],i=e[3],o=e[4];if(t.dims.length<3||1!==r.dims.length||1!==n.dims.length||1!==i.dims.length||1!==o.dims.length||r.dims[0]!==t.dims[1]||n.dims[0]!==t.dims[1]||i.dims[0]!==t.dims[1]||o.dims[0]!==t.dims[1])throw Error("invalid input shape.");if("float32"!==t.type&&"float64"!==t.type||"float32"!==r.type&&"float64"!==r.type||"float32"!==n.type&&"float64"!==n.type||"float32"!==i.type&&"float64"!==i.type||"float32"!==o.type&&"float64"!==o.type)throw Error("invalid input tensor types.")}},7839:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.xor=t.sub=t.pRelu=t.pow=t.or=t.mul=t.less=t.greater=t.equal=t.div=t.and=t.add=t.glslPRelu=t.glslPow=t.glslXor=t.glslOr=t.glslAnd=t.glslLess=t.glslGreater=t.glslEqual=t.glslSub=t.glslMul=t.glslDiv=t.glslAdd=void 0;let n=r(2517),i=r(8520),o=r(5060),s=r(2039);function a(){let e="add_";return{body:`
  float ${e}(float a, float b) {
    return a + b;
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:e,type:i.FunctionType.ValueBased}}function l(){let e="div_";return{body:`
  float ${e}(float a, float b) {
    return a / b;
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:e,type:i.FunctionType.ValueBased}}function u(){let e="mul_";return{body:`
  float ${e}(float a, float b) {
    return a * b;
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:e,type:i.FunctionType.ValueBased}}function c(){let e="sub_";return{body:`
  float ${e}(float a, float b) {
    return a - b;
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:e,type:i.FunctionType.ValueBased}}function d(){let e="equal_";return{body:`
  float ${e}(float a, float b) {
    return float(a == b);
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:e,type:i.FunctionType.ValueBased}}function h(){let e="greater_";return{body:`
  float ${e}(float a, float b) {
    return float(a > b);
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:e,type:i.FunctionType.ValueBased}}function p(){let e="less_";return{body:`
  float ${e}(float a, float b) {
    return float(a < b);
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:e,type:i.FunctionType.ValueBased}}function f(){let e="and_";return{body:`
  float ${e}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:e,type:i.FunctionType.ValueBased}}function g(){let e="or_";return{body:`
  float ${e}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:e,type:i.FunctionType.ValueBased}}function m(){let e="xor_";return{body:`
  float ${e}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:e,type:i.FunctionType.ValueBased}}function _(){return function(e){let t="pow_";return{body:`
  float ${t}(float a, float b) {
    return pow(a, b);
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return pow(v1, v2);
  }
  `,name:t,type:i.FunctionType.ValueBased}}(0)}function b(){let e="prelu_";return{body:`
  float ${e}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:e,type:i.FunctionType.ValueBased}}t.glslAdd=a,t.glslDiv=l,t.glslMul=u,t.glslSub=c,t.glslEqual=d,t.glslGreater=h,t.glslLess=p,t.glslAnd=f,t.glslOr=g,t.glslXor=m,t.glslPow=_,t.glslPRelu=b;let y=(e,t,r,n=t[0].type,i)=>{let o=e.session.pack?s.TextureType.packed:s.TextureType.unpacked;return{name:r.name,inputNames:["A","B"],inputTypes:[o,o],cacheHint:i,get:()=>w(e,t,r,n)}},w=(e,t,r,i=t[0].type)=>{let a=e.session.pack?s.TextureType.packed:s.TextureType.unpacked,l=!n.ShapeUtil.areEqual(t[0].dims,t[1].dims),u=t[0].dims,c=e.session.pack;if(l){let s=n.BroadcastUtil.calcShape(t[0].dims,t[1].dims,!1);if(!s)throw Error("Can't perform binary op on the given tensors");let l=(u=s).length,d=0!==t[0].dims.length?t[0].dims.length:1,h=0!==t[1].dims.length?t[1].dims.length:1,p=0!==t[0].dims.length?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",f=0!==t[1].dims.length?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",g=(0,o.getGlsl)(e.session.backend.glContext.version),m=c?`
      ${r.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${r.name}(a, b);
        ${g.output} = result;
      }`:`
      ${r.body}
      float process(int indices[${l}]) {
        int aindices[${d}];
        int bindices[${h}];
        ${p}
        ${f}
        return ${r.name}(_A(aindices), _B(bindices));
      }`;return{name:r.name,inputNames:["A","B"],inputTypes:[a,a],output:{dims:u,type:i,textureType:a},shaderSource:m,hasMain:c}}let d=(0,o.getGlsl)(e.session.backend.glContext.version),h=`
    ${r.body}
    void main() {
      vec4 v1 = ${d.texture2D}(A, TexCoords);
      vec4 v2 = ${d.texture2D}(B, TexCoords);
      vec4 result = ${r.name}(v1, v2);
      ${d.output} = result;
    }
    `;return{name:r.name,inputNames:["A","B"],inputTypes:[a,a],output:{dims:t[0].dims,type:i,textureType:a},shaderSource:h,hasMain:!0}};t.add=(e,t)=>[e.run(y(e,t,a()),t)],t.and=(e,t)=>[e.run(y(e,t,f(),"bool"),t)],t.div=(e,t)=>[e.run(y(e,t,l()),t)],t.equal=(e,t)=>[e.run(y(e,t,d(),"bool"),t)],t.greater=(e,t)=>[e.run(y(e,t,h(),"bool"),t)],t.less=(e,t)=>[e.run(y(e,t,p(),"bool"),t)],t.mul=(e,t)=>[e.run(y(e,t,u()),t)],t.or=(e,t)=>[e.run(y(e,t,g(),"bool"),t)],t.pow=(e,t)=>[e.run(y(e,t,_()),t)],t.pRelu=(e,t)=>[e.run(y(e,t,b()),t)],t.sub=(e,t)=>[e.run(y(e,t,c()),t)],t.xor=(e,t)=>[e.run(y(e,t,m(),"bool"),t)]},4196:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCastAttributes=t.cast=void 0;let n=r(2517);t.cast=(e,t,r)=>(i(t),[e.cast(t[0],r)]),t.parseCastAttributes=e=>n.ProtoUtil.tensorDataTypeFromProto(e.attributes.getInt("to"));let i=e=>{if(!e||1!==e.length)throw Error("Cast requires 1 input.");if("string"===e[0].type)throw Error("Invalid input type.")}},1163:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPackedConcatProgramInfoLoader=void 0;let n=r(5060),i=r(2039),o=r(9390),s=r(2827);t.createPackedConcatProgramInfoLoader=(e,t,r)=>{var l,u;let c=(l=t.length,u=r.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:l},(e,t)=>`X${t}`),inputTypes:Array(l).fill(i.TextureType.packed),cacheHint:u});return Object.assign(Object.assign({},c),{get:()=>((e,t,r,l)=>{let u=r[0].dims.slice();if(l>=u.length||l<-1*u.length)throw Error("axis specified for concat doesn't match input dimensionality");l<0&&(l=u.length+l);let c=u.slice(0);for(let e=1;e<r.length;e++){let t=r[e].dims.slice();for(let e=0;e<u.length;e++)if(e===l)c[l]+=t[e];else if(u[e]!==t[e])throw Error("non concat dimensions must match")}let d=c.length,h=(0,s.getChannels)("coords",d),p=(0,o.getCoordsDataType)(d),f=(0,s.unpackFromChannel)(),g=r.map(e=>e.dims),m=(0,o.getGlChannels)(d),_=Array(g.length-1);_[0]=g[0][l];for(let e=1;e<_.length;e++)_[e]=_[e-1]+g[e][l];let b=m[l],y=m.slice(-2),w=m.join(),v=`if (${b} < ${_[0]}) {
        return getChannel(
            getX0(${w}), vec2(${y.join()}));
        }`;for(let e=1;e<_.length;e++){let t=_[e-1];v+=`
            if (${b} < ${_[e]}  && ${b} >= ${_[e-1]}) {
              return getChannel(
                getX${e}(${a(m,b,t)}),
                vec2(${a(y,b,t)}));
            }`}let x=_.length,T=_[_.length-1];v+=`
            return getChannel(
              getX${x}(${a(m,b,T)}),
              vec2(${a(y,b,T)}));`;let S=(0,n.getGlsl)(e.session.backend.glContext.version),A=`
          ${f}
          float getValue(${m.map(e=>"int "+e)}) {
            ${v}
          }

          void main() {
            ${p} coords = getOutputCoords();
            int lastDim = coords.${m[d-1]};
            coords.${m[d-1]} = coords.${m[d-2]};
            coords.${m[d-2]} = lastDim;

            vec4 result = vec4(getValue(${h}), 0., 0., 0.);

            ${h[d-1]} = ${h[d-1]} + 1;
            if (${h[d-1]} < ${c[d-1]}) {
              result.g = getValue(${h});
            }

            ${h[d-2]} = ${h[d-2]} + 1;
            if (${h[d-2]} < ${c[d-2]}) {
              result.a = getValue(${h});
            }

            ${h[d-1]} = ${h[d-1]} - 1;
            if (${h[d-2]} < ${c[d-2]} &&
                ${h[d-1]} < ${c[d-1]}) {
              result.b = getValue(${h});
            }
            ${S.output} = result;
          }
        `;return Object.assign(Object.assign({},t),{output:{dims:c,type:r[0].type,textureType:i.TextureType.packed},shaderSource:A,hasMain:!0})})(e,c,t,r.axis)})};let a=(e,t,r)=>{let n=e.indexOf(t);return e.map((e,t)=>t===n?`${e} - ${r}`:e).join()}},2069:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseConcatAttributes=t.concat=void 0;let n=r(246),i=r(2039),o=r(1163);t.concat=(e,t,r)=>(d(t),e.session.pack&&t[0].dims.length>1?[e.run((0,o.createPackedConcatProgramInfoLoader)(e,t,r),t)]:[e.run(s(e,t,r),t)]);let s=(e,t,r)=>{var n,o;let s=(n=t.length,o=r.cacheKey,{name:"Concat",inputNames:Array.from({length:n},(e,t)=>`X${t}`),inputTypes:Array(n).fill(i.TextureType.unpacked),cacheHint:o});return Object.assign(Object.assign({},s),{get:()=>((e,t,r,n)=>{let o=r[0].dims.slice();if(n>=o.length||n<-1*o.length)throw Error("axis specified for concat doesn't match input dimensionality");n<0&&(n=o.length+n);let s=o.slice(0);for(let e=1;e<r.length;e++){let t=r[e].dims.slice();for(let e=0;e<o.length;e++)if(e===n)s[n]+=t[e];else if(o[e]!==t[e])throw Error("non concat dimensions must match")}let d=s.length,h=Array(r.length),p=0;for(let e=0;e<h.length;++e)p+=r[e].dims[n],h[e]=p;let f="";f=r.length<5?a(h):l(h);let g=`
        ${u(r.length,d)}
        ${c(h)}
        ${f}
        float process(int indices[${d}]) {
          int textureIndex = getTextureWhereDataResides (indices[${n}]);

          if(textureIndex != 0) {
            indices[${n}] = indices[${n}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return Object.assign(Object.assign({},t),{output:{dims:s,type:r[0].type,textureType:i.TextureType.unpacked},shaderSource:g})})(0,s,t,r.axis)})},a=e=>`int getTextureWhereDataResides(int index) {
      ${e.map((e,t)=>`if(index<${e}) {return ${t};}
`).join("")}
    }`,l=e=>a(e),u=(e,t)=>{let r=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${t}]) {`];for(let t=0;t<e;++t)0===t?r.push(`	if (textureIndex == ${t}) { return _X${t}(indices); }`):t===e-1?r.push(`	else { return _X${t}(indices); }`):r.push(`	else if (textureIndex == ${t}) { return _X${t}(indices); }`);return r.push("	}"),r.join("\n")},c=e=>{let t=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let r=0;r<e.length;++r)0===r?t.push(`	if (index == ${r}) { return ${e[r]}; }`):r===e.length-1?t.push(`	else { return ${e[r]}; }`):t.push(`	else if (index == ${r}) { return ${e[r]}; }`);return t.push("	}"),t.join("\n")};t.parseConcatAttributes=e=>(0,n.createAttributeWithCacheKey)({axis:e.attributes.getInt("axis")});let d=e=>{if(!e||e.length<1)throw Error("too few inputs");let t=e[0].type,r=e[0].dims.length;if("string"===t)throw Error("string tensor is not supported yet");for(let n of e){if(n.type!==t)throw Error("input tensors should be one type");if(n.dims.length!==r)throw Error("input tensors should have the same shape")}}},4770:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUnpackedGroupedConvProgramInfoLoader=void 0;let n=r(6231),i=r(5060),o=r(2039),s=r(8138),a=r(2823);t.createUnpackedGroupedConvProgramInfoLoader=(e,t,r)=>{var l,u;let c=(l=t.length>2,u=r.cacheKey,{name:"GroupedConv",inputNames:l?["X","W","Bias"]:["X","W"],inputTypes:l?[o.TextureType.unpacked,o.TextureType.unpacked,o.TextureType.unpacked]:[o.TextureType.unpacked,o.TextureType.unpacked],cacheHint:u});return Object.assign(Object.assign({},c),{get:()=>((e,t,r,l)=>{let u=t.length>2?"value += getBias(output_channel);":"",c=t[0].dims.slice(),d=t[1].dims.slice(),h=d[0]/l.group;n.Logger.verbose("GroupedConv",`autpPad:${l.autoPad}, dilations:${l.dilations}, group:${l.group}, kernelShape:${l.kernelShape}, pads:${l.pads}, strides:${l.strides}`);let p=(0,s.calculateOutputShape)(c,d,l.dilations,l.pads,l.strides),f=(0,i.getGlsl)(e.session.backend.glContext.version),{activationFunction:g,applyActivation:m}=(0,a.getActivationSnippet)(l),_=`
  const ivec2 strides = ivec2(${l.strides[0]}, ${l.strides[1]});
  const ivec2 pads = ivec2(${l.pads[0]}, ${l.pads[1]});
  ${g}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${h};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${d[1]}; wInChannel++) {
      int input_channel = group_id * ${d[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${d[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${l.dilations[0]};

        if (xHeight < 0 || xHeight >= ${c[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${d[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${l.dilations[1]};
          if (xWidth < 0 || xWidth >= ${c[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${u}
    ${m}
    ${f.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},r),{output:{dims:p,type:t[0].type,textureType:o.TextureType.unpacked},shaderSource:_,hasMain:!0})})(e,t,c,r)})}},1386:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.conv2DPacked=t.conv2DPackedPointwise=void 0;let n=r(8138),i=r(8555),o=r(708);t.conv2DPackedPointwise=(e,t,r)=>{let i=t[0].dims,s=t[1].dims,a=(0,n.calculateOutputShape)(i,s,r.dilations,r.pads,r.strides),l=e.reshapePacked(t[0],[i[1],i[2]*i[3]]),u=e.reshapePacked(t[1],[s[0],s[1]]),c=t.length>2?[u,l,t[2]]:[u,l],d=e.run((0,o.createPackedMatmulProgramInfoLoader)(e,c,r),c);return e.reshapePacked(d,a)},t.conv2DPacked=(e,t,r)=>{let s=t[0].dims,a=t[1].dims,l=(0,n.calculateOutputShape)(s,a,r.dilations,r.pads,r.strides),u=e.run((0,i.createPackedIm2ColProgramInfoLoader)(e,t[0],t[1],l,r),[t[0]]),c=e.reshapePacked(t[1],[a[0],a[1]*a[2]*a[3]]),d=3===t.length?[c,u,t[2]]:[c,u],h=e.run((0,o.createPackedMatmulProgramInfoLoader)(e,d,r),d);return e.reshapePacked(h,l)}},9663:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseConvTransposeAttributes=t.convTranspose=void 0;let n=r(246),i=r(5060),o=r(2039),s=r(2823),a=(e,t,r,n,i,o)=>(e-1)*t+r+(n-1)*i+1-o,l=(e,t,r,n,i)=>{let o=Math.floor(e/2);"SAME_UPPER"===t?(r[n]=o,r[i]=e-o):"SAME_LOWER"===t&&(r[n]=e-o,r[i]=o)};t.convTranspose=(e,t,r)=>(h(t,r),u(e,t,r));let u=(e,t,r)=>{let n=d(r,t);return[c(e,t,n)]},c=(e,t,r)=>e.run(((e,t,r)=>{var n,a;let l=(n=t.length>2,a=r.cacheKey,{name:"ConvTranspose",inputNames:n?["X","W","B"]:["X","W"],inputTypes:n?[o.TextureType.unpacked,o.TextureType.unpacked,o.TextureType.unpacked]:[o.TextureType.unpacked,o.TextureType.unpacked],cacheHint:a});return Object.assign(Object.assign({},l),{get:()=>((e,t,r,n)=>{let a=t.length>2?"getB(output_channel)":"0.0",l=t[0].dims,u=t[1].dims,c=u[1],d=u[0]/n.group,h=[t[0].dims[0],t[1].dims[1]*n.group,...n.outputShape],p=(0,i.getGlsl)(e.session.backend.glContext.version),{activationFunction:f,applyActivation:g}=(0,s.getActivationSnippet)(n),m=`
  const ivec2 strides = ivec2(${n.strides[0]}, ${n.strides[1]});
  const ivec2 pads = ivec2(${n.pads[0]}, ${n.pads[1]});
  ${f}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${c};
    int wOutChannel = output_channel - group_id * ${c};

    float value = ${a};
    for (int inChannelOffset = 0; inChannelOffset < ${d}; inChannelOffset++) {
      int input_channel = group_id * ${d} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${u[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${u[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${n.dilations[0]}, wHOff * ${n.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${l[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${l[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${g}
    ${p.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},r),{output:{dims:h,type:t[0].type,textureType:o.TextureType.unpacked},shaderSource:m,hasMain:!0})})(e,t,l,r)})})(e,t,r),t),d=(e,t)=>{let r=e.kernelShape.slice();if(0===e.kernelShape.length)for(let e=2;e<t[1].dims.length;++e)r.push(t[1].dims[e]);let n=e.pads.slice(),i=e.outputShape.slice();((e,t,r,n,i,o,s,u)=>{let c=e.length-2,d=0===u.length;for(let h=0;h<c;++h){let p=d?e[h+2]*o[h]:u[h];l(a(e[h+2],o[h],i[h],t[h],r[h],p),n,i,h,h+c),d&&u.push(o[h]*(e[h+2]-1)+s[h]+(t[h]-1)*r[h]+1-i[h]-i[h+c])}})(t[0].dims,r,e.dilations,e.autoPad,n,e.strides,e.outputPadding,i);let o=Object.assign({},e);return Object.assign(o,{kernelShape:r,pads:n,outputShape:i,cacheKey:e.cacheKey}),o};t.parseConvTransposeAttributes=e=>{let t=e.attributes,r=(0,s.parseInternalActivationAttributes)(t),i=t.getString("auto_pad","NOTSET"),o=t.getInts("dilations",[1,1]),a=t.getInt("group",1),l=t.getInts("kernel_shape",[]),u=t.getInts("output_padding",[0,0]),c=t.getInts("output_shape",[]),d=t.getInts("pads",[0,0,0,0]),h=t.getInts("strides",[1,1]);return(0,n.createAttributeWithCacheKey)(Object.assign({autoPad:i,dilations:o,group:a,kernelShape:l,outputPadding:u,outputShape:c,pads:d,strides:h},r))};let h=(e,t)=>{if(!e||2!==e.length&&3!==e.length)throw Error("Conv requires 2 or 3 inputs");if(4!==e[0].dims.length||4!==e[1].dims.length)throw Error("currently only support 2-dimensional conv");if(e[0].dims[1]!==e[1].dims[0])throw Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let r=e[1].dims[1]*t.group;if(3===e.length&&(1!==e[2].dims.length||e[2].dims[0]!==r))throw Error("invalid bias");let n=e[0].dims.length-2;if(t.dilations.length!==n)throw Error(`dilations should be ${n}D`);if(t.strides.length!==n)throw Error(`strides should be ${n}D`);if(t.pads.length!==2*n)throw Error(`pads should be ${2*n}D`);if(t.outputPadding.length!==n)throw Error(`output_padding should be ${n}D`);if(0!==t.kernelShape.length&&t.kernelShape.length!==e[1].dims.length-2)throw Error("invalid kernel shape");if(0!==t.outputShape.length&&t.outputShape.length!==e[0].dims.length-2)throw Error("invalid output shape");if("float32"!==e[0].type||"float32"!==e[1].type)throw Error("ConvTranspose input(X,W) should be float tensor");if(3===e.length&&"float32"!==e[2].type)throw Error("ConvTranspose input(bias) should be float tensor")}},8138:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseConvAttributes=t.conv=t.calculateOutputShape=void 0;let n=r(246),i=r(2517),o=r(4770),s=r(1386),a=r(9828),l=r(2823),u=r(3248),c=r(5623);t.calculateOutputShape=(e,t,r,n,i)=>{let o=e[0],s=e.slice(2),a=s.length,l=t[0],u=t.slice(2).map((e,t)=>e+(e-1)*(r[t]-1));return[o,l].concat(...s.map((e,t)=>e+n[t]+n[t+a]).map((e,t)=>Math.floor((e-u[t]+i[t])/i[t])))},t.conv=(e,t,r)=>(g(t,r),d(e,t,r));let d=(e,t,r)=>{let n=f(r,t),i=e.session.pack,a=1===n.kernelShape[0]&&1===n.kernelShape[1];return n.group>1?[e.run((0,o.createUnpackedGroupedConvProgramInfoLoader)(e,t,n),t)]:a&&i?[h(e,t,n)]:i&&4===t[0].dims.length&&1===t[0].dims[0]&&!a?[(0,s.conv2DPacked)(e,t,n)]:[p(e,t,n)]},h=(e,r,n)=>{let i=r[0].dims,o=r[1].dims,s=(0,t.calculateOutputShape)(i,o,n.dilations,n.pads,n.strides),a=e.reshapeUnpacked(r[0],[i[1],i[2]*i[3]]),l=e.reshapeUnpacked(r[1],[o[0],o[1]]),u=r.length>2?[l,a,r[2]]:[l,a],d=e.run((0,c.createMatmulProgramInfoLoader)(u,n),u);return e.reshapeUnpacked(d,s)},p=(e,r,n)=>{let i=r[0].dims,o=r[1].dims,s=(0,t.calculateOutputShape)(i,o,n.dilations,n.pads,n.strides),l=e.run((0,u.createIm2ColProgramInfoLoader)(e,r[0],r[1],s,n),[r[0]]),c=3===r.length?[l,r[1],r[2]]:[l,r[1]];return e.run((0,a.createDotProductProgramInfoLoader)(e,r,s,n),c)},f=(e,t)=>{let r=e.kernelShape.slice();if(0===e.kernelShape.length)for(let e=2;e<t[1].dims.length;++e)r.push(t[1].dims[e]);let n=e.pads.slice();i.PoolConvUtil.adjustPadsBasedOnAutoPad(t[0].dims,e.strides,e.dilations,r,n,e.autoPad);let o=Object.assign({},e);return Object.assign(o,{kernelShape:r,pads:n,cacheKey:e.cacheKey}),o};t.parseConvAttributes=e=>{let t=e.attributes,r=(0,l.parseInternalActivationAttributes)(t),i=t.getString("auto_pad","NOTSET"),o=t.getInts("dilations",[1,1]),s=t.getInt("group",1),a=t.getInts("kernel_shape",[]),u=t.getInts("pads",[0,0,0,0]),c=t.getInts("strides",[1,1]);return(0,n.createAttributeWithCacheKey)(Object.assign({autoPad:i,dilations:o,group:s,kernelShape:a,pads:u,strides:c},r))};let g=(e,t)=>{if(!e||2!==e.length&&3!==e.length)throw Error("Conv requires 2 or 3 inputs");if(4!==e[0].dims.length||4!==e[1].dims.length)throw Error("currently only support 2-dimensional conv");if(e[0].dims[1]!==e[1].dims[1]*t.group)throw Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(3===e.length&&(1!==e[2].dims.length||e[1].dims[0]!==e[2].dims[0]))throw Error("invalid bias");let r=e[0].dims.length-2;if(t.dilations.length!==r)throw Error(`dilations should be ${r}D`);if(t.strides.length!==r)throw Error(`strides should be ${r}D`);if(t.pads.length!==2*r)throw Error(`pads should be ${2*r}D`);if(0!==t.kernelShape.length&&t.kernelShape.length!==e[1].dims.length-2)throw Error("invalid kernel shape");if("float32"!==e[0].type||"float32"!==e[1].type)throw Error("Conv input(X,W) should be float tensor");if(3===e.length&&"float32"!==e[2].type)throw Error("Conv input(bias) should be float tensor")}},5193:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDepthToSpaceAttributes=t.depthToSpace=void 0;let n=r(3738);t.depthToSpace=(e,t,r)=>{i(t);let o=r.blocksize,s=o*o,a="DCR"===r.mode?[0,3,4,1,5,2]:[0,1,4,2,5,3],l="DCR"===r.mode?[t[0].dims[0],o,o,t[0].dims[1]/s,t[0].dims[2],t[0].dims[3]]:[t[0].dims[0],t[0].dims[1]/s,o,o,t[0].dims[2],t[0].dims[3]],u=e.reshapeUnpacked(t[0],l),c={perm:a,cacheKey:`${a}`},[d]=(0,n.transpose)(e,[u],c),h=[t[0].dims[0],t[0].dims[1]/s,t[0].dims[2]*o,t[0].dims[3]*o];return[e.reshapeUnpacked(d,h)]},t.parseDepthToSpaceAttributes=e=>{let t=e.attributes.getInt("blocksize");if(t<1)throw Error(`blocksize must be >= 1, but got : ${t} for DepthToSpace`);let r=e.attributes.getString("mode","DCR");if("DCR"!==r&&"CRD"!==r)throw Error(`unrecognized mode: ${r} for DepthToSpace`);return{mode:r,blocksize:t}};let i=e=>{if(1!==e.length)throw Error(`DepthToSpace expect 1 inputs, but got ${e.length}`);if("string"===e[0].type||4!==e[0].dims.length)throw TypeError("DepthToSpace input should be a 4-D numeric tensor")}},9828:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDotProductProgramInfoLoader=void 0;let n=r(2517),i=r(5060),o=r(2039),s=r(2823),a=r(3248);t.createDotProductProgramInfoLoader=(e,t,r,l)=>{let u,c,d=(u=t.length>2,c=l,{name:"ConvDotProduct",inputNames:u?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:u?[o.TextureType.unpacked,o.TextureType.packedLastDimension,o.TextureType.unpacked]:[o.TextureType.unpacked,o.TextureType.packedLastDimension],cacheKey:c.activationCacheKey});return Object.assign(Object.assign({},d),{get:()=>((e,t,r,l,u)=>{let c=r[0].dims,d=r[1].dims,h=[d[0],Math.ceil(c[1]*d[2]*d[3]/4)],p=(0,a.calculateIm2ColDims)(c,d,l),[f,g]=e.calculateTextureWidthAndHeight(h,o.TextureType.packedLastDimension),m=n.ShapeUtil.computeStrides(p),[_,b]=e.calculateTextureWidthAndHeight(p,o.TextureType.packedLastDimension),y=l.length,w=r.length<3?"0.0":"_B(b)",v=Math.ceil(c[1]*d[2]*d[3]/4),{activationFunction:x,applyActivation:T}=(0,s.getActivationSnippet)(u),S=(0,i.getGlsl)(e.session.backend.glContext.version),A=`
${x}
float process(int indices[${y}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${m[0]} + im2col[1] * ${m[1]} + im2col[2] * ${m[2]};
  int kernelOffset = indices[1] * ${h[1]};
  float value = ${w};
  for (int i = 0; i < ${v}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${_}, ${b});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${f}, ${g});
    value += dot(${S.texture2D}(Im2Col, im2colCoords), ${S.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${T}
  return value;
}`;return Object.assign(Object.assign({},t),{output:{dims:l,type:r[0].type,textureType:o.TextureType.unpacked},shaderSource:A})})(e,d,t,r,l)})}},7992:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseFlattenAttributes=t.flatten=void 0;let n=r(2517);t.flatten=(e,t,r)=>{i(t,r);let o=n.ShapeUtil.flattenShape(t[0].dims,r);return[e.reshapeUnpacked(t[0],o)]},t.parseFlattenAttributes=e=>e.attributes.getInt("axis",1);let i=(e,t)=>{if(!e||1!==e.length)throw Error("Flatten requires 1 input.");let r=e[0].dims.length;if(0===r)throw Error("scalar tensor is not supported.");if(t<-r||t>r)throw Error("Invalid axis");if("string"===e[0].type)throw Error("string tensor is not supported.")}},2823:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseInternalActivationAttributes=t.getActivationSnippet=void 0;let n=r(2517),i=r(4909);t.getActivationSnippet=function(e){let t;switch(e.activation){case"Relu":t=(0,i.glslRelu)();break;case"Sigmoid":t=(0,i.glslSigmoid)();break;case"Clip":t=(0,i.glslClip)(e.clipMin,e.clipMax);break;default:return{activationFunction:"",applyActivation:""}}let r=t.name;return{activationFunction:t.body,applyActivation:`value = ${r}_(value);`}},t.parseInternalActivationAttributes=e=>{let t=e.getString("activation","");if("Clip"===t){let[r,i]=e.getFloats("activation_params",[n.MIN_CLIP,n.MAX_CLIP]);return{activation:t,clipMax:i,clipMin:r,activationCacheKey:`${t}:${r},${i}`}}return{activation:t,activationCacheKey:t}}},1253:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGatherAttributes=t.gather=void 0;let n=r(246),i=r(782),o=r(2517),s=r(2039);t.gather=(e,t,r)=>(u(t,r.axis),[e.run(l(e,t,r),t)]),t.parseGatherAttributes=e=>(0,n.createAttributeWithCacheKey)({axis:e.attributes.getInt("axis",0)});let a={name:"Gather",inputNames:["A","B"],inputTypes:[s.TextureType.unpacked,s.TextureType.unpacked]},l=(e,t,r)=>{let n=Object.assign(Object.assign({},a),{cacheHint:r.cacheKey});return Object.assign(Object.assign({},n),{get:()=>((e,t,r,n)=>{let i=r[0].dims.slice(),a=r[1].dims.slice(),l=Array(i.length+a.length-1);n=o.ShapeUtil.normalizeAxis(n,i.length);let u=[];for(let e=0;e<l.length;e++)e<n?(l[e]=i[e],u.push(`inputIdx[${e}] = outputIdx[${e}];`)):e<n+a.length?(l[e]=a[e-n],u.push(`indexDataIdx[${e-n}] = outputIdx[${e}];`)):(l[e]=i[e-a.length+1],u.push(`inputIdx[${e-a.length+1}] = outputIdx[${e}];`));let c=`
      float process(int outputIdx[${l.length||1}]) {
        int inputIdx[${i.length}];
        int indexDataIdx[${a.length||1}];
        indexDataIdx[0] = 0;
        ${u.join("\n        ")}
        int idx = int(_B(indexDataIdx));
        inputIdx[${n}] = idx < 0 ? idx + ${i[n]} : idx;
        return _A(inputIdx);
      }`;return Object.assign(Object.assign({},t),{output:{dims:l,type:r[0].type,textureType:s.TextureType.unpacked},shaderSource:c})})(0,n,t,r.axis)})},u=(e,t)=>{if(!e||2!==e.length)throw Error("Gather requires 2 inputs.");let r=e[0].dims.length;if(r<1)throw Error("Invalid input shape.");if(t<-r||t>r-1)throw Error("Invalid axis.");if(-1===i.NUMBER_TYPES.indexOf(e[0].type)||"int32"!==e[1].type&&"int16"!==e[1].type)throw Error("Invaid input type.")}},4776:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGemmAttributesV11=t.parseGemmAttributesV7=t.gemm=void 0;let n=r(246),i=r(2517),o=r(2039);t.gemm=(e,t,r)=>(u(t,r),[e.run(a(t,r),t)]);let s=(e,t)=>{let r=0!==e.attributes.getInt("transA",0),i=0!==e.attributes.getInt("transB",0),o=e.attributes.getFloat("alpha",1),s=e.attributes.getFloat("beta",1);return(0,n.createAttributeWithCacheKey)({transA:r,transB:i,alpha:o,beta:s,isOptionalC:t})};t.parseGemmAttributesV7=e=>s(e,!1),t.parseGemmAttributesV11=e=>s(e,!0);let a=(e,t)=>{let r={name:"Gemm",inputNames:3===e.length?["A","B","C"]:["A","B"],inputTypes:3===e.length?[o.TextureType.unpacked,o.TextureType.unpacked,o.TextureType.unpacked]:[o.TextureType.unpacked,o.TextureType.unpacked],key:t.cacheKey};return Object.assign(Object.assign({},r),{get:()=>l(r,e,t)})},l=(e,t,r)=>{let n=t[0].dims.slice(),s=t[1].dims.slice(),[a,l]=i.GemmUtil.getShapeOfGemmResult(n,r.transA,s,r.transB,3===t.length?t[2].dims:void 0),u=[a,l],c=n[n.length-1],d="";r.transA&&(c=n[0]),r.transA&&r.transB?d="value += _A_T(a) * _B_T(b);":r.transA&&!r.transB?d="value += _A_T(a) * _B(b);":!r.transA&&r.transB?d="value += _A(a) * _B_T(b);":r.transA||r.transB||(d="value += _A(a) * _B(b);");let h=u.length,p=`
      float process(int indices[${h}]) {
          int a[${h}];
          int b[${h}];
          ${3===t.length?`int c[${t[2].dims.length}];`:""}

          copyVec(indices, a);
          copyVec(indices, b);
          ${3===t.length?"bcastIndices_C(indices, c);":""}

          float value = 0.0;
          for (int k=0; k<${c}; ++k) {
              a[${h-1}] = k;
              b[${h-2}] = k;
              ${d}
          }

          value = value * alpha;
          ${3===t.length?"value += beta * _C(c);":""}
          return value;
      }`;return Object.assign(Object.assign({},e),{output:{dims:u,type:t[0].type,textureType:o.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:r.alpha},{name:"beta",type:"float",data:r.beta}],shaderSource:p})},u=(e,t)=>{if(!e)throw Error("Input is missing");if(t.isOptionalC&&(e.length<2||e.length>3))throw Error("Invaid input shape.");if(!t.isOptionalC&&3!==e.length)throw Error("Gemm requires 3 inputs");if(3===e.length&&1!==e[2].dims.length&&2!==e[2].dims.length)throw Error("Invalid input shape of C");if("float32"!==e[0].type&&"float64"!==e[0].type||"float32"!==e[1].type&&"float64"!==e[1].type||3===e.length&&"float32"!==e[2].type&&"float64"!==e[2].type)throw Error("Invalid input type.");if(e[0].type!==e[1].type||3===e.length&&e[0].type!==e[2].type)throw Error("Input types are mismatched")}},8555:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPackedIm2ColProgramInfoLoader=void 0;let n=r(5060),i=r(2039),o=r(2827);t.createPackedIm2ColProgramInfoLoader=(e,t,r,s,a)=>{var l;let u=(l=a.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[i.TextureType.packed],cacheHint:l});return Object.assign(Object.assign({},u),{get:()=>((e,t,r,s,a,l)=>{let u=r.dims,c=s.dims,d=a.length,h=[c[1]*c[2]*c[3],a[2]*a[3]],p=c[2]*c[3],f=(0,o.unpackFromChannel)(),g=(0,n.getGlsl)(e.session.backend.glContext.version),m="";for(let e=0;e<=1;e++)for(let t=0;t<=1;t++)m+=`
            blockIndex = rc.x + ${t};
            pos = rc.y + ${e};

            if(blockIndex < ${h[1]} && pos < ${h[0]}) {
              offsetY = int(blockIndex / (${a[d-1]})) * ${l.strides[0]} -
                ${l.pads[0]};
              d0 = offsetY + ${l.dilations[0]} * (imod(pos, ${p}) / ${c[2]});

              if(d0 < ${u[2]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${a[d-1]}) * ${l.strides[1]} -
                  ${l.pads[1]};
                d1 = offsetX + ${l.dilations[1]} * imod(imod(pos, ${p}), ${c[2]});

                if(d1 < ${u[3]} && d1 >= 0) {

                  ch = int(float(pos)/ ${p}.);
                    innerDims = vec2(d0, d1);
                    result[${2*e+t}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;let _=`
      ${f}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${m}
          ${g.output} = result;
      }
            `;return Object.assign(Object.assign({},t),{output:{dims:h,type:r.type,textureType:i.TextureType.packed},shaderSource:_,hasMain:!0})})(e,u,t,r,s,a)})}},3248:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateIm2ColDims=t.createIm2ColProgramInfoLoader=void 0;let n=r(2039);t.createIm2ColProgramInfoLoader=(e,r,i,o,s)=>{var a;let l=(a=s.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[n.TextureType.unpacked],cacheHint:a});return Object.assign(Object.assign({},l),{get:()=>((e,r,i,o,s,a)=>{let l=i.dims,u=o.dims,c=s.length,d=(0,t.calculateIm2ColDims)(l,u,s,4),h=`
        const int XC = ${l[1]};
        const int XH = ${l[2]};
        const int XW = ${l[3]};
        const int KH = ${a.kernelShape[0]};
        const int KW = ${a.kernelShape[1]};
        const int dilationH = ${a.dilations[0]};
        const int dilationW = ${a.dilations[1]};
        const int strideH = ${a.strides[0]};
        const int strideW = ${a.strides[1]};
        const int padH = ${a.pads[0]};
        const int padW = ${a.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${c}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${l.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return Object.assign(Object.assign({},r),{output:{dims:d,type:i.type,textureType:n.TextureType.packedLastDimension},shaderSource:h})})(0,l,r,i,o,s)})},t.calculateIm2ColDims=(e,t,r,n=4)=>[r[0],r[2],r[3],Math.ceil(e[1]*t[2]*t[3]/n)]},6572:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseImageScalerAttributes=t.imageScaler=void 0;let n=r(246),i=r(2039);t.imageScaler=(e,t,r)=>(l(t),[e.run(s(e,t,r),t)]),t.parseImageScalerAttributes=e=>{let t=e.attributes.getFloat("scale"),r=e.attributes.getFloats("bias");return(0,n.createAttributeWithCacheKey)({scale:t,bias:r})};let o={name:"ImageScaler",inputNames:["X"],inputTypes:[i.TextureType.unpacked]},s=(e,t,r)=>{let n=Object.assign(Object.assign({},o),{cacheHint:r.cacheKey});return Object.assign(Object.assign({},n),{get:()=>((e,t,r,n)=>{let o=r[0].dims.slice(),s=o.length,l=`
      ${a(n.bias.length)}
      float process(int indices[${s}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return Object.assign(Object.assign({},t),{output:{dims:o,type:r[0].type,textureType:i.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:n.bias.length,data:n.bias},{name:"scale",type:"float",data:n.scale}],shaderSource:l})})(0,n,t,r)})},a=e=>{let t=[`float getBias(float bias[${e}], int channel) {`];for(let r=0;r<e;++r)0===r?t.push(`	if (channel == ${r}) { return bias[${r}]; }`):r===e-1?t.push(`	else { return bias[${r}]; }`):t.push(`	else if (channel == ${r}) { return bias[${r}]; }`);return t.push("	}"),t.join("\n")},l=e=>{if(!e||1!==e.length)throw Error("ImageScaler requires 1 input.");if(4!==e[0].dims.length)throw Error("Invalid input shape.");if("float32"!==e[0].type&&"float64"!==e[0].type)throw Error("Invalid input type.")}},3346:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseInstanceNormalizationAttributes=t.instanceNormalization=void 0;let n=r(5060),i=r(2039);t.instanceNormalization=(e,t,r)=>{u(t);let n=e.run(s(t[0]),t);return[e.run(l(e,t[0],r,n.dims),[t[0],n,t[1],t[2]])]},t.parseInstanceNormalizationAttributes=e=>e.attributes.getFloat("epsilon",1e-5);let o={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[i.TextureType.unpacked]},s=e=>Object.assign(Object.assign({},o),{get:()=>((e,t)=>{let r=t.dims.slice(),n=r[1],o=r[2]*r[3],s=[r[0],n],a=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${r[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${r[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${o});
        temp = 0.0;
        for(int a2=0; a2<${r[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${r[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${o});

        return v;
      }`;return Object.assign(Object.assign({},e),{output:{dims:s,type:t.type,textureType:i.TextureType.packedLastDimension},shaderSource:a})})(o,e)}),a={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[i.TextureType.unpacked,i.TextureType.packedLastDimension,i.TextureType.unpacked,i.TextureType.unpacked]},l=(e,t,r,o)=>{let s=Object.assign(Object.assign({},a),{cacheHint:`${r}`});return Object.assign(Object.assign({},s),{get:()=>((e,t,r,o,s)=>{let a=(0,n.getGlsl)(e.session.backend.glContext.version),[l,u]=e.calculateTextureWidthAndHeight(s,i.TextureType.packedLastDimension),[c,d]=[l/4,u],h=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${c}, ${d});
        return ${a.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return Object.assign(Object.assign({},t),{output:{dims:r.dims,type:r.type,textureType:i.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:o}],shaderSource:h})})(e,s,t,r,o)})},u=e=>{if(!e||3!==e.length)throw Error("InstanceNormalization requires 3 inputs.");let t=e[0],r=e[1],n=e[2];if(t.dims.length<3||1!==r.dims.length||1!==n.dims.length)throw Error("Invalid input shape.");if(r.dims[0]!==t.dims[1]||n.dims[0]!==t.dims[1])throw Error("Input shapes are mismatched.");if("float32"!==t.type&&"float64"!==t.type||"float32"!==r.type&&"float64"!==r.type||"float32"!==n.type&&"float64"!==n.type)throw Error("Invalid input type.");if(4!==e[0].dims.length)throw Error("Only support 4-D input shape.")}},708:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPackedMatmulProgramInfoLoader=void 0;let n=r(2517),i=r(5060),o=r(2039),s=r(9390),a=r(2823),l=r(5623);t.createPackedMatmulProgramInfoLoader=(e,t,r)=>{var u,c;let d=(u=t.length>2,c=r.activationCacheKey,{name:"MatMul (packed)",inputNames:u?["A","B","Bias"]:["A","B"],inputTypes:u?[o.TextureType.packed,o.TextureType.packed,o.TextureType.packed]:[o.TextureType.packed,o.TextureType.packed],cacheHint:c});return Object.assign(Object.assign({},d),{get:()=>((e,t,r,u)=>{let c=r.length>2,d=c?"value += getBiasForMatmul();":"",h=r[0].dims,p=r[1].dims,f=n.BroadcastUtil.calcShape(h,p,!0),g=!n.ShapeUtil.areEqual(r[0].dims,r[1].dims);if(!f)throw Error("Can't use matmul on the given tensors");let m=Math.ceil(h[h.length-1]/2),_=h.length,b=p.length,y=(0,i.getGlsl)(e.session.backend.glContext.version),w=(0,s.getCoordsDataType)(f.length),v=f.length,x=(0,s.getGlChannels)(),{activationFunction:T,applyActivation:S}=(0,a.getActivationSnippet)(u),A=c?`${(0,l.getBiasForMatmul)(w,x,r[2].dims,f,!0)}`:"",O=g?`${function(e,t,r,i){let o=[],s=[],a=r[0].dims,l=r[1].dims,u=a.length,c=l.length,d=i.length,h=d-u,p=d-c;(o=a.map((e,r)=>`coords.${t[r+h]}`))[u-1]="i*2",o.join(", "),(s=l.map((e,r)=>`coords.${t[r+p]}`))[c-2]="i*2",s.join(", ");let f=n.BroadcastUtil.getBroadcastDims(a,i),g=n.BroadcastUtil.getBroadcastDims(l,i),m=f.map(e=>`coords.${t[e+h]} = 0;`).join("\n"),_=g.map(e=>`coords.${t[e+p]} = 0;`).join("\n"),b=`int lastDim = coords.${t[d-1]};
  coords.${t[d-1]} = coords.${t[d-2]};
  coords.${t[d-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${e} coords = getOutputCoords();
  ${b}
  ${m}
  vec4 outputValue = getA(${o});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${e} coords = getOutputCoords();
  ${b}
  ${_}
  vec4 outputValue = getB(${s});
  return outputValue;
}`}(w,x,r,f)}`:"",k=g?"getAAtOutCoordsMatmul(i)":`getA(${function(e,t){let r="";for(let n=0;n<t-2;n++)r+=`rc.${e[n]}, `;return r+`rc.${e[t-2]}, i*2`}(x,_)})`,E=g?"getBAtOutCoordsMatmul(i)":`getB(${function(e,t){let r="";for(let n=0;n<t-2;n++)r+=`rc.${e[n]}, `;return r+`i*2, rc.${e[t-1]}`}(x,b)})`,M=`
            ${O}
            ${A}
            ${T}
            void main() {
              ${g?"":`${w} rc =
          getOutputCoords(); int lastDim = rc.${x[v-1]}; rc.${x[v-1]} =
          rc.${x[v-2]}; rc.${x[v-2]} = lastDim;
      `}

              vec4 value = vec4(0);
              for (int i = 0; i < ${m}; i++) {
                vec4 a = ${k};
                vec4 b = ${E};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${d}
              ${S}
              ${y.output} = value;
            }`;return Object.assign(Object.assign({},t),{output:{dims:f,type:r[0].type,textureType:o.TextureType.packed},shaderSource:M,hasMain:!0})})(e,d,t,r)})}},5623:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBiasForMatmul=t.createMatmulProgramInfoLoader=t.parseMatMulAttributes=t.matMul=void 0;let n=r(2517),i=r(2039),o=r(9390),s=r(2823),a=r(708);function l(e,t){var r,a;let l=(r=e.length>2,a=t.activationCacheKey,{name:"MatMul",inputNames:r?["A","B","Bias"]:["A","B"],inputTypes:r?[i.TextureType.unpacked,i.TextureType.unpacked,i.TextureType.unpacked]:[i.TextureType.unpacked,i.TextureType.unpacked],cacheHint:a});return Object.assign(Object.assign({},l),{get:()=>(function(e,t,r){let a=t[0].dims,l=t[1].dims,u=n.BroadcastUtil.calcShape(a,l,!0);if(!u)throw Error("Can't use matmul on the given tensors");let d=(0,o.getCoordsDataType)(u.length),h=(0,o.getGlChannels)(),{activationFunction:p,applyActivation:f}=(0,s.getActivationSnippet)(r),g=t.length>2,m=g?"value += getBiasForMatmul();":"",_=g?`${c(d,h,t[2].dims,u,!1)}`:"",b=u.length,y=a.length,w=l.length,v=`
    ${p}
    ${_}
    float process(int indices[${b}]) {
        int a[${y}];
        int b[${w}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${a[a.length-1]}; ++k) {
            a[${y-1}] = k;
            b[${w-2}] = k;
            value += _A(a) * _B(b);
        }
        ${m}
        ${f}
        return value;
    }`;return Object.assign(Object.assign({},e),{output:{dims:u,type:t[0].type,textureType:i.TextureType.unpacked},shaderSource:v})})(l,e,t)})}t.matMul=(e,t,r)=>(u(t),e.session.pack?[e.run((0,a.createPackedMatmulProgramInfoLoader)(e,t,r),t)]:[e.run(l(t,r),t)]),t.parseMatMulAttributes=e=>(0,s.parseInternalActivationAttributes)(e.attributes),t.createMatmulProgramInfoLoader=l;let u=e=>{if(!e||2!==e.length)throw Error("MatMul requires 2 inputs.");if(e[0].dims[e[0].dims.length-1]!==e[1].dims[e[1].dims.length-2])throw Error("shared dimension does not match.");if("float32"!==e[0].type&&"float64"!==e[0].type||"float32"!==e[1].type&&"float64"!==e[1].type)throw Error("inputs should be float type");if(e[0].type!==e[1].type)throw Error("inputs types should match")};function c(e,t,r,i,o){let s="",a=r.length,l=i.length,u=l-a;s=l<2&&a>0?"coords":r.map((e,r)=>`coords.${t[r+u]}`).join(", ");let c=n.BroadcastUtil.getBroadcastDims(r,i).map(e=>`coords.${t[e+u]} = 0;`).join("\n"),d="vec4(outputValue.xx, outputValue.yy)";return 1===n.ShapeUtil.size(r)&&(d="vec4(outputValue.x)"),o?`
vec4 getBiasForMatmul() {
  ${e} coords = getOutputCoords();
  ${c}
  vec4 outputValue = getBias(${s});
  return ${d};
}`:`
float getBiasForMatmul() {
  ${e} coords = getOutputCoords();
  ${c}
  return getBias(coords.x);
}`}t.getBiasForMatmul=c},2403:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPackProgramInfoLoader=void 0;let n=r(5060),i=r(2039),o=r(9390),s=r(2827),a={name:"pack",inputNames:["A"],inputTypes:[i.TextureType.unpackedReversed]};t.createPackProgramInfoLoader=(e,t)=>Object.assign(Object.assign({},a),{get:()=>((e,t)=>{var r,l,u,c;let d,h=(0,n.getGlsl)(e.session.backend.glContext.version),p=t.dims,f=p.length,g=t.dims.length,m=(0,o.getCoordsDataType)(g),_=(0,s.getChannels)("rc",g),b=(r=g,l=_,u=p[p.length-2],c=p[p.length-1],0===r||1===r?"":`
    int r = ${l[r-2]};
    int c = ${l[r-1]};
    int rp1 = ${l[r-2]} + 1;
    int cp1 = ${l[r-1]} + 1;
    bool rEdge = rp1 >= ${c};
    bool cEdge = cp1 >= ${u};
    `);d=0===f?[1,1]:1===f?[p[0],1]:[p[g-1],p[g-2]];let y=function(e,t,r){if(0===e)return"false";if(1===e)return`rc > ${t[0]}`;let n="";for(let i=e-2;i<e;i++)n+=`${r[i]} >= ${t[i-e+2]}`,i<e-1&&(n+="||");return n}(g,d,_),w=function(e,t){let r=e.length;if(0===r)return"getA(), 0, 0, 0";if(1===r)return`getA(rc),
            rc + 1 >= ${e[0]} ? 0. : getA(rc + 1),
            0, 0`;let n="";if(r>2)for(let e=0;e<r-2;++e)n+=`${t[e]},`;return`getA(${n}r, c),
          rEdge ? 0. : getA(${n}rp1, c),
          cEdge ? 0. : getA(${n}r, cp1),
          rEdge || cEdge ? 0. : getA(${n}rp1, cp1)`}(p,_),v=`
        void main() {
          ${m} rc = getOutputCoords();

          if(${y}) {
            ${h.output} = vec4(0);
          } else {
            ${b}

            ${h.output} = vec4(${w});
          }
        }
      `;return Object.assign(Object.assign({},a),{hasMain:!0,output:{dims:t.dims,type:t.type,textureType:i.TextureType.packed},shaderSource:v})})(e,t)})},2827:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unpackFromChannel=t.getChannels=t.getVecChannels=void 0;let n=r(9390);function i(e,t){return(0,n.getGlChannels)(t).map(t=>`${e}.${t}`)}t.getVecChannels=i,t.getChannels=function(e,t){return 1===t?[e]:i(e,t)},t.unpackFromChannel=function(){return"\n    float getChannel(vec4 frag, int dim) {\n      int modCoord = imod(dim, 2);\n      return modCoord == 0 ? frag.r : frag.g;\n    }\n\n    float getChannel(vec4 frag, vec2 innerDims) {\n      vec2 modCoord = mod(innerDims, 2.);\n      return modCoord.x == 0. ?\n        (modCoord.y == 0. ? frag.r : frag.g) :\n        (modCoord.y == 0. ? frag.b : frag.a);\n    }\n  "}},2870:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePadAttributesV11=t.padV11=t.parsePadAttributesV2=t.padV2=void 0;let n=r(246),i=r(2517),o=r(5060),s=r(2039),a={name:"Pad",inputNames:["A"],inputTypes:[s.TextureType.unpacked]};t.padV2=(e,t,r)=>(c(t),[e.run(Object.assign(Object.assign({},a),{cacheHint:r.cacheKey,get:()=>u(e,t[0],r)}),t)]),t.parsePadAttributesV2=e=>{let t=e.attributes.getString("mode","constant"),r=e.attributes.getFloat("value",0),i=e.attributes.getInts("pads");return(0,n.createAttributeWithCacheKey)({mode:t,value:r,pads:i})},t.padV11=(e,r,n)=>{d(r);let i=l(e,r,n);return(0,t.padV2)(e,[r[0]],i)},t.parsePadAttributesV11=e=>e.attributes.getString("mode","constant");let l=(e,t,r)=>{if(!e.session.isInitializer(t[1].dataId)||t.length>=3&&!e.session.isInitializer(t[2].dataId))throw Error("dynamic pad attributes are not allowed");let i=Array.from(t[1].integerData),o=t.length>=3?t[2].floatData[0]:0;return(0,n.createAttributeWithCacheKey)({mode:r,pads:i,value:o})},u=(e,t,r)=>{let n=i.ShapeUtil.padShape(t.dims.slice(),r.pads),o=n.length,a=`
      ${h(e,t,r)}
      float process(int[${o}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[s.TextureType.unpacked],output:{dims:n,type:t.type,textureType:s.TextureType.unpacked},shaderSource:a}},c=e=>{if(!e||1!==e.length)throw Error("Pad requires 1 input");if("float32"!==e[0].type&&"float64"!==e[0].type)throw Error("Invalid input type.")},d=e=>{if(!e||2!==e.length&&3!==e.length)throw Error("Pad requires 2 or 3 inputs");if("int32"!==e[1].type||e.length>=3&&"string"===e[2].type)throw Error("Invalid input type.")},h=(e,t,r)=>{let n=(0,o.getGlsl)(e.session.backend.glContext.version),[a,l]=e.calculateTextureWidthAndHeight(t.dims,s.TextureType.unpacked),u=i.ShapeUtil.computeStrides(t.dims);switch(r.mode){case"constant":return p(n,t.dims,u,a,l,r.pads,r.value);case"reflect":return f(n,t.dims,u,a,l,r.pads);case"edge":return g(n,t.dims,u,a,l,r.pads);default:throw Error("Invalid mode")}},p=(e,t,r,n,i,o,s)=>{let a=t.length,l="";for(let e=a-1;e>=0;--e)l+=`
        k = m[${e}] - ${o[e]};
        if (k < 0)  return constant;
        if (k >= ${t[e]}) return constant;
        offset += k * ${r[e]};
        `;return`
      float padA(int m[${a}]) {
        const float constant = float(${s});
        int offset = 0;
        int k = 0;
        ${l}
        vec2 coords = offsetToCoords(offset, ${n}, ${i});
        float value = getColorAsFloat(${e.texture2D}(A, coords));
        return value;
      }
      `},f=(e,t,r,n,i,o)=>{let s=t.length,a="";for(let e=s-1;e>=0;--e)a+=`
        k = m[${e}] - ${o[e]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(t[e]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${t[e]}) { k = _2n_1 - k; }
        }
        offset += k * ${r[e]};
        `;return`
      float padA(int m[${s}]) {
        int offset = 0;
        int k = 0;
        ${a}
        vec2 coords = offsetToCoords(offset, ${n}, ${i});
        float value = getColorAsFloat(${e.texture2D}(A, coords));
        return value;
      }
      `},g=(e,t,r,n,i,o)=>{let s=t.length,a="";for(let e=s-1;e>=0;--e)a+=`
        k = m[${e}] - ${o[e]};
        if (k < 0)  k = 0;
        if (k >= ${t[e]}) k = ${t[e]-1};
        offset += k * ${r[e]};
      `;return`
      float padA(int m[${s}]) {
        int offset = 0;
        int k = 0;
        ${a}
        vec2 coords = offsetToCoords(offset, ${n}, ${i});
        float value = getColorAsFloat(${e.texture2D}(A, coords));
        return value;
      }
      `}},2143:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.globalMaxPool=t.parseMaxPoolAttributes=t.maxPool=t.parseGlobalAveragePoolAttributes=t.globalAveragePool=t.parseAveragePoolAttributes=t.averagePool=void 0;let n=r(246),i=r(2517),o=r(2039);t.averagePool=(e,t,r)=>{d(t);let n={name:"AveragePool",inputNames:["X"],inputTypes:[o.TextureType.unpacked],cacheHint:r.cacheKey};return[e.run(Object.assign(Object.assign({},n),{get:()=>s(t,n,!1,r)}),t)]},t.parseAveragePoolAttributes=e=>{let t=e.attributes.getString("auto_pad","NOTSET"),r=e.attributes.getInt("ceil_mode",0),i=0!==e.attributes.getInt("count_include_pad",0),o=e.attributes.getInts("kernel_shape"),s=e.attributes.getInts("strides",[]),a=e.attributes.getInts("pads",[]);if(0!==r)throw Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,n.createAttributeWithCacheKey)({autoPad:t,ceilMode:r,countIncludePad:i,kernelShape:o,strides:s,pads:a})};let s=(e,t,r,n)=>{let[s,a]=l(e,n,r),u=i.ShapeUtil.size(s.kernelShape),c="";s.countIncludePad?c+=`value /= float(${u});`:c+=`value /= float(${u} - pad);`;let d=`
        ${h(e[0].dims,s,"value += _X(x);",c,"0.0")}
      `;return Object.assign(Object.assign({},t),{output:{dims:a,type:e[0].type,textureType:o.TextureType.unpacked},shaderSource:d})};t.globalAveragePool=(e,t,r)=>{d(t);let n={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[o.TextureType.unpacked],cacheHint:`${r.countIncludePad}`};return[e.run(Object.assign(Object.assign({},n),{get:()=>s(t,n,!0,r)}),t)]},t.parseGlobalAveragePoolAttributes=e=>{let t=0!==e.attributes.getInt("count_include_pad",0);return(0,n.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:t,kernelShape:[],strides:[],pads:[]})},t.maxPool=(e,t,r)=>{d(t);let n={name:"MaxPool",inputNames:["X"],inputTypes:[o.TextureType.unpacked],cacheHint:r.cacheKey};return[e.run(Object.assign(Object.assign({},n),{get:()=>a(t,n,!1,r)}),t)]},t.parseMaxPoolAttributes=e=>{let t=e.attributes.getString("auto_pad","NOTSET"),r=e.attributes.getInt("ceil_mode",0),i=e.attributes.getInts("kernel_shape"),o=e.attributes.getInts("strides",[]),s=e.attributes.getInts("pads",[]),a=e.attributes.getInt("storage_order",0),l=e.attributes.getInts("dilations",[]);if(0!==a)throw Error("column major storage order is not yet supported for MaxPool");if(0!==r)throw Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,n.createAttributeWithCacheKey)({autoPad:t,ceilMode:r,countIncludePad:!1,kernelShape:i,strides:o,pads:s,storageOrder:a,dilations:l})};let a=(e,t,r,n)=>{let[i,s]=l(e,n,r),a=`
      ${h(e[0].dims,i,"\n      value = max(_X(x), value);\n    ","","-1e5")}
    `;return Object.assign(Object.assign({},t),{output:{dims:s,type:e[0].type,textureType:o.TextureType.unpacked},shaderSource:a})},l=(e,t,r)=>{let n=e[0].dims.slice(),o=Object.hasOwnProperty.call(t,"dilations"),s=t.kernelShape.slice(),a=t.strides.slice(),l=o?t.dilations.slice():[],u=t.pads.slice();i.PoolConvUtil.adjustPoolAttributes(r,n,s,a,l,u);let c=i.PoolConvUtil.computePoolOutputShape(r,n,a,l,s,u,t.autoPad),d=Object.assign({},t);return o?Object.assign(d,{kernelShape:s,strides:a,pads:u,dilations:l,cacheKey:t.cacheKey}):Object.assign(d,{kernelShape:s,strides:a,pads:u,cacheKey:t.cacheKey}),[d,c]},u={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},c={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[o.TextureType.unpacked]};t.globalMaxPool=(e,t)=>(d(t),[e.run(Object.assign(Object.assign({},c),{get:()=>a(t,c,!0,u)}),t)]);let d=e=>{if(!e||1!==e.length)throw Error("Pool ops requires 1 input.");if("float32"!==e[0].type&&"float64"!==e[0].type)throw Error("Invalid input type.")},h=(e,t,r,n,o)=>{let s=e.length;if(t.kernelShape.length<=2){let i=t.kernelShape[t.kernelShape.length-1],a=t.strides[t.strides.length-1],l=t.pads[t.pads.length/2-1],u=t.pads[t.pads.length-1],c=e[s-1],d="",h="",p="";if(d=l+u!==0?`
          for (int i = 0; i < ${i}; i++) {
            x[${s} - 1] = indices[${s} - 1] * ${a} - ${l} + i;
            if (x[${s} - 1] < 0 || x[${s} - 1] >= ${c}) {
              pad++;
              continue;
            }
            ${r}
          }`:`
          for (int i = 0; i < ${i}; i++) {
            x[${s} - 1] = indices[${s} - 1] * ${a} - ${l} + i;
            ${r}
          }`,2===t.kernelShape.length){let r=t.kernelShape[t.kernelShape.length-2],n=t.strides[t.strides.length-2],o=t.pads[t.pads.length/2-2],a=t.pads[t.pads.length-2],l=e[s-2];h=o+a!==0?`
            for (int j = 0; j < ${r}; j++) {
              x[${s} - 2] = indices[${s} - 2] * ${n} - ${o} + j;
              if (x[${s} - 2] < 0 || x[${s} - 2] >= ${l}) {
                pad+= ${i};
                continue;
              }
          `:`
            for (int j = 0; j < ${r}; j++) {
              x[${s} - 2] = indices[${s} - 2] * ${n} - ${o} + j;
            `,p="\n          }\n        "}return`
        float process(int indices[${s}]) {
          int x[${s}];
          copyVec(indices, x);

          float value = ${o};
          int pad = 0;
          ${h}
          ${d}
          ${p}
          ${n}
          return value;
        }
      `}{let a=i.ShapeUtil.size(t.kernelShape),l=i.ShapeUtil.computeStrides(t.kernelShape),u=l.length,c=t.pads.length,d=f(u),h=p(e,"inputDims"),g=p(t.pads,"pads"),m=p(l,"kernelStrides"),_=p(t.strides,"strides"),b="";return b=t.pads.reduce((e,t)=>e+t)?`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${r}
          }`:`
          }
          ${r}
        `,`
        ${d}
        float process(int indices[${s}]) {
          int x[${s}];
          copyVec(indices, x);
          int offset[${u}];
          int pads[${c}];
          int inputDims[${s}];
          int kernelStrides[${u}];
          int strides[${u}];
          ${g}
          ${h}
          ${_}
          ${m}

          float value = ${o};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${a}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${s} - ${u}; j < ${s}; j++) {
              x[j] = indices[j] * strides[j - ${s} + ${u}]
                + offset[j - ${s} + ${u}] - pads[j - 2];
              ${b}
          }
          ${n}

          return value;
        }
      `}},p=(e,t)=>{let r="";for(let n=0;n<e.length;n++)r+=`
      ${t}[${n}] = ${e[n]};
    `;return r},f=e=>`
  void offsetToIndices(int offset, int[${e}] strides, out int[${e}] indices) {
    if (${e} == 0) {
      return;
    }
    for (int i = 0; i < ${e} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${e} - 1] = offset;
  }`},4939:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reduceLogSumSquare=t.reduceLogSum=t.reduceProd=t.reduceMin=t.reduceMax=t.reduceMean=t.reduceSum=t.parseReduceAttributes=void 0;let n=r(246),i=r(782),o=r(2517),s=r(2039),a=(e,t,r,n,i)=>{u(t);let o={name:n,inputNames:["A"],inputTypes:[s.TextureType.unpacked]};return[e.run(Object.assign(Object.assign({},o),{cacheHint:r.cacheKey,get:()=>l(e,t,r,n,i,o)}),t)]};t.parseReduceAttributes=e=>{let t=e.attributes.getInts("axes",[]),r=1===e.attributes.getInt("keepdims",1);return(0,n.createAttributeWithCacheKey)({axes:t,keepDims:r})};let l=(e,t,r,n,i,a)=>{let l=[],u=t[0].dims.length||1,c=[],d=o.ShapeUtil.normalizeAxes(r.axes,t[0].dims.length),h=i(t,d),p=h[1];for(let e=0;e<t[0].dims.length;e++)d.indexOf(e)>=0||0===d.length?(r.keepDims&&l.push(1),p=`
          for(int j${e} = 0; j${e} < ${t[0].dims[e]}; j${e}++) {
            inputIdx[${e}] = j${e};
            ${p}
          }`):(c.push(`inputIdx[${e}] = outputIdx[${l.length}];`),l.push(t[0].dims[e]));let f=`
      float process(int outputIdx[${l.length||1}]) {
        float value;                 // final result
        int inputIdx[${u}];      // addressing input data
        ${c.join("\n")}
        ${h[0]}       // init ops for reduce max/min
        ${p}
        ${h[2]}       // final computation for reduce mean
        return value;
      }`;return Object.assign(Object.assign({},a),{output:{dims:l,type:t[0].type,textureType:s.TextureType.unpacked},shaderSource:f})},u=e=>{if(!e||1!==e.length)throw Error("Reduce op requires 1 input.");if(-1===i.NUMBER_TYPES.indexOf(e[0].type))throw Error("Invalid input type.")};t.reduceSum=(e,t,r)=>a(e,t,r,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),t.reduceMean=(e,t,r)=>a(e,t,r,"ReduceMean",(e,t)=>{let r=1;for(let n=0;n<e[0].dims.length;n++)(t.indexOf(n)>=0||0===t.length)&&(r*=e[0].dims[n]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${r}.;`]}),t.reduceMax=(e,t,r)=>a(e,t,r,"ReduceMax",(e,t)=>{let r=[];for(let n=0;n<e[0].dims.length;n++)(t.indexOf(n)>=0||0===t.length)&&r.push(`inputIdx[${n}] = 0;`);return[`${r.join("\n")}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),t.reduceMin=(e,t,r)=>a(e,t,r,"ReduceMin",(e,t)=>{let r=[];for(let n=0;n<e[0].dims.length;n++)(t.indexOf(n)>=0||0===t.length)&&r.push(`inputIdx[${n}] = 0;`);return[`${r.join("\n")}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),t.reduceProd=(e,t,r)=>a(e,t,r,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),t.reduceLogSum=(e,t,r)=>a(e,t,r,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),t.reduceLogSumSquare=(e,t,r)=>a(e,t,r,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])},7019:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isReshapeCheap=t.processDims3D=t.createPackedReshape3DProgramInfoLoader=void 0;let n=r(2517),i=r(5060),o=r(2039),s=r(2827);t.createPackedReshape3DProgramInfoLoader=(e,t,r)=>{let a,l=(a=r,{name:"Reshape (packed)",inputTypes:[o.TextureType.packed],inputNames:["A"],cacheHint:`${a}`});return Object.assign(Object.assign({},l),{get:()=>((e,t,r,a)=>{let l=t.dims,u=a,c="";for(let e=0;e<4;e++){let t="";switch(e){case 0:t="outputCoords = rc;";break;case 1:t="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:t="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:t="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw Error()}c+=`
        ${t}
        ${e>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${e}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${e>0?"}":""}
      `}let d=(0,i.getGlsl)(e.session.backend.glContext.version),h=`
      ${function(e){let t=n.ShapeUtil.computeStrides(e),r=["b","r","c"],i="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${t.map((e,n)=>`int ${r[n]} = ${i} / ${e}; ${n===t.length-1?`int ${r[n+1]} = ${i} - ${r[n]} * ${e}`:`index -= ${r[n]} * ${e}`};`).join("")}
      return ivec3(b, r, c);
    }
  `}(l)}
      ${function(e){let t=n.ShapeUtil.computeStrides(e);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${t[0]} + coords.z * ${t[1]} + coords.y;
  }
`}(u)}
      ${(0,s.unpackFromChannel)()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${u[2]};
        int cols = ${u[1]};

        ${c}
        ${d.output} = result;
      }
    `;return Object.assign(Object.assign({},r),{output:{dims:u,type:t.type,textureType:o.TextureType.packed},shaderSource:h,hasMain:!0})})(e,t,l,r)})},t.processDims3D=function(e){if(0===e.length)return[1,1,1];let t=1;for(let r=0;r<e.length-2;++r)t*=e[r];return[t,e.length>1?e[e.length-2]:1,e[e.length-1]]},t.isReshapeCheap=function(e,t){return 0===e.length||0===t.length||(e.length<2||t.length<2?e[e.length-1]===t[t.length-1]:e[e.length-1]===t[t.length-1]&&e[e.length-2]===t[t.length-2])}},718:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reshape=void 0;let n=r(2517);t.reshape=(e,t)=>{let r=n.ShapeUtil.calculateReshapedDims(t[0].dims,t[1].integerData);return e.session.pack?[e.reshapePacked(t[0],r)]:[e.reshapeUnpacked(t[0],r)]}},2268:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseResizeAttributesV11=t.parseResizeAttributesV10=t.resize=void 0;let n=r(5060),i=r(2039),o=r(9390),s=r(2827),a=r(9793),l={name:"Resize",inputNames:["A"],inputTypes:[i.TextureType.packed]};t.resize=(e,t,r)=>((0,a.validateInputs)(t,r),[e.run(Object.assign(Object.assign({},l),{cacheHint:r.cacheKey,get:()=>u(e,t,r)}),t)]),t.parseResizeAttributesV10=e=>(0,a.parseUpsampleAttributes)(e,10),t.parseResizeAttributesV11=e=>(0,a.parseUpsampleAttributes)(e,11);let u=(e,t,r)=>{let a=(0,n.getGlsl)(e.session.backend.glContext.version),[u,d]=c(t,r);if(u.every(e=>1===e)&&"tf_crop_and_resize"!==r.coordinateTransformMode)return Object.assign(Object.assign({},l),{output:{dims:d,type:t[0].type,textureType:i.TextureType.packed},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${a.texture2D}(X, TexCoords);
                    ${a.output} = v;
                }`});let h=d.length;if(h<2)throw Error(`output dimension should be at least 2, but got ${h}`);let p=d[h-2],f=d[h-1],g=t[0].dims;if(h!==g.length)throw Error(`output dimension should match input ${g.length}, but got ${h}`);let m=g[h-2],_=g[h-1],b=u[h-2],y=u[h-1],w="";if("linear"!==r.mode)throw Error(`resize (packed) does not support mode: '${r.mode}'`);switch(r.coordinateTransformMode){case"asymmetric":w="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        return vec4(coords) / scaleWHWH;\n                    }\n                ";break;case"half_pixel":w="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;\n                    }\n                ";break;case"pytorch_half_pixel":w=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${f}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${p}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${f}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${p}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":w=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${f}.0 - 1.0, ${p}.0 - 1.0, ${f}.0 - 1.0,
                            ${p}.0 - 1.0);
                        vec4 original = vec4(${_}.0 - 1.0, ${m}.0 - 1.0, ${_}.0 - 1.0,
                            ${m}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw Error(`resize (packed) does not support coordinateTransformMode:                                 '${r.coordinateTransformMode}'`)}let v=(0,o.getCoordsDataType)(h),x=`
            const vec2 inputWH = vec2(${m}.0, ${_}.0);
            const vec4 scaleWHWH = vec4(float(${b}), float(${y}), float(${b}), float(${y}));
            ${(0,s.unpackFromChannel)()}
            ${w}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${v} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${p-1};
                bool hasNextCol = rc.z < ${f-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${a.output} = vec4(newValue);
            }
        `;return Object.assign(Object.assign({},l),{output:{dims:d,type:t[0].type,textureType:i.TextureType.packed},hasMain:!0,shaderSource:x})},c=(e,t)=>{let r=e[0].dims,n,i=t.scales;if(0===i.length){let o=e[t.scalesInputIdx];if(o&&0!==o.size){if(e[t.sizesInputIdx])throw Error("Only one of scales or sizes must be provided as input.");i=d(o,t.mode,t.isResize)}else{let o=e[t.sizesInputIdx];if(!o||0===o.size)throw Error("Either scales or sizes MUST be provided as input.");i=h(n=Array.from(o.integerData),r,t.mode,t.isResize)}}else if(e[t.sizesInputIdx])throw Error("Only one of scales or sizes must be provided as input.");let o=n||r.map((e,t)=>Math.floor(e*i[t]));return[i,o]},d=(e,t,r)=>{let n=Array.from(e.floatData);return(0,a.scalesValidation)(n,t,r),n},h=(e,t,r,n)=>{let i=t.length,o=Array(i);for(let r=0,n=i;r<n;r++)if(0===t[r]){if(0!==e[r])throw Error("Input dim is zero but required output dim is non-zero.");o[r]=1}else o[r]=e[r]/t[r];return(0,a.scalesValidation)(o,r,n),o}},8117:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shape=void 0;let n=r(9162);t.shape=(e,t)=>(i(t),[new n.Tensor([t[0].dims.length],"int32",void 0,void 0,new Int32Array(t[0].dims))]);let i=e=>{if(!e||1!==e.length)throw Error("Shape requires 1 input.")}},2278:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sliceV10=t.parseSliceAttributes=t.slice=void 0;let n=r(246),i=r(782),o=r(2517),s=r(2039),a={name:"Slice",inputNames:["A"],inputTypes:[s.TextureType.unpacked]};t.slice=(e,t,r)=>(u(t),[e.run(Object.assign(Object.assign({},a),{cacheHint:r.cacheKey,get:()=>l(e,t[0],r)}),t)]),t.parseSliceAttributes=e=>{let t=e.attributes.getInts("starts"),r=e.attributes.getInts("ends"),i=e.attributes.getInts("axes",[]);return(0,n.createAttributeWithCacheKey)({starts:t,ends:r,axes:i})};let l=(e,t,r)=>{let n=0===r.axes.length?t.dims.slice(0).map((e,t)=>t):r.axes,i=o.ShapeUtil.normalizeAxes(n,t.dims.length),l=r.starts.map((e,r)=>e>t.dims[i[r]]-1?t.dims[i[r]]:o.ShapeUtil.normalizeAxis(e,t.dims[i[r]])),u=r.ends.map((e,r)=>e>t.dims[i[r]]-1?t.dims[i[r]]:o.ShapeUtil.normalizeAxis(e,t.dims[i[r]])),c=t.dims.slice(),d=[];for(let e=0;e<i.length;e++)c[i[e]]=u[e]-l[e],l[e]>0&&d.push(`outputIdx[${i[e]}] += ${l[e]};`);let h=`
      float process(int outputIdx[${c.length}]) {
        ${d.join("\n      ")}
        return _A(outputIdx);
      }`;return Object.assign(Object.assign({},a),{output:{dims:c,type:t.type,textureType:s.TextureType.unpacked},shaderSource:h})},u=e=>{if(!e||1!==e.length)throw Error("Slice requires 1 input.");if(-1===i.NUMBER_TYPES.indexOf(e[0].type))throw Error("Invalid input type.")};t.sliceV10=(e,t)=>{d(t);let r=c(e,t);return[e.run(Object.assign(Object.assign({},a),{cacheHint:r.cacheKey,get:()=>l(e,t[0],r)}),[t[0]])]};let c=(e,t)=>{if(!e.session.isInitializer(t[1].dataId)||!e.session.isInitializer(t[2].dataId)||t.length>=4&&!e.session.isInitializer(t[3].dataId)||t.length>=5&&!e.session.isInitializer(t[4].dataId))throw Error("dynamic slice attributes are not allowed");if(t.length>=5&&t[4].integerData.some(e=>1!==e))throw Error("currently non-1 steps is not supported for Slice");let r=Array.from(t[1].integerData),n=Array.from(t[2].integerData),i=t.length>=4?Array.from(t[3].integerData):[];return{starts:r,ends:n,axes:i,cacheKey:`${i};${r};${n}`}},d=e=>{if(!e||e.length<3||e.length>5)throw Error("Invalid input number.");if("int32"!==e[1].type||1!==e[1].dims.length||"int32"!==e[2].type||1!==e[2].dims.length||e.length>=4&&("int32"!==e[3].type||1!==e[3].dims.length)||e.length>=5&&("int32"!==e[4].type||1!==e[4].dims.length))throw Error("Invalid input type.")}},5524:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.softmaxV13=t.parseSoftmaxAttributesV13=t.parseSoftmaxAttributes=t.softmax=void 0;let n=r(246),i=r(2517),o=r(5060),s=r(2039),a=r(3738),l={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[s.TextureType.unpacked]},u={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[s.TextureType.unpacked,s.TextureType.unpacked]},c={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked]};t.softmax=(e,t,r)=>{g(t);let n=t[0].dims.slice(),o=i.ShapeUtil.normalizeAxis(r.axis,n.length);return d(e,t,r,i.ShapeUtil.sizeToDimension(n,o),i.ShapeUtil.sizeFromDimension(n,o))},t.parseSoftmaxAttributes=e=>(0,n.createAttributeWithCacheKey)({axis:e.attributes.getInt("axis",1)}),t.parseSoftmaxAttributesV13=e=>(0,n.createAttributeWithCacheKey)({axis:e.attributes.getInt("axis",-1)}),t.softmaxV13=(e,t,r)=>{g(t);let o=t[0].dims.slice(),s=i.ShapeUtil.normalizeAxis(r.axis,o.length),l=o.length,u=s!==l-1,c=[],h,p=[],f=[];u&&((p=Array.from({length:l}).map((e,t)=>t))[s]=l-1,p[l-1]=s,p.map(e=>c.push(o[e])),h=(0,n.createAttributeWithCacheKey)({perm:p}),f=(0,a.transpose)(e,t,h));let m=u?i.ShapeUtil.sizeToDimension(c,l-1):i.ShapeUtil.sizeToDimension(o,l-1),_=u?i.ShapeUtil.sizeFromDimension(c,l-1):i.ShapeUtil.sizeFromDimension(o,l-1),b=d(e,u?f:t,r,m,_);return u?(0,a.transpose)(e,b,h):b};let d=(e,t,r,n,i)=>{let o=h(e,t[0],n,i,[n]),s=e.run(Object.assign(Object.assign({},l),{cacheHint:r.cacheKey,get:()=>o}),t),a=p(e,t[0],n,i,o.output.dims,[n]),d=e.run(Object.assign(Object.assign({},u),{cacheHint:r.cacheKey,get:()=>a}),[t[0],s]),g=f(e,t[0],n,i,o.output.dims,a.output.dims);return[e.run(Object.assign(Object.assign({},c),{cacheHint:r.cacheKey,get:()=>g}),[t[0],s,d])]},h=(e,t,r,n,i)=>{let[a,u]=e.calculateTextureWidthAndHeight(t.dims,s.TextureType.unpacked),c=i.length;if(r<1||n<1)throw Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==i.length)throw Error("Dimensionality of the output should be 1");if(i[0]!==r)throw Error("Shape of the output should be equal to logical row count");let d=(0,o.getGlsl)(e.session.backend.glContext.version),h=`
      float process(int[${c}] indices) {
        int logical_row_start_offset = indices[0] * ${n};

        float max = getColorAsFloat(${d.texture2D}(A, offsetToCoords(logical_row_start_offset, ${a},
        ${u} )));
        for(int i=1; i<${n}; ++i)
        {
          float current = getColorAsFloat(${d.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${a}, ${u})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return Object.assign(Object.assign({},l),{output:{dims:i,type:t.type,textureType:s.TextureType.unpacked},shaderSource:h})},p=(e,t,r,n,i,a)=>{let[l,c]=e.calculateTextureWidthAndHeight(t.dims,s.TextureType.unpacked),d=a.length;if(r<1||n<1)throw Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==a.length)throw Error("Dimensionality of the output should be 1");if(a[0]!==r)throw Error("Shape of the output should be equal to logical row count");if(1!==i.length)throw Error("Dimensionality of the intermediate results should be 1");if(i[0]!==r)throw Error("Shape of the intermediate results should be equal to logical row count");let h=`
      float process(int[${d}] indices) {
        int logical_row_start_offset = indices[0] * ${n};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${n}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${(0,o.getGlsl)(e.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${l}, ${c}))) - max);
        }

        return norm_factor;
      }`;return Object.assign(Object.assign({},u),{output:{dims:a,type:t.type,textureType:s.TextureType.unpacked},shaderSource:h})},f=(e,t,r,n,i,o)=>{let[a,l]=e.calculateTextureWidthAndHeight(t.dims,s.TextureType.unpacked),u=t.dims.length;if(r<1||n<1)throw Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==i.length||1!==o.length)throw Error("Dimensionality of the intermediate results should be 1");if(i[0]!==r||o[0]!==r)throw Error("Shape of the intermediate results should be equal to logical row count");let d=`
      float process(int[${u}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${a}, ${l});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${n};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return Object.assign(Object.assign({},c),{output:{dims:t.dims,type:t.type,textureType:s.TextureType.unpacked},shaderSource:d})},g=e=>{if(!e||1!==e.length)throw Error("Softmax requires 1 input.");if("float32"!==e[0].type&&"float64"!==e[0].type)throw Error("Invalid input type")}},5975:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSplitAttributes=t.split=void 0;let n=r(246),i=r(2517),o=r(2039),s={name:"Split",inputNames:["A"],inputTypes:[o.TextureType.unpacked]};t.split=(e,t,r)=>{u(t);let n=i.ShapeUtil.normalizeAxis(r.axis,t[0].dims.length),o=a(e,t,n,r),c=[];for(let i=0;i<o;++i)c.push(e.run(Object.assign(Object.assign({},s),{cacheHint:`${r.cacheKey};${i}`,get:()=>l(e,t[0],r,n,i)}),t));return c},t.parseSplitAttributes=e=>{let t=e.attributes.getInt("axis",0),r=e.attributes.getInts("split",[]),i=e.outputs.length;return(0,n.createAttributeWithCacheKey)({axis:t,split:r,numOutputs:i})};let a=(e,t,r,n)=>{let[,o]=i.SplitUtil.splitShape(t[0].dims,r,n.split,n.numOutputs);return o.length},l=(e,t,r,n,a)=>{let[l,u]=i.SplitUtil.splitShape(t.dims,n,r.split,r.numOutputs),c=u[a],d=l[a],h=`
      float process(int indices[${d.length}]) {
        indices[${n}] += ${c};
        return _A(indices);
      }
    `;return Object.assign(Object.assign({},s),{cacheHint:`${r.cacheKey}:${a}`,output:{dims:d,type:t.type,textureType:o.TextureType.unpacked},shaderSource:h})},u=e=>{if(!e||1!==e.length)throw Error("Split requires one input.");if("int8"!==e[0].type&&"uint8"!==e[0].type&&"int16"!==e[0].type&&"uint16"!==e[0].type&&"int32"!==e[0].type&&"uint32"!==e[0].type&&"float32"!==e[0].type&&"float64"!==e[0].type&&"bool"!==e[0].type)throw Error("Invalid input type.")}},3933:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSqueezeAttributes=t.squeezeV13=t.squeeze=void 0;let n=r(2517);t.squeeze=(e,t,r)=>{i(t);let o=n.ShapeUtil.squeezeShape(t[0].dims,r);return[e.reshapeUnpacked(t[0],o)]},t.squeezeV13=(e,r)=>(o(r),(0,t.squeeze)(e,[r[0]],Array.from(r[1].integerData))),t.parseSqueezeAttributes=e=>e.attributes.getInts("axes");let i=e=>{if(!e||1!==e.length)throw Error("Squeeze requires 1 input.");if("string"===e[0].type)throw Error("invalid input tensor types.")},o=e=>{if(!e||2!==e.length)throw Error("Squeeze requires 2 inputs.");if("int32"!==e[1].type)throw Error("Invalid input type.")}},6558:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sum=void 0;let n=r(5060),i=r(2039);t.sum=(e,t)=>{s(t);let r={name:"Sum",inputNames:t.map((e,t)=>`X${t}`),inputTypes:Array(t.length).fill(i.TextureType.unpacked)};return[e.run(Object.assign(Object.assign({},r),{get:()=>o(e,t,r)}),t)]};let o=(e,t,r)=>{let o=(0,n.getGlsl)(e.session.backend.glContext.version),s=t[0].dims.slice(),a=`
      void main() {
        vec4 result = ${t.map((e,t)=>`${o.texture2D}(X${t},TexCoords)`).join(" + ")};
        ${o.output} = result;
      }
    `;return Object.assign(Object.assign({},r),{output:{dims:s,type:t[0].type,textureType:i.TextureType.unpacked},hasMain:!0,shaderSource:a})},s=e=>{if(!e||0===e.length)throw Error("Sum requires inputs.");let t=e[0].dims.length;for(let r=1;r<e.length;r++){if(t!==e[r].dims.length)throw Error("Input shapes are mismatched.");for(let n=0;n<t;n++)if(e[0].dims[n]!==e[r].dims[n])throw Error("Input shapes are not matched.")}if("float32"!==e[0].type&&"float64"!==e[0].type)throw Error("Invalid input type.");for(let t=1;t<e.length;t++)if(e[0].type!==e[t].type)throw Error("Input types are not matched.")}},5723:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tile=void 0;let n=r(782),i=r(2039);t.tile=(e,t)=>{s(t);let r={name:"Tile",inputNames:["A"],inputTypes:[i.TextureType.unpacked]};return[e.run(Object.assign(Object.assign({},r),{get:()=>o(e,t,r)}),t)]};let o=(e,t,r)=>{let n=t[0].dims.slice(),o=Array(n.length),s=[];for(let e=0;e<n.length;e++)o[e]=n[e]*t[1].numberData[e],s.push(`inputIdx[${e}] = int(mod(float(outputIdx[${e}]), ${n[e]}.));`);let a=o.length,l=`
      float process(int outputIdx[${a}]) {
        int inputIdx[${a}];
        ${s.join("\n")}
        return _A(inputIdx);
      }
    `;return Object.assign(Object.assign({},r),{output:{dims:o,type:t[0].type,textureType:i.TextureType.unpacked},shaderSource:l})},s=e=>{if(!e||2!==e.length)throw Error("Tile requires 2 input.");if(1!==e[1].dims.length)throw Error("The second input shape must 1 dimension.");if(e[1].dims[0]!==e[0].dims.length)throw Error("Invalid input shape.");if(-1===n.NUMBER_TYPES.indexOf(e[0].type))throw Error("Invalid input type.");if("int32"!==e[1].type&&"int16"!==e[1].type)throw Error("Invalid repeat type.")}},3738:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTransposeAttributes=t.transpose=void 0;let n=r(246),i=r(2517),o=r(2039),s={name:"Transpose",inputNames:["A"],inputTypes:[o.TextureType.unpacked]};t.transpose=(e,t,r)=>(d(t),[e.run(Object.assign(Object.assign({},s),{cacheHint:r.cacheKey,get:()=>a(e,t[0],r.perm)}),t)]),t.parseTransposeAttributes=e=>(0,n.createAttributeWithCacheKey)({perm:e.attributes.getInts("perm",[])});let a=(e,t,r)=>{let n=t.dims;r=l(n,r);let i=u(n,r),a=n.length,d=`
      ${c("perm",r,a)}
      float process(int indices[${a}]) {
        int a[${a}];
        perm(a, indices);
        return _A(a);
      }`;return Object.assign(Object.assign({},s),{output:{dims:i,type:t.type,textureType:o.TextureType.unpacked},shaderSource:d})},l=(e,t)=>(t&&t.length!==e.length&&(t=[...e.keys()].reverse()),t),u=(e,t)=>(t=l(e,t),i.ShapeUtil.sortBasedOnPerm(e,t)),c=(e,t,r)=>{let n=[];n.push(`void ${e}(out int a[${r}], int src[${r}]) {`);for(let e=0;e<r;++e)n.push(`	a[${t[e]}]=src[${e}];`);return n.push("	}"),n.join("\n")},d=e=>{if(!e||1!==e.length)throw Error("Transpose requires 1 input.");if("float32"!==e[0].type&&"float64"!==e[0].type)throw Error("input should be float tensor")}},8710:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeAsUint8=void 0;let n=r(5060),i=r(2039);t.encodeAsUint8=(e,t)=>{let r=t.shape,o=(0,n.getGlsl)(e.session.backend.glContext.version),s=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${o.texture2D}(X,TexCoords).r;
      ${o.output} = encodeAsUint8(value);
    }`,a={name:"Uint8Encode",inputTypes:[i.TextureType.unpacked],inputNames:["X"],output:{dims:r,type:t.tensor.type,textureType:i.TextureType.downloadUint8AsFloat},shaderSource:s,hasMain:!0};return e.executeProgram(a,[t.tensor])}},4909:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tanh=t.tan=t.sqrt=t.sin=t.sigmoid=t.relu=t.not=t.neg=t.log=t.parseLeakyReluAttributes=t.leakyRelu=t.identity=t.floor=t.exp=t.parseEluAttributes=t.elu=t.cos=t.ceil=t.clipV11=t.parseClipAttributes=t.clip=t.atan=t.asin=t.acos=t.abs=t.glslTanh=t.glslTan=t.glslSqrt=t.glslSigmoid=t.glslRelu=t.glslSin=t.glslNot=t.glslNeg=t.glslLog=t.glslLeakyRelu=t.glslIdentity=t.glslClip=t.glslFloor=t.glslExp=t.glslElu=t.glslCos=t.glslCeil=t.glslAtan=t.glslAsin=t.glslAcos=t.glslAbs=void 0;let n=r(246),i=r(2517),o=r(8520),s=r(5060),a=r(2039);function l(){return M("abs")}function u(){return M("acos")}function c(){return M("asin")}function d(){return M("atan")}function h(){return M("ceil")}function p(){return M("cos")}function f(e){let t="elu";return{body:`
  const float alpha = float(${e});

  float ${t}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${t}_(vec4 v) {
    return vec4(${t}_(v.x), ${t}_(v.y), ${t}_(v.z), ${t}_(v.w));
  }
  `,name:t,type:o.FunctionType.ValueBased}}function g(){return M("exp")}function m(){return M("floor")}function _(e,t){let r="clip";return{body:`
  const float min = float(${e});
  const float max = float(${t});

  float ${r}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${r}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:r,type:o.FunctionType.ValueBased}}function b(){let e="indentity";return{body:`
  float ${e}_(float a) {
    return a;
  }
  vec4 ${e}_(vec4 v) {
    return v;
  }
  `,name:e,type:o.FunctionType.ValueBased}}function y(e){let t="leakyRelu";return{body:`
  const float alpha = float(${e});

  float ${t}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${t}_(vec4 v) {
    return vec4(${t}_(v.x), ${t}_(v.y), ${t}_(v.z), ${t}_(v.w));
  }
  `,name:t,type:o.FunctionType.ValueBased}}function w(){return M("log")}function v(){let e="neg";return{body:`
  float ${e}_(float a) {
    return -a;
  }
  vec4 ${e}_(vec4 v) {
    return -v;
  }
  `,name:e,type:o.FunctionType.ValueBased}}function x(){let e="not";return{body:`
  float ${e}_(float a) {
    return float( ! bool(a) );
  }
  bool ${e}_(bool a) {
    return !a;
  }
  vec4 ${e}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${e}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:e,type:o.FunctionType.ValueBased}}function T(){return M("sin")}function S(){let e="relu";return{body:`
  float ${e}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${e}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:e,type:o.FunctionType.ValueBased}}function A(){let e="sigmoid";return{body:`
  float ${e}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${e}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:e,type:o.FunctionType.ValueBased}}function O(){return M("sqrt")}function k(){return M("tan")}function E(){let e="tanh";return{body:`
  float ${e}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${e}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:e,type:o.FunctionType.ValueBased}}function M(e){return{body:`
  float ${e}_(float a) {
    return ${e}(a);
  }
  vec4 ${e}_(vec4 v) {
    return ${e}(v);
  }
  `,name:e,type:o.FunctionType.ValueBased}}t.glslAbs=l,t.glslAcos=u,t.glslAsin=c,t.glslAtan=d,t.glslCeil=h,t.glslCos=p,t.glslElu=f,t.glslExp=g,t.glslFloor=m,t.glslClip=_,t.glslIdentity=b,t.glslLeakyRelu=y,t.glslLog=w,t.glslNeg=v,t.glslNot=x,t.glslSin=T,t.glslRelu=S,t.glslSigmoid=A,t.glslSqrt=O,t.glslTan=k,t.glslTanh=E;let P=(e,t,r,n)=>{let i=e.session.pack?a.TextureType.packed:a.TextureType.unpacked,o={name:r.name,inputTypes:[i],inputNames:["A"],cacheHint:n};return Object.assign(Object.assign({},o),{get:()=>((e,t,r,n)=>{let i=e.session.pack?a.TextureType.packed:a.TextureType.unpacked,o=(0,s.getGlsl)(e.session.backend.glContext.version);return Object.assign(Object.assign({},t),{output:{dims:r.dims,type:r.type,textureType:i},shaderSource:`
     ${n.body}
     void main() {
       vec4 v = ${o.texture2D}(A, TexCoords);
       v = ${n.name}_(v);
       ${o.output} = v;
     }
     `,hasMain:!0})})(e,o,t,r)})};t.abs=(e,t)=>[e.run(P(e,t[0],l()),t)],t.acos=(e,t)=>[e.run(P(e,t[0],u()),t)],t.asin=(e,t)=>[e.run(P(e,t[0],c()),t)],t.atan=(e,t)=>[e.run(P(e,t[0],d()),t)],t.clip=(e,t,r)=>[e.run(P(e,t[0],_(r.min,r.max),r.cacheKey),t)],t.parseClipAttributes=e=>(0,n.createAttributeWithCacheKey)({min:e.attributes.getFloat("min",i.MIN_CLIP),max:e.attributes.getFloat("max",i.MAX_CLIP)}),t.clipV11=(e,r)=>{let n=I(e,r);return(0,t.clip)(e,[r[0]],n)};let I=(e,t)=>{if(t.length>=3&&(!e.session.isInitializer(t[1].dataId)||!e.session.isInitializer(t[2].dataId)))throw Error("dynamic clip attributes are not allowed");let r=t.length>=3?t[1].numberData[0]:i.MIN_CLIP,o=t.length>=3?t[2].numberData[0]:i.MAX_CLIP;return(0,n.createAttributeWithCacheKey)({min:r,max:o})};t.ceil=(e,t)=>[e.run(P(e,t[0],h()),t)],t.cos=(e,t)=>[e.run(P(e,t[0],p()),t)],t.elu=(e,t,r)=>[e.run(P(e,t[0],f(r.alpha),r.cacheKey),t)],t.parseEluAttributes=e=>(0,n.createAttributeWithCacheKey)({alpha:e.attributes.getFloat("alpha",1)}),t.exp=(e,t)=>[e.run(P(e,t[0],g()),t)],t.floor=(e,t)=>[e.run(P(e,t[0],m()),t)],t.identity=(e,t)=>[e.run(P(e,t[0],b()),t)],t.leakyRelu=(e,t,r)=>[e.run(P(e,t[0],y(r.alpha),r.cacheKey),t)],t.parseLeakyReluAttributes=e=>(0,n.createAttributeWithCacheKey)({alpha:e.attributes.getFloat("alpha",.01)}),t.log=(e,t)=>[e.run(P(e,t[0],w()),t)],t.neg=(e,t)=>[e.run(P(e,t[0],v()),t)],t.not=(e,t)=>[e.run(P(e,t[0],x()),t)],t.relu=(e,t)=>[e.run(P(e,t[0],S()),t)],t.sigmoid=(e,t)=>[e.run(P(e,t[0],A()),t)],t.sin=(e,t)=>[e.run(P(e,t[0],T()),t)],t.sqrt=(e,t)=>[e.run(P(e,t[0],O()),t)],t.tan=(e,t)=>[e.run(P(e,t[0],k()),t)],t.tanh=(e,t)=>[e.run(P(e,t[0],E()),t)]},5611:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUnpackProgramInfoLoader=t.createUnpackProgramInfo=void 0;let n=r(5060),i=r(2039),o=r(9390),s=r(2827),a={name:"unpack",inputNames:["A"],inputTypes:[i.TextureType.packed]};t.createUnpackProgramInfo=(e,t)=>{let r=t.dims.length,l=(0,s.getChannels)("rc",r),u=l.slice(-2),c=(0,o.getCoordsDataType)(r),d=(0,s.unpackFromChannel)(),h=0===t.dims.length?"":function(e,t){if(1===e)return"rc";let r="";for(let n=0;n<e;n++)r+=t[n],n<e-1&&(r+=",");return r}(r,l),p=r<=1?"rc":`vec2(${u.join(",")})`,f=`
    ${d}
    void main() {
      ${c} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${h});

       ${(0,n.getGlsl)(e.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${p}), 0, 0, 0);
     }
   `;return Object.assign(Object.assign({},a),{hasMain:!0,output:{dims:t.dims,type:t.type,textureType:i.TextureType.unpacked},shaderSource:f})},t.createUnpackProgramInfoLoader=(e,r)=>Object.assign(Object.assign({},a),{get:()=>(0,t.createUnpackProgramInfo)(e,r)})},8428:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUnsqueezeAttributes=t.unsqueezeV13=t.unsqueeze=void 0;let n=r(2517);t.unsqueeze=(e,t,r)=>{i(t);let o=n.ShapeUtil.unsqueezeShape(t[0].dims,r);return[e.reshapeUnpacked(t[0],o)]},t.unsqueezeV13=(e,r)=>(o(r),(0,t.unsqueeze)(e,[r[0]],Array.from(r[1].integerData))),t.parseUnsqueezeAttributes=e=>e.attributes.getInts("axes");let i=e=>{if(!e||1!==e.length)throw Error("Unsqueeze requires 1 input.");if("string"===e[0].type)throw Error("invalid input tensor types.")},o=e=>{if(!e||2!==e.length)throw Error("Unsqueeze requires 2 inputs.");if("int32"!==e[1].type)throw Error("Invalid input type.")}},9793:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scalesValidation=t.validateInputs=t.parseUpsampleAttributes=t.parseUpsampleAttributesV9=t.parseUpsampleAttributesV7=t.upsample=void 0;let n=r(246),i=r(5060),o=r(2039),s={name:"Upsample",inputNames:["X"],inputTypes:[o.TextureType.unpacked]};t.upsample=(e,r,n)=>((0,t.validateInputs)(r,n),[e.run(Object.assign(Object.assign({},s),{cacheHint:n.cacheKey,get:()=>a(e,r,n)}),r)]),t.parseUpsampleAttributesV7=e=>(0,t.parseUpsampleAttributes)(e,7),t.parseUpsampleAttributesV9=e=>(0,t.parseUpsampleAttributes)(e,9),t.parseUpsampleAttributes=(e,r)=>{let i=r>=10,o=e.attributes.getString("mode","nearest");if("nearest"!==o&&"linear"!==o&&(r<11||"cubic"!==o))throw Error(`unrecognized mode: ${o}`);let s=[];r<9&&(s=e.attributes.getFloats("scales"),(0,t.scalesValidation)(s,o,i));let a=e.attributes.getFloat("extrapolation_value",0),l=r>10?e.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(-1===["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(l))throw Error(`coordinate_transform_mode '${l}' is not supported`);let u="tf_crop_and_resize"===l,c=u,d="nearest"===o&&r>=11?e.attributes.getString("nearest_mode","round_prefer_floor"):"";if(-1===["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(d))throw Error(`nearest_mode '${d}' is not supported`);let h=e.attributes.getFloat("cubic_coeff_a",-.75),p=0!==e.attributes.getInt("exclude_outside",0);if(p&&"cubic"!==o)throw Error("exclude_outside can be set to 1 only when mode is CUBIC.");let f=r<11||"nearest"===o&&"asymmetric"===l&&"floor"===d,g=0,m=0,_=0;return r>10?e.inputs.length>2?(g=1,m=2,_=3):(m=1,_=2):9===r&&(m=1),(0,n.createAttributeWithCacheKey)({opset:r,isResize:i,mode:o,scales:s,extrapolationValue:a,coordinateTransformMode:l,useExtrapolation:c,needRoiInput:u,nearestMode:d,cubicCoefficientA:h,excludeOutside:p,useNearest2xOptimization:f,roiInputIdx:g,scalesInputIdx:m,sizesInputIdx:_})};let a=(e,t,r)=>{let n=(0,i.getGlsl)(e.session.backend.glContext.version),[a,l]=e.calculateTextureWidthAndHeight(t[0].dims,o.TextureType.unpacked),u=t[0].dims.map((e,t)=>Math.floor(e*r.scales[t])),[c,d]=e.calculateTextureWidthAndHeight(u,o.TextureType.unpacked),h=u.length,p=Array(h),f=Array(h),g=`
      int output_pitches[${h}];
      int input_pitches[${h}];
      `;for(let e=h-1;e>=0;e--)p[e]=e===h-1?1:p[e+1]*u[e+1],f[e]=e===h-1?1:f[e+1]*t[0].dims[e+1],g+=`
        output_pitches[${e}] = ${p[e]};
        input_pitches[${e}] = ${f[e]};
        `;let m=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${a}, ${l});
        float value = getColorAsFloat(${n.texture2D}(X, coords));
        return value;
      }
      `,_="nearest"===r.mode?`
    ${m}
    float process(int indices[${h}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${c}, ${d});

      ${g}

      int d, m;
      for (int dim = 0; dim < ${h}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:4===h?`
    ${m}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${c}, ${d});

      ${g}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${t[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${m}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${c}, ${d});

      ${g}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${t[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return Object.assign(Object.assign({},s),{output:{dims:u,type:t[0].type,textureType:o.TextureType.unpacked},shaderSource:_,variables:[{name:"scales",type:"int",arrayLength:r.scales.length,data:r.scales.map(e=>Math.ceil(e))}]})};t.validateInputs=(e,t)=>{if(!e||t.opset<9&&1!==e.length||t.opset>=9&&t.opset<11&&2!==e.length||t.opset>=11&&e.length<2)throw Error("invalid inputs.");if(t.scales.length>0&&e[0].dims.length!==t.scales.length)throw Error("Invalid input shape.");if("string"===e[0].type)throw Error("Invalid input tensor types.")},t.scalesValidation=(e,t,r)=>{if(r){for(let t of e)if(t<=0)throw Error("Scale value should be greater than 0.")}else for(let t of e)if(t<1)throw Error("Scale value should be greater than or equal to 1.");if(("linear"===t||"cubic"===t)&&2!==e.length&&(4!==e.length||1!==e[0]||1!==e[1]))throw Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${r?"Resize":"Upsample"} opeartor.`)}},1958:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgramManager=void 0;let n=r(1670),i=r(6231),o=r(8879),s=r(5060);t.ProgramManager=class{constructor(e,t,r){this.profiler=e,this.glContext=t,this.textureLayoutStrategy=r,this.repo=new Map,this.attributesBound=!1}getArtifact(e){return this.repo.get(e)}setArtifact(e,t){this.repo.set(e,t)}run(e,t,r){var n;this.profiler.event("op",`ProgramManager.run ${null!=(n=e.programInfo.name)?n:"unknown kernel"}`,()=>{var n;let o=this.glContext.gl,s=e.program;o.useProgram(s);try{this.bindOutput(r),this.attributesBound||this.bindAttributes(e.attribLocations),this.bindUniforms(e.uniformLocations,null!=(n=e.programInfo.variables)?n:[],t)}catch(t){throw i.Logger.error("ProgramManager",e.programInfo.shaderSource),t}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(e=>this.glContext.deleteProgram(e.program))}build(e,t,r){return this.profiler.event("backend","ProgramManager.build",()=>{let n=new o.GlslPreprocessor(this.glContext,e,t,r),i=n.preprocess(),s=this.compile(i);return{programInfo:e,program:s,uniformLocations:this.getUniformLocations(s,n.context.programInfo.inputNames,n.context.programInfo.variables),attribLocations:this.getAttribLocations(s)}})}compile(e){if(!this.vertexShader){i.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");let e=(0,s.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(e,this.glContext.gl.VERTEX_SHADER)}n.env.debug&&i.Logger.verbose("ProrgramManager",`FragShader:
${e}
`);let t=this.glContext.compileShader(e,this.glContext.gl.FRAGMENT_SHADER),r=this.glContext.createProgram(this.vertexShader,t);return this.glContext.deleteShader(t),r}bindOutput(e){let t=e.width,r=e.height;i.Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${t}/${r}, shape=${e.shape}, type=${e.tensor.type}`),this.glContext.attachFramebuffer(e.texture,t,r)}bindAttributes(e){let t=e.position,r=e.textureCoord;this.glContext.setVertexAttributes(t,r),this.attributesBound=!0}bindUniforms(e,t,r){var n;let i=this.glContext.gl,o=0;for(let{name:s,type:a,location:l,arrayLength:u}of e){let e=null==(n=t.find(e=>e.name===s))?void 0:n.data;if("sampler2D"!==a&&!e)throw Error(`variable '${s}' does not have data defined in program info`);switch(a){case"sampler2D":this.bindTexture(r[o],l,o),o++;break;case"float":u?i.uniform1fv(l,e):i.uniform1f(l,e);break;case"int":u?i.uniform1iv(l,e):i.uniform1i(l,e);break;default:throw Error(`Uniform not implemented: ${a}`)}}}bindTexture(e,t,r){this.glContext.bindTextureToUniform(e.texture,r,t)}getAttribLocations(e){return{position:this.getAttribLocation(e,"position"),textureCoord:this.getAttribLocation(e,"textureCoord")}}getUniformLocations(e,t,r){let n=[];if(t)for(let r of t)n.push({name:r,type:"sampler2D",location:this.getUniformLocation(e,r)});if(r)for(let t of r)n.push(Object.assign(Object.assign({},t),{location:this.getUniformLocation(e,t.name)}));return n}getUniformLocation(e,t){let r=this.glContext.gl.getUniformLocation(e,t);if(null===r)throw Error(`Uniform ${t} not found.`);return r}getAttribLocation(e,t){return this.glContext.gl.getAttribLocation(e,t)}}},6416:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLSessionHandler=void 0;let n=r(6231),i=r(1047),o=r(8316),s=r(1640),a=r(1958),l=r(7859),u=r(5702);t.WebGLSessionHandler=class{constructor(e,t){this.backend=e,this.context=t,this.layoutStrategy=new l.PreferLogicalStrategy(e.glContext.maxTextureSize),this.programManager=new a.ProgramManager(this.context.profiler,e.glContext,this.layoutStrategy),this.textureManager=new u.TextureManager(e.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:"full"===e.textureCacheMode}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=e.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new o.WebGLInferenceHandler(this)}onGraphInitialized(e){let t=e.getValues().filter(e=>-1===e.from&&e.tensor).map(e=>e.tensor.dataId);this.initializers=new Set(t)}isInitializer(e){return!!this.initializers&&this.initializers.has(e)}addInitializer(e){this.initializers.add(e)}getTextureData(e,t){return t?this.packedTextureDataCache.get(e):this.unpackedTextureDataCache.get(e)}setTextureData(e,t,r=!1){n.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),r?this.packedTextureDataCache.set(e,t):this.unpackedTextureDataCache.set(e,t)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(e=>this.textureManager.releaseTexture(e,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(e=>this.textureManager.releaseTexture(e,!0)),this.unpackedTextureDataCache=new Map}resolve(e,t,r){let n=(0,i.resolveOperator)(e,t,s.WEBGL_OP_RESOLVE_RULES);return{impl:n.opImpl,context:n.opInit?n.opInit(e,r):e}}}},7769:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Uint8DataEncoder=t.RGBAFloatDataEncoder=t.RedFloat32DataEncoder=void 0;let n=r(6231);t.RedFloat32DataEncoder=class{constructor(e,t=1){if(1===t)this.internalFormat=e.R32F,this.format=e.RED,this.textureType=e.FLOAT,this.channelSize=t;else{if(4!==t)throw Error(`Invalid number of channels: ${t}`);this.internalFormat=e.RGBA32F,this.format=e.RGBA,this.textureType=e.FLOAT,this.channelSize=t}}encode(e,t){let r,i;return e.constructor!==Float32Array&&(n.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),i=new Float32Array(e)),t*this.channelSize>e.length?(n.Logger.warning("Encoder","Source data too small. Allocating larger array"),i=e,r=this.allocate(t*this.channelSize),i.forEach((e,t)=>r[t]=e)):r=i=e,r}allocate(e){return new Float32Array(4*e)}decode(e,t){return 1===this.channelSize?e.filter((e,t)=>t%4==0).subarray(0,t):e.subarray(0,t)}},t.RGBAFloatDataEncoder=class{constructor(e,t=1,r){if(1!==t&&4!==t)throw Error(`Invalid number of channels: ${t}`);this.internalFormat=e.RGBA,this.format=e.RGBA,this.channelSize=t,this.textureType=r||e.FLOAT}encode(e,t){let r=e;return 1===this.channelSize&&(n.Logger.verbose("Encoder","Exploding into a larger array"),r=this.allocate(t),e.forEach((e,t)=>r[4*t]=e)),r}allocate(e){return new Float32Array(4*e)}decode(e,t){return 1===this.channelSize?e.filter((e,t)=>t%4==0).subarray(0,t):e.subarray(0,t)}},t.Uint8DataEncoder=class{constructor(e,t=1){if(this.channelSize=4,1===t)this.internalFormat=e.ALPHA,this.format=e.ALPHA,this.textureType=e.UNSIGNED_BYTE,this.channelSize=t;else{if(4!==t)throw Error(`Invalid number of channels: ${t}`);this.internalFormat=e.RGBA,this.format=e.RGBA,this.textureType=e.UNSIGNED_BYTE,this.channelSize=t}}encode(e,t){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}allocate(e){return new Uint8Array(e*this.channelSize)}decode(e,t){if(e instanceof Uint8Array)return e.subarray(0,t);throw Error(`Invalid array type: ${e.constructor}`)}}},7859:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBatchDim=t.sizeToSquarishShape=t.getRowsCols=t.sizeFromShape=t.isInt=t.parseAxisParam=t.squeezeShape=t.PreferLogicalStrategy=t.AlwaysKeepOriginalSizeStrategy=void 0;let n=r(6231),i=r(2517);function o(e,t){let r=[],n=[],i=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||i?null:s(t,e).sort(),a=0;for(let t=0;t<e.length;++t){if(null!=o){if(o[a]===t&&1!==e[t])throw Error(`Can't squeeze axis ${t} since its dim '${e[t]}' is not 1`);(null==o[a]||o[a]>t)&&1===e[t]&&(r.push(e[t]),n.push(t)),o[a]<=t&&a++}1!==e[t]&&(r.push(e[t]),n.push(t))}return{newShape:r,keptDims:n}}function s(e,t){let r=t.length;return e=null==e?t.map((e,t)=>t):[].concat(e),(0,i.assert)(e.every(e=>e>=-r&&e<r),()=>`All values in axis param must be in range [-${r}, ${r}) but got axis ${e}`),(0,i.assert)(e.every(a),()=>`All values in axis param must be integers but got axis ${e}`),e.map(e=>e<0?r+e:e)}function a(e){return e%1==0}function l(e){if(0===e.length)return 1;let t=e[0];for(let r=1;r<e.length;r++)t*=e[r];return t}function u(e){let t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}t.AlwaysKeepOriginalSizeStrategy=class{constructor(e){this.maxTextureSize=e}computeTextureWH(e,t){if(0===e.length)return[1,1];let r=this.maxTextureSize;if(t&&void 0!==t.breakAxis){let i=t.breakAxis>=e.length?1:e.slice(t.breakAxis).reduce((e,t)=>e*t),o=t.breakAxis<=0?1:e.slice(0,t.breakAxis).reduce((e,t)=>e*t);if(!(i>r||o>r))return[i,o];n.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${e}, breakAxis:${t.breakAxis}`)}let i=e.reduce((e,t)=>e*t),o=Math.floor(Math.sqrt(i));for(;o<r&&o<i&&i%o!=0;o++);if(o>=r||i%o!=0)throw Error(`The given dimensions are outside this GPU's boundaries: ${e}`);return[o,i/o]}},t.PreferLogicalStrategy=class{constructor(e){this.maxTextureSize=e}computeTextureWH(e,t){let r=this.computeTexture(e,t);return t&&t.isPacked&&(r[0]/=2,r[1]/=2),t&&t.reverseWH?[r[1],r[0]]:r}computeTexture(e,t){let r=t&&t.isPacked;if(0===e.length)return r?[2,2]:[1,1];let i=this.maxTextureSize;if(t&&void 0!==t.breakAxis){let r=t.breakAxis>=e.length?1:e.slice(t.breakAxis).reduce((e,t)=>e*t),o=t.breakAxis<=0?1:e.slice(0,t.breakAxis).reduce((e,t)=>e*t);if(!(r>i||o>i))return[r,o];n.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${e}, breakAxis:${t.breakAxis}`)}let s=e.slice(0);r&&(i*=2,1===(s=s.map((e,t)=>t>=s.length-2?s[t]%2==0?s[t]:s[t]+1:s[t])).length&&(s=[2,s[0]])),2!==s.length&&(s=o(s).newShape);let a=l(s);return s.length<=1&&a<=i?[1,a]:2===s.length&&s[0]<=i&&s[1]<=i?s:3===s.length&&s[0]*s[1]<=i&&s[2]<=i?[s[0]*s[1],s[2]]:3===s.length&&s[0]<=i&&s[1]*s[2]<=i?[s[0],s[1]*s[2]]:4===s.length&&s[0]*s[1]*s[2]<=i&&s[3]<=i?[s[0]*s[1]*s[2],s[3]]:4===s.length&&s[0]<=i&&s[1]*s[2]*s[3]<=i?[s[0],s[1]*s[2]*s[3]]:r?u(a/4).map(e=>2*e):u(a)}},t.squeezeShape=o,t.parseAxisParam=s,t.isInt=a,t.sizeFromShape=l,t.getRowsCols=function(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]},t.sizeToSquarishShape=u,t.getBatchDim=function(e,t=2){return l(e.slice(0,e.length-t))}},4057:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTextureLayoutFromShape=t.calculateTextureWidthAndHeight=t.createTextureLayoutFromTextureType=void 0;let n=r(2517),i=r(2039);t.createTextureLayoutFromTextureType=(e,r,n)=>{let o=n===i.TextureType.unpacked||n===i.TextureType.unpackedReversed?1:4,s=n===i.TextureType.packed,a=n===i.TextureType.unpackedReversed||n===i.TextureType.packed,l=n===i.TextureType.packedLastDimension?r.length-1:void 0,u=n===i.TextureType.packedLastDimension?r.map((e,t)=>t===r.length-1?4*e:e):void 0;return(0,t.createTextureLayoutFromShape)(e,r,o,u,{isPacked:s,reverseWH:a,breakAxis:l})},t.calculateTextureWidthAndHeight=(e,r,n)=>{let i=(0,t.createTextureLayoutFromTextureType)(e,r,n);return[i.width,i.height]},t.createTextureLayoutFromShape=(e,t,r=1,i,o)=>{let s=!(!o||!o.isPacked),[a,l]=e.computeTextureWH(s&&i||t,o),u=t.length,c=t.slice(0);if(0===u&&(c=[1]),1===r)i=t;else if(s){if(4!==r)throw Error("a packed texture must be 4-channel");i=t,u>0&&(c[u-1]=Math.ceil(c[u-1]/2)),u>1&&(c[u-2]=Math.ceil(c[u-2]/2))}else if(!i)throw Error("Unpacked shape is needed when using channels > 1");return{width:a,height:l,channels:r,isPacked:s,shape:c,strides:n.ShapeUtil.computeStrides(c),unpackedShape:i,reversedWH:o&&o.reverseWH}}},5702:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextureManager=void 0;let n=r(6231);t.TextureManager=class{constructor(e,t,r,n){this.glContext=e,this.layoutStrategy=t,this.profiler=r,this.config=n,this.pendingRead=new Map,n.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(e,t,r,i){let o,s,a=this.toEncoderType(e),l=this.glContext.getEncoder(a,t.channels||1,i);if(t.isPacked&&1===i)throw Error("not implemented");let u=t.width,c=t.height;if(this.config.reuseTextures){o=`${u}x${c}_${l.format}_${l.internalFormat}_${l.textureType}`,(s=this.inUseTextures.get(o))||(s=[],this.inUseTextures.set(o,s));let t=this.idleTextures.get(o);if(t&&t.length>0){let n=t.pop();return s.push(n),1===i&&this.glContext.updateTexture(n,u,c,l,this.toTextureData(e,r)),n}}n.Logger.verbose("TextureManager",`Creating new texture of size ${t.width}x${t.height}`);let d=this.glContext.allocateTexture(u,c,l,this.toTextureData(e,r));return this.config.reuseTextures&&(s.push(d),this.textureLookup.set(d,o)),d}readTexture(e,t,r){return r||(r=1),this.profiler.event("backend","TextureManager.readTexture",()=>{let n=e.shape.reduce((e,t)=>e*t)*r,i=this.glContext.readTexture(e.texture,e.width,e.height,n,this.toEncoderType(t),r);return this.toTensorData(t,i)})}async readTextureAsync(e,t,r){let n=e.tensor.dataId;if(r||(r=1),this.pendingRead.has(n)){let e=this.pendingRead.get(n);return new Promise(t=>null==e?void 0:e.push(t))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(n,[]);let i=e.shape.reduce((e,t)=>e*t)*r;await this.glContext.createAndWaitForFence();let o=this.glContext.readTexture(e.texture,e.width,e.height,i,this.toEncoderType(t),r),s=this.toTensorData(t,o),a=this.pendingRead.get(n);return this.pendingRead.delete(n),null==a||a.forEach(e=>e(s)),s})}readUint8TextureAsFloat(e){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{let t=e.shape.reduce((e,t)=>e*t),r=this.glContext.readTexture(e.texture,e.width,e.height,4*t,"byte",4);return new Float32Array(r.buffer,r.byteOffset,t)})}releaseTexture(e,t){let r;if(this.config.reuseTextures&&(r=this.textureLookup.get(e.texture))){t&&this.textureLookup.delete(r);let n=this.inUseTextures.get(r);if(n){let t=n.indexOf(e.texture);if(-1!==t){n.splice(t,1);let i=this.idleTextures.get(r);i||(i=[],this.idleTextures.set(r,i)),i.push(e.texture)}}}r&&!t||(n.Logger.verbose("TextureManager",`Deleting texture of size ${e.width}x${e.height}`),this.glContext.deleteTexture(e.texture))}toTensorData(e,t){switch(e){case"int16":return t instanceof Int16Array?t:Int16Array.from(t);case"int32":return t instanceof Int32Array?t:Int32Array.from(t);case"int8":return t instanceof Int8Array?t:Int8Array.from(t);case"uint16":return t instanceof Uint16Array?t:Uint16Array.from(t);case"uint32":return t instanceof Uint32Array?t:Uint32Array.from(t);case"uint8":case"bool":return t instanceof Uint8Array?t:Uint8Array.from(t);case"float32":return t instanceof Float32Array?t:Float32Array.from(t);case"float64":return t instanceof Float64Array?t:Float64Array.from(t);default:throw Error(`TensorData type ${e} is not supported`)}}toTextureData(e,t){if(t)return t instanceof Float32Array?t:new Float32Array(t)}toEncoderType(e){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},2039:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TextureType=void 0,(r=t.TextureType||(t.TextureType={}))[r.unpacked=0]="unpacked",r[r.unpackedReversed=1]="unpackedReversed",r[r.packed=2]="packed",r[r.downloadUint8AsFloat=3]="downloadUint8AsFloat",r[r.packedLastDimension=4]="packedLastDimension"},9390:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGlChannels=t.getCoordsDataType=t.getSqueezedParams=t.squeezeInputShape=t.generateShaderFuncNameFromInputSamplerNameAtOutCoords=t.generateShaderFuncNameFromInputSamplerName=t.repeatedTry=t.getPackedShape=void 0;let n=r(2517);t.getPackedShape=function(e){let t=e.length;return e.slice(0,t-1).concat(e[t-1]/4)},t.repeatedTry=async function(e,t=e=>0,r){return new Promise((n,i)=>{let o=0,s=()=>{if(e())return void n();let a=t(++o);null!=r&&o>=r?i():setTimeout(s,a)};s()})},t.generateShaderFuncNameFromInputSamplerName=function(e){return(0,n.assert)(void 0!==e&&0!==e.length,()=>"empty string found for sampler name"),"get"+e.charAt(0).toUpperCase()+e.slice(1)},t.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(e){return(0,n.assert)(void 0!==e&&0!==e.length,()=>"empty string found for sampler name"),"get"+e.charAt(0).toUpperCase()+e.slice(1)+"AtOutCoords"},t.squeezeInputShape=function(e,t){return JSON.parse(JSON.stringify(e)),t},t.getSqueezedParams=function(e,t){return t.map(t=>e[t]).join(", ")},t.getCoordsDataType=function(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)},t.getGlChannels=function(e=6){return["x","y","z","w","u","v"].slice(0,e)}},7305:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createNewWebGLContext=t.createWebGLContext=void 0;let n=r(6231),i=r(1713),o={};function s(e){let t,r=function(){if("u"<typeof document){if("u"<typeof OffscreenCanvas)throw TypeError("failed to create canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}let e=document.createElement("canvas");return e.width=1,e.height=1,e}(),o={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!e||"webgl2"===e)&&(t=r.getContext("webgl2",o)))try{return new i.WebGLContext(t,2)}catch(e){n.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${e}`)}if((!e||"webgl"===e)&&(t=r.getContext("webgl",o)||r.getContext("experimental-webgl",o)))try{return new i.WebGLContext(t,1)}catch(e){n.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${e}`)}throw Error("WebGL is not supported")}t.createWebGLContext=function e(t){let r;(!t||"webgl2"===t)&&"webgl2"in o?r=o.webgl2:(!t||"webgl"===t)&&"webgl"in o&&(r=o.webgl),r=r||s(t),t=t||1===r.version?"webgl":"webgl2";let n=r.gl;return o[t]=r,n.isContextLost()?(delete o[t],e(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),r)},t.createNewWebGLContext=s},1713:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLContext=t.linearSearchLastTrue=void 0;let s=r(1670),a=o(r(7769)),l=r(9390);function u(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}t.linearSearchLastTrue=u,t.WebGLContext=class{constructor(e,t){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=e,this.version=t,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(e,t,r,n){let i=this.gl,o=i.createTexture();i.bindTexture(i.TEXTURE_2D,o),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE);let s=n?r.encode(n,e*t):null;return i.texImage2D(i.TEXTURE_2D,0,r.internalFormat,e,t,0,r.format,r.textureType,s),this.checkError(),o}updateTexture(e,t,r,n,i){let o=this.gl;o.bindTexture(o.TEXTURE_2D,e);let s=n.encode(i,t*r);o.texSubImage2D(o.TEXTURE_2D,0,0,0,t,r,n.format,n.textureType,s),this.checkError()}attachFramebuffer(e,t,r){let n=this.gl;n.bindTexture(n.TEXTURE_2D,e),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0),this.checkError(),n.viewport(0,0,t,r),n.scissor(0,0,t,r)}readTexture(e,t,r,n,i,o){let s=this.gl;o||(o=1),this.frameBufferBound||this.attachFramebuffer(e,t,r);let a=this.getEncoder(i,o),l=a.allocate(t*r);return s.bindTexture(s.TEXTURE_2D,e),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,e,0),s.readPixels(0,0,t,r,s.RGBA,a.textureType,l),this.checkError(),a.decode(l,n)}isFramebufferReady(){return!0}getActiveTexture(){let e=this.gl;return"TEXTURE"+(e.getParameter(this.gl.ACTIVE_TEXTURE)-e.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(e,t){let r=this.gl;r.vertexAttribPointer(e,3,r.FLOAT,!1,20,0),r.enableVertexAttribArray(e),-1!==t&&(r.vertexAttribPointer(t,2,r.FLOAT,!1,20,12),r.enableVertexAttribArray(t)),this.checkError()}createProgram(e,t){let r=this.gl,n=r.createProgram();return r.attachShader(n,e),r.attachShader(n,t),r.linkProgram(n),n}compileShader(e,t){let r=this.gl,n=r.createShader(t);if(!n)throw Error(`createShader() returned null with type ${t}`);if(r.shaderSource(n,e),r.compileShader(n),!1===r.getShaderParameter(n,r.COMPILE_STATUS))throw Error(`Failed to compile shader: ${r.getShaderInfoLog(n)}
Shader source:
${e}`);return n}deleteShader(e){this.gl.deleteShader(e)}bindTextureToUniform(e,t,r){let n=this.gl;n.activeTexture(n.TEXTURE0+t),this.checkError(),n.bindTexture(n.TEXTURE_2D,e),this.checkError(),n.uniform1i(r,t),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(s.env.debug){let e=this.gl,t=e.getError(),r="";switch(t){case e.NO_ERROR:return;case e.INVALID_ENUM:r="INVALID_ENUM";break;case e.INVALID_VALUE:r="INVALID_VALUE";break;case e.INVALID_OPERATION:r="INVALID_OPERATION";break;case e.INVALID_FRAMEBUFFER_OPERATION:r="INVALID_FRAMEBUFFER_OPERATION";break;case e.OUT_OF_MEMORY:r="OUT_OF_MEMORY";break;case e.CONTEXT_LOST_WEBGL:r="CONTEXT_LOST_WEBGL";break;default:r=`Unknown WebGL Error: ${t.toString(16)}`}throw Error(r)}}deleteTexture(e){this.gl.deleteTexture(e)}deleteProgram(e){this.gl.deleteProgram(e)}getEncoder(e,t,r=0){if(2===this.version)return new a.RedFloat32DataEncoder(this.gl,t);switch(e){case"float":return 1===r||this.isRenderFloat32Supported?new a.RGBAFloatDataEncoder(this.gl,t):new a.RGBAFloatDataEncoder(this.gl,t,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw Error("not implemented");case"byte":return new a.Uint8DataEncoder(this.gl,t);default:throw Error(`Invalid dataType: ${e}`)}}clearActiveTextures(){let e=this.gl;for(let t=0;t<this.maxTextureImageUnits;++t)e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,null)}dispose(){if(this.disposed)return;let e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(this.framebuffer),e.bindBuffer(e.ARRAY_BUFFER,null),e.deleteBuffer(this.vertexbuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){let e=this.gl,t=e.createBuffer();if(!t)throw Error("createBuffer() returned null");let r=this.createDefaultGeometry();return e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW),this.checkError(),t}createFramebuffer(){let e=this.gl.createFramebuffer();if(!e)throw Error("createFramebuffer returned null");return e}queryVitalParameters(){let e=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),1===this.version&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){2===this.version?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){let e=this.gl,t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);let r=2===this.version?e.RGBA32F:e.RGBA;e.texImage2D(e.TEXTURE_2D,0,r,1,1,0,e.RGBA,e.FLOAT,null);let n=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0);let i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(t),e.deleteFramebuffer(n),i}checkRenderFloat32(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){let e,t,r,n,i,o=this.gl;try{e=o.createTexture(),t=o.createFramebuffer(),o.bindTexture(o.TEXTURE_2D,e);let s=2===this.version?o.RGBA32F:o.RGBA;return o.texImage2D(o.TEXTURE_2D,0,s,1,1,0,o.RGBA,o.FLOAT,null),o.bindFramebuffer(o.FRAMEBUFFER,t),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,e,0),o.enable(o.BLEND),!!(r=o.createShader(o.VERTEX_SHADER))&&(o.shaderSource(r,"void main(){}"),o.compileShader(r),!!(n=o.createShader(o.FRAGMENT_SHADER))&&(o.shaderSource(n,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),o.compileShader(n),!!(i=o.createProgram())&&(o.attachShader(i,r),o.attachShader(i,n),o.linkProgram(i),o.useProgram(i),o.drawArrays(o.POINTS,0,1),o.getError()===o.NO_ERROR)))}finally{o.disable(o.BLEND),i&&o.deleteProgram(i),r&&o.deleteShader(r),n&&o.deleteShader(n),t&&(o.bindFramebuffer(o.FRAMEBUFFER,null),o.deleteFramebuffer(t)),e&&(o.bindTexture(o.TEXTURE_2D,null),o.deleteTexture(e))}}beginTimer(){if(2===this.version&&this.disjointTimerQueryWebgl2Extension){let e=this.gl,t=this.disjointTimerQueryWebgl2Extension,r=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,r),r}throw Error("WebGL1 profiling currently not supported.")}endTimer(){if(2!==this.version||!this.disjointTimerQueryWebgl2Extension)throw Error("WebGL1 profiling currently not supported");{let e=this.gl,t=this.disjointTimerQueryWebgl2Extension;e.endQuery(t.TIME_ELAPSED_EXT)}}isTimerResultAvailable(e){let t=!1,r=!1;if(2!==this.version||!this.disjointTimerQueryWebgl2Extension)throw Error("WebGL1 profiling currently not supported");{let n=this.gl,i=this.disjointTimerQueryWebgl2Extension;t=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE),r=n.getParameter(i.GPU_DISJOINT_EXT)}return t&&!r}getTimerResult(e){let t=0;if(2!==this.version)throw Error("WebGL1 profiling currently not supported");{let r=this.gl;t=r.getQueryParameter(e,r.QUERY_RESULT),r.deleteQuery(e)}return t/1e6}async waitForQueryAndGetTime(e){return await (0,l.repeatedTry)(()=>this.isTimerResultAvailable(e)),this.getTimerResult(e)}async createAndWaitForFence(){let e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,r=e,n=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);return e.flush(),t=null===n?()=>!0:()=>{let e=r.clientWaitSync(n,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED},{query:n,isFencePassed:t}}async pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){let e=u(this.itemsToPoll.map(e=>e.isDoneFn));for(let t=0;t<=e;++t){let{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}async addItemToPoll(e,t){this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||await (0,l.repeatedTry)(()=>(this.pollItems(),0===this.itemsToPoll.length))}}},1036:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExecutionPlan=void 0;let n=r(6231);class i{constructor(e,t){this.op=e,this.node=t}}t.ExecutionPlan=class{constructor(e,t,r){this.graph=e,this.profiler=r,this.initialize(t)}initialize(e){this.profiler.event("session","ExecutionPlan.initialize",()=>{let t=this.graph.getNodes();if(t.length!==e.length)throw Error("The size of nodes and OPs do not match.");this._ops=e.map((e,r)=>new i(e,t[r])),this.reset(),this._starter=[],this._ops.forEach((e,t)=>{let r=!0;for(let t of e.node.inputs)if(!this._values[t]&&-1===this.graph.getInputIndices().indexOf(t)){r=!1;break}r&&this._starter.push(t)})})}reset(){this._values=this.graph.getValues().map(e=>e.tensor)}async execute(e,t){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();let r=e.createInferenceHandler(),i=this.graph.getInputIndices();if(t.length!==i.length)throw Error(`number of input tensors don't match the number of inputs to the model: actual: ${t.length} expected: ${i.length}`);t.forEach((e,t)=>{let r=i[t];this._values[r]=e});let o=this._starter.slice(0),s=this.graph.getValues(),a=this.graph.getNodes(),l=0;for(;l<o.length;){let e=o[l++],t=this._ops[e],i=t.node.inputs.map(e=>this._values[e]);if(-1!==i.indexOf(void 0))throw Error(`unresolved input detected: op: ${t.node}`);let u=i;n.Logger.verbose("ExecPlan",`Runing op:${t.node.name} (${u.map((e,r)=>`'${t.node.inputs[r]}': ${e.type}[${e.dims.join(",")}]`).join(", ")})`);let c=await this.profiler.event("node",t.node.name,async()=>t.op.impl(r,u,t.op.context));if(c.length!==t.node.outputs.length)throw Error("the size of output does not match model definition.");c.forEach((e,r)=>{let n=t.node.outputs[r];if(this._values[n])throw Error(`output [${n}] already has value: op:${t.node.name}`);this._values[n]=e});let d=new Set;c.forEach((e,r)=>{for(let e of s[t.node.outputs[r]].to){let t=a[e],r=!0;for(let e of t.inputs)if(!this._values[e]){r=!1;break}r&&d.add(e)}}),o.push(...d)}let u=[];for(let e=0;e<this.graph.getOutputIndices().length;e++){let t=this.graph.getOutputIndices()[e],r=this._values[t];if(void 0===r)throw Error(`required output [${t}] does not have value`);0===t?await r.getData():r.data,u.push(r)}return n.Logger.verbose("ExecPlan","disposing of inferenceHandler"),r.dispose(),u})}}},7070:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Graph=void 0;let n=r(1446),i=r(7778),o=r(9395),s=r(9162),a=r(2517);var l=o.onnxruntime.experimental.fbs;t.Graph={from:(e,t)=>new d(e,t)};class u{constructor(e){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,e&&(this.type=a.ProtoUtil.tensorValueTypeFromProto(e.type.tensorType))}get from(){return this._from}get to(){return this._to}}class c{constructor(e,t){e instanceof n.onnx.NodeProto?(this.name=e.name,this.opType=e.opType,this.attributes=new i.Attribute(e.attribute)):e instanceof l.Node&&(this.name=null!=t?t:e.name(),this.opType=e.opType(),this.attributes=new i.Attribute(a.ProtoUtil.tensorAttributesFromORTFormat(e))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class d{constructor(e,t){if(!e)throw TypeError("graph is empty");this.buildGraph(e),this.transformGraph(t),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(e){if(e instanceof n.onnx.GraphProto)this.buildGraphFromOnnxFormat(e);else{if(!(e instanceof l.Graph))throw TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(e)}}buildGraphFromOnnxFormat(e){let t=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let r=new Map;if(!e.input)throw Error("missing information in graph: input");let n=[];for(let r of e.input){if(t.has(r.name))throw Error(`duplicated input name: ${r.name}`);let e=this._allData.push(new u(r))-1;t.set(r.name,e),n.push(r.name)}if(!e.initializer)throw Error("missing information in graph: initializer");for(let r of e.initializer){let e=t.get(r.name);if(void 0===e){let n=new u;n.type={shape:{dims:a.ProtoUtil.tensorDimsFromProto(r.dims)},tensorType:a.ProtoUtil.tensorDataTypeFromProto(r.dataType)},e=this._allData.push(n)-1,t.set(r.name,e)}this._allData[e]._from=-1,this._allData[e].tensor=s.Tensor.fromProto(r)}for(let e=0;e<this._allData.length;e++)this._allData[e].tensor||(this._allInputIndices.push(e),this._allInputNames.push(n[e]));if(!e.output)throw Error("missing information in graph: output");for(let r of e.output){if(t.has(r.name))throw Error(`duplicated output name: ${r.name}`);let e=this._allData.push(new u(r))-1;t.set(r.name,e),this._allOutputIndices.push(e),this._allOutputNames.push(r.name)}if(!e.node)throw Error("missing information in graph: node");for(let t of e.node){if(!t.name)for(let e=0;;e++){let n=`unnamed_${t.opType}_${e}`;if(!r.has(n)){t.name=n;break}}if(r.has(t.name))throw Error(`duplicated node name: ${t.name}`);let e=this._nodes.push(new c(t))-1;r.set(t.name,e)}for(let r=0;r<this._nodes.length;r++){let n=this._nodes[r],i=e.node[r];if(!i.output)throw Error(`missing output for node: ${i.name}`);for(let e of i.output){let o=t.get(e);if(void 0===o&&(o=this._allData.push(new u)-1,t.set(e,o)),n.outputs.push(o),void 0!==this._allData[o]._from)throw Error(`multiple nodes output to one data value: ${o}`);if(this._allData[o]._from=r,"Constant"===i.opType){if(!i.attribute||1!==i.attribute.length||!i.attribute[0].t)throw Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!i.output||1!==i.output.length)throw Error("missing output or incorrect number of outputs for this Constant operator");n.outputs.pop(),n.executeNode=!1,this._allData[o]._from=-1,this._allData[o].tensor=s.Tensor.fromProto(i.attribute[0].t)}}}for(let r=0;r<this._nodes.length;r++){let n=this._nodes[r],i=e.node[r];if(!i.input)throw Error(`missing input for node: ${i.name}`);for(let e of i.input){let o=t.get(e);if(void 0===o){if(""===e&&3===i.input.length&&"Resize"===i.opType)continue;throw Error(`unrecognized input '${e}' for node: ${i.name}`)}n.inputs.push(o),this._allData[o]._to.push(r)}}return!0}buildGraphFromOrtFormat(e){var t,r,n;let i=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let o=new Map,d=[];for(let o=0;o<e.inputsLength();o++){let s=e.inputs(o);if(i.has(s))throw Error(`duplicated input name: ${s}`);for(let o=0;o<e.nodeArgsLength();o++)if((null==(t=e.nodeArgs(o))?void 0:t.name())===s){let t=new u;if((null==(n=null==(r=e.nodeArgs(o))?void 0:r.type())?void 0:n.valueType())!==l.TypeInfoValue.tensor_type)throw Error("Unexpected value type for the nodeArg.");let c=e.nodeArgs(o).type().value(new l.TensorTypeAndShape),h=a.ProtoUtil.tensorDataTypeFromProto(c.elemType()),p=c.shape(),f=[];for(let e=0;e<p.dimLength();e++)f.push(a.LongUtil.longToNumber(p.dim(e).value().dimValue()));t.type={shape:{dims:f},tensorType:h};let g=this._allData.push(t)-1;i.set(s,g),d.push(s)}}for(let t=0;t<e.initializersLength();t++){let r=e.initializers(t),n=i.get(r.name());if(void 0===n){let e=new u;e.type={shape:{dims:a.ProtoUtil.tensorDimsFromORTFormat(r)},tensorType:a.ProtoUtil.tensorDataTypeFromProto(r.dataType())},n=this._allData.push(e)-1,i.set(r.name(),n)}this._allData[n]._from=-1,this._allData[n].tensor=s.Tensor.fromOrtTensor(r)}for(let e=0;e<this._allData.length;e++)this._allData[e].tensor||(this._allInputIndices.push(e),this._allInputNames.push(d[e]));for(let t=0;t<e.outputsLength();t++){let r=e.outputs(t);if(i.has(r))throw Error(`duplicated output name: ${r}`);let n=this._allData.push(new u)-1;i.set(r,n),this._allOutputIndices.push(n),this._allOutputNames.push(r)}if(!e.nodes)throw Error("missing information in graph: node");for(let t=0;t<e.nodesLength();t++){let r=e.nodes(t),n=r.name();if(!n)for(let e=0;n=`unnamed_${r.opType()}_${e}`,o.has(n);e++);if(o.has(n))throw Error(`duplicated node name: ${n}`);let i=this._nodes.push(new c(r,n))-1;o.set(n,i)}for(let t=0;t<this._nodes.length;t++){let r=this._nodes[t],n=e.nodes(t);if(null==n)throw Error(`No node exists at index ${t}`);if(0===(null==n?void 0:n.outputsLength()))throw Error(`missing output for node: ${n.name}`);for(let e=0;e<(null==n?void 0:n.outputsLength());e++){let o=null==n?void 0:n.outputs(e),a=i.get(o);if(void 0===a&&(a=this._allData.push(new u)-1,i.set(o,a)),r.outputs.push(a),void 0!==this._allData[a]._from)throw Error(`multiple nodes output to one data value: ${a}`);if(this._allData[a]._from=t,"Constant"===n.opType()){if(1!==n.attributesLength()||!n.attributes(0).t())throw Error("missing attributes or missing tensor value in attributes for this Constant operator");if(1!==n.outputsLength())throw Error("missing output or incorrect number of outputs for this Constant operator");r.outputs.pop(),r.executeNode=!1,this._allData[a]._from=-1,this._allData[a].tensor=s.Tensor.fromOrtTensor(n.attributes(0).t())}}}for(let t=0;t<this._nodes.length;t++){let r=this._nodes[t],n=e.nodes(t);if(0===n.inputsLength())throw Error(`missing input for node: ${n.name}`);for(let e=0;e<n.inputsLength();e++){let o=n.inputs(e),s=i.get(o);if(void 0===s)throw Error(`unrecognized input '${o}' for node: ${n.name()}`);r.inputs.push(s),this._allData[s]._to.push(t)}}}checkIsAcyclic(){let e=new Set;this._allInputIndices.forEach(t=>{this._allData[t]._to.forEach(t=>{e.add(t)})});let t=Array.from(e),r=Array(this._nodes.length).fill("white");for(;t.length>0;){let e=t.pop();"gray"===r[e]?r[e]="black":(t.push(e),r[e]="gray",this._nodes[e].outputs.forEach(n=>{let i=this._allData[n];if(void 0!==i.tensor)throw Error("node outputs should not be initialized");if(i._from!==e)throw Error("from property of the Value object doesn't match index of Node being processed");i._to.forEach(e=>{if("gray"===r[e])throw Error("model graph is cyclic");"white"===r[e]&&t.push(e)})}))}}transformGraph(e){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),e&&e.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let e=0;for(let t=0;t<this._nodes.length;t++)this._nodes[t].executeNode?e>0&&(this._nodes[t].inputs.forEach(r=>{let n=this._allData[r]._to.indexOf(t+e);-1!==n&&(this._allData[r]._to[n]=t)}),this._nodes[t].outputs.forEach(r=>{this._allData[r]._from&&this._allData[r]._from===t+e&&(this._allData[r]._from=t)})):(e++,this._nodes[t].outputs.forEach(e=>{this._allData[e]._from=-2}),this._nodes.splice(t,1),t--);e=0;for(let t=0;t<this._allData.length;t++)if(-2!==this._allData[t].from||-1!==this._allOutputIndices.indexOf(t+e)){if(e>0){let r=-1;void 0!==this._allData[t].from&&-1!==this._allData[t].from?-1!==(r=this._nodes[this._allData[t].from].outputs.indexOf(t+e))&&(this._nodes[this._allData[t].from].outputs[r]=t):-1!==(r=this._allInputIndices.indexOf(t+e))&&(this._allInputIndices[r]=t),this._allData[t].to.forEach(n=>{-1!==(r=this._nodes[n].inputs.indexOf(t+e))&&(this._nodes[n].inputs[r]=t)}),0===this._allData[t].to.length&&-1!==(r=this._allOutputIndices.indexOf(t+e))&&(this._allOutputIndices[r]=t)}}else e++,this._allData.splice(t,1),t--}deleteNode(e){let t=this._nodes[e];if(t.outputs.length>1){for(let e=1;e<t.outputs.length;e++)if(this._allData[t.outputs[e]].to.length>0)throw Error("Node deletion with more than one output connected to other nodes is not supported. ")}t.executeNode=!1;let r=t.inputs[0],n=t.outputs[0],i=this._allData[n].to,o=this._allData[r].to.indexOf(e);if(-1===o)throw Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[r].to.splice(o,1),this._allData[n]._to=[];let s=this._allOutputIndices.indexOf(n);if(-1!==s&&(this._allOutputIndices[s]=r),i&&i.length>0)for(let e of i){let t=this._nodes[e].inputs.indexOf(n);if(-1===t)throw Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[e].inputs[t]=r,this._allData[r].to.push(e)}}removeAllDropoutNodes(){let e=0;for(let t of this._nodes){if("Dropout"===t.opType){if(1!==t.inputs.length)throw Error("Dropout nodes should only contain one input. ");if(1!==t.outputs.length&&2!==t.outputs.length)throw Error("Dropout nodes should contain either 1 or 2 output(s)");if(2===t.outputs.length&&0!==this._allData[t.outputs[1]]._to.length)throw Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(e)}e++}}removeAllIdentityNodes(){let e=0;for(let t of this._nodes)"Identity"===t.opType&&this.deleteNode(e),e++}isActivation(e){switch(e.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(let e of this._nodes)if("Conv"===e.opType){let t=this._allData[e.outputs[0]]._to;if(1===t.length&&this.isActivation(this._nodes[t[0]])){let r=this._nodes[t[0]];if("Clip"===r.opType)if(1===r.inputs.length)try{e.attributes.set("activation_params","floats",[r.attributes.getFloat("min"),r.attributes.getFloat("max")])}catch(t){e.attributes.set("activation_params","floats",[a.MIN_CLIP,a.MAX_CLIP])}else{if(!(r.inputs.length>=3&&void 0!==this._allData[r.inputs[1]].tensor&&void 0!==this._allData[r.inputs[2]].tensor))continue;e.attributes.set("activation_params","floats",[this._allData[r.inputs[1]].tensor.floatData[0],this._allData[r.inputs[2]].tensor.floatData[0]])}e.attributes.set("activation","string",r.opType),this.deleteNode(t[0])}}}}},6231:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.now=t.Profiler=t.Logger=void 0;let r={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},n={none:new class{log(e,t,r){}},console:new class{log(e,t,r){console.log(`${this.color(e)} ${r?"\x1b[35m"+r+"\x1b[0m ":""}${t}`)}color(e){switch(e){case"verbose":return"\x1b[34;40mv\x1b[0m";case"info":return"\x1b[32mi\x1b[0m";case"warning":return"\x1b[30;43mw\x1b[0m";case"error":return"\x1b[31;40me\x1b[0m";case"fatal":return"\x1b[101mf\x1b[0m";default:throw Error(`unsupported severity: ${e}`)}}}},i={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1},o={"":i};function s(e,t,r,n){var i;if(void 0===t)return i=e,{verbose:s.verbose.bind(null,i),info:s.info.bind(null,i),warning:s.warning.bind(null,i),error:s.error.bind(null,i),fatal:s.fatal.bind(null,i)};if(void 0===r)a(e,t);else if("number"==typeof r&&void 0===n)a(e,t);else if("string"==typeof r&&void 0===n)a(e,r,0,t);else{if("string"!=typeof r||"number"!=typeof n)throw TypeError("input is valid");a(e,r,0,t)}}function a(e,t,i,s){let a=o[s||""]||o[""];r[e]<r[a.minimalSeverity]||(a.logDateTime&&(t=`${(new Date).toISOString()}|${t}`),a.logSourceLocation,n[a.provider].log(e,t,s))}!function(e){function t(e){o={},r("",e||{})}function r(e,r){if("*"===e)t(r);else{let t=o[e]||i;o[e]={provider:r.provider||t.provider,minimalSeverity:r.minimalSeverity||t.minimalSeverity,logDateTime:void 0===r.logDateTime?t.logDateTime:r.logDateTime,logSourceLocation:void 0===r.logSourceLocation?t.logSourceLocation:r.logSourceLocation}}}e.verbose=function(t,r){e("verbose",t,r)},e.info=function(t,r){e("info",t,r)},e.warning=function(t,r){e("warning",t,r)},e.error=function(t,r){e("error",t,r)},e.fatal=function(t,r){e("fatal",t,r)},e.reset=t,e.set=r,e.setWithEnv=function(e){let t={};e.logLevel&&(t.minimalSeverity=e.logLevel),r("",t)}}(s||(s={})),t.Logger=s;class l{constructor(e,t,r,n,i,o){this.category=e,this.name=t,this.startTime=r,this.endCallback=n,this.timer=i,this.ctx=o}end(){return this.endCallback(this)}async checkTimer(){if(void 0===this.ctx||void 0===this.timer)throw Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}}class u{constructor(e,t,r,n){this.category=e,this.name=t,this.startTime=r,this.endTime=n}}t.Profiler=class{static create(e){return void 0===e?new this:new this(e.maxNumberEvents,e.flushBatchSize,e.flushIntervalInMilliseconds)}constructor(e,t,r){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=void 0===e?1e4:e,this._flushBatchSize=void 0===t?10:t,this._flushIntervalInMilliseconds=void 0===r?5e3:r}start(){this._started=!0,this._timingEvents=[],this._flushTime=(0,t.now)(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(e,t,r,n){let i=this._started?this.begin(e,t,n):void 0,o=!1,s=r();if(s&&"function"==typeof s.then)return o=!0,new Promise((e,t)=>{s.then(async t=>{i&&await i.end(),e(t)},async e=>{i&&await i.end(),t(e)})});if(!o&&i){let e=i.end();if(e&&"function"==typeof e.then)return new Promise((t,r)=>{e.then(()=>{t(s)},e=>{r(e)})})}return s}begin(e,r,n){if(!this._started)throw Error("profiler is not started yet");if(void 0===n){let n=(0,t.now)();return this.flush(n),new l(e,r,n,e=>this.endSync(e))}return new l(e,r,0,async e=>this.end(e),n.beginTimer(),n)}async end(e){let t=await e.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new u(e.category,e.name,e.startTime,t)),this.flush(t))}endSync(e){let r=(0,t.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new u(e.category,e.name,e.startTime,r)),this.flush(r))}logOneEvent(e){t.Logger.verbose(`Profiler.${e.category}`,`${(e.endTime-e.startTime).toFixed(2)}ms on event '${e.name}' at ${e.endTime.toFixed(2)}`)}flush(e){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||e-this._flushTime>=this._flushIntervalInMilliseconds){for(let e=this._flushPointer;this._flushPointer<e+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,t.now)()}}get started(){return this._started}},t.now="u">typeof performance&&performance.now?()=>performance.now():Date.now},2644:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Model=void 0;let n=r(5686),i=r(1446),o=r(7070),s=r(9395),a=r(2517);var l=s.onnxruntime.experimental.fbs;t.Model=class{load(e,t,r){if(!r)try{return void this.loadFromOnnxFormat(e,t)}catch(e){if(void 0!==r)throw e}this.loadFromOrtFormat(e,t)}loadFromOnnxFormat(e,t){let r=i.onnx.ModelProto.decode(e);if(3>a.LongUtil.longToNumber(r.irVersion))throw Error("only support ONNX model with IR_VERSION>=3");this._opsets=r.opsetImport.map(e=>({domain:e.domain,version:a.LongUtil.longToNumber(e.version)})),this._graph=o.Graph.from(r.graph,t)}loadFromOrtFormat(e,t){let r=new n.flatbuffers.ByteBuffer(e),i=l.InferenceSession.getRootAsInferenceSession(r).model();if(3>a.LongUtil.longToNumber(i.irVersion()))throw Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let e=0;e<i.opsetImportLength();e++){let t=i.opsetImport(e);this._opsets.push({domain:null==t?void 0:t.domain(),version:a.LongUtil.longToNumber(t.version())})}this._graph=o.Graph.from(i.graph(),t)}get graph(){return this._graph}get opsets(){return this._opsets}}},782:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FLOAT_TYPES=t.INT_TYPES=t.NUMBER_TYPES=void 0,t.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],t.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],t.FLOAT_TYPES=["float32","float64"]},1047:(e,t)=>{"use strict";function r(e,t){if(t.endsWith("+")){let r=Number.parseInt(t.substring(0,t.length-1),10);return!isNaN(r)&&r<=e}if(2===t.split("-").length){let r=t.split("-"),n=Number.parseInt(r[0],10),i=Number.parseInt(r[1],10);return!isNaN(n)&&!isNaN(i)&&n<=e&&e<=i}return Number.parseInt(t,10)===e}Object.defineProperty(t,"__esModule",{value:!0}),t.resolveOperator=void 0,t.resolveOperator=function(e,t,n){for(let i of n){let n=i[0],o=i[1],s=i[2],a=i[3],l=i[4];if(e.opType===n){for(let e of t)if((e.domain===o||"ai.onnx"===e.domain&&""===o)&&r(e.version,s))return{opImpl:a,opInit:l}}}throw TypeError(`cannot resolve operator '${e.opType}' with opsets: ${t.map(e=>`${e.domain||"ai.onnx"} v${e.version}`).join(", ")}`)}},9395:(e,t,r)=>{"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.onnxruntime=void 0;let o=r(5686);(function(e){let t;!function(e){e[e.UNDEFINED=0]="UNDEFINED",e[e.FLOAT=1]="FLOAT",e[e.INT=2]="INT",e[e.STRING=3]="STRING",e[e.TENSOR=4]="TENSOR",e[e.GRAPH=5]="GRAPH",e[e.FLOATS=6]="FLOATS",e[e.INTS=7]="INTS",e[e.STRINGS=8]="STRINGS",e[e.TENSORS=9]="TENSORS",e[e.GRAPHS=10]="GRAPHS",e[e.SPARSE_TENSOR=11]="SPARSE_TENSOR",e[e.SPARSE_TENSORS=12]="SPARSE_TENSORS"}(t=e.AttributeType||(e.AttributeType={}))})((i=(n=t.onnxruntime||(t.onnxruntime={})).experimental||(n.experimental={})).fbs||(i.fbs={})),function(e){!function(e){!function(e){let t;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.VALUE=1]="VALUE",e[e.PARAM=2]="PARAM"}(t=e.DimensionValueType||(e.DimensionValueType={}))}(e.fbs||(e.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(e){!function(e){let t;!function(e){e[e.UNDEFINED=0]="UNDEFINED",e[e.FLOAT=1]="FLOAT",e[e.UINT8=2]="UINT8",e[e.INT8=3]="INT8",e[e.UINT16=4]="UINT16",e[e.INT16=5]="INT16",e[e.INT32=6]="INT32",e[e.INT64=7]="INT64",e[e.STRING=8]="STRING",e[e.BOOL=9]="BOOL",e[e.FLOAT16=10]="FLOAT16",e[e.DOUBLE=11]="DOUBLE",e[e.UINT32=12]="UINT32",e[e.UINT64=13]="UINT64",e[e.COMPLEX64=14]="COMPLEX64",e[e.COMPLEX128=15]="COMPLEX128",e[e.BFLOAT16=16]="BFLOAT16"}(t=e.TensorDataType||(e.TensorDataType={}))}(e.fbs||(e.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(e){!function(e){let t;!function(e){e[e.Primitive=0]="Primitive",e[e.Fused=1]="Fused"}(t=e.NodeType||(e.NodeType={}))}(e.fbs||(e.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(e){!function(e){let t;!function(e){e[e.NONE=0]="NONE",e[e.tensor_type=1]="tensor_type",e[e.sequence_type=2]="sequence_type",e[e.map_type=3]="map_type"}(t=e.TypeInfoValue||(e.TypeInfoValue={}))}(e.fbs||(e.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsShape(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsShape(e,t){return e.setPosition(e.position()+o.flatbuffers.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}dim(t,r){let n=this.bb.__offset(this.bb_pos,4);return n?(r||new e.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}dimLength(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}static startShape(e){e.startObject(1)}static addDim(e,t){e.addFieldOffset(0,t,0)}static createDimVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startDimVector(e,t){e.startVector(4,t,4)}static endShape(e){return e.endObject()}static createShape(e,t){return r.startShape(e),r.addDim(e,t),r.endShape(e)}}t.Shape=r}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDimension(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDimension(e,t){return e.setPosition(e.position()+o.flatbuffers.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}value(t){let r=this.bb.__offset(this.bb_pos,4);return r?(t||new e.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}denotation(e){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static startDimension(e){e.startObject(2)}static addValue(e,t){e.addFieldOffset(0,t,0)}static addDenotation(e,t){e.addFieldOffset(1,t,0)}static endDimension(e){return e.endObject()}static createDimension(e,t,n){return r.startDimension(e),r.addValue(e,t),r.addDenotation(e,n),r.endDimension(e)}}t.Dimension=r}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDimensionValue(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDimensionValue(e,t){return e.setPosition(e.position()+o.flatbuffers.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}dimType(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):e.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}dimParam(e){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}static startDimensionValue(e){e.startObject(3)}static addDimType(t,r){t.addFieldInt8(0,r,e.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue(e,t){e.addFieldInt64(1,t,e.createLong(0,0))}static addDimParam(e,t){e.addFieldOffset(2,t,0)}static endDimensionValue(e){return e.endObject()}static createDimensionValue(e,t,n,i){return r.startDimensionValue(e),r.addDimType(e,t),r.addDimValue(e,n),r.addDimParam(e,i),r.endDimensionValue(e)}}t.DimensionValue=r}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTensorTypeAndShape(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTensorTypeAndShape(e,t){return e.setPosition(e.position()+o.flatbuffers.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}elemType(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):e.experimental.fbs.TensorDataType.UNDEFINED}shape(t){let r=this.bb.__offset(this.bb_pos,6);return r?(t||new e.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}static startTensorTypeAndShape(e){e.startObject(2)}static addElemType(t,r){t.addFieldInt32(0,r,e.experimental.fbs.TensorDataType.UNDEFINED)}static addShape(e,t){e.addFieldOffset(1,t,0)}static endTensorTypeAndShape(e){return e.endObject()}static createTensorTypeAndShape(e,t,n){return r.startTensorTypeAndShape(e),r.addElemType(e,t),r.addShape(e,n),r.endTensorTypeAndShape(e)}}t.TensorTypeAndShape=r}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMapType(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMapType(e,t){return e.setPosition(e.position()+o.flatbuffers.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}keyType(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):e.experimental.fbs.TensorDataType.UNDEFINED}valueType(t){let r=this.bb.__offset(this.bb_pos,6);return r?(t||new e.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}static startMapType(e){e.startObject(2)}static addKeyType(t,r){t.addFieldInt32(0,r,e.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType(e,t){e.addFieldOffset(1,t,0)}static endMapType(e){return e.endObject()}static createMapType(e,t,n){return r.startMapType(e),r.addKeyType(e,t),r.addValueType(e,n),r.endMapType(e)}}t.MapType=r}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsSequenceType(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSequenceType(e,t){return e.setPosition(e.position()+o.flatbuffers.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}elemType(t){let r=this.bb.__offset(this.bb_pos,4);return r?(t||new e.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}static startSequenceType(e){e.startObject(1)}static addElemType(e,t){e.addFieldOffset(0,t,0)}static endSequenceType(e){return e.endObject()}static createSequenceType(e,t){return r.startSequenceType(e),r.addElemType(e,t),r.endSequenceType(e)}}t.SequenceType=r}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(e){(e.fbs||(e.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(e,t,r,n){return e.prep(4,12),e.writeInt32(n),e.writeInt32(r),e.writeInt32(t),e.offset()}}}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsNodeEdge(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNodeEdge(e,t){return e.setPosition(e.position()+o.flatbuffers.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}nodeIndex(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb_pos+e):0}inputEdges(t,r){let n=this.bb.__offset(this.bb_pos,6);return n?(r||new e.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+n)+12*t,this.bb):null}inputEdgesLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}outputEdges(t,r){let n=this.bb.__offset(this.bb_pos,8);return n?(r||new e.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+n)+12*t,this.bb):null}outputEdgesLength(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}static startNodeEdge(e){e.startObject(3)}static addNodeIndex(e,t){e.addFieldInt32(0,t,0)}static addInputEdges(e,t){e.addFieldOffset(1,t,0)}static startInputEdgesVector(e,t){e.startVector(12,t,4)}static addOutputEdges(e,t){e.addFieldOffset(2,t,0)}static startOutputEdgesVector(e,t){e.startVector(12,t,4)}static endNodeEdge(e){return e.endObject()}static createNodeEdge(e,t,n,i){return r.startNodeEdge(e),r.addNodeIndex(e,t),r.addInputEdges(e,n),r.addOutputEdges(e,i),r.endNodeEdge(e)}}t.NodeEdge=r}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsNode(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNode(e,t){return e.setPosition(e.position()+o.flatbuffers.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}name(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}docString(e){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}domain(e){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}sinceVersion(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt32(this.bb_pos+e):0}index(){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint32(this.bb_pos+e):0}opType(e){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__string(this.bb_pos+t,e):null}type(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt32(this.bb_pos+t):e.experimental.fbs.NodeType.Primitive}executionProviderType(e){let t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__string(this.bb_pos+t,e):null}inputs(e,t){let r=this.bb.__offset(this.bb_pos,20);return r?this.bb.__string(this.bb.__vector(this.bb_pos+r)+4*e,t):null}inputsLength(){let e=this.bb.__offset(this.bb_pos,20);return e?this.bb.__vector_len(this.bb_pos+e):0}outputs(e,t){let r=this.bb.__offset(this.bb_pos,22);return r?this.bb.__string(this.bb.__vector(this.bb_pos+r)+4*e,t):null}outputsLength(){let e=this.bb.__offset(this.bb_pos,22);return e?this.bb.__vector_len(this.bb_pos+e):0}attributes(t,r){let n=this.bb.__offset(this.bb_pos,24);return n?(r||new e.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}attributesLength(){let e=this.bb.__offset(this.bb_pos,24);return e?this.bb.__vector_len(this.bb_pos+e):0}inputArgCounts(e){let t=this.bb.__offset(this.bb_pos,26);return t?this.bb.readInt32(this.bb.__vector(this.bb_pos+t)+4*e):0}inputArgCountsLength(){let e=this.bb.__offset(this.bb_pos,26);return e?this.bb.__vector_len(this.bb_pos+e):0}inputArgCountsArray(){let e=this.bb.__offset(this.bb_pos,26);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}implicitInputs(e,t){let r=this.bb.__offset(this.bb_pos,28);return r?this.bb.__string(this.bb.__vector(this.bb_pos+r)+4*e,t):null}implicitInputsLength(){let e=this.bb.__offset(this.bb_pos,28);return e?this.bb.__vector_len(this.bb_pos+e):0}static startNode(e){e.startObject(13)}static addName(e,t){e.addFieldOffset(0,t,0)}static addDocString(e,t){e.addFieldOffset(1,t,0)}static addDomain(e,t){e.addFieldOffset(2,t,0)}static addSinceVersion(e,t){e.addFieldInt32(3,t,0)}static addIndex(e,t){e.addFieldInt32(4,t,0)}static addOpType(e,t){e.addFieldOffset(5,t,0)}static addType(t,r){t.addFieldInt32(6,r,e.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType(e,t){e.addFieldOffset(7,t,0)}static addInputs(e,t){e.addFieldOffset(8,t,0)}static createInputsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startInputsVector(e,t){e.startVector(4,t,4)}static addOutputs(e,t){e.addFieldOffset(9,t,0)}static createOutputsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startOutputsVector(e,t){e.startVector(4,t,4)}static addAttributes(e,t){e.addFieldOffset(10,t,0)}static createAttributesVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startAttributesVector(e,t){e.startVector(4,t,4)}static addInputArgCounts(e,t){e.addFieldOffset(11,t,0)}static createInputArgCountsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addInt32(t[r]);return e.endVector()}static startInputArgCountsVector(e,t){e.startVector(4,t,4)}static addImplicitInputs(e,t){e.addFieldOffset(12,t,0)}static createImplicitInputsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startImplicitInputsVector(e,t){e.startVector(4,t,4)}static endNode(e){return e.endObject()}static createNode(e,t,n,i,o,s,a,l,u,c,d,h,p,f){return r.startNode(e),r.addName(e,t),r.addDocString(e,n),r.addDomain(e,i),r.addSinceVersion(e,o),r.addIndex(e,s),r.addOpType(e,a),r.addType(e,l),r.addExecutionProviderType(e,u),r.addInputs(e,c),r.addOutputs(e,d),r.addAttributes(e,h),r.addInputArgCounts(e,p),r.addImplicitInputs(e,f),r.endNode(e)}}t.Node=r}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsValueInfo(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsValueInfo(e,t){return e.setPosition(e.position()+o.flatbuffers.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}name(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}docString(e){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}type(t){let r=this.bb.__offset(this.bb_pos,8);return r?(t||new e.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}static startValueInfo(e){e.startObject(3)}static addName(e,t){e.addFieldOffset(0,t,0)}static addDocString(e,t){e.addFieldOffset(1,t,0)}static addType(e,t){e.addFieldOffset(2,t,0)}static endValueInfo(e){return e.endObject()}static createValueInfo(e,t,n,i){return r.startValueInfo(e),r.addName(e,t),r.addDocString(e,n),r.addType(e,i),r.endValueInfo(e)}}t.ValueInfo=r}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTypeInfo(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTypeInfo(e,t){return e.setPosition(e.position()+o.flatbuffers.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}denotation(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}valueType(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):e.experimental.fbs.TypeInfoValue.NONE}value(e){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__union(e,this.bb_pos+t):null}static startTypeInfo(e){e.startObject(3)}static addDenotation(e,t){e.addFieldOffset(0,t,0)}static addValueType(t,r){t.addFieldInt8(1,r,e.experimental.fbs.TypeInfoValue.NONE)}static addValue(e,t){e.addFieldOffset(2,t,0)}static endTypeInfo(e){return e.endObject()}static createTypeInfo(e,t,n,i){return r.startTypeInfo(e),r.addDenotation(e,t),r.addValueType(e,n),r.addValue(e,i),r.endTypeInfo(e)}}t.TypeInfo=r}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(e){!function(e){class t{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsOperatorSetId(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsOperatorSetId(e,r){return e.setPosition(e.position()+o.flatbuffers.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}domain(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}version(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}static startOperatorSetId(e){e.startObject(2)}static addDomain(e,t){e.addFieldOffset(0,t,0)}static addVersion(e,t){e.addFieldInt64(1,t,e.createLong(0,0))}static endOperatorSetId(e){return e.endObject()}static createOperatorSetId(e,r,n){return t.startOperatorSetId(e),t.addDomain(e,r),t.addVersion(e,n),t.endOperatorSetId(e)}}e.OperatorSetId=t}(e.fbs||(e.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTensor(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTensor(e,t){return e.setPosition(e.position()+o.flatbuffers.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}name(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}docString(e){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}dims(e){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt64(this.bb.__vector(this.bb_pos+t)+8*e):this.bb.createLong(0,0)}dimsLength(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}dataType(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt32(this.bb_pos+t):e.experimental.fbs.TensorDataType.UNDEFINED}rawData(e){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readUint8(this.bb.__vector(this.bb_pos+t)+e):0}rawDataLength(){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}rawDataArray(){let e=this.bb.__offset(this.bb_pos,12);return e?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}stringData(e,t){let r=this.bb.__offset(this.bb_pos,14);return r?this.bb.__string(this.bb.__vector(this.bb_pos+r)+4*e,t):null}stringDataLength(){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}static startTensor(e){e.startObject(6)}static addName(e,t){e.addFieldOffset(0,t,0)}static addDocString(e,t){e.addFieldOffset(1,t,0)}static addDims(e,t){e.addFieldOffset(2,t,0)}static createDimsVector(e,t){e.startVector(8,t.length,8);for(let r=t.length-1;r>=0;r--)e.addInt64(t[r]);return e.endVector()}static startDimsVector(e,t){e.startVector(8,t,8)}static addDataType(t,r){t.addFieldInt32(3,r,e.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData(e,t){e.addFieldOffset(4,t,0)}static createRawDataVector(e,t){e.startVector(1,t.length,1);for(let r=t.length-1;r>=0;r--)e.addInt8(t[r]);return e.endVector()}static startRawDataVector(e,t){e.startVector(1,t,1)}static addStringData(e,t){e.addFieldOffset(5,t,0)}static createStringDataVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startStringDataVector(e,t){e.startVector(4,t,4)}static endTensor(e){return e.endObject()}static createTensor(e,t,n,i,o,s,a){return r.startTensor(e),r.addName(e,t),r.addDocString(e,n),r.addDims(e,i),r.addDataType(e,o),r.addRawData(e,s),r.addStringData(e,a),r.endTensor(e)}}t.Tensor=r}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsSparseTensor(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSparseTensor(e,t){return e.setPosition(e.position()+o.flatbuffers.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}values(t){let r=this.bb.__offset(this.bb_pos,4);return r?(t||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}indices(t){let r=this.bb.__offset(this.bb_pos,6);return r?(t||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}dims(e){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt64(this.bb.__vector(this.bb_pos+t)+8*e):this.bb.createLong(0,0)}dimsLength(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSparseTensor(e){e.startObject(3)}static addValues(e,t){e.addFieldOffset(0,t,0)}static addIndices(e,t){e.addFieldOffset(1,t,0)}static addDims(e,t){e.addFieldOffset(2,t,0)}static createDimsVector(e,t){e.startVector(8,t.length,8);for(let r=t.length-1;r>=0;r--)e.addInt64(t[r]);return e.endVector()}static startDimsVector(e,t){e.startVector(8,t,8)}static endSparseTensor(e){return e.endObject()}static createSparseTensor(e,t,n,i){return r.startSparseTensor(e),r.addValues(e,t),r.addIndices(e,n),r.addDims(e,i),r.endSparseTensor(e)}}t.SparseTensor=r}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsAttribute(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsAttribute(e,t){return e.setPosition(e.position()+o.flatbuffers.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}name(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}docString(e){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}type(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):e.experimental.fbs.AttributeType.UNDEFINED}f(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readFloat32(this.bb_pos+e):0}i(){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}s(e){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__string(this.bb_pos+t,e):null}t(t){let r=this.bb.__offset(this.bb_pos,16);return r?(t||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}g(t){let r=this.bb.__offset(this.bb_pos,18);return r?(t||new e.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}floats(e){let t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readFloat32(this.bb.__vector(this.bb_pos+t)+4*e):0}floatsLength(){let e=this.bb.__offset(this.bb_pos,20);return e?this.bb.__vector_len(this.bb_pos+e):0}floatsArray(){let e=this.bb.__offset(this.bb_pos,20);return e?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}ints(e){let t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readInt64(this.bb.__vector(this.bb_pos+t)+8*e):this.bb.createLong(0,0)}intsLength(){let e=this.bb.__offset(this.bb_pos,22);return e?this.bb.__vector_len(this.bb_pos+e):0}strings(e,t){let r=this.bb.__offset(this.bb_pos,24);return r?this.bb.__string(this.bb.__vector(this.bb_pos+r)+4*e,t):null}stringsLength(){let e=this.bb.__offset(this.bb_pos,24);return e?this.bb.__vector_len(this.bb_pos+e):0}tensors(t,r){let n=this.bb.__offset(this.bb_pos,26);return n?(r||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}tensorsLength(){let e=this.bb.__offset(this.bb_pos,26);return e?this.bb.__vector_len(this.bb_pos+e):0}graphs(t,r){let n=this.bb.__offset(this.bb_pos,28);return n?(r||new e.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}graphsLength(){let e=this.bb.__offset(this.bb_pos,28);return e?this.bb.__vector_len(this.bb_pos+e):0}static startAttribute(e){e.startObject(13)}static addName(e,t){e.addFieldOffset(0,t,0)}static addDocString(e,t){e.addFieldOffset(1,t,0)}static addType(t,r){t.addFieldInt32(2,r,e.experimental.fbs.AttributeType.UNDEFINED)}static addF(e,t){e.addFieldFloat32(3,t,0)}static addI(e,t){e.addFieldInt64(4,t,e.createLong(0,0))}static addS(e,t){e.addFieldOffset(5,t,0)}static addT(e,t){e.addFieldOffset(6,t,0)}static addG(e,t){e.addFieldOffset(7,t,0)}static addFloats(e,t){e.addFieldOffset(8,t,0)}static createFloatsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addFloat32(t[r]);return e.endVector()}static startFloatsVector(e,t){e.startVector(4,t,4)}static addInts(e,t){e.addFieldOffset(9,t,0)}static createIntsVector(e,t){e.startVector(8,t.length,8);for(let r=t.length-1;r>=0;r--)e.addInt64(t[r]);return e.endVector()}static startIntsVector(e,t){e.startVector(8,t,8)}static addStrings(e,t){e.addFieldOffset(10,t,0)}static createStringsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startStringsVector(e,t){e.startVector(4,t,4)}static addTensors(e,t){e.addFieldOffset(11,t,0)}static createTensorsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startTensorsVector(e,t){e.startVector(4,t,4)}static addGraphs(e,t){e.addFieldOffset(12,t,0)}static createGraphsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startGraphsVector(e,t){e.startVector(4,t,4)}static endAttribute(e){return e.endObject()}static createAttribute(e,t,n,i,o,s,a,l,u,c,d,h,p,f){return r.startAttribute(e),r.addName(e,t),r.addDocString(e,n),r.addType(e,i),r.addF(e,o),r.addI(e,s),r.addS(e,a),r.addT(e,l),r.addG(e,u),r.addFloats(e,c),r.addInts(e,d),r.addStrings(e,h),r.addTensors(e,p),r.addGraphs(e,f),r.endAttribute(e)}}t.Attribute=r}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsGraph(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsGraph(e,t){return e.setPosition(e.position()+o.flatbuffers.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}initializers(t,r){let n=this.bb.__offset(this.bb_pos,4);return n?(r||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}initializersLength(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}nodeArgs(t,r){let n=this.bb.__offset(this.bb_pos,6);return n?(r||new e.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}nodeArgsLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}nodes(t,r){let n=this.bb.__offset(this.bb_pos,8);return n?(r||new e.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}nodesLength(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}maxNodeIndex(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readUint32(this.bb_pos+e):0}nodeEdges(t,r){let n=this.bb.__offset(this.bb_pos,12);return n?(r||new e.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}nodeEdgesLength(){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}inputs(e,t){let r=this.bb.__offset(this.bb_pos,14);return r?this.bb.__string(this.bb.__vector(this.bb_pos+r)+4*e,t):null}inputsLength(){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}outputs(e,t){let r=this.bb.__offset(this.bb_pos,16);return r?this.bb.__string(this.bb.__vector(this.bb_pos+r)+4*e,t):null}outputsLength(){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}sparseInitializers(t,r){let n=this.bb.__offset(this.bb_pos,18);return n?(r||new e.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}sparseInitializersLength(){let e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__vector_len(this.bb_pos+e):0}static startGraph(e){e.startObject(8)}static addInitializers(e,t){e.addFieldOffset(0,t,0)}static createInitializersVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startInitializersVector(e,t){e.startVector(4,t,4)}static addNodeArgs(e,t){e.addFieldOffset(1,t,0)}static createNodeArgsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startNodeArgsVector(e,t){e.startVector(4,t,4)}static addNodes(e,t){e.addFieldOffset(2,t,0)}static createNodesVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startNodesVector(e,t){e.startVector(4,t,4)}static addMaxNodeIndex(e,t){e.addFieldInt32(3,t,0)}static addNodeEdges(e,t){e.addFieldOffset(4,t,0)}static createNodeEdgesVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startNodeEdgesVector(e,t){e.startVector(4,t,4)}static addInputs(e,t){e.addFieldOffset(5,t,0)}static createInputsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startInputsVector(e,t){e.startVector(4,t,4)}static addOutputs(e,t){e.addFieldOffset(6,t,0)}static createOutputsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startOutputsVector(e,t){e.startVector(4,t,4)}static addSparseInitializers(e,t){e.addFieldOffset(7,t,0)}static createSparseInitializersVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startSparseInitializersVector(e,t){e.startVector(4,t,4)}static endGraph(e){return e.endObject()}static createGraph(e,t,n,i,o,s,a,l,u){return r.startGraph(e),r.addInitializers(e,t),r.addNodeArgs(e,n),r.addNodes(e,i),r.addMaxNodeIndex(e,o),r.addNodeEdges(e,s),r.addInputs(e,a),r.addOutputs(e,l),r.addSparseInitializers(e,u),r.endGraph(e)}}t.Graph=r}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsModel(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsModel(e,t){return e.setPosition(e.position()+o.flatbuffers.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}irVersion(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}opsetImport(t,r){let n=this.bb.__offset(this.bb_pos,6);return n?(r||new e.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}opsetImportLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}producerName(e){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}producerVersion(e){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}domain(e){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__string(this.bb_pos+t,e):null}modelVersion(){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}docString(e){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__string(this.bb_pos+t,e):null}graph(t){let r=this.bb.__offset(this.bb_pos,18);return r?(t||new e.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}graphDocString(e){let t=this.bb.__offset(this.bb_pos,20);return t?this.bb.__string(this.bb_pos+t,e):null}static startModel(e){e.startObject(9)}static addIrVersion(e,t){e.addFieldInt64(0,t,e.createLong(0,0))}static addOpsetImport(e,t){e.addFieldOffset(1,t,0)}static createOpsetImportVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startOpsetImportVector(e,t){e.startVector(4,t,4)}static addProducerName(e,t){e.addFieldOffset(2,t,0)}static addProducerVersion(e,t){e.addFieldOffset(3,t,0)}static addDomain(e,t){e.addFieldOffset(4,t,0)}static addModelVersion(e,t){e.addFieldInt64(5,t,e.createLong(0,0))}static addDocString(e,t){e.addFieldOffset(6,t,0)}static addGraph(e,t){e.addFieldOffset(7,t,0)}static addGraphDocString(e,t){e.addFieldOffset(8,t,0)}static endModel(e){return e.endObject()}static createModel(e,t,n,i,o,s,a,l,u,c){return r.startModel(e),r.addIrVersion(e,t),r.addOpsetImport(e,n),r.addProducerName(e,i),r.addProducerVersion(e,o),r.addDomain(e,s),r.addModelVersion(e,a),r.addDocString(e,l),r.addGraph(e,u),r.addGraphDocString(e,c),r.endModel(e)}}t.Model=r}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(e){!function(e){class t{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsKernelCreateInfos(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKernelCreateInfos(e,r){return e.setPosition(e.position()+o.flatbuffers.SIZE_PREFIX_LENGTH),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}nodeIndices(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint32(this.bb.__vector(this.bb_pos+t)+4*e):0}nodeIndicesLength(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}nodeIndicesArray(){let e=this.bb.__offset(this.bb_pos,4);return e?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}kernelDefHashes(e){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint64(this.bb.__vector(this.bb_pos+t)+8*e):this.bb.createLong(0,0)}kernelDefHashesLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}static startKernelCreateInfos(e){e.startObject(2)}static addNodeIndices(e,t){e.addFieldOffset(0,t,0)}static createNodeIndicesVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addInt32(t[r]);return e.endVector()}static startNodeIndicesVector(e,t){e.startVector(4,t,4)}static addKernelDefHashes(e,t){e.addFieldOffset(1,t,0)}static createKernelDefHashesVector(e,t){e.startVector(8,t.length,8);for(let r=t.length-1;r>=0;r--)e.addInt64(t[r]);return e.endVector()}static startKernelDefHashesVector(e,t){e.startVector(8,t,8)}static endKernelCreateInfos(e){return e.endObject()}static createKernelCreateInfos(e,r,n){return t.startKernelCreateInfos(e),t.addNodeIndices(e,r),t.addKernelDefHashes(e,n),t.endKernelCreateInfos(e)}}e.KernelCreateInfos=t}(e.fbs||(e.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsSubGraphSessionState(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSubGraphSessionState(e,t){return e.setPosition(e.position()+o.flatbuffers.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}graphId(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}sessionState(t){let r=this.bb.__offset(this.bb_pos,6);return r?(t||new e.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}static startSubGraphSessionState(e){e.startObject(2)}static addGraphId(e,t){e.addFieldOffset(0,t,0)}static addSessionState(e,t){e.addFieldOffset(1,t,0)}static endSubGraphSessionState(e){let t=e.endObject();return e.requiredField(t,4),t}static createSubGraphSessionState(e,t,n){return r.startSubGraphSessionState(e),r.addGraphId(e,t),r.addSessionState(e,n),r.endSubGraphSessionState(e)}}t.SubGraphSessionState=r}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsSessionState(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSessionState(e,t){return e.setPosition(e.position()+o.flatbuffers.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}kernels(t){let r=this.bb.__offset(this.bb_pos,4);return r?(t||new e.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}subGraphSessionStates(t,r){let n=this.bb.__offset(this.bb_pos,6);return n?(r||new e.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}subGraphSessionStatesLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSessionState(e){e.startObject(2)}static addKernels(e,t){e.addFieldOffset(0,t,0)}static addSubGraphSessionStates(e,t){e.addFieldOffset(1,t,0)}static createSubGraphSessionStatesVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startSubGraphSessionStatesVector(e,t){e.startVector(4,t,4)}static endSessionState(e){return e.endObject()}static createSessionState(e,t,n){return r.startSessionState(e),r.addKernels(e,t),r.addSubGraphSessionStates(e,n),r.endSessionState(e)}}t.SessionState=r}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={})),function(e){!function(t){!function(t){class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsInferenceSession(e,t){return(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInferenceSession(e,t){return e.setPosition(e.position()+o.flatbuffers.SIZE_PREFIX_LENGTH),(t||new r).__init(e.readInt32(e.position())+e.position(),e)}static bufferHasIdentifier(e){return e.__has_identifier("ORTM")}ortVersion(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}model(t){let r=this.bb.__offset(this.bb_pos,6);return r?(t||new e.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}sessionState(t){let r=this.bb.__offset(this.bb_pos,8);return r?(t||new e.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}static startInferenceSession(e){e.startObject(3)}static addOrtVersion(e,t){e.addFieldOffset(0,t,0)}static addModel(e,t){e.addFieldOffset(1,t,0)}static addSessionState(e,t){e.addFieldOffset(2,t,0)}static endInferenceSession(e){return e.endObject()}static finishInferenceSessionBuffer(e,t){e.finish(t,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(e,t){e.finish(t,"ORTM",!0)}static createInferenceSession(e,t,n,i){return r.startInferenceSession(e),r.addOrtVersion(e,t),r.addModel(e,n),r.addSessionState(e,i),r.endInferenceSession(e)}}t.InferenceSession=r}(t.fbs||(t.fbs={}))}(e.experimental||(e.experimental={}))}(t.onnxruntime||(t.onnxruntime={}))},7448:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OnnxjsSessionHandler=void 0;let n=r(1670),i=r(9162);t.OnnxjsSessionHandler=class{constructor(e){this.session=e,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(e,t,r){let o=new Map;for(let t in e)if(Object.hasOwnProperty.call(e,t)){let r=e[t];o.set(t,new i.Tensor(r.dims,r.type,void 0,void 0,r.data))}let s=await this.session.run(o),a={};return s.forEach((e,t)=>{a[t]=new n.Tensor(e.type,e.data,e.dims)}),a}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6919:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Session=void 0;let n=r(7067),i=r(1296),o=r(7091),s=r(1036),a=r(6231),l=r(2644);t.Session=class{constructor(e={}){this._initialized=!1,this.backendHint=e.backendHint,this.profiler=a.Profiler.create(e.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(e,t,r){await this.profiler.event("session","Session.loadModel",async()=>{let s=await (0,o.resolveBackend)(this.backendHint);if(this.sessionHandler=s.createSessionHandler(this.context),this._model=new l.Model,"string"==typeof e){let t=e.endsWith(".ort");if("u"<typeof fetch){let r=await (0,i.promisify)(n.readFile)(e);this.initialize(r,t)}else{let r=await fetch(e),n=await r.arrayBuffer();this.initialize(new Uint8Array(n),t)}}else if(ArrayBuffer.isView(e))this.initialize(e);else{let n=new Uint8Array(e,t||0,r||e.byteLength);this.initialize(n)}})}initialize(e,t){if(this._initialized)throw Error("already initialized");this.profiler.event("session","Session.initialize",()=>{let r=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(e,r,t),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new s.ExecutionPlan(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(e){if(!this._initialized)throw Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{let t=this.normalizeAndValidateInputs(e),r=await this._executionPlan.execute(this.sessionHandler,t);return this.createOutput(r)})}normalizeAndValidateInputs(e){let t=this._model.graph.getInputNames();if(Array.isArray(e)){if(e.length!==t.length)throw Error(`incorrect input array length: expected ${t.length} but got ${e.length}`)}else{if(e.size!==t.length)throw Error(`incorrect input map size: expected ${t.length} but got ${e.size}`);let r=Array(e.size),n=0;for(let i=0;i<t.length;++i){let o=e.get(t[i]);if(!o)throw Error(`missing input tensor for: '${name}'`);r[n++]=o}e=r}if(this.context.graphInputTypes&&0!==this.context.graphInputTypes.length&&this.context.graphInputDims&&0!==this.context.graphInputDims.length)this.validateInputTensorDims(this.context.graphInputDims,e,!1);else{let t=this._model.graph.getInputIndices(),r=this._model.graph.getValues(),n=Array(t.length);for(let i=0;i<t.length;++i){let o=r[t[i]];n[i]=o.type.shape.dims,this.context.graphInputTypes.push(o.type.tensorType),this.context.graphInputDims.push(e[i].dims)}this.validateInputTensorDims(n,e,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,e),e}validateInputTensorTypes(e,t){for(let r=0;r<t.length;r++){let n=e[r],i=t[r].type;if(n!==i)throw Error(`input tensor[${r}] check failed: expected type '${n}' but got ${i}`)}}validateInputTensorDims(e,t,r){for(let n=0;n<t.length;n++){let i=e[n],o=t[n].dims;if(!this.compareTensorDims(i,o,r))throw Error(`input tensor[${n}] check failed: expected shape '[${i.join(",")}]' but got [${o.join(",")}]`)}}compareTensorDims(e,t,r){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n]&&(!r||0!==e[n]))return!1;return!0}createOutput(e){let t=this._model.graph.getOutputNames();if(e.length!==t.length)throw Error("expected number of outputs do not match number of generated outputs");let r=new Map;for(let n=0;n<t.length;++n)r.set(t[n],e[n]);return r}initializeOps(e){let t=e.getNodes();this._ops=Array(t.length);for(let r=0;r<t.length;r++)this._ops[r]=this.sessionHandler.resolve(t[r],this._model.opsets,e)}}},9162:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Tensor=void 0;let i=r(3442),o=n(r(3720)),s=r(1446),a=r(9395),l=r(2517);var u=a.onnxruntime.experimental.fbs;class c{get data(){if(void 0===this.cache){let e=this.dataProvider(this.dataId);if(e.length!==this.size)throw Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=e}return this.cache}get stringData(){if("string"!==this.type)throw TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw TypeError("data type is not float (float32, float64)")}}get numberData(){if("string"!==this.type)return this.data;throw TypeError("type cannot be non-number (string)")}get(e){return this.data[l.ShapeUtil.indicesToOffset(e,this.strides)]}set(e,t){this.data[l.ShapeUtil.indicesToOffset(e,this.strides)]=t}async getData(){return void 0===this.cache&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=l.ShapeUtil.computeStrides(this.dims)),this._strides}constructor(e,t,r,n,o,s=i.Guid.create()){this.dims=e,this.type=t,this.dataProvider=r,this.asyncDataProvider=n,this.cache=o,this.dataId=s,this.size=l.ShapeUtil.validateDimsAndCalcSize(e);const a=this.size,u=void 0===r&&void 0===n&&void 0===o;if(void 0!==o&&o.length!==a)throw RangeError("Input dims doesn't match data length.");if("string"===t){if(!(void 0===o||Array.isArray(o)&&o.every(e=>"string"==typeof e)))throw TypeError("cache should be a string array");u&&(this.cache=Array(a))}else{if(void 0!==o){const e=h(t);if(!(o instanceof e))throw TypeError(`cache should be type ${e.name}`)}if(u){const e=new ArrayBuffer(a*function(e){switch(e){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw Error(`cannot calculate sizeof() on type ${e}`)}}(t));this.cache=function(e,t){return new(h(t))(e)}(e,t)}}}static fromProto(e){if(!e)throw Error("cannot construct Value from an empty tensor");let t=l.ProtoUtil.tensorDataTypeFromProto(e.dataType),r=new c(l.ProtoUtil.tensorDimsFromProto(e.dims),t);if("string"===t)e.stringData.forEach((e,t)=>{r.data[t]=(0,l.decodeUtf8String)(e)});else if(e.rawData&&"number"==typeof e.rawData.byteLength&&e.rawData.byteLength>0){let t=r.data,n=new DataView(e.rawData.buffer,e.rawData.byteOffset,e.rawData.byteLength),i=d(e.dataType),o=e.rawData.byteLength/i;if(e.rawData.byteLength%i!=0)throw Error("invalid buffer length");if(t.length!==o)throw Error("buffer length mismatch");for(let r=0;r<o;r++){let o=f(n,e.dataType,r*i);t[r]=o}}else{let t;switch(e.dataType){case s.onnx.TensorProto.DataType.FLOAT:t=e.floatData;break;case s.onnx.TensorProto.DataType.INT32:case s.onnx.TensorProto.DataType.INT16:case s.onnx.TensorProto.DataType.UINT16:case s.onnx.TensorProto.DataType.INT8:case s.onnx.TensorProto.DataType.UINT8:case s.onnx.TensorProto.DataType.BOOL:t=e.int32Data;break;case s.onnx.TensorProto.DataType.INT64:t=e.int64Data;break;case s.onnx.TensorProto.DataType.DOUBLE:t=e.doubleData;break;case s.onnx.TensorProto.DataType.UINT32:case s.onnx.TensorProto.DataType.UINT64:t=e.uint64Data;break;default:throw Error("unspecific error")}if(null==t)throw Error("failed to populate data from a tensorproto value");let n=r.data;if(n.length!==t.length)throw Error("array length mismatch");for(let r=0;r<t.length;r++){let i=t[r];o.default.isLong(i)?n[r]=p(i,e.dataType):n[r]=i}}return r}static fromData(e,t,r){return new c(t,r,void 0,void 0,e)}static fromOrtTensor(e){if(!e)throw Error("cannot construct Value from an empty tensor");let t=l.ProtoUtil.tensorDimsFromORTFormat(e),r=l.ProtoUtil.tensorDataTypeFromProto(e.dataType()),n=new c(t,r);if("string"===r)for(let t=0;t<e.stringDataLength();t++)n.data[t]=e.stringData(t);else if(e.rawDataArray()&&"number"==typeof e.rawDataLength()&&e.rawDataLength()>0){let t=n.data,r=new DataView(e.rawDataArray().buffer,e.rawDataArray().byteOffset,e.rawDataLength()),i=d(e.dataType()),o=e.rawDataLength()/i;if(e.rawDataLength()%i!=0)throw Error("invalid buffer length");if(t.length!==o)throw Error("buffer length mismatch");for(let n=0;n<o;n++){let o=f(r,e.dataType(),n*i);t[n]=o}}return n}}function d(e){switch(e){case s.onnx.TensorProto.DataType.UINT8:case s.onnx.TensorProto.DataType.INT8:case s.onnx.TensorProto.DataType.BOOL:return 1;case s.onnx.TensorProto.DataType.UINT16:case s.onnx.TensorProto.DataType.INT16:return 2;case s.onnx.TensorProto.DataType.FLOAT:case s.onnx.TensorProto.DataType.INT32:case s.onnx.TensorProto.DataType.UINT32:return 4;case s.onnx.TensorProto.DataType.INT64:case s.onnx.TensorProto.DataType.DOUBLE:case s.onnx.TensorProto.DataType.UINT64:return 8;default:throw Error(`cannot calculate sizeof() on type ${s.onnx.TensorProto.DataType[e]}`)}}function h(e){switch(e){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw Error("unspecified error")}}function p(e,t){if(t===s.onnx.TensorProto.DataType.INT64||t===u.TensorDataType.INT64){if(e.greaterThanOrEqual(0x80000000)||e.lessThan(-0x80000000))throw TypeError("int64 is not supported")}else{if(t!==s.onnx.TensorProto.DataType.UINT32&&t!==u.TensorDataType.UINT32&&t!==s.onnx.TensorProto.DataType.UINT64&&t!==u.TensorDataType.UINT64)throw TypeError(`not a LONG type: ${s.onnx.TensorProto.DataType[t]}`);if(e.greaterThanOrEqual(0x100000000)||e.lessThan(0))throw TypeError("uint64 is not supported")}return e.toNumber()}function f(e,t,r){switch(t){case s.onnx.TensorProto.DataType.BOOL:case s.onnx.TensorProto.DataType.UINT8:return e.getUint8(r);case s.onnx.TensorProto.DataType.INT8:return e.getInt8(r);case s.onnx.TensorProto.DataType.UINT16:return e.getUint16(r,!0);case s.onnx.TensorProto.DataType.INT16:return e.getInt16(r,!0);case s.onnx.TensorProto.DataType.FLOAT:return e.getFloat32(r,!0);case s.onnx.TensorProto.DataType.INT32:return e.getInt32(r,!0);case s.onnx.TensorProto.DataType.UINT32:return e.getUint32(r,!0);case s.onnx.TensorProto.DataType.INT64:return p(o.default.fromBits(e.getUint32(r,!0),e.getUint32(r+4,!0),!1),t);case s.onnx.TensorProto.DataType.DOUBLE:return e.getFloat64(r,!0);case s.onnx.TensorProto.DataType.UINT64:return p(o.default.fromBits(e.getUint32(r,!0),e.getUint32(r+4,!0),!0),t);default:throw Error(`cannot read from DataView for type ${s.onnx.TensorProto.DataType[t]}`)}}t.Tensor=c},2517:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeUtf8String=t.MAX_CLIP=t.MIN_CLIP=t.PoolConvUtil=t.ReduceUtil=t.SplitUtil=t.MathUtil=t.ShapeUtil=t.LongUtil=t.ProtoUtil=t.GemmUtil=t.arrayCopyHelper=t.BroadcastUtil=t.MatMulUtil=t.ArrayUtil=t.assert=t.checkInputsShape=void 0;let i=r(5686),o=n(r(3720)),s=r(1446),a=r(9162);t.checkInputsShape=function(e,...t){if(!e||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].dims||e[r].dims.length!==t[r])return!1;return!0},t.assert=function(e,t){if(!e)throw Error("string"==typeof t?t:t())},t.ArrayUtil=class{static arraysEqual(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}};class l{static preprocessInputShapes(e,t){return[1===e.length?[1,e[0]]:e,1===t.length?[t[0],1]:t]}static postprocessOutputShape(e,t,r){1===t&&e.splice(e.length-2,1),1===r&&e.pop()}static calcMatMulShape(e,t){return e[1]!==t[0]?void 0:[e[0],t[1]]}}t.MatMulUtil=l;class u{static calcShape(e,t,r=!1){let n=e.length,i=t.length;if(0===n)return t;if(0===i)return e;let o=Math.max(e.length,t.length),s=Array(o);if(r){if(n<2||i<2)return;let r=l.calcMatMulShape([e[n-2],e[n-1]],[t[i-2],t[i-1]]);if(void 0===r)return;[s[o-2],s[o-1]]=r}for(let a=r?3:1;a<=o;a++){let r=n-a<0?1:e[n-a],l=i-a<0?1:t[i-a];if(r!==l&&r>1&&l>1)return;s[o-a]=Math.max(r,l)}return s}static index(e,t){let r=Array(t.length);return u.fillIndex(e,t,r),r}static fillIndex(e,t,r){let n=e.length-t.length;for(let i=0;i<t.length;i++)r[i]=e[n+i]%t[i]}static calc(e,t,r,n,i){let o=u.calcShape(e.dims,t.dims);if(o){if(n&&!h.areEqual(o,e.dims))return;let s=h.size(o),l=n?e:new a.Tensor(o,i||e.type);if(0===o.length)l.set([],r(e.get([]),t.get([])));else{let n=Array(o.length),i=Array(e.dims.length),a=Array(t.dims.length),c,d=0,h=0,p=!1,f=!1;0===e.dims.length&&(d=e.get([]),p=!0),0===t.dims.length&&(h=t.get([]),f=!0);for(let g=0;g<s;g++){c=g;for(let e=o.length-1;e>=0;e--)n[e]=c%o[e],c=Math.floor(c/o[e]);p||(u.fillIndex(n,e.dims,i),d=e.get(i)),f||(u.fillIndex(n,t.dims,a),h=t.get(a)),l.set(n,r(d,h))}}return l}}static isValidBroadcast(e,t){let r=e.length,n=t.length;if(r>n)return!1;for(let i=1;i<=r;i++)if(1!==e[r-i]&&e[r-i]!==t[n-i])return!1;return!0}static getBroadcastDims(e,t){let r=e.length,n=[];for(let i=0;i<r;i++){let o=r-1-i,s=e[o]||1;(t[t.length-1-i]||1)>1&&1===s&&n.unshift(o)}return n}}t.BroadcastUtil=u,t.arrayCopyHelper=function(e,t,r,n,i){if(n<0||n>=t.length)throw Error("sourceIndex out of bounds");if(r<0||r>=e.length)throw Error("targetIndex out of bounds");if(n+i>t.length)throw Error("source indices to be copied are outside bounds");if(r+i>e.length)throw Error("target array is too small to hold result");for(let o=0;o<i;o++)e[r+o]=t[n+o]},t.GemmUtil=class{static getShapeOfGemmResult(e,t,r,n,i){let o,s,a;if(2!==e.length||2!==r.length)throw Error("shape need to be of size 2");t?(o=e[1],s=e[0]):(o=e[0],s=e[1]);let l=-1;if(n?(a=r[0],l=1):(a=r[1],l=0),r[l]!==s)throw Error("dimension mismatch");if(o<=0||a<=0||s<=0)throw Error("invalid shape specified");if(i&&!u.isValidBroadcast(i,[o,a]))throw Error("gemm: invalid bias shape for broadcast");return[o,a,s]}};class c{static tensorDataTypeFromProto(e){switch(e){case s.onnx.TensorProto.DataType.INT8:return"int8";case s.onnx.TensorProto.DataType.UINT8:return"uint8";case s.onnx.TensorProto.DataType.BOOL:return"bool";case s.onnx.TensorProto.DataType.INT16:return"int16";case s.onnx.TensorProto.DataType.UINT16:return"uint16";case s.onnx.TensorProto.DataType.INT32:return"int32";case s.onnx.TensorProto.DataType.UINT32:return"uint32";case s.onnx.TensorProto.DataType.FLOAT:return"float32";case s.onnx.TensorProto.DataType.DOUBLE:return"float64";case s.onnx.TensorProto.DataType.STRING:return"string";case s.onnx.TensorProto.DataType.INT64:return"int32";case s.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw Error(`unsupported data type: ${s.onnx.TensorProto.DataType[e]}`)}}static tensorDataTypeStringToEnum(e){switch(e){case"int8":return s.onnx.TensorProto.DataType.INT8;case"uint8":return s.onnx.TensorProto.DataType.UINT8;case"bool":return s.onnx.TensorProto.DataType.BOOL;case"int16":return s.onnx.TensorProto.DataType.INT16;case"uint16":return s.onnx.TensorProto.DataType.UINT16;case"int32":return s.onnx.TensorProto.DataType.INT32;case"uint32":return s.onnx.TensorProto.DataType.UINT32;case"float32":return s.onnx.TensorProto.DataType.FLOAT;case"float64":return s.onnx.TensorProto.DataType.DOUBLE;case"string":return s.onnx.TensorProto.DataType.STRING;case"int64":return s.onnx.TensorProto.DataType.INT64;case"uint64":return s.onnx.TensorProto.DataType.UINT64;default:throw Error(`unsupported data type: ${e}`)}}static tensorDimsFromProto(e){return e.map(e=>o.default.isLong(e)?e.toNumber():e)}static tensorValueTypeFromProto(e){return{tensorType:c.tensorDataTypeFromProto(e.elemType),shape:{dims:c.tensorDimsFromProto(e.shape.dim.map(e=>e.dimValue))}}}static tensorDimsFromORTFormat(e){let t=[];for(let r=0;r<e.dimsLength();r++)t.push(d.longToNumber(e.dims(r)));return t}static tensorAttributesFromORTFormat(e){let t=[];for(let r=0;r<e.attributesLength();r++)t.push(e.attributes(r));return t}}t.ProtoUtil=c;class d{static longToNumber(e,t){return o.default.isLong(e)?e.toNumber():e instanceof i.flatbuffers.Long?o.default.fromValue({low:e.low,high:e.high,unsigned:null!=t&&t}).toNumber():e}static isLong(e){return o.default.isLong(e)||e instanceof i.flatbuffers.Long}}t.LongUtil=d;class h{static size(e){return h.getSizeFromDimensionRange(e,0,e.length)}static sizeFromDimension(e,t){if(t<0||t>e.length)throw Error(`invalid dimension of ${t} for sizeFromDimension as Tensor has ${e.length} dimensions.`);return h.getSizeFromDimensionRange(e,t,e.length)}static sizeToDimension(e,t){if(t<0||t>e.length)throw Error(`invalid dimension of ${t} for sizeToDimension as Tensor has ${e.length} dimensions.`);return h.getSizeFromDimensionRange(e,0,t)}static getSizeFromDimensionRange(e,t,r){let n=1;for(let i=t;i<r;i++){if(e[i]<=0)throw Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");n*=e[i]}return n}static computeStrides(e){let t=e.length;if(0===t)return[];if(1===t)return[1];let r=Array(t);r[t-1]=1,r[t-2]=e[t-1];for(let n=t-3;n>=0;--n)r[n]=r[n+1]*e[n+1];return r}static transpose(e){return e.slice().reverse()}static indicesToOffset(e,t,r){void 0===r&&(r=e.length);let n=0;for(let i=0;i<r;++i)n+=t[i]*e[i];return n}static offsetToIndices(e,t){let r=t.length;if(0===r)return[];if(1===r)return[e*t[0]];let n=Array(t.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/t[r]),e-=n[r]*t[r];return n[n.length-1]=e,n}static normalizeAxis(e,t){if(e<-t&&e>=t)throw Error("unsupported axis for this operation.");return e<0?e+t:e}static normalizeAxes(e,t){return e.map(e=>this.normalizeAxis(e,t))}static incrementIndex(e,t,r){if(0===t.length||0===e.length)throw Error("Index incrementing unsupported for scalar Tensor");if(void 0===r)r=t.length;else if(r<=0||r>t.length)throw Error("Incorrect axis to increment on");for(let n=r-1;n>=0&&(e[n]++,!(e[n]<t[n]));--n)e[n]=0}static calculateReshapedDims(e,t){if(0===t.length){if(0===e.length||1===h.size(e))return[];throw Error("cannot reshape to a scalar Tensor")}let r=t.length,n=Array(r),i=-1,o=1;for(let s=0;s<r;s++){if(t[s]<-1)throw Error("a dimension in shape hints cannot be less than -1");if(-1===t[s]){if(-1!==i)throw Error("at most one dimension in shape hints can be -1");i=s}else{if(0===t[s]){if(s>=e.length)throw Error("the dimension with value zero exceeds the dimension size of the input tensor");n[s]=e[s]}else n[s]=t[s];o*=n[s]}}let s=h.size(e);if(-1!==i){if(s%o!=0)throw Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${e}] Output shape: [${t}]`);n[i]=s/o}else if(o!==s)throw Error("reshapedDims and originalDims don't have matching sizes");return n}static sortBasedOnPerm(e,t){return t?t.map(t=>e[t]):e.slice().reverse()}static padShape(e,t){let r=e.length;return e.map((e,n)=>e+t[n]+t[n+r])}static areEqual(e,t){return e.length===t.length&&e.every((e,r)=>e===t[r])}static validateDimsAndCalcSize(e){if(e.length>6)throw TypeError("Only rank 0 to 6 is supported for tensor shape.");let t=1;for(let r of e){if(!Number.isInteger(r))throw TypeError(`Invalid shape: ${r} is not an integer`);if(r<0||r>0x7fffffff)throw TypeError(`Invalid shape: length ${r} is not allowed`);t*=r}return t}static flattenShape(e,t){t<0&&(t+=e.length);let r=e.reduce((e,t)=>e*t,1),n=e.slice(t).reduce((e,t)=>e*t,1);return[r/n,n]}static squeezeShape(e,t){let r=[];t=h.normalizeAxes(t,e.length);for(let n=0;n<e.length;n++){let i=t.indexOf(n)>=0;if(i&&1!==e[n])throw Error("squeeze an axis of size different than 1");(0===t.length&&e[n]>1||t.length>0&&!i)&&r.push(e[n])}return r}static unsqueezeShape(e,t){let r=Array(e.length+t.length);r.fill(0);for(let e=0;e<t.length;e++){let n=h.normalizeAxis(t[e],r.length);if(n>=r.length)throw Error("'axes' has an out of range axis");if(0!==r[n])throw Error("'axes' has a duplicate axis");r[n]=1}let n=0;for(let t=0;t<r.length;t++)0===r[t]&&(r[t]=e[n++]);if(n!==e.length)throw Error("the unsqueezed dimension could not be established");return r}}t.ShapeUtil=h,t.MathUtil=class{static sqr(e,t,r,n,i){if(n<0||n>=t.length)throw Error("sourceIndex out of bounds");if(r<0||r>=e.length)throw Error("targetIndex out of bounds");if(n+i>t.length)throw Error("source indices to be copied are outside bounds");if(r+i>e.length)throw Error("target array is too small to hold result");for(let o=0;o<i;o++)e[r+o]+=Math.pow(t[n+o],2)}static axpy(e,t,r,n,i,o){if(n<0||n>=t.length)throw Error("sourceIndex out of bounds");if(r<0||r>=e.length)throw Error("targetIndex out of bounds");if(n+i>t.length)throw Error("source indices to be copied are outside bounds");if(r+i>e.length)throw Error("target array is too small to hold result");for(let s=0;s<i;s++)e[r+s]+=o*t[n+s]}static powx(e,t,r,n,i,o){if(n<0||n>=t.length)throw Error("sourceIndex out of bounds");if(r<0||r>=e.length)throw Error("targetIndex out of bounds");if(n+i>t.length)throw Error("source indices to be copied are outside bounds");if(r+i>e.length)throw Error("target array is too small to hold result");for(let s=0;s<i;s++)e[r+s]=Math.pow(t[n+s],o)}static mul(e,t,r,n,i){if(n<0||n>=t.length)throw Error("sourceIndex out of bounds");if(r<0||r>=e.length)throw Error("targetIndex out of bounds");if(n+i>t.length)throw Error("source indices to be copied are outside bounds");if(r+i>e.length)throw Error("target array is too small to hold result");for(let o=0;o<i;o++)e[r+o]=t[n+o]*e[r+o]}};class p{static splitShape(e,t,r,n){if(0===r.length){if(!n)throw Error("need to know number of outputs when the 'split' attribute is not specified");p.determineSplit(e[t],n,r)}let i=[],o=[0];for(let n=0;n<r.length;++n){0!==n&&o.push(o[n-1]+r[n-1]);let s=e.slice();s[t]=r[n],i.push(s)}return[i,o]}static determineSplit(e,t,r){if(e%t!=0)throw Error("cannot split tensor to equal sized parts");for(let n=0;n<t;++n)r.push(e/t)}}t.SplitUtil=p;class f{static calcReduce(e,t,r,n,i){let o=e.dims.slice(0);0===t.length&&o.forEach((e,r)=>t.push(r));let s=f.calcReduceShape(o,t,!0),l=h.size(s),c=new a.Tensor(s,e.type),d=h.computeStrides(s),p=h.computeStrides(o),g=Array(o.length);for(let r=0;r<l;r++){let s=h.offsetToIndices(r,d);u.fillIndex(s,o,g),c.set(s,f.calcReduceByAxis(e.numberData,t,o,0,h.indicesToOffset(g,p),n,i))}return r?c:new a.Tensor(f.calcReduceShape(o,t,r),c.type,void 0,void 0,c.data,c.dataId)}static calcReduceByAxis(e,t,r,n,i,o,s){let a=0;if(n>=t.length)return o(e[i]);let l=t[n],u=l>=r.length?1:h.size(r.slice(l+1));for(let c=0;c<r[l];c++)a=0===c?f.calcReduceByAxis(e,t,r,n+1,i,o,s):s(a,f.calcReduceByAxis(e,t,r,n+1,i,o,s)),i+=u;return a}static calcReduceShape(e,t,r){let n=e.slice();for(let e=0;e<t.length;e++)n[t[e]]=+!!r;return n.filter(e=>0!==e)}}t.ReduceUtil=f;class g{static adjustPoolAttributes(e,t,r,n,i,o){if(!e&&r.length!==t.length-2)throw Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(e)for(let e=0;e<t.length-2;e++)e>=r.length?r.push(t[e+2]):r[e]=t[e+2];for(let e=0;e<r.length;e++)if(e<n.length){if(n[e]<0)throw Error("strides should be greater than or equal to 1")}else n.push(1);for(let e=0;e<r.length;e++)if(e<i.length){if(i[e]<0)throw Error("dilations should be greater than or equal to 1")}else i.push(1);for(let e=0;e<2*r.length;e++)if(e<o.length){if(o[e]<0)throw Error("pad should be greater than or equal to 1")}else o.push(0);for(let e=0;e<r.length;e++){if(r[e]<=0)throw Error("kernel shapes need to be greater than 0");if(o[e]>=r[e]||o[e+r.length]>=r[e])throw Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(e,t,r,n,i,o){if(o){if(i.length!==2*(e.length-2))throw Error("length of pads should be twice the length of data dimensions");if(t.length!==e.length-2)throw Error("length of strides should be the length of data dimensions");if(n.length!==e.length-2)throw Error("length of kernel shapes should be the length of data dimensions");for(let s=0;s<e.length-2;s++)g.adjustPadAndReturnShape(e[s+2],t[s],r[s],n[s],i,s,s+e.length-2,o)}}static computePoolOutputShape(e,t,r,n,i,o,s){if(t.length<=0)throw Error("input shape must be of size greater than 0");let a=[t[0],t[1]];return g.computeShapeHelper(e,t,a,r,n,i,o,s),a}static computeConvOutputShape(e,t,r,n,i,o,s){if(e.length<=0||t.length<=0)throw Error("invalid input tensor dims or invalid filter tensor dims");let a=[e[0],t[0]];return g.computeShapeHelper(!1,e,a,r,n,i,o,s),a}static computeShapeHelper(e,t,r,n,i,o,s,a){if(e)for(let e=0;e<t.length-2;e++)r.push(1);else for(let e=0;e<t.length-2;e++)r.push(g.adjustPadAndReturnShape(t[e+2],n[e],i[e],o[e],s,e,e+t.length-2,a))}static adjustPadAndReturnShape(e,t,r,n,i,o,s,a){let l=r*(n-1)+1;if(!a||"NOTSET"===a)return Math.floor((e+i[o]+i[s]-l)/t+1);switch(a){case"VALID":return i[o]=0,i[s]=0,Math.floor((e-l)/t+1);case"SAME_LOWER":case"SAME_UPPER":if(1!==r)throw Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let r=((e+t-1)/t-1)*t+n-e;return i[o]="SAME_LOWER"===a?Math.floor((r+1)/2):Math.floor(r/2),i[s]=r-i[o],Math.floor((e+r-n)/t+1)}default:throw Error("Unsupported AutoPad type")}}}t.PoolConvUtil=g,t.MIN_CLIP=-34028234663852886e22,t.MAX_CLIP=34028234663852886e22,t.decodeUtf8String=function(e){return(new TextDecoder).decode(e)}},7967:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iterateExtraOptions=void 0,t.iterateExtraOptions=(e,r,n,i)=>{if("object"==typeof e&&null!==e){if(n.has(e))throw Error("Circular reference in options");n.add(e)}Object.entries(e).forEach(([e,o])=>{let s=r?r+e:e;if("object"==typeof o)(0,t.iterateExtraOptions)(o,s+".",n,i);else if("string"==typeof o||"number"==typeof o)i(s,o.toString());else{if("boolean"!=typeof o)throw Error("Can't handle extra config type: "+typeof o);i(s,o?"1":"0")}})}},2157:function(e,t,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.endProfiling=t.run=t.releaseSession=t.createSession=t.createSessionFinalize=t.createSessionAllocate=t.initOrt=t.initWasm=void 0;let a=r(1670),l=s(r(349)),u=r(6361),c=()=>!!a.env.wasm.proxy&&"u">typeof document,d,h,p,f=!1,g=!1,m=!1,_=[],b=[],y=[],w=[],v=[],x=[],T=()=>{if(f||!g||m||!d)throw Error("worker not ready")},S=e=>{switch(e.data.type){case"init-wasm":f=!1,e.data.err?(m=!0,h[1](e.data.err)):(g=!0,h[0]());break;case"init-ort":e.data.err?p[1](e.data.err):p[0]();break;case"create_allocate":e.data.err?_.shift()[1](e.data.err):_.shift()[0](e.data.out);break;case"create_finalize":e.data.err?b.shift()[1](e.data.err):b.shift()[0](e.data.out);break;case"create":e.data.err?y.shift()[1](e.data.err):y.shift()[0](e.data.out);break;case"release":e.data.err?w.shift()[1](e.data.err):w.shift()[0]();break;case"run":e.data.err?v.shift()[1](e.data.err):v.shift()[0](e.data.out);break;case"end-profiling":e.data.err?x.shift()[1](e.data.err):x.shift()[0]()}},A="u">typeof document?null==(n=null==document?void 0:document.currentScript)?void 0:n.src:void 0;t.initWasm=async()=>{if(c()){if(g)return;if(f)throw Error("multiple calls to 'initWasm()' detected.");if(m)throw Error("previous call to 'initWasm()' failed.");return f=!0,void 0===a.env.wasm.wasmPaths&&A&&0!==A.indexOf("blob:")&&(a.env.wasm.wasmPaths=A.substr(0,+A.lastIndexOf("/")+1)),new Promise((e,t)=>{null==d||d.terminate(),(d=r(9710).Z()).onmessage=S,h=[e,t];let n={type:"init-wasm",in:a.env.wasm};d.postMessage(n)})}return(0,u.initializeWebAssembly)(a.env.wasm)},t.initOrt=async(e,t)=>{if(c())return T(),new Promise((r,n)=>{p=[r,n];let i={type:"init-ort",in:{numThreads:e,loggingLevel:t}};d.postMessage(i)});l.initOrt(e,t)},t.createSessionAllocate=async e=>c()?(T(),new Promise((t,r)=>{_.push([t,r]);let n={type:"create_allocate",in:{model:e}};d.postMessage(n,[e.buffer])})):l.createSessionAllocate(e),t.createSessionFinalize=async(e,t)=>c()?(T(),new Promise((r,n)=>{b.push([r,n]);let i={type:"create_finalize",in:{modeldata:e,options:t}};d.postMessage(i)})):l.createSessionFinalize(e,t),t.createSession=async(e,t)=>c()?(T(),new Promise((r,n)=>{y.push([r,n]);let i={type:"create",in:{model:e,options:t}};d.postMessage(i,[e.buffer])})):l.createSession(e,t),t.releaseSession=async e=>{if(c())return T(),new Promise((t,r)=>{w.push([t,r]);let n={type:"release",in:e};d.postMessage(n)});l.releaseSession(e)},t.run=async(e,t,r,n,i)=>c()?(T(),new Promise((o,s)=>{v.push([o,s]);let a={type:"run",in:{sessionId:e,inputIndices:t,inputs:r,outputIndices:n,options:i}};d.postMessage(a,l.extractTransferableBuffers(r))})):l.run(e,t,r,n,i),t.endProfiling=async e=>{if(c())return T(),new Promise((t,r)=>{x.push([t,r]);let n={type:"end-profiling",in:e};d.postMessage(n)});l.endProfiling(e)}},586:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setRunOptions=void 0;let n=r(7967),i=r(4983),o=r(6361);t.setRunOptions=e=>{let t=(0,o.getInstance)(),r=0,s=[],a=e||{};try{if(void 0===(null==e?void 0:e.logSeverityLevel))a.logSeverityLevel=2;else if("number"!=typeof e.logSeverityLevel||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if(void 0===(null==e?void 0:e.logVerbosityLevel))a.logVerbosityLevel=0;else if("number"!=typeof e.logVerbosityLevel||!Number.isInteger(e.logVerbosityLevel))throw Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);void 0===(null==e?void 0:e.terminate)&&(a.terminate=!1);let o=0;if(void 0!==(null==e?void 0:e.tag)&&(o=(0,i.allocWasmString)(e.tag,s)),r=t._OrtCreateRunOptions(a.logSeverityLevel,a.logVerbosityLevel,!!a.terminate,o),0===r)throw Error("Can't create run options");return void 0!==(null==e?void 0:e.extra)&&(0,n.iterateExtraOptions)(e.extra,"",new WeakSet,(e,n)=>{let o=(0,i.allocWasmString)(e,s),a=(0,i.allocWasmString)(n,s);if(0!==t._OrtAddRunConfigEntry(r,o,a))throw Error(`Can't set a run config entry: ${e} - ${n}`)}),[r,s]}catch(e){throw 0!==r&&t._OrtReleaseRunOptions(r),s.forEach(t._free),e}}},2306:(e,t,r)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.OnnxruntimeWebAssemblySessionHandler=void 0;let i=r(2806),o=r(1670),s=r(2850),a=r(2157);t.OnnxruntimeWebAssemblySessionHandler=class{async createSessionAllocate(e){let t=await fetch(e),r=await t.arrayBuffer();return(0,a.createSessionAllocate)(new Uint8Array(r))}async loadModel(e,t){if(n||(await (0,a.initOrt)(o.env.wasm.numThreads,(e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw Error(`unsupported logging level: ${e}`)}})(o.env.logLevel)),n=!0),"string"==typeof e)if("u"<typeof fetch){let r=await (0,s.promisify)(i.readFile)(e);[this.sessionId,this.inputNames,this.outputNames]=await (0,a.createSession)(r,t)}else{let r=await this.createSessionAllocate(e);[this.sessionId,this.inputNames,this.outputNames]=await (0,a.createSessionFinalize)(r,t)}else[this.sessionId,this.inputNames,this.outputNames]=await (0,a.createSession)(e,t)}async dispose(){return(0,a.releaseSession)(this.sessionId)}async run(e,t,r){let n=[],i=[];Object.entries(e).forEach(e=>{let t=e[0],r=e[1],o=this.inputNames.indexOf(t);if(-1===o)throw Error(`invalid input '${t}'`);n.push(r),i.push(o)});let s=[];Object.entries(t).forEach(e=>{let t=e[0],r=this.outputNames.indexOf(t);if(-1===r)throw Error(`invalid output '${t}'`);s.push(r)});let l=await (0,a.run)(this.sessionId,i,n.map(e=>[e.type,e.dims,e.data]),s,r),u={};for(let e=0;e<l.length;e++)u[this.outputNames[s[e]]]=new o.Tensor(l[e][0],l[e][2],l[e][1]);return u}startProfiling(){}endProfiling(){(0,a.endProfiling)(this.sessionId)}}},4919:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setSessionOptions=void 0;let n=r(7967),i=r(4983),o=r(6361);t.setSessionOptions=e=>{let t=(0,o.getInstance)(),r=0,s=[],a=e||{};(e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});let t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1")})(a);try{void 0===(null==e?void 0:e.graphOptimizationLevel)&&(a.graphOptimizationLevel="all");let l=(e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw Error(`unsupported graph optimization level: ${e}`)}})(a.graphOptimizationLevel);void 0===(null==e?void 0:e.enableCpuMemArena)&&(a.enableCpuMemArena=!0),void 0===(null==e?void 0:e.enableMemPattern)&&(a.enableMemPattern=!0),void 0===(null==e?void 0:e.executionMode)&&(a.executionMode="sequential");let u=(e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw Error(`unsupported execution mode: ${e}`)}})(a.executionMode),c=0;if(void 0!==(null==e?void 0:e.logId)&&(c=(0,i.allocWasmString)(e.logId,s)),void 0===(null==e?void 0:e.logSeverityLevel))a.logSeverityLevel=2;else if("number"!=typeof e.logSeverityLevel||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if(void 0===(null==e?void 0:e.logVerbosityLevel))a.logVerbosityLevel=0;else if("number"!=typeof e.logVerbosityLevel||!Number.isInteger(e.logVerbosityLevel))throw Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);if(void 0===(null==e?void 0:e.enableProfiling)&&(a.enableProfiling=!1),r=t._OrtCreateSessionOptions(l,!!a.enableCpuMemArena,!!a.enableMemPattern,u,!!a.enableProfiling,0,c,a.logSeverityLevel,a.logVerbosityLevel),0===r)throw Error("Can't create session options");return(null==e?void 0:e.executionProviders)&&((e,t,r)=>{for(let n of t){let t="string"==typeof n?n:n.name;switch(t){case"xnnpack":t="XNNPACK";break;case"wasm":case"cpu":continue;default:throw Error(`not supported EP: ${t}`)}let s=(0,i.allocWasmString)(t,r);if(0!==(0,o.getInstance)()._OrtAppendExecutionProvider(e,s))throw Error(`Can't append execution provider: ${t}`)}})(r,e.executionProviders,s),void 0!==(null==e?void 0:e.extra)&&(0,n.iterateExtraOptions)(e.extra,"",new WeakSet,(e,n)=>{let o=(0,i.allocWasmString)(e,s),a=(0,i.allocWasmString)(n,s);if(0!==t._OrtAddSessionConfigEntry(r,o,a))throw Error(`Can't set a session config entry: ${e} - ${n}`)}),[r,s]}catch(e){throw 0!==r&&t._OrtReleaseSessionOptions(r),s.forEach(t._free),e}}},4983:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.allocWasmString=void 0;let n=r(6361);t.allocWasmString=(e,t)=>{let r=(0,n.getInstance)(),i=r.lengthBytesUTF8(e)+1,o=r._malloc(i);return r.stringToUTF8(e,o,i),t.push(o),o}},349:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractTransferableBuffers=t.endProfiling=t.run=t.releaseSession=t.createSession=t.createSessionFinalize=t.createSessionAllocate=t.initOrt=void 0;let n=r(586),i=r(4919),o=r(4983),s=r(6361);t.initOrt=(e,t)=>{let r=(0,s.getInstance)()._OrtInit(e,t);if(0!==r)throw Error(`Can't initialize onnxruntime. error code = ${r}`)};let a=new Map;t.createSessionAllocate=e=>{let t=(0,s.getInstance)(),r=t._malloc(e.byteLength);return t.HEAPU8.set(e,r),[r,e.byteLength]},t.createSessionFinalize=(e,t)=>{let r=(0,s.getInstance)(),n=0,o=0,l=[];try{if([o,l]=(0,i.setSessionOptions)(t),n=r._OrtCreateSession(e[0],e[1],o),0===n)throw Error("Can't create a session")}finally{r._free(e[0]),r._OrtReleaseSessionOptions(o),l.forEach(r._free)}let u=r._OrtGetInputCount(n),c=r._OrtGetOutputCount(n),d=[],h=[],p=[],f=[];for(let e=0;e<u;e++){let t=r._OrtGetInputName(n,e);if(0===t)throw Error("Can't get an input name");h.push(t),d.push(r.UTF8ToString(t))}for(let e=0;e<c;e++){let t=r._OrtGetOutputName(n,e);if(0===t)throw Error("Can't get an output name");f.push(t),p.push(r.UTF8ToString(t))}return a.set(n,[n,h,f]),[n,d,p]},t.createSession=(e,r)=>{let n=(0,t.createSessionAllocate)(e);return(0,t.createSessionFinalize)(n,r)},t.releaseSession=e=>{let t=(0,s.getInstance)(),r=a.get(e);if(!r)throw Error("invalid session id");let n=r[0],i=r[1],o=r[2];i.forEach(t._OrtFree),o.forEach(t._OrtFree),t._OrtReleaseSession(n),a.delete(e)};let l=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw Error(`unsupported data type: ${e}`)}},u=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw Error(`unsupported data type: ${e}`)}},c=e=>{switch(e){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw Error(`unsupported type: ${e}`)}};t.run=(e,t,r,i,d)=>{let h=(0,s.getInstance)(),p=a.get(e);if(!p)throw Error("invalid session id");let f=p[0],g=p[1],m=p[2],_=t.length,b=i.length,y=0,w=[],v=[],x=[];try{[y,w]=(0,n.setRunOptions)(d);for(let e=0;e<_;e++){let t,n,i=r[e][0],s=r[e][1],a=r[e][2];if(Array.isArray(a)){n=4*a.length,t=h._malloc(n),x.push(t);let e=t/4;for(let t=0;t<a.length;t++){if("string"!=typeof a[t])throw TypeError(`tensor data at index ${t} is not a string`);h.HEAPU32[e++]=(0,o.allocWasmString)(a[t],x)}}else n=a.byteLength,t=h._malloc(n),x.push(t),h.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,n),t);let u=h.stackSave(),c=h.stackAlloc(4*s.length);try{let e=c/4;s.forEach(t=>h.HEAP32[e++]=t);let r=h._OrtCreateTensor(l(i),t,n,c,s.length);if(0===r)throw Error("Can't create a tensor");v.push(r)}finally{h.stackRestore(u)}}let e=h.stackSave(),s=h.stackAlloc(4*_),a=h.stackAlloc(4*_),p=h.stackAlloc(4*b),T=h.stackAlloc(4*b);try{let e=s/4,r=a/4,n=p/4,o=T/4;for(let n=0;n<_;n++)h.HEAPU32[e++]=v[n],h.HEAPU32[r++]=g[t[n]];for(let e=0;e<b;e++)h.HEAPU32[n++]=0,h.HEAPU32[o++]=m[i[e]];let l=h._OrtRun(f,a,s,_,T,b,p,y),d=[];if(0===l)for(let e=0;e<b;e++){let t=h.HEAPU32[p/4+e],r=h.stackSave(),n=h.stackAlloc(16),i,o=0;try{if(l=h._OrtGetTensorData(t,n,n+4,n+8,n+12),0!==l)throw Error(`Can't access output tensor data. error code = ${l}`);let e=n/4,r=h.HEAPU32[e++];o=h.HEAPU32[e++];let s=h.HEAPU32[e++],a=h.HEAPU32[e++],p=[];for(let e=0;e<a;e++)p.push(h.HEAPU32[s/4+e]);h._OrtFree(s);let f=0===p.length?1:p.reduce((e,t)=>e*t);if(i=u(r),"string"===i){let e=[],t=o/4;for(let r=0;r<f;r++){let n=h.HEAPU32[t++],i=r===f-1?void 0:h.HEAPU32[t]-n;e.push(h.UTF8ToString(n,i))}d.push([i,p,e])}else{let e=new(c(i))(f);new Uint8Array(e.buffer,e.byteOffset,e.byteLength).set(h.HEAPU8.subarray(o,o+e.byteLength)),d.push([i,p,e])}}finally{h.stackRestore(r),"string"===i&&o&&h._free(o),h._OrtReleaseTensor(t)}}if(0===l)return d;throw Error(`failed to call OrtRun(). error code = ${l}.`)}finally{h.stackRestore(e)}}finally{v.forEach(h._OrtReleaseTensor),x.forEach(h._free),h._OrtReleaseRunOptions(y),w.forEach(h._free)}},t.endProfiling=e=>{let t=(0,s.getInstance)(),r=a.get(e);if(!r)throw Error("invalid session id");let n=r[0],i=t._OrtEndProfiling(n);if(0===i)throw Error("Can't get an profile file name");t._OrtFree(i)},t.extractTransferableBuffers=e=>{let t=[];for(let r of e){let e=r[2];!Array.isArray(e)&&e.buffer&&t.push(e.buffer)}return t}},6361:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.getInstance=t.initializeWebAssembly=void 0;let a=o(r(6449)),l=s(r(932)),u=r(3474),c,d=!1,h=!1,p=!1,f=(e,t)=>t?e?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":e?"ort-wasm-simd.wasm":"ort-wasm.wasm";t.initializeWebAssembly=async e=>{if(d)return Promise.resolve();if(h)throw Error("multiple calls to 'initializeWebAssembly()' detected.");if(p)throw Error("previous call to 'initializeWebAssembly()' failed.");h=!0;let t=e.initTimeout,n=e.numThreads,i=e.simd,o=n>1&&(()=>{try{return"u">typeof SharedArrayBuffer&&("u">typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(e){return!1}})(),s=i&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(e){return!1}})(),g="string"==typeof e.wasmPaths?e.wasmPaths:void 0,m=f(!1,o),_=f(s,o),b="object"==typeof e.wasmPaths?e.wasmPaths[_]:void 0,y=!1,w=[];if(t>0&&w.push(new Promise(e=>{setTimeout(()=>{y=!0,e()},t)})),w.push(new Promise((e,t)=>{let n=o?u:l.default,i={locateFile:(e,t)=>o&&e.endsWith(".worker.js")&&"u">typeof Blob?URL.createObjectURL(new Blob([r(4154)],{type:"text/javascript"})):e===m?null!=b?b:(null!=g?g:t)+_:t+e};o&&("u"<typeof Blob?i.mainScriptUrlOrBlob=a.join("/","ort-wasm-threaded.js"):i.mainScriptUrlOrBlob=new Blob([`var ortWasmThreaded=(function(){var _scriptDir;return ${n.toString()}})();`],{type:"text/javascript"})),n(i).then(t=>{h=!1,d=!0,c=t,e()},e=>{h=!1,p=!0,t(e)})})),await Promise.race(w),y)throw Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},t.getInstance=()=>{if(d&&c)return c;throw Error("WebAssembly is not initialized yet.")},t.dispose=()=>{var e;!d||h||p||(h=!0,null==(e=c.PThread)||e.terminateAllThreads(),c=void 0,h=!1,d=!1,p=!0)}},9710:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(477),i=r.n(n);function o(){return i()('/*!\n* ONNX Runtime Web v1.14.0\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var t={474:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){function e(){return j.buffer!=D&&N(j.buffer),P}function r(){return j.buffer!=D&&N(j.buffer),U}function a(){return j.buffer!=D&&N(j.buffer),F}function i(){return j.buffer!=D&&N(j.buffer),I}function o(){return j.buffer!=D&&N(j.buffer),W}var u,c,s;t=t||{},u||(u=void 0!==t?t:{}),u.ready=new Promise((function(t,e){c=t,s=e}));var l,f,p,h,d,y,b=Object.assign({},u),m="./this.program",g=(t,e)=>{throw e},v="object"==typeof window,w="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,O=u.ENVIRONMENT_IS_PTHREAD||!1,A="";function S(t){return u.locateFile?u.locateFile(t,A):A+t}if(_){let e;A=w?n(908).dirname(A)+"/":"//",y=()=>{d||(h=n(384),d=n(908))},l=function(t,e){return y(),t=d.normalize(t),h.readFileSync(t,e?void 0:"utf8")},p=t=>((t=l(t,!0)).buffer||(t=new Uint8Array(t)),t),f=(t,e,n)=>{y(),t=d.normalize(t),h.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(m=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof ct))throw t})),process.on("unhandledRejection",(function(t){throw t})),g=(t,e)=>{if(Q())throw process.exitCode=t,e;e instanceof ct||x("exiting due to exception: "+e),process.exit(t)},u.inspect=function(){return"[Emscripten Module object]"};try{e=n(925)}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}n.g.Worker=e.Worker}else(v||w)&&(w?A=self.location.href:"undefined"!=typeof document&&document.currentScript&&(A=document.currentScript.src),_scriptDir&&(A=_scriptDir),A=0!==A.indexOf("blob:")?A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_||(l=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},w&&(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),f=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)}));_&&"undefined"==typeof performance&&(n.g.performance=n(953).performance);var T=console.log.bind(console),E=console.warn.bind(console);_&&(y(),T=t=>h.writeSync(1,t+"\\n"),E=t=>h.writeSync(2,t+"\\n"));var M,C=u.print||T,x=u.printErr||E;Object.assign(u,b),b=null,u.thisProgram&&(m=u.thisProgram),u.quit&&(g=u.quit),u.wasmBinary&&(M=u.wasmBinary);var R=u.noExitRuntime||!1;"object"!=typeof WebAssembly&&at("no native wasm support detected");var j,k,D,P,U,F,I,W,H=!1,L="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function z(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&L)return L.decode(t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function Y(t,e){return(t>>>=0)?z(r(),t,e):""}function B(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function G(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function N(t){D=t,u.HEAP8=P=new Int8Array(t),u.HEAP16=new Int16Array(t),u.HEAP32=F=new Int32Array(t),u.HEAPU8=U=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=I=new Uint32Array(t),u.HEAPF32=new Float32Array(t),u.HEAPF64=W=new Float64Array(t)}O&&(D=u.buffer);var V=u.INITIAL_MEMORY||16777216;if(O)j=u.wasmMemory,D=u.buffer;else if(u.wasmMemory)j=u.wasmMemory;else if(!((j=new WebAssembly.Memory({initial:V/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw x("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),_&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");j&&(D=j.buffer),V=D.byteLength,N(D);var $,q=[],X=[],J=[],Z=[];function Q(){return R||!1}function K(){var t=u.preRun.shift();q.unshift(t)}var tt,et=0,nt=null,rt=null;function at(t){throw O?postMessage({cmd:"onAbort",arg:t}):u.onAbort&&u.onAbort(t),x(t="Aborted("+t+")"),H=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),s(t),t}function it(){return tt.startsWith("data:application/octet-stream;base64,")}function ot(){var t=tt;try{if(t==tt&&M)return new Uint8Array(M);if(p)return p(t);throw"both async and sync fetching of the wasm failed"}catch(t){at(t)}}tt="ort-wasm-threaded.wasm",it()||(tt=S(tt));var ut={};function ct(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function st(t){(t=ht.Vb[t])||at(),ht.mc(t)}function lt(t){var e=ht.Cc();if(!e)return 6;ht.ac.push(e),ht.Vb[t.Ub]=e,e.Ub=t.Ub;var n={cmd:"run",start_routine:t.Ic,arg:t.zc,pthread_ptr:t.Ub};return e.$b=()=>{n.time=performance.now(),e.postMessage(n,t.Nc)},e.loaded&&(e.$b(),delete e.$b),0}function ft(t){if(O)return $t(1,1,t);Q()||(ht.oc(),u.onExit&&u.onExit(t),H=!0),g(t,new ct(t))}function pt(t,e){if(!e&&O)throw bt(t),"unwind";Q()||O||(me(),dt(J),be(0),re[1].length&&ae(1,10),re[2].length&&ae(2,10),ht.oc()),ft(t)}var ht={Yb:[],ac:[],qc:[],Vb:{},fc:function(){O&&ht.Ec()},Pc:function(){},Ec:function(){ht.receiveObjectTransfer=ht.Gc,ht.threadInitTLS=ht.pc,ht.setExitStatus=ht.nc,R=!1},nc:function(){},oc:function(){for(var t of Object.values(ht.Vb))ht.mc(t);for(t of ht.Yb)t.terminate();ht.Yb=[]},mc:function(t){var e=t.Ub;delete ht.Vb[e],ht.Yb.push(t),ht.ac.splice(ht.ac.indexOf(t),1),t.Ub=0,Oe(e)},Gc:function(){},pc:function(){ht.qc.forEach((t=>t()))},Fc:function(t,e){t.onmessage=n=>{var r=(n=n.data).cmd;if(t.Ub&&(ht.Bc=t.Ub),n.targetThread&&n.targetThread!=he()){var a=ht.Vb[n.Qc];a?a.postMessage(n,n.transferList):x(\'Internal error! Worker sent a message "\'+r+\'" to target pthread \'+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===r?zt(n.queue):"spawnThread"===r?lt(n):"cleanupThread"===r?st(n.thread):"killThread"===r?(n=n.thread,r=ht.Vb[n],delete ht.Vb[n],r.terminate(),Oe(n),ht.ac.splice(ht.ac.indexOf(r),1),r.Ub=0):"cancelThread"===r?ht.Vb[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(t.loaded=!0,e&&e(t),t.$b&&(t.$b(),delete t.$b)):"print"===r?C("Thread "+n.threadId+": "+n.text):"printErr"===r?x("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?t.postMessage(n):"onAbort"===r?u.onAbort&&u.onAbort(n.arg):r&&x("worker sent an unknown command "+r);ht.Bc=void 0},t.onerror=t=>{throw x("worker sent an error! "+t.filename+":"+t.lineno+": "+t.message),t},_&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||_scriptDir,wasmMemory:j,wasmModule:k})},yc:function(){var t=S("ort-wasm-threaded.worker.js");ht.Yb.push(new Worker(t))},Cc:function(){return 0==ht.Yb.length&&(ht.yc(),ht.Fc(ht.Yb[0])),ht.Yb.pop()}};function dt(t){for(;0<t.length;)t.shift()(u)}function yt(t){var e=Ee();return t=t(),Me(e),t}function bt(t){if(O)return $t(2,0,t);try{pt(t)}catch(t){t instanceof ct||"unwind"==t||g(1,t)}}u.PThread=ht,u.establishStackSpace=function(){var t=he(),e=a()[t+44>>2>>>0];t=a()[t+48>>2>>>0],Te(e,e-t),Me(e)};var mt=[];function gt(t){var e=mt[t];return e||(t>=mt.length&&(mt.length=t+1),mt[t]=e=$.get(t)),e}u.invokeEntryPoint=function(t,e){t=gt(t)(e),Q()?ht.nc(t):Ae(t)};var vt,wt,_t=[],Ot=0,At=0;function St(t){this.Zb=t,this.Sb=t-24,this.xc=function(t){i()[this.Sb+4>>2>>>0]=t},this.bc=function(){return i()[this.Sb+4>>2>>>0]},this.wc=function(t){i()[this.Sb+8>>2>>>0]=t},this.Dc=function(){return i()[this.Sb+8>>2>>>0]},this.rc=function(){a()[this.Sb>>2>>>0]=0},this.hc=function(t){t=t?1:0,e()[this.Sb+12>>0>>>0]=t},this.uc=function(){return 0!=e()[this.Sb+12>>0>>>0]},this.ic=function(t){t=t?1:0,e()[this.Sb+13>>0>>>0]=t},this.kc=function(){return 0!=e()[this.Sb+13>>0>>>0]},this.fc=function(t,e){this.cc(0),this.xc(t),this.wc(e),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(a(),this.Sb>>2,1)},this.Hc=function(){return 1===Atomics.sub(a(),this.Sb>>2,1)},this.cc=function(t){i()[this.Sb+16>>2>>>0]=t},this.tc=function(){return i()[this.Sb+16>>2>>>0]},this.vc=function(){if(Re(this.bc()))return i()[this.Zb>>2>>>0];var t=this.tc();return 0!==t?t:this.Zb}}function Tt(t){return ye(new St(t).Sb)}function Et(t,e,n,r){return O?$t(3,1,t,e,n,r):Mt(t,e,n,r)}function Mt(t,e,n,r){if("undefined"==typeof SharedArrayBuffer)return x("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return O&&0===a.length?Et(t,e,n,r):(t={Ic:n,Ub:t,zc:r,Nc:a},O?(t.Oc="spawnThread",postMessage(t,a),0):lt(t))}function Ct(t,e,n){return O?$t(4,1,t,e,n):0}function xt(t,e){if(O)return $t(5,1,t,e)}function Rt(t,e){if(O)return $t(6,1,t,e)}function jt(t,e,n){if(O)return $t(7,1,t,e,n)}function kt(t,e,n){return O?$t(8,1,t,e,n):0}function Dt(t,e){if(O)return $t(9,1,t,e)}function Pt(t,e,n){if(O)return $t(10,1,t,e,n)}function Ut(t,e,n,r){if(O)return $t(11,1,t,e,n,r)}function Ft(t,e,n,r){if(O)return $t(12,1,t,e,n,r)}function It(t,e,n,r){if(O)return $t(13,1,t,e,n,r)}function Wt(t){if(O)return $t(14,1,t)}function Ht(t,e){if(O)return $t(15,1,t,e)}function Lt(t,e,n){if(O)return $t(16,1,t,e,n)}function zt(t){Atomics.store(a(),t>>2,1),he()&&_e(t),Atomics.compareExchange(a(),t>>2,1,0)}function Yt(t){return i()[t>>>2]+4294967296*a()[t+4>>>2]}function Bt(t,e,n,r,a,i){return O?$t(17,1,t,e,n,r,a,i):-52}function Gt(t,e,n,r,a,i){if(O)return $t(18,1,t,e,n,r,a,i)}function Nt(t){var n=G(t)+1,r=de(n);return r&&B(t,e(),r,n),r}function Vt(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}if(O)return $t(19,1,t,e,n);var o=(new Date).getFullYear(),u=new Date(o,0,1),c=new Date(o,6,1);o=u.getTimezoneOffset();var s=c.getTimezoneOffset(),l=Math.max(o,s);a()[t>>2>>>0]=60*l,a()[e>>2>>>0]=Number(o!=s),t=r(u),e=r(c),t=Nt(t),e=Nt(e),s<o?(i()[n>>2>>>0]=t,i()[n+4>>2>>>0]=e):(i()[n>>2>>>0]=e,i()[n+4>>2>>>0]=t)}function $t(t,e){var n=arguments.length-2,r=arguments;return yt((()=>{for(var a=Ce(8*n),i=a>>3,u=0;u<n;u++){var c=r[2+u];o()[i+u>>>0]=c}return we(t,n,a,e)}))}u.executeNotifiedProxyingQueue=zt,wt=_?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:O?()=>performance.now()-u.__performance_now_clock_drift:()=>performance.now();var qt,Xt=[],Jt={};function Zt(){if(!qt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(t in Jt)void 0===Jt[t]?delete e[t]:e[t]=Jt[t];var n=[];for(t in e)n.push(t+"="+e[t]);qt=n}return qt}function Qt(t,n){if(O)return $t(20,1,t,n);var r=0;return Zt().forEach((function(a,o){var u=n+r;for(o=i()[t+4*o>>2>>>0]=u,u=0;u<a.length;++u)e()[o++>>0>>>0]=a.charCodeAt(u);e()[o>>0>>>0]=0,r+=a.length+1})),0}function Kt(t,e){if(O)return $t(21,1,t,e);var n=Zt();i()[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),i()[e>>2>>>0]=r,0}function te(t){return O?$t(22,1,t):52}function ee(t,e,n,r){return O?$t(23,1,t,e,n,r):52}function ne(t,e,n,r,a){return O?$t(24,1,t,e,n,r,a):70}var re=[null,[],[]];function ae(t,e){var n=re[t];0===e||10===e?((1===t?C:x)(z(n,0)),n.length=0):n.push(e)}function ie(t,e,n,a){if(O)return $t(25,1,t,e,n,a);for(var o=0,u=0;u<n;u++){var c=i()[e>>2>>>0],s=i()[e+4>>2>>>0];e+=8;for(var l=0;l<s;l++)ae(t,r()[c+l>>>0]);o+=s}return i()[a>>2>>>0]=o,0}var oe=0;function ue(t){return 0==t%4&&(0!=t%100||0==t%400)}var ce=[31,29,31,30,31,30,31,31,30,31,30,31],se=[31,28,31,30,31,30,31,31,30,31,30,31];function le(t,n,r,i){function o(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function u(t,e){return o(t,e,"0")}function c(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function s(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.Wb;for(t=new Date(new Date(t.Xb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(ue(t.getFullYear())?ce:se)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=s(new Date(t.getFullYear(),0,4)),n=s(n),0>=c(e,t)?0>=c(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var f=a()[i+40>>2>>>0];for(var p in i={Lc:a()[i>>2>>>0],Kc:a()[i+4>>2>>>0],dc:a()[i+8>>2>>>0],jc:a()[i+12>>2>>>0],ec:a()[i+16>>2>>>0],Xb:a()[i+20>>2>>>0],Tb:a()[i+24>>2>>>0],Wb:a()[i+28>>2>>>0],Rc:a()[i+32>>2>>>0],Jc:a()[i+36>>2>>>0],Mc:f?Y(f):""},r=Y(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(t){return h[t.Tb].substring(0,3)},"%A":function(t){return h[t.Tb]},"%b":function(t){return d[t.ec].substring(0,3)},"%B":function(t){return d[t.ec]},"%C":function(t){return u((t.Xb+1900)/100|0,2)},"%d":function(t){return u(t.jc,2)},"%e":function(t){return o(t.jc,2," ")},"%g":function(t){return l(t).toString().substring(2)},"%G":function(t){return l(t)},"%H":function(t){return u(t.dc,2)},"%I":function(t){return 0==(t=t.dc)?t=12:12<t&&(t-=12),u(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.ec-1;e+=(ue(t.Xb+1900)?ce:se)[n++]);return u(t.jc+e,3)},"%m":function(t){return u(t.ec+1,2)},"%M":function(t){return u(t.Kc,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.dc&&12>t.dc?"AM":"PM"},"%S":function(t){return u(t.Lc,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Tb||7},"%U":function(t){return u(Math.floor((t.Wb+7-t.Tb)/7),2)},"%V":function(t){var e=Math.floor((t.Wb+7-(t.Tb+6)%7)/7);if(2>=(t.Tb+371-t.Wb-2)%7&&e++,e)53==e&&(4==(n=(t.Tb+371-t.Wb)%7)||3==n&&ue(t.Xb)||(e=1));else{e=52;var n=(t.Tb+7-t.Wb-1)%7;(4==n||5==n&&ue(t.Xb%400-1))&&e++}return u(e,2)},"%w":function(t){return t.Tb},"%W":function(t){return u(Math.floor((t.Wb+7-(t.Tb+6)%7)/7),2)},"%y":function(t){return(t.Xb+1900).toString().substring(2)},"%Y":function(t){return t.Xb+1900},"%z":function(t){var e=0<=(t=t.Jc);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Mc},"%%":function(){return"%"}},r=r.replace(/%%/g,"\\0\\0"),f)r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](i)));return p=function(t){var e=Array(G(t)+1);return B(t,e,0,e.length),e}(r=r.replace(/\\0\\0/g,"%")),p.length>n?0:(function(t,n){e().set(t,n>>>0)}(p,t),p.length-1)}ht.fc();var fe=[null,ft,bt,Et,Ct,xt,Rt,jt,kt,Dt,Pt,Ut,Ft,It,Wt,Ht,Lt,Bt,Gt,Vt,Qt,Kt,te,ee,ne,ie],pe={b:function(t){return de(t+24)+24},n:function(t){return(t=new St(t)).uc()||(t.hc(!0),Ot--),t.ic(!1),_t.push(t),t.sc(),t.vc()},ma:function(t){throw x("Unexpected exception thrown, this is not properly supported - aborting"),H=!0,t},x:function(){Se(0);var t=_t.pop();if(t.Hc()&&!t.kc()){var e=t.Dc();e&&gt(e)(t.Zb),Tt(t.Zb)}At=0},e:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},l:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},h:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},t:Tt,M:function(){var t=_t.pop();t||at("no exception to throw");var e=t.Zb;throw t.kc()||(_t.push(t),t.ic(!0),t.hc(!1),Ot++),At=e,e},c:function(t,e,n){throw new St(t).fc(e,n),At=t,Ot++,t},pa:function(){return Ot},Fa:function(t){ge(t,!w,1,!v),ht.pc()},T:function(t){O?postMessage({cmd:"cleanupThread",thread:t}):st(t)},xa:Mt,j:function(t){throw At||(At=t),t},H:Ct,Ma:xt,ua:Rt,wa:jt,oa:kt,Ka:Dt,Ca:Pt,Ja:Ut,V:Ft,va:It,sa:Wt,La:Ht,ta:Lt,Ta:function(){},X:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(t,e,n,r){if(t==e)setTimeout((()=>zt(r)));else if(O)postMessage({targetThread:t,cmd:"processProxyingQueue",queue:r});else{if(!(t=ht.Vb[t]))return;t.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},Ea:function(){return-1},Pa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getUTCSeconds(),a()[e+4>>2>>>0]=t.getUTCMinutes(),a()[e+8>>2>>>0]=t.getUTCHours(),a()[e+12>>2>>>0]=t.getUTCDate(),a()[e+16>>2>>>0]=t.getUTCMonth(),a()[e+20>>2>>>0]=t.getUTCFullYear()-1900,a()[e+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[e+28>>2>>>0]=t},Qa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getFullYear()-1900,a()[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1),r=(t.getTime()-n.getTime())/864e5|0;a()[e+28>>2>>>0]=r,a()[e+36>>2>>>0]=-60*t.getTimezoneOffset(),r=new Date(t.getFullYear(),6,1).getTimezoneOffset(),t=0|(r!=(n=n.getTimezoneOffset())&&t.getTimezoneOffset()==Math.min(n,r)),a()[e+32>>2>>>0]=t},Ra:function(t){var e=new Date(a()[t+20>>2>>>0]+1900,a()[t+16>>2>>>0],a()[t+12>>2>>>0],a()[t+8>>2>>>0],a()[t+4>>2>>>0],a()[t>>2>>>0],0),n=a()[t+32>>2>>>0],r=e.getTimezoneOffset(),i=new Date(e.getFullYear(),0,1),o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),u=i.getTimezoneOffset(),c=Math.min(u,o);return 0>n?a()[t+32>>2>>>0]=Number(o!=u&&c==r):0<n!=(c==r)&&(o=Math.max(u,o),e.setTime(e.getTime()+6e4*((0<n?c:o)-r))),a()[t+24>>2>>>0]=e.getDay(),n=(e.getTime()-i.getTime())/864e5|0,a()[t+28>>2>>>0]=n,a()[t>>2>>>0]=e.getSeconds(),a()[t+4>>2>>>0]=e.getMinutes(),a()[t+8>>2>>>0]=e.getHours(),a()[t+12>>2>>>0]=e.getDate(),a()[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},Aa:Bt,Ba:Gt,Sa:function t(e,n,r){t.Ac||(t.Ac=!0,Vt(e,n,r))},y:function(){at("")},U:function(){if(!_&&!w){var t="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";vt||(vt={}),vt[t]||(vt[t]=1,_&&(t="warning: "+t),x(t))}},ra:function(){return 4294901760},B:wt,Ia:function(t,e,n){r().copyWithin(t>>>0,e>>>0,e+n>>>0)},F:function(){return _?n(993).cpus().length:navigator.hardwareConcurrency},Da:function(t,e,n){Xt.length=e,n>>=3;for(var r=0;r<e;r++)Xt[r]=o()[n+r>>>0];return(0>t?ut[-t-1]:fe[t]).apply(null,Xt)},qa:function(t){var e=r().length;if((t>>>=0)<=e||4294901760<t)return!1;for(var n=1;4>=n;n*=2){var a=e*(1+.2/n);a=Math.min(a,t+100663296);var i=Math;a=Math.max(t,a),i=i.min.call(i,4294901760,a+(65536-a%65536)%65536);t:{try{j.grow(i-D.byteLength+65535>>>16),N(j.buffer);var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1},Na:function(){throw"unwind"},Ga:Qt,Ha:Kt,J:pt,I:te,S:ee,ga:ne,R:ie,d:function(){return oe},na:function t(r,a){t.lc||(t.lc=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(_)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>at("randomDevice")}());for(var i=0;i<a;i++)e()[r+i>>0>>>0]=t.lc();return 0},ia:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ja:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},K:function(t){var e=Ee();try{return gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},f:function(t,e){var n=Ee();try{return gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},P:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},Q:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},k:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},p:function(t,e,n,r){var a=Ee();try{return gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},q:function(t,e,n,r,a){var i=Ee();try{return gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},N:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},s:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},w:function(t,e,n,r,a,i,o){var u=Ee();try{return gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},L:function(t,e,n,r,a,i,o,u){var c=Ee();try{return gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},E:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{return gt(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=Ee();try{return He(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},_:function(t,e,n,r,a,i,o){var u=Ee();try{return ke(t,e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},Z:function(t,e,n,r,a){var i=Ee();try{return Le(t,e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},ca:function(t,e,n,r){var a=Ee();try{return Ie(t,e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},$:function(t){var e=Ee();try{return je(t)}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},ba:function(t,e){var n=Ee();try{return We(t,e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},Y:function(t,e,n){var r=Ee();try{return De(t,e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},g:function(t){var e=Ee();try{gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},r:function(t,e){var n=Ee();try{gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},i:function(t,e,n){var r=Ee();try{gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ha:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},m:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},v:function(t,e,n,r,a){var i=Ee();try{gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},u:function(t,e,n,r,a,i){var o=Ee();try{gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},O:function(t,e,n,r,a,i,o){var u=Ee();try{gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},A:function(t,e,n,r,a,i,o,u){var c=Ee();try{gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},ka:function(t,e,n,r,a,i,o,u,c){var s=Ee();try{gt(t)(e,n,r,a,i,o,u,c)}catch(t){if(Me(s),t!==t+0)throw t;Se(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l){var f=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(Me(f),t!==t+0)throw t;Se(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(Me(b),t!==t+0)throw t;Se(1,0)}},fa:function(t,e,n,r,a,i,o,u){var c=Ee();try{Pe(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},da:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{Fe(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},ea:function(t,e,n,r,a,i){var o=Ee();try{Ue(t,e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},o:function(t){return t},a:j||u.wasmMemory,G:function(t){oe=t},la:le,z:function(t,e,n,r){return le(t,e,n,r)}};!function(){function t(t,e){u.asm=t.exports,ht.qc.push(u.asm.sb),$=u.asm.ub,X.unshift(u.asm.Va),k=e,O||(et--,u.monitorRunDependencies&&u.monitorRunDependencies(et),0==et&&(null!==nt&&(clearInterval(nt),nt=null),rt&&(t=rt,rt=null,t())))}function e(e){t(e.instance,e.module)}function n(t){return function(){if(!M&&(v||w)){if("function"==typeof fetch&&!tt.startsWith("file://"))return fetch(tt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+tt+"\'";return t.arrayBuffer()})).catch((function(){return ot()}));if(f)return new Promise((function(t,e){f(tt,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return ot()}))}().then((function(t){return WebAssembly.instantiate(t,r)})).then((function(t){return t})).then(t,(function(t){x("failed to asynchronously prepare wasm: "+t),at(t)}))}var r={a:pe};if(O||(et++,u.monitorRunDependencies&&u.monitorRunDependencies(et)),u.instantiateWasm)try{return u.instantiateWasm(r,t)}catch(t){return x("Module.instantiateWasm callback failed with error: "+t),!1}(M||"function"!=typeof WebAssembly.instantiateStreaming||it()||tt.startsWith("file://")||_||"function"!=typeof fetch?n(e):fetch(tt,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,r).then(e,(function(t){return x("wasm streaming compile failed: "+t),x("falling back to ArrayBuffer instantiation"),n(e)}))}))).catch(s)}(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.Va).apply(null,arguments)},u._OrtInit=function(){return(u._OrtInit=u.asm.Wa).apply(null,arguments)},u._OrtCreateSessionOptions=function(){return(u._OrtCreateSessionOptions=u.asm.Xa).apply(null,arguments)},u._OrtAppendExecutionProvider=function(){return(u._OrtAppendExecutionProvider=u.asm.Ya).apply(null,arguments)},u._OrtAddSessionConfigEntry=function(){return(u._OrtAddSessionConfigEntry=u.asm.Za).apply(null,arguments)},u._OrtReleaseSessionOptions=function(){return(u._OrtReleaseSessionOptions=u.asm._a).apply(null,arguments)},u._OrtCreateSession=function(){return(u._OrtCreateSession=u.asm.$a).apply(null,arguments)},u._OrtReleaseSession=function(){return(u._OrtReleaseSession=u.asm.ab).apply(null,arguments)},u._OrtGetInputCount=function(){return(u._OrtGetInputCount=u.asm.bb).apply(null,arguments)},u._OrtGetOutputCount=function(){return(u._OrtGetOutputCount=u.asm.cb).apply(null,arguments)},u._OrtGetInputName=function(){return(u._OrtGetInputName=u.asm.db).apply(null,arguments)},u._OrtGetOutputName=function(){return(u._OrtGetOutputName=u.asm.eb).apply(null,arguments)},u._OrtFree=function(){return(u._OrtFree=u.asm.fb).apply(null,arguments)},u._OrtCreateTensor=function(){return(u._OrtCreateTensor=u.asm.gb).apply(null,arguments)},u._OrtGetTensorData=function(){return(u._OrtGetTensorData=u.asm.hb).apply(null,arguments)},u._OrtReleaseTensor=function(){return(u._OrtReleaseTensor=u.asm.ib).apply(null,arguments)},u._OrtCreateRunOptions=function(){return(u._OrtCreateRunOptions=u.asm.jb).apply(null,arguments)},u._OrtAddRunConfigEntry=function(){return(u._OrtAddRunConfigEntry=u.asm.kb).apply(null,arguments)},u._OrtReleaseRunOptions=function(){return(u._OrtReleaseRunOptions=u.asm.lb).apply(null,arguments)},u._OrtRun=function(){return(u._OrtRun=u.asm.mb).apply(null,arguments)},u._OrtEndProfiling=function(){return(u._OrtEndProfiling=u.asm.nb).apply(null,arguments)};var he=u._pthread_self=function(){return(he=u._pthread_self=u.asm.ob).apply(null,arguments)},de=u._malloc=function(){return(de=u._malloc=u.asm.pb).apply(null,arguments)},ye=u._free=function(){return(ye=u._free=u.asm.qb).apply(null,arguments)},be=u._fflush=function(){return(be=u._fflush=u.asm.rb).apply(null,arguments)};u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm.sb).apply(null,arguments)};var me=u.___funcs_on_exit=function(){return(me=u.___funcs_on_exit=u.asm.tb).apply(null,arguments)},ge=u.__emscripten_thread_init=function(){return(ge=u.__emscripten_thread_init=u.asm.vb).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm.wb).apply(null,arguments)};var ve,we=u._emscripten_run_in_main_runtime_thread_js=function(){return(we=u._emscripten_run_in_main_runtime_thread_js=u.asm.xb).apply(null,arguments)},_e=u.__emscripten_proxy_execute_task_queue=function(){return(_e=u.__emscripten_proxy_execute_task_queue=u.asm.yb).apply(null,arguments)},Oe=u.__emscripten_thread_free_data=function(){return(Oe=u.__emscripten_thread_free_data=u.asm.zb).apply(null,arguments)},Ae=u.__emscripten_thread_exit=function(){return(Ae=u.__emscripten_thread_exit=u.asm.Ab).apply(null,arguments)},Se=u._setThrew=function(){return(Se=u._setThrew=u.asm.Bb).apply(null,arguments)},Te=u._emscripten_stack_set_limits=function(){return(Te=u._emscripten_stack_set_limits=u.asm.Cb).apply(null,arguments)},Ee=u.stackSave=function(){return(Ee=u.stackSave=u.asm.Db).apply(null,arguments)},Me=u.stackRestore=function(){return(Me=u.stackRestore=u.asm.Eb).apply(null,arguments)},Ce=u.stackAlloc=function(){return(Ce=u.stackAlloc=u.asm.Fb).apply(null,arguments)},xe=u.___cxa_can_catch=function(){return(xe=u.___cxa_can_catch=u.asm.Gb).apply(null,arguments)},Re=u.___cxa_is_pointer_type=function(){return(Re=u.___cxa_is_pointer_type=u.asm.Hb).apply(null,arguments)},je=u.dynCall_j=function(){return(je=u.dynCall_j=u.asm.Ib).apply(null,arguments)},ke=u.dynCall_iiiiij=function(){return(ke=u.dynCall_iiiiij=u.asm.Jb).apply(null,arguments)},De=u.dynCall_jii=function(){return(De=u.dynCall_jii=u.asm.Kb).apply(null,arguments)},Pe=u.dynCall_viiiiij=function(){return(Pe=u.dynCall_viiiiij=u.asm.Lb).apply(null,arguments)},Ue=u.dynCall_vjji=function(){return(Ue=u.dynCall_vjji=u.asm.Mb).apply(null,arguments)},Fe=u.dynCall_viiijjjii=function(){return(Fe=u.dynCall_viiijjjii=u.asm.Nb).apply(null,arguments)},Ie=u.dynCall_iij=function(){return(Ie=u.dynCall_iij=u.asm.Ob).apply(null,arguments)},We=u.dynCall_ji=function(){return(We=u.dynCall_ji=u.asm.Pb).apply(null,arguments)},He=u.dynCall_iiiiiij=function(){return(He=u.dynCall_iiiiiij=u.asm.Qb).apply(null,arguments)},Le=u.dynCall_iiij=function(){return(Le=u.dynCall_iiij=u.asm.Rb).apply(null,arguments)};function ze(){function t(){if(!ve&&(ve=!0,u.calledRun=!0,!H)&&(O||dt(X),c(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),!O)){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();Z.unshift(t)}dt(Z)}}if(!(0<et))if(O)c(u),O||dt(X),postMessage({cmd:"loaded"});else{if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)K();dt(q),0<et||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),t()}),1)):t())}}if(u.UTF8ToString=Y,u.stringToUTF8=function(t,e,n){return B(t,r(),e,n)},u.lengthBytesUTF8=G,u.keepRuntimeAlive=Q,u.wasmMemory=j,u.stackSave=Ee,u.stackRestore=Me,u.stackAlloc=Ce,u.ExitStatus=ct,u.PThread=ht,rt=function t(){ve||ze(),ve||(rt=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return ze(),t.ready});t.exports=r},932:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){var e,r,a;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){r=t,a=e}));var i,o,u,c,s,l,f=Object.assign({},e),p="./this.program",h=(t,e)=>{throw e},d="object"==typeof window,y="function"==typeof importScripts,b="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";b?(m=y?n(908).dirname(m)+"/":"//",l=()=>{s||(c=n(384),s=n(908))},i=function(t,e){return l(),t=s.normalize(t),c.readFileSync(t,e?void 0:"utf8")},u=t=>((t=i(t,!0)).buffer||(t=new Uint8Array(t)),t),o=(t,e,n)=>{l(),t=s.normalize(t),c.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof J))throw t})),process.on("unhandledRejection",(function(t){throw t})),h=(t,e)=>{if(_||0<L)throw process.exitCode=t,e;e instanceof J||w("exiting due to exception: "+e),process.exit(t)},e.inspect=function(){return"[Emscripten Module object]"}):(d||y)&&(y?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),_scriptDir&&(m=_scriptDir),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},y&&(u=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),o=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var g,v=e.print||console.log.bind(console),w=e.printErr||console.warn.bind(console);Object.assign(e,f),f=null,e.thisProgram&&(p=e.thisProgram),e.quit&&(h=e.quit),e.wasmBinary&&(g=e.wasmBinary);var _=e.noExitRuntime||!1;"object"!=typeof WebAssembly&&V("no native wasm support detected");var O,A,S,T,E,M,C=!1,x="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&x)return x.decode(t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function j(t,e){return(t>>>=0)?R(T,t,e):""}function k(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function D(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function P(){var t=O.buffer;A=t,e.HEAP8=S=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=E=new Int32Array(t),e.HEAPU8=T=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=M=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var U,F=[],I=[],W=[],H=[],L=0;function z(){var t=e.preRun.shift();F.unshift(t)}var Y,B=0,G=null,N=null;function V(t){throw e.onAbort&&e.onAbort(t),w(t="Aborted("+t+")"),C=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),a(t),t}function $(){return Y.startsWith("data:application/octet-stream;base64,")}if(Y="ort-wasm.wasm",!$()){var q=Y;Y=e.locateFile?e.locateFile(q,m):m+q}function X(){var t=Y;try{if(t==Y&&g)return new Uint8Array(g);if(u)return u(t);throw"both async and sync fetching of the wasm failed"}catch(t){V(t)}}function J(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Z(t){for(;0<t.length;)t.shift()(e)}var Q=[],K=0,tt=0;function et(t){this.Db=t,this.zb=t-24,this.Ub=function(t){M[this.zb+4>>2>>>0]=t},this.Eb=function(){return M[this.zb+4>>2>>>0]},this.Sb=function(t){M[this.zb+8>>2>>>0]=t},this.Wb=function(){return M[this.zb+8>>2>>>0]},this.Tb=function(){E[this.zb>>2>>>0]=0},this.Ib=function(t){S[this.zb+12>>0>>>0]=t?1:0},this.Pb=function(){return 0!=S[this.zb+12>>0>>>0]},this.Jb=function(t){S[this.zb+13>>0>>>0]=t?1:0},this.Lb=function(){return 0!=S[this.zb+13>>0>>>0]},this.Rb=function(t,e){this.Fb(0),this.Ub(t),this.Sb(e),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){E[this.zb>>2>>>0]+=1},this.Xb=function(){var t=E[this.zb>>2>>>0];return E[this.zb>>2>>>0]=t-1,1===t},this.Fb=function(t){M[this.zb+16>>2>>>0]=t},this.Ob=function(){return M[this.zb+16>>2>>>0]},this.Qb=function(){if(Mt(this.Eb()))return M[this.Db>>2>>>0];var t=this.Ob();return 0!==t?t:this.Db}}function nt(t){return vt(new et(t).zb)}var rt=[];function at(t){var e=rt[t];return e||(t>=rt.length&&(rt.length=t+1),rt[t]=e=U.get(t)),e}function it(t){var e=D(t)+1,n=gt(e);return n&&k(t,S,n,e),n}var ot={};function ut(){if(!ct){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(t in ot)void 0===ot[t]?delete e[t]:e[t]=ot[t];var n=[];for(t in e)n.push(t+"="+e[t]);ct=n}return ct}var ct,st=[null,[],[]];function lt(t,e){var n=st[t];0===e||10===e?((1===t?v:w)(R(n,0)),n.length=0):n.push(e)}var ft=0;function pt(t){return 0==t%4&&(0!=t%100||0==t%400)}var ht=[31,29,31,30,31,30,31,31,30,31,30,31],dt=[31,28,31,30,31,30,31,31,30,31,30,31];function yt(t,e,n,r){function a(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function i(t,e){return a(t,e,"0")}function o(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function u(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function c(t){var e=t.Bb;for(t=new Date(new Date(t.Cb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(pt(t.getFullYear())?ht:dt)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=u(new Date(t.getFullYear(),0,4)),n=u(n),0>=o(e,t)?0>=o(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var s=E[r+40>>2>>>0];for(var l in r={$b:E[r>>2>>>0],Zb:E[r+4>>2>>>0],Gb:E[r+8>>2>>>0],Kb:E[r+12>>2>>>0],Hb:E[r+16>>2>>>0],Cb:E[r+20>>2>>>0],Ab:E[r+24>>2>>>0],Bb:E[r+28>>2>>>0],bc:E[r+32>>2>>>0],Yb:E[r+36>>2>>>0],ac:s?j(s):""},n=j(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),s[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in s={"%a":function(t){return f[t.Ab].substring(0,3)},"%A":function(t){return f[t.Ab]},"%b":function(t){return p[t.Hb].substring(0,3)},"%B":function(t){return p[t.Hb]},"%C":function(t){return i((t.Cb+1900)/100|0,2)},"%d":function(t){return i(t.Kb,2)},"%e":function(t){return a(t.Kb,2," ")},"%g":function(t){return c(t).toString().substring(2)},"%G":function(t){return c(t)},"%H":function(t){return i(t.Gb,2)},"%I":function(t){return 0==(t=t.Gb)?t=12:12<t&&(t-=12),i(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.Hb-1;e+=(pt(t.Cb+1900)?ht:dt)[n++]);return i(t.Kb+e,3)},"%m":function(t){return i(t.Hb+1,2)},"%M":function(t){return i(t.Zb,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.Gb&&12>t.Gb?"AM":"PM"},"%S":function(t){return i(t.$b,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Ab||7},"%U":function(t){return i(Math.floor((t.Bb+7-t.Ab)/7),2)},"%V":function(t){var e=Math.floor((t.Bb+7-(t.Ab+6)%7)/7);if(2>=(t.Ab+371-t.Bb-2)%7&&e++,e)53==e&&(4==(n=(t.Ab+371-t.Bb)%7)||3==n&&pt(t.Cb)||(e=1));else{e=52;var n=(t.Ab+7-t.Bb-1)%7;(4==n||5==n&&pt(t.Cb%400-1))&&e++}return i(e,2)},"%w":function(t){return t.Ab},"%W":function(t){return i(Math.floor((t.Bb+7-(t.Ab+6)%7)/7),2)},"%y":function(t){return(t.Cb+1900).toString().substring(2)},"%Y":function(t){return t.Cb+1900},"%z":function(t){var e=0<=(t=t.Yb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.ac},"%%":function(){return"%"}},n=n.replace(/%%/g,"\\0\\0"),s)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),s[l](r)));return l=function(t){var e=Array(D(t)+1);return k(t,e,0,e.length),e}(n=n.replace(/\\0\\0/g,"%")),l.length>e?0:(S.set(l,t>>>0),l.length-1)}var bt={a:function(t){return gt(t+24)+24},m:function(t){return(t=new et(t)).Pb()||(t.Ib(!0),K--),t.Jb(!1),Q.push(t),t.Nb(),t.Qb()},ia:function(t){throw w("Unexpected exception thrown, this is not properly supported - aborting"),C=!0,t},w:function(){Ot(0);var t=Q.pop();if(t.Xb()&&!t.Lb()){var e=t.Wb();e&&at(e)(t.Db),nt(t.Db)}tt=0},d:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},k:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},g:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},s:nt,L:function(){var t=Q.pop();t||V("no exception to throw");var e=t.Db;throw t.Lb()||(Q.push(t),t.Jb(!0),t.Ib(!1),K++),tt=e,e},b:function(t,e,n){throw new et(t).Rb(e,n),tt=t,K++,t},la:function(){return K},i:function(t){throw tt||(tt=t),t},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getUTCSeconds(),E[e+4>>2>>>0]=t.getUTCMinutes(),E[e+8>>2>>>0]=t.getUTCHours(),E[e+12>>2>>>0]=t.getUTCDate(),E[e+16>>2>>>0]=t.getUTCMonth(),E[e+20>>2>>>0]=t.getUTCFullYear()-1900,E[e+24>>2>>>0]=t.getUTCDay(),E[e+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getSeconds(),E[e+4>>2>>>0]=t.getMinutes(),E[e+8>>2>>>0]=t.getHours(),E[e+12>>2>>>0]=t.getDate(),E[e+16>>2>>>0]=t.getMonth(),E[e+20>>2>>>0]=t.getFullYear()-1900,E[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1);E[e+28>>2>>>0]=(t.getTime()-n.getTime())/864e5|0,E[e+36>>2>>>0]=-60*t.getTimezoneOffset();var r=new Date(t.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),E[e+32>>2>>>0]=0|(r!=n&&t.getTimezoneOffset()==Math.min(n,r))},Fa:function(t){var e=new Date(E[t+20>>2>>>0]+1900,E[t+16>>2>>>0],E[t+12>>2>>>0],E[t+8>>2>>>0],E[t+4>>2>>>0],E[t>>2>>>0],0),n=E[t+32>>2>>>0],r=e.getTimezoneOffset(),a=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1).getTimezoneOffset(),o=a.getTimezoneOffset(),u=Math.min(o,i);return 0>n?E[t+32>>2>>>0]=Number(i!=o&&u==r):0<n!=(u==r)&&(i=Math.max(o,i),e.setTime(e.getTime()+6e4*((0<n?u:i)-r))),E[t+24>>2>>>0]=e.getDay(),E[t+28>>2>>>0]=(e.getTime()-a.getTime())/864e5|0,E[t>>2>>>0]=e.getSeconds(),E[t+4>>2>>>0]=e.getMinutes(),E[t+8>>2>>>0]=e.getHours(),E[t+12>>2>>>0]=e.getDate(),E[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function t(e,n,r){t.Vb||(t.Vb=!0,function(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}var a=(new Date).getFullYear(),i=new Date(a,0,1),o=new Date(a,6,1);a=i.getTimezoneOffset();var u=o.getTimezoneOffset();E[t>>2>>>0]=60*Math.max(a,u),E[e>>2>>>0]=Number(a!=u),t=r(i),e=r(o),t=it(t),e=it(e),u<a?(M[n>>2>>>0]=t,M[n+4>>2>>>0]=e):(M[n>>2>>>0]=e,M[n+4>>2>>>0]=t)}(e,n,r))},B:function(){V("")},ma:function(){return 4294901760},I:b?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),xa:function(t,e,n){T.copyWithin(t>>>0,e>>>0,e+n>>>0)},G:function(t){var e=T.length;if(4294901760<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var a=Math;r=Math.max(t,r),a=a.min.call(a,4294901760,r+(65536-r%65536)%65536);t:{try{O.grow(a-A.byteLength+65535>>>16),P();var i=1;break t}catch(t){}i=void 0}if(i)return!0}return!1},va:function(t,e){var n=0;return ut().forEach((function(r,a){var i=e+n;for(a=M[t+4*a>>2>>>0]=i,i=0;i<r.length;++i)S[a++>>0>>>0]=r.charCodeAt(i);S[a>>0>>>0]=0,n+=r.length+1})),0},wa:function(t,e){var n=ut();M[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),M[e>>2>>>0]=r,0},ba:function(t){_||0<L||(_t(),Z(W),wt(0),st[1].length&&lt(1,10),st[2].length&&lt(2,10)),_||0<L||(e.onExit&&e.onExit(t),C=!0),h(t,new J(t))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(t,e,n,r){for(var a=0,i=0;i<n;i++){var o=M[e>>2>>>0],u=M[e+4>>2>>>0];e+=8;for(var c=0;c<u;c++)lt(t,T[o+c>>>0]);a+=u}return M[r>>2>>>0]=a,0},c:function(){return ft},ja:function t(e,r){t.Mb||(t.Mb=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(b)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>V("randomDevice")}());for(var a=0;a<r;a++)S[e+a>>0>>>0]=t.Mb();return 0},ea:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},fa:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},J:function(t){var e=At();try{return at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},e:function(t,e){var n=At();try{return at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},N:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},O:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},j:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},o:function(t,e,n,r){var a=At();try{return at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},p:function(t,e,n,r,a){var i=At();try{return at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},M:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},r:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},v:function(t,e,n,r,a,i,o){var u=At();try{return at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},K:function(t,e,n,r,a,i,o,u){var c=At();try{return at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{return at(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},X:function(t,e,n,r,a,i,o,u){var c=At();try{return Ft(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},V:function(t,e,n,r,a,i,o){var u=At();try{return xt(t,e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},U:function(t,e,n,r,a){var i=At();try{return It(t,e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},Z:function(t,e,n,r){var a=At();try{return Pt(t,e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},W:function(t){var e=At();try{return Ct(t)}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},Y:function(t,e){var n=At();try{return Ut(t,e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},T:function(t,e,n){var r=At();try{return Rt(t,e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},f:function(t){var e=At();try{at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},q:function(t,e){var n=At();try{at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},h:function(t,e,n){var r=At();try{at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},da:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},l:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},t:function(t,e,n,r,a){var i=At();try{at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},u:function(t,e,n,r,a,i){var o=At();try{at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},x:function(t,e,n,r,a,i,o){var u=At();try{at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},z:function(t,e,n,r,a,i,o,u){var c=At();try{at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},ga:function(t,e,n,r,a,i,o,u,c){var s=At();try{at(t)(e,n,r,a,i,o,u,c)}catch(t){if(St(s),t!==t+0)throw t;Ot(1,0)}},A:function(t,e,n,r,a,i,o,u,c,s,l){var f=At();try{at(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(St(f),t!==t+0)throw t;Ot(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=At();try{at(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(St(b),t!==t+0)throw t;Ot(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=At();try{jt(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},_:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{Dt(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},$:function(t,e,n,r,a,i){var o=At();try{kt(t,e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},n:function(t){return t},F:function(t){ft=t},ha:yt,y:function(t,e,n,r){return yt(t,e,n,r)}};!function(){function t(t){e.asm=t.exports,O=e.asm.Ka,P(),U=e.asm.ib,I.unshift(e.asm.La),B--,e.monitorRunDependencies&&e.monitorRunDependencies(B),0==B&&(null!==G&&(clearInterval(G),G=null),N&&(t=N,N=null,t()))}function n(e){t(e.instance)}function r(t){return function(){if(!g&&(d||y)){if("function"==typeof fetch&&!Y.startsWith("file://"))return fetch(Y,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+Y+"\'";return t.arrayBuffer()})).catch((function(){return X()}));if(o)return new Promise((function(t,e){o(Y,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return X()}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){w("failed to asynchronously prepare wasm: "+t),V(t)}))}var i={a:bt};if(B++,e.monitorRunDependencies&&e.monitorRunDependencies(B),e.instantiateWasm)try{return e.instantiateWasm(i,t)}catch(t){return w("Module.instantiateWasm callback failed with error: "+t),!1}(g||"function"!=typeof WebAssembly.instantiateStreaming||$()||Y.startsWith("file://")||b||"function"!=typeof fetch?r(n):fetch(Y,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(n,(function(t){return w("wasm streaming compile failed: "+t),w("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.La).apply(null,arguments)},e._OrtInit=function(){return(e._OrtInit=e.asm.Ma).apply(null,arguments)},e._OrtCreateSessionOptions=function(){return(e._OrtCreateSessionOptions=e.asm.Na).apply(null,arguments)},e._OrtAppendExecutionProvider=function(){return(e._OrtAppendExecutionProvider=e.asm.Oa).apply(null,arguments)},e._OrtAddSessionConfigEntry=function(){return(e._OrtAddSessionConfigEntry=e.asm.Pa).apply(null,arguments)},e._OrtReleaseSessionOptions=function(){return(e._OrtReleaseSessionOptions=e.asm.Qa).apply(null,arguments)},e._OrtCreateSession=function(){return(e._OrtCreateSession=e.asm.Ra).apply(null,arguments)},e._OrtReleaseSession=function(){return(e._OrtReleaseSession=e.asm.Sa).apply(null,arguments)},e._OrtGetInputCount=function(){return(e._OrtGetInputCount=e.asm.Ta).apply(null,arguments)},e._OrtGetOutputCount=function(){return(e._OrtGetOutputCount=e.asm.Ua).apply(null,arguments)},e._OrtGetInputName=function(){return(e._OrtGetInputName=e.asm.Va).apply(null,arguments)},e._OrtGetOutputName=function(){return(e._OrtGetOutputName=e.asm.Wa).apply(null,arguments)},e._OrtFree=function(){return(e._OrtFree=e.asm.Xa).apply(null,arguments)},e._OrtCreateTensor=function(){return(e._OrtCreateTensor=e.asm.Ya).apply(null,arguments)},e._OrtGetTensorData=function(){return(e._OrtGetTensorData=e.asm.Za).apply(null,arguments)},e._OrtReleaseTensor=function(){return(e._OrtReleaseTensor=e.asm._a).apply(null,arguments)},e._OrtCreateRunOptions=function(){return(e._OrtCreateRunOptions=e.asm.$a).apply(null,arguments)},e._OrtAddRunConfigEntry=function(){return(e._OrtAddRunConfigEntry=e.asm.ab).apply(null,arguments)},e._OrtReleaseRunOptions=function(){return(e._OrtReleaseRunOptions=e.asm.bb).apply(null,arguments)},e._OrtRun=function(){return(e._OrtRun=e.asm.cb).apply(null,arguments)},e._OrtEndProfiling=function(){return(e._OrtEndProfiling=e.asm.db).apply(null,arguments)};var mt,gt=e._malloc=function(){return(gt=e._malloc=e.asm.eb).apply(null,arguments)},vt=e._free=function(){return(vt=e._free=e.asm.fb).apply(null,arguments)},wt=e._fflush=function(){return(wt=e._fflush=e.asm.gb).apply(null,arguments)},_t=e.___funcs_on_exit=function(){return(_t=e.___funcs_on_exit=e.asm.hb).apply(null,arguments)},Ot=e._setThrew=function(){return(Ot=e._setThrew=e.asm.jb).apply(null,arguments)},At=e.stackSave=function(){return(At=e.stackSave=e.asm.kb).apply(null,arguments)},St=e.stackRestore=function(){return(St=e.stackRestore=e.asm.lb).apply(null,arguments)},Tt=e.stackAlloc=function(){return(Tt=e.stackAlloc=e.asm.mb).apply(null,arguments)},Et=e.___cxa_can_catch=function(){return(Et=e.___cxa_can_catch=e.asm.nb).apply(null,arguments)},Mt=e.___cxa_is_pointer_type=function(){return(Mt=e.___cxa_is_pointer_type=e.asm.ob).apply(null,arguments)},Ct=e.dynCall_j=function(){return(Ct=e.dynCall_j=e.asm.pb).apply(null,arguments)},xt=e.dynCall_iiiiij=function(){return(xt=e.dynCall_iiiiij=e.asm.qb).apply(null,arguments)},Rt=e.dynCall_jii=function(){return(Rt=e.dynCall_jii=e.asm.rb).apply(null,arguments)},jt=e.dynCall_viiiiij=function(){return(jt=e.dynCall_viiiiij=e.asm.sb).apply(null,arguments)},kt=e.dynCall_vjji=function(){return(kt=e.dynCall_vjji=e.asm.tb).apply(null,arguments)},Dt=e.dynCall_viiijjjii=function(){return(Dt=e.dynCall_viiijjjii=e.asm.ub).apply(null,arguments)},Pt=e.dynCall_iij=function(){return(Pt=e.dynCall_iij=e.asm.vb).apply(null,arguments)},Ut=e.dynCall_ji=function(){return(Ut=e.dynCall_ji=e.asm.wb).apply(null,arguments)},Ft=e.dynCall_iiiiiij=function(){return(Ft=e.dynCall_iiiiiij=e.asm.xb).apply(null,arguments)},It=e.dynCall_iiij=function(){return(It=e.dynCall_iiij=e.asm.yb).apply(null,arguments)};function Wt(){function t(){if(!mt&&(mt=!0,e.calledRun=!0,!C)){if(Z(I),r(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();H.unshift(t)}Z(H)}}if(!(0<B)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)z();Z(F),0<B||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.UTF8ToString=j,e.stringToUTF8=function(t,e,n){return k(t,T,e,n)},e.lengthBytesUTF8=D,e.stackSave=At,e.stackRestore=St,e.stackAlloc=Tt,N=function t(){mt||Wt(),mt||(N=t)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return Wt(),t.ready});t.exports=r},967:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,n,r,a)=>{if("object"==typeof t&&null!==t){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach((([t,i])=>{const o=n?n+t:t;if("object"==typeof i)(0,e.iterateExtraOptions)(i,o+".",r,a);else if("string"==typeof i||"number"==typeof i)a(o,i.toString());else{if("boolean"!=typeof i)throw new Error("Can\'t handle extra config type: "+typeof i);a(o,i?"1":"0")}}))}},586:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setRunOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};try{if(void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);void 0===(null==t?void 0:t.terminate)&&(u.terminate=!1);let i=0;if(void 0!==(null==t?void 0:t.tag)&&(i=(0,a.allocWasmString)(t.tag,o)),n=e._OrtCreateRunOptions(u.logSeverityLevel,u.logVerbosityLevel,!!u.terminate,i),0===n)throw new Error("Can\'t create run options");return void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddRunConfigEntry(n,i,u))throw new Error(`Can\'t set a run config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseRunOptions(n),o.forEach(e._free),t}}},919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setSessionOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};(t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});const e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1")})(u);try{void 0===(null==t?void 0:t.graphOptimizationLevel)&&(u.graphOptimizationLevel="all");const c=(t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}})(u.graphOptimizationLevel);void 0===(null==t?void 0:t.enableCpuMemArena)&&(u.enableCpuMemArena=!0),void 0===(null==t?void 0:t.enableMemPattern)&&(u.enableMemPattern=!0),void 0===(null==t?void 0:t.executionMode)&&(u.executionMode="sequential");const s=(t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}})(u.executionMode);let l=0;if(void 0!==(null==t?void 0:t.logId)&&(l=(0,a.allocWasmString)(t.logId,o)),void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);if(void 0===(null==t?void 0:t.enableProfiling)&&(u.enableProfiling=!1),n=e._OrtCreateSessionOptions(c,!!u.enableCpuMemArena,!!u.enableMemPattern,s,!!u.enableProfiling,0,l,u.logSeverityLevel,u.logVerbosityLevel),0===n)throw new Error("Can\'t create session options");return(null==t?void 0:t.executionProviders)&&((t,e,n)=>{for(const r of e){let e="string"==typeof r?r:r.name;switch(e){case"xnnpack":e="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${e}`)}const o=(0,a.allocWasmString)(e,n);if(0!==(0,i.getInstance)()._OrtAppendExecutionProvider(t,o))throw new Error(`Can\'t append execution provider: ${e}`)}})(n,t.executionProviders,o),void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddSessionConfigEntry(n,i,u))throw new Error(`Can\'t set a session config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseSessionOptions(n),o.forEach(e._free),t}}},983:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const r=n(361);e.allocWasmString=(t,e)=>{const n=(0,r.getInstance)(),a=n.lengthBytesUTF8(t)+1,i=n._malloc(a);return n.stringToUTF8(t,i,a),e.push(i),i}},349:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const r=n(586),a=n(919),i=n(983),o=n(361);e.initOrt=(t,e)=>{const n=(0,o.getInstance)()._OrtInit(t,e);if(0!==n)throw new Error(`Can\'t initialize onnxruntime. error code = ${n}`)};const u=new Map;e.createSessionAllocate=t=>{const e=(0,o.getInstance)(),n=e._malloc(t.byteLength);return e.HEAPU8.set(t,n),[n,t.byteLength]},e.createSessionFinalize=(t,e)=>{const n=(0,o.getInstance)();let r=0,i=0,c=[];try{if([i,c]=(0,a.setSessionOptions)(e),r=n._OrtCreateSession(t[0],t[1],i),0===r)throw new Error("Can\'t create a session")}finally{n._free(t[0]),n._OrtReleaseSessionOptions(i),c.forEach(n._free)}const s=n._OrtGetInputCount(r),l=n._OrtGetOutputCount(r),f=[],p=[],h=[],d=[];for(let t=0;t<s;t++){const e=n._OrtGetInputName(r,t);if(0===e)throw new Error("Can\'t get an input name");p.push(e),f.push(n.UTF8ToString(e))}for(let t=0;t<l;t++){const e=n._OrtGetOutputName(r,t);if(0===e)throw new Error("Can\'t get an output name");d.push(e),h.push(n.UTF8ToString(e))}return u.set(r,[r,p,d]),[r,f,h]},e.createSession=(t,n)=>{const r=(0,e.createSessionAllocate)(t);return(0,e.createSessionFinalize)(r,n)},e.releaseSession=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=n[1],i=n[2];a.forEach(e._OrtFree),i.forEach(e._OrtFree),e._OrtReleaseSession(r),u.delete(t)};const c=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},s=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},l=t=>{switch(t){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}};e.run=(t,e,n,a,f)=>{const p=(0,o.getInstance)(),h=u.get(t);if(!h)throw new Error("invalid session id");const d=h[0],y=h[1],b=h[2],m=e.length,g=a.length;let v=0,w=[];const _=[],O=[];try{[v,w]=(0,r.setRunOptions)(f);for(let t=0;t<m;t++){const e=n[t][0],r=n[t][1],a=n[t][2];let o,u;if(Array.isArray(a)){u=4*a.length,o=p._malloc(u),O.push(o);let t=o/4;for(let e=0;e<a.length;e++){if("string"!=typeof a[e])throw new TypeError(`tensor data at index ${e} is not a string`);p.HEAPU32[t++]=(0,i.allocWasmString)(a[e],O)}}else u=a.byteLength,o=p._malloc(u),O.push(o),p.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,u),o);const s=p.stackSave(),l=p.stackAlloc(4*r.length);try{let t=l/4;r.forEach((e=>p.HEAP32[t++]=e));const n=p._OrtCreateTensor(c(e),o,u,l,r.length);if(0===n)throw new Error("Can\'t create a tensor");_.push(n)}finally{p.stackRestore(s)}}const t=p.stackSave(),o=p.stackAlloc(4*m),u=p.stackAlloc(4*m),h=p.stackAlloc(4*g),A=p.stackAlloc(4*g);try{let n=o/4,r=u/4,i=h/4,c=A/4;for(let t=0;t<m;t++)p.HEAPU32[n++]=_[t],p.HEAPU32[r++]=y[e[t]];for(let t=0;t<g;t++)p.HEAPU32[i++]=0,p.HEAPU32[c++]=b[a[t]];let f=p._OrtRun(d,u,o,m,A,g,h,v);const w=[];if(0===f)for(let t=0;t<g;t++){const e=p.HEAPU32[h/4+t],n=p.stackSave(),r=p.stackAlloc(16);let a,i=0;try{if(f=p._OrtGetTensorData(e,r,r+4,r+8,r+12),0!==f)throw new Error(`Can\'t access output tensor data. error code = ${f}`);let t=r/4;const o=p.HEAPU32[t++];i=p.HEAPU32[t++];const u=p.HEAPU32[t++],c=p.HEAPU32[t++],h=[];for(let t=0;t<c;t++)h.push(p.HEAPU32[u/4+t]);p._OrtFree(u);const d=0===h.length?1:h.reduce(((t,e)=>t*e));if(a=s(o),"string"===a){const t=[];let e=i/4;for(let n=0;n<d;n++){const r=p.HEAPU32[e++],a=n===d-1?void 0:p.HEAPU32[e]-r;t.push(p.UTF8ToString(r,a))}w.push([a,h,t])}else{const t=new(l(a))(d);new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(p.HEAPU8.subarray(i,i+t.byteLength)),w.push([a,h,t])}}finally{p.stackRestore(n),"string"===a&&i&&p._free(i),p._OrtReleaseTensor(e)}}if(0===f)return w;throw new Error(`failed to call OrtRun(). error code = ${f}.`)}finally{p.stackRestore(t)}}finally{_.forEach(p._OrtReleaseTensor),O.forEach(p._free),p._OrtReleaseRunOptions(v),w.forEach(p._free)}},e.endProfiling=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=e._OrtEndProfiling(r);if(0===a)throw new Error("Can\'t get an profile file name");e._OrtFree(a)},e.extractTransferableBuffers=t=>{const e=[];for(const n of t){const t=n[2];!Array.isArray(t)&&t.buffer&&e.push(t.buffer)}return e}},361:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);a&&!("get"in a?!e.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const u=i(n(449)),c=o(n(932)),s=n(474);let l,f=!1,p=!1,h=!1;const d=(t,e)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":t?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async t=>{if(f)return Promise.resolve();if(p)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(h)throw new Error("previous call to \'initializeWebAssembly()\' failed.");p=!0;const e=t.initTimeout,r=t.numThreads,a=t.simd,i=r>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(t){return!1}})(),o=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(t){return!1}})(),y="string"==typeof t.wasmPaths?t.wasmPaths:void 0,b=d(!1,i),m=d(o,i),g="object"==typeof t.wasmPaths?t.wasmPaths[m]:void 0;let v=!1;const w=[];if(e>0&&w.push(new Promise((t=>{setTimeout((()=>{v=!0,t()}),e)}))),w.push(new Promise(((t,e)=>{const r=i?s:c.default,a={locateFile:(t,e)=>i&&t.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(154)],{type:"text/javascript"})):t===b?null!=g?g:(null!=y?y:e)+m:e+t};if(i)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=u.join("/","ort-wasm-threaded.js");else{const t=`var ortWasmThreaded=(function(){var _scriptDir;return ${r.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([t],{type:"text/javascript"})}r(a).then((e=>{p=!1,f=!0,l=e,t()}),(t=>{p=!1,h=!0,e(t)}))}))),await Promise.race(w),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},e.getInstance=()=>{if(f&&l)return l;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var t;!f||p||h||(p=!0,null===(t=l.PThread)||void 0===t||t.terminateAllThreads(),l=void 0,p=!1,f=!1,h=!0)}},154:t=>{"use strict";t.exports=\'"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\\n\'},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";const t=n(349),e=n(361);self.onmessage=n=>{switch(n.data.type){case"init-wasm":(0,e.initializeWebAssembly)(n.data.in).then((()=>postMessage({type:"init-wasm"})),(t=>postMessage({type:"init-wasm",err:t})));break;case"init-ort":try{const{numThreads:e,loggingLevel:r}=n.data.in;(0,t.initOrt)(e,r),postMessage({type:"init-ort"})}catch(t){postMessage({type:"init-ort",err:t})}break;case"create_allocate":try{const{model:e}=n.data.in,r=(0,t.createSessionAllocate)(e);postMessage({type:"create_allocate",out:r})}catch(t){postMessage({type:"create_allocate",err:t})}break;case"create_finalize":try{const{modeldata:e,options:r}=n.data.in,a=(0,t.createSessionFinalize)(e,r);postMessage({type:"create_finalize",out:a})}catch(t){postMessage({type:"create_finalize",err:t})}break;case"create":try{const{model:e,options:r}=n.data.in,a=(0,t.createSession)(e,r);postMessage({type:"create",out:a})}catch(t){postMessage({type:"create",err:t})}break;case"release":try{const e=n.data.in;(0,t.releaseSession)(e),postMessage({type:"release"})}catch(t){postMessage({type:"release",err:t})}break;case"run":try{const{sessionId:e,inputIndices:r,inputs:a,outputIndices:i,options:o}=n.data.in,u=(0,t.run)(e,r,a,i,o);postMessage({type:"run",out:u},(0,t.extractTransferableBuffers)(u))}catch(t){postMessage({type:"run",err:t})}break;case"end-profiling":try{const e=n.data.in;(0,t.endProfiling)(e),postMessage({type:"end-profiling"})}catch(t){postMessage({type:"end-profiling",err:t})}}}})()})();\n',"Worker",void 0,void 0)}},477:e=>{"use strict";e.exports=function(e,t,r,n){var i=self||window;try{try{try{o=new i.Blob([e])}catch(t){(o=new(i.BlobBuilder||i.WebKitBlobBuilder||i.MozBlobBuilder||i.MSBlobBuilder)).append(e),o=o.getBlob()}var o,s=i.URL||i.webkitURL,a=s.createObjectURL(o),l=new i[t](a,r);return s.revokeObjectURL(a),l}catch(n){return new i[t]("data:application/javascript,".concat(encodeURIComponent(e)),r)}}catch(e){if(!n)throw Error("Inline worker is not supported");return new i[t](n,r)}}},4154:e=>{"use strict";e.exports='"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\n'},1670:e=>{"use strict";e.exports=__WEBPACK_EXTERNAL_MODULE__1670__},7067:()=>{},1296:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},2806:()=>{},6449:()=>{},2850:()=>{},5381:()=>{},5686:(e,t,r)=>{"use strict";r.r(t),r.d(t,{flatbuffers:()=>n});var n={};n.Offset,n.Table,n.SIZEOF_SHORT=2,n.SIZEOF_INT=4,n.FILE_IDENTIFIER_LENGTH=4,n.SIZE_PREFIX_LENGTH=4,n.Encoding={UTF8_BYTES:1,UTF16_STRING:2},n.int32=new Int32Array(2),n.float32=new Float32Array(n.int32.buffer),n.float64=new Float64Array(n.int32.buffer),n.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],n.Long=function(e,t){this.low=0|e,this.high=0|t},n.Long.create=function(e,t){return 0==e&&0==t?n.Long.ZERO:new n.Long(e,t)},n.Long.prototype.toFloat64=function(){return(this.low>>>0)+0x100000000*this.high},n.Long.prototype.equals=function(e){return this.low==e.low&&this.high==e.high},n.Long.ZERO=new n.Long(0,0),n.Builder=function(e){if(e)t=e;else var t=1024;this.bb=n.ByteBuffer.allocate(t),this.space=t,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},n.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},n.Builder.prototype.forceDefaults=function(e){this.force_defaults=e},n.Builder.prototype.dataBuffer=function(){return this.bb},n.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},n.Builder.prototype.prep=function(e,t){e>this.minalign&&(this.minalign=e);for(var r=1+~(this.bb.capacity()-this.space+t)&e-1;this.space<r+e+t;){var i=this.bb.capacity();this.bb=n.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)},n.Builder.prototype.pad=function(e){for(var t=0;t<e;t++)this.bb.writeInt8(--this.space,0)},n.Builder.prototype.writeInt8=function(e){this.bb.writeInt8(this.space-=1,e)},n.Builder.prototype.writeInt16=function(e){this.bb.writeInt16(this.space-=2,e)},n.Builder.prototype.writeInt32=function(e){this.bb.writeInt32(this.space-=4,e)},n.Builder.prototype.writeInt64=function(e){this.bb.writeInt64(this.space-=8,e)},n.Builder.prototype.writeFloat32=function(e){this.bb.writeFloat32(this.space-=4,e)},n.Builder.prototype.writeFloat64=function(e){this.bb.writeFloat64(this.space-=8,e)},n.Builder.prototype.addInt8=function(e){this.prep(1,0),this.writeInt8(e)},n.Builder.prototype.addInt16=function(e){this.prep(2,0),this.writeInt16(e)},n.Builder.prototype.addInt32=function(e){this.prep(4,0),this.writeInt32(e)},n.Builder.prototype.addInt64=function(e){this.prep(8,0),this.writeInt64(e)},n.Builder.prototype.addFloat32=function(e){this.prep(4,0),this.writeFloat32(e)},n.Builder.prototype.addFloat64=function(e){this.prep(8,0),this.writeFloat64(e)},n.Builder.prototype.addFieldInt8=function(e,t,r){(this.force_defaults||t!=r)&&(this.addInt8(t),this.slot(e))},n.Builder.prototype.addFieldInt16=function(e,t,r){(this.force_defaults||t!=r)&&(this.addInt16(t),this.slot(e))},n.Builder.prototype.addFieldInt32=function(e,t,r){(this.force_defaults||t!=r)&&(this.addInt32(t),this.slot(e))},n.Builder.prototype.addFieldInt64=function(e,t,r){!this.force_defaults&&t.equals(r)||(this.addInt64(t),this.slot(e))},n.Builder.prototype.addFieldFloat32=function(e,t,r){(this.force_defaults||t!=r)&&(this.addFloat32(t),this.slot(e))},n.Builder.prototype.addFieldFloat64=function(e,t,r){(this.force_defaults||t!=r)&&(this.addFloat64(t),this.slot(e))},n.Builder.prototype.addFieldOffset=function(e,t,r){(this.force_defaults||t!=r)&&(this.addOffset(t),this.slot(e))},n.Builder.prototype.addFieldStruct=function(e,t,r){t!=r&&(this.nested(t),this.slot(e))},n.Builder.prototype.nested=function(e){if(e!=this.offset())throw Error("FlatBuffers: struct must be serialized inline.")},n.Builder.prototype.notNested=function(){if(this.isNested)throw Error("FlatBuffers: object serialization must not be nested.")},n.Builder.prototype.slot=function(e){this.vtable[e]=this.offset()},n.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},n.Builder.growByteBuffer=function(e){var t=e.capacity();if(0xc0000000&t)throw Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var r=t<<1,i=n.ByteBuffer.allocate(r);return i.setPosition(r-t),i.bytes().set(e.bytes(),r-t),i},n.Builder.prototype.addOffset=function(e){this.prep(n.SIZEOF_INT,0),this.writeInt32(this.offset()-e+n.SIZEOF_INT)},n.Builder.prototype.startObject=function(e){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=e;for(var t=0;t<e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()},n.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var e=this.offset(),t=this.vtable_in_use-1;t>=0&&0==this.vtable[t];t--);for(var r=t+1;t>=0;t--)this.addInt16(0!=this.vtable[t]?e-this.vtable[t]:0);this.addInt16(e-this.object_start);var i=(r+2)*n.SIZEOF_SHORT;this.addInt16(i);var o=0,s=this.space;e:for(t=0;t<this.vtables.length;t++){var a=this.bb.capacity()-this.vtables[t];if(i==this.bb.readInt16(a)){for(var l=n.SIZEOF_SHORT;l<i;l+=n.SIZEOF_SHORT)if(this.bb.readInt16(s+l)!=this.bb.readInt16(a+l))continue e;o=this.vtables[t];break}}return o?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,o-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e},n.Builder.prototype.finish=function(e,t,r){var i=r?n.SIZE_PREFIX_LENGTH:0;if(t){var o=t;if(this.prep(this.minalign,n.SIZEOF_INT+n.FILE_IDENTIFIER_LENGTH+i),o.length!=n.FILE_IDENTIFIER_LENGTH)throw Error("FlatBuffers: file identifier must be length "+n.FILE_IDENTIFIER_LENGTH);for(var s=n.FILE_IDENTIFIER_LENGTH-1;s>=0;s--)this.writeInt8(o.charCodeAt(s))}this.prep(this.minalign,n.SIZEOF_INT+i),this.addOffset(e),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},n.Builder.prototype.finishSizePrefixed=function(e,t){this.finish(e,t,!0)},n.Builder.prototype.requiredField=function(e,t){var r=this.bb.capacity()-e,n=r-this.bb.readInt32(r);if(0==this.bb.readInt16(n+t))throw Error("FlatBuffers: field "+t+" must be set")},n.Builder.prototype.startVector=function(e,t,r){this.notNested(),this.vector_num_elems=t,this.prep(n.SIZEOF_INT,e*t),this.prep(r,e*t)},n.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},n.Builder.prototype.createString=function(e){if(e instanceof Uint8Array)var t=e;else{t=[];for(var r=0;r<e.length;){var n,i=e.charCodeAt(r++);(n=i<55296||i>=56320?i:(i<<10)+e.charCodeAt(r++)+-0x35fdc00)<128?t.push(n):(n<2048?t.push(n>>6&31|192):(n<65536?t.push(n>>12&15|224):t.push(n>>18&7|240,n>>12&63|128),t.push(n>>6&63|128)),t.push(63&n|128))}}this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length),r=0;for(var o=this.space,s=this.bb.bytes();r<t.length;r++)s[o++]=t[r];return this.endVector()},n.Builder.prototype.createLong=function(e,t){return n.Long.create(e,t)},n.ByteBuffer=function(e){this.bytes_=e,this.position_=0},n.ByteBuffer.allocate=function(e){return new n.ByteBuffer(new Uint8Array(e))},n.ByteBuffer.prototype.clear=function(){this.position_=0},n.ByteBuffer.prototype.bytes=function(){return this.bytes_},n.ByteBuffer.prototype.position=function(){return this.position_},n.ByteBuffer.prototype.setPosition=function(e){this.position_=e},n.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},n.ByteBuffer.prototype.readInt8=function(e){return this.readUint8(e)<<24>>24},n.ByteBuffer.prototype.readUint8=function(e){return this.bytes_[e]},n.ByteBuffer.prototype.readInt16=function(e){return this.readUint16(e)<<16>>16},n.ByteBuffer.prototype.readUint16=function(e){return this.bytes_[e]|this.bytes_[e+1]<<8},n.ByteBuffer.prototype.readInt32=function(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24},n.ByteBuffer.prototype.readUint32=function(e){return this.readInt32(e)>>>0},n.ByteBuffer.prototype.readInt64=function(e){return new n.Long(this.readInt32(e),this.readInt32(e+4))},n.ByteBuffer.prototype.readUint64=function(e){return new n.Long(this.readUint32(e),this.readUint32(e+4))},n.ByteBuffer.prototype.readFloat32=function(e){return n.int32[0]=this.readInt32(e),n.float32[0]},n.ByteBuffer.prototype.readFloat64=function(e){return n.int32[+!n.isLittleEndian]=this.readInt32(e),n.int32[+!!n.isLittleEndian]=this.readInt32(e+4),n.float64[0]},n.ByteBuffer.prototype.writeInt8=function(e,t){this.bytes_[e]=t},n.ByteBuffer.prototype.writeUint8=function(e,t){this.bytes_[e]=t},n.ByteBuffer.prototype.writeInt16=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8},n.ByteBuffer.prototype.writeUint16=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8},n.ByteBuffer.prototype.writeInt32=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24},n.ByteBuffer.prototype.writeUint32=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24},n.ByteBuffer.prototype.writeInt64=function(e,t){this.writeInt32(e,t.low),this.writeInt32(e+4,t.high)},n.ByteBuffer.prototype.writeUint64=function(e,t){this.writeUint32(e,t.low),this.writeUint32(e+4,t.high)},n.ByteBuffer.prototype.writeFloat32=function(e,t){n.float32[0]=t,this.writeInt32(e,n.int32[0])},n.ByteBuffer.prototype.writeFloat64=function(e,t){n.float64[0]=t,this.writeInt32(e,n.int32[+!n.isLittleEndian]),this.writeInt32(e+4,n.int32[+!!n.isLittleEndian])},n.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+n.SIZEOF_INT+n.FILE_IDENTIFIER_LENGTH)throw Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var e="",t=0;t<n.FILE_IDENTIFIER_LENGTH;t++)e+=String.fromCharCode(this.readInt8(this.position_+n.SIZEOF_INT+t));return e},n.ByteBuffer.prototype.__offset=function(e,t){var r=e-this.readInt32(e);return t<this.readInt16(r)?this.readInt16(r+t):0},n.ByteBuffer.prototype.__union=function(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e},n.ByteBuffer.prototype.__string=function(e,t){e+=this.readInt32(e);var r=this.readInt32(e),i="",o=0;if(e+=n.SIZEOF_INT,t===n.Encoding.UTF8_BYTES)return this.bytes_.subarray(e,e+r);for(;o<r;){var s,a=this.readUint8(e+o++);if(a<192)s=a;else{var l=this.readUint8(e+o++);if(a<224)s=(31&a)<<6|63&l;else{var u=this.readUint8(e+o++);s=a<240?(15&a)<<12|(63&l)<<6|63&u:(7&a)<<18|(63&l)<<12|(63&u)<<6|63&this.readUint8(e+o++)}}s<65536?i+=String.fromCharCode(s):(s-=65536,i+=String.fromCharCode(55296+(s>>10),56320+(1023&s)))}return i},n.ByteBuffer.prototype.__indirect=function(e){return e+this.readInt32(e)},n.ByteBuffer.prototype.__vector=function(e){return e+this.readInt32(e)+n.SIZEOF_INT},n.ByteBuffer.prototype.__vector_len=function(e){return this.readInt32(e+this.readInt32(e))},n.ByteBuffer.prototype.__has_identifier=function(e){if(e.length!=n.FILE_IDENTIFIER_LENGTH)throw Error("FlatBuffers: file identifier must be length "+n.FILE_IDENTIFIER_LENGTH);for(var t=0;t<n.FILE_IDENTIFIER_LENGTH;t++)if(e.charCodeAt(t)!=this.readInt8(this.position_+n.SIZEOF_INT+t))return!1;return!0},n.ByteBuffer.prototype.createLong=function(e,t){return n.Long.create(e,t)}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"u">typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(6018);return __webpack_exports__})())},58530,e=>{"use strict";let t,r,n,i;function o(e,t){e&&e(t)}function s(e){return Object.fromEntries(Object.entries(e).map(([e,t])=>[t,e]))}function a(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}e.s([],90916),e.s(["AudioClassificationPipeline",()=>du,"AutomaticSpeechRecognitionPipeline",()=>dd,"DepthEstimationPipeline",()=>dv,"DocumentQuestionAnsweringPipeline",()=>db,"FeatureExtractionPipeline",()=>da,"FillMaskPipeline",()=>c9,"ImageClassificationPipeline",()=>dp,"ImageFeatureExtractionPipeline",()=>dl,"ImageSegmentationPipeline",()=>df,"ImageToImagePipeline",()=>dw,"ImageToTextPipeline",()=>dh,"ObjectDetectionPipeline",()=>dm,"Pipeline",()=>c6,"QuestionAnsweringPipeline",()=>c7,"SummarizationPipeline",()=>dt,"Text2TextGenerationPipeline",()=>de,"TextClassificationPipeline",()=>c5,"TextGenerationPipeline",()=>di,"TextToAudioPipeline",()=>dy,"TokenClassificationPipeline",()=>c8,"TranslationPipeline",()=>dr,"ZeroShotAudioClassificationPipeline",()=>dc,"ZeroShotClassificationPipeline",()=>ds,"ZeroShotImageClassificationPipeline",()=>dg,"ZeroShotObjectDetectionPipeline",()=>d_,"pipeline",()=>dS],25084);let l=class{constructor(){let e=function(...t){return e._call(...t)};return Object.setPrototypeOf(e,new.target.prototype)}_call(){throw Error("Must implement _call method in subclass")}};function u(e){return e?.prototype?.__proto__?.constructor?.name==="TypedArray"}function c(e){return Number.isInteger(e)||"bigint"==typeof e}function d(e){return null!=e}function h(e){let t=[],r=e;for(;Array.isArray(r);)t.push(r.length),r=r[0];return t}function p(e,t,r){let n=e[t];if(void 0!==n)return delete e[t],n;if(void 0===r)throw Error(`Key ${t} does not exist in object.`);return r}function f(...e){return Array.prototype.concat.apply([],e)}function g(...e){return e.reduce((e,t)=>e.flatMap(e=>t.map(t=>[e,t])))}function m(e,t){return Math.abs((e+t)%(2*t)-t)}var _=e.i(31001),b=e.i(61729),y=e.i(96069),w=_,v=e.i(89626);let x=["wasm"];void 0!==w.default&&w.default?.release?.name==="node"?(t=(void 0).default??void 0,x.unshift("cpu")):(t=v.default??v,"u">typeof navigator&&/iP(hone|od|ad).+16_4.+AppleWebKit/.test(navigator.userAgent)&&(t.env.wasm.simd=!1));let T={get url(){return`file://${e.P("Typeless-Clone/neato-voice/web/node_modules/@xenova/transformers/src/env.js")}`}},{env:S}=t,A="2.17.2",O="u">typeof self&&"caches"in self,k=!$(void 0),E=!$(void 0),M=k&&E,P=M?(void 0).dirname((void 0).dirname(y.default.fileURLToPath(T.url))):"./",I=M?(void 0).join(P,"/.cache/"):null,C="/models/",F=M?(void 0).join(P,C):C;S?.wasm&&(S.wasm.wasmPaths=M?(void 0).join(P,"/dist/"):`https://cdn.jsdelivr.net/npm/@xenova/transformers@${A}/dist/`);let D={backends:{onnx:S,tfjs:{}},__dirname:P,version:A,allowRemoteModels:!0,remoteHost:"https://huggingface.co/",remotePathTemplate:"{model}/resolve/{revision}/",allowLocalModels:!0,localModelPath:F,useFS:k,useBrowserCache:O,useFSCache:k,cacheDir:I,useCustomCache:!1,customCache:null};function $(e){return 0===Object.keys(e).length}e.s(["env",0,D],50590);class L{_CONTENT_TYPE_MAP={txt:"text/plain",html:"text/html",css:"text/css",js:"text/javascript",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif"};constructor(e){if(this.filePath=e,this.headers=new Headers,this.exists=(void 0).existsSync(e),this.exists){this.status=200,this.statusText="OK";let t=(void 0).statSync(e);this.headers.set("content-length",t.size.toString()),this.updateContentType();let r=this;this.body=new ReadableStream({start(e){r.arrayBuffer().then(t=>{e.enqueue(new Uint8Array(t)),e.close()})}})}else this.status=404,this.statusText="Not Found",this.body=null}updateContentType(){let e=this.filePath.toString().split(".").pop().toLowerCase();this.headers.set("content-type",this._CONTENT_TYPE_MAP[e]??"application/octet-stream")}clone(){let e=new L(this.filePath);return e.exists=this.exists,e.status=this.status,e.statusText=this.statusText,e.headers=new Headers(this.headers),e}async arrayBuffer(){return(await (void 0).promises.readFile(this.filePath)).buffer}async blob(){return new Blob([await (void 0).promises.readFile(this.filePath)],{type:this.headers.get("content-type")})}async text(){return await (void 0).promises.readFile(this.filePath,"utf8")}async json(){return JSON.parse(await this.text())}}function N(e,t=null,r=null){let n;try{n=new URL(e)}catch(e){return!1}return(!t||!!t.includes(n.protocol))&&(!r||!!r.includes(n.hostname))}async function R(e){if(D.useFS&&!N(e,["http:","https:","blob:"]))return new L(e);if(void 0===_.default||_.default?.release?.name!=="node")return fetch(e);{let t=!!_.default.env?.TESTING_REMOTELY,r=D.version,n=new Headers;if(n.set("User-Agent",`transformers.js/${r}; is_ci/${t};`),N(e,["http:","https:"],["huggingface.co","hf.co"])){let e=_.default.env?.HF_TOKEN??_.default.env?.HF_ACCESS_TOKEN;e&&n.set("Authorization",`Bearer ${e}`)}return fetch(e,{headers:n})}}let j={400:"Bad request error occurred while trying to load file",401:"Unauthorized access to file",403:"Forbidden access to file",404:"Could not locate file",408:"Request timeout error occurred while trying to load file",500:"Internal server error error occurred while trying to load file",502:"Bad gateway error occurred while trying to load file",503:"Service unavailable error occurred while trying to load file",504:"Gateway timeout error occurred while trying to load file"};function z(e,t,r){if(!r)return null;let n=j[e]??`Error (${e}) occurred while trying to load file`;throw Error(`${n}: "${t}".`)}class B{constructor(e){this.path=e}async match(e){let t=new L((void 0).join(this.path,e));return t.exists?t:void 0}async put(e,t){let r=b.Buffer.from(await t.arrayBuffer()),n=(void 0).join(this.path,e);try{await (void 0).promises.mkdir((void 0).dirname(n),{recursive:!0}),await (void 0).promises.writeFile(n,r)}catch(e){console.warn("An error occurred while writing the file to cache:",e)}}}async function U(e,...t){for(let r of t)try{let t=await e.match(r);if(t)return t}catch(e){continue}}async function V(e,t,r=!0,n={}){let i,s,a,l;if(!D.allowLocalModels){if(n.local_files_only)throw Error("Invalid configuration detected: local models are disabled (`env.allowLocalModels=false`) but you have requested to only use local models (`local_files_only=true`).");else if(!D.allowRemoteModels)throw Error("Invalid configuration detected: both local and remote models are disabled. Fix by setting `env.allowLocalModels` or `env.allowRemoteModels` to `true`.")}if(o(n.progress_callback,{status:"initiate",name:e,file:t}),!i&&D.useBrowserCache){if("u"<typeof caches)throw Error("Browser cache is not available in this environment.");try{i=await caches.open("transformers-cache")}catch(e){console.warn("An error occurred while opening the browser cache:",e)}}if(!i&&D.useFSCache&&(i=new B(n.cache_dir??D.cacheDir)),!i&&D.useCustomCache){if(!D.customCache)throw Error("`env.useCustomCache=true`, but `env.customCache` is not defined.");if(!D.customCache.match||!D.customCache.put)throw Error("`env.customCache` must be an object which implements the `match` and `put` functions of the Web Cache API. For more information, see https://developer.mozilla.org/en-US/docs/Web/API/Cache");i=D.customCache}let u=n.revision??"main",c=W(e,t),d=W(D.localModelPath,c),h=W(D.remoteHost,D.remotePathTemplate.replaceAll("{model}",e).replaceAll("{revision}",encodeURIComponent(u)),t),p="main"===u?c:W(e,u,t),f=i instanceof B?p:h,g=!1;i&&(a=await U(i,d,f));let m=void 0!==a;if(void 0===a){if(D.allowLocalModels)if(N(c,["http:","https:"])){if(n.local_files_only)throw Error(`\`local_files_only=true\`, but attempted to load a remote file from: ${c}.`);else if(!D.allowRemoteModels)throw Error(`\`env.allowRemoteModels=false\`, but attempted to load a remote file from: ${c}.`)}else try{a=await R(d),s=d}catch(e){console.warn(`Unable to load from local path "${d}": "${e}"`)}if(void 0===a||404===a.status){if(n.local_files_only||!D.allowRemoteModels)if(!r)return null;else throw Error(`\`local_files_only=true\` or \`env.allowRemoteModels=false\` and file was not found locally at "${d}".`);if(200!==(a=await R(h)).status)return z(a.status,h,r);s=f}g=i&&"u">typeof Response&&a instanceof Response&&200===a.status}o(n.progress_callback,{status:"download",name:e,file:t});let _={status:"progress",name:e,file:t};return n.progress_callback?m&&"u">typeof navigator&&/firefox/i.test(navigator.userAgent)?(l=new Uint8Array(await a.arrayBuffer()),o(n.progress_callback,{..._,progress:100,loaded:l.length,total:l.length})):l=await q(a,e=>{o(n.progress_callback,{..._,...e})}):l=new Uint8Array(await a.arrayBuffer()),g&&s&&await i.match(s)===void 0&&await i.put(s,new Response(l,{headers:a.headers})).catch(e=>{console.warn(`Unable to add response to browser cache: ${e}.`)}),o(n.progress_callback,{status:"done",name:e,file:t}),l}async function G(e,t,r=!0,n={}){let i=await V(e,t,r,n);return null===i?{}:JSON.parse(new TextDecoder("utf-8").decode(i))}async function q(e,t){let r=e.headers.get("Content-Length");null===r&&console.warn("Unable to determine content-length from response headers. Will expand buffer when needed.");let n=parseInt(r??"0"),i=new Uint8Array(n),o=0,s=e.body.getReader();async function a(){let{done:e,value:r}=await s.read();if(e)return;let l=o+r.length;if(l>n){let e=new Uint8Array(n=l);e.set(i),i=e}return i.set(r,o),t({progress:(o=l)/n*100,loaded:o,total:n}),a()}return await a(),i}function W(...e){return(e=e.map((t,r)=>(r&&(t=t.replace(RegExp("^/"),"")),r!==e.length-1&&(t=t.replace(RegExp("/$"),"")),t))).join("/")}function H(e,[t,r,n],[i,o],s="bilinear",a=!1){let l=o/n,u=i/r,c=new e.constructor(i*o*t),d=r*n,h=i*o;for(let s=0;s<i;++s)for(let i=0;i<o;++i){let a=s*o+i,p=(i+.5)/l-.5,f=(s+.5)/u-.5,g=Math.floor(p),m=Math.floor(f),_=Math.min(g+1,n-1),b=Math.min(m+1,r-1),y=p-(g=Math.max(g,0)),w=f-(m=Math.max(m,0)),v=(1-y)*(1-w),x=y*(1-w),T=(1-y)*w,S=y*w,A=m*n,O=b*n,k=A+g,E=A+_,M=O+g,P=O+_;for(let r=0;r<t;++r){let t=r*d;c[r*h+a]=v*e[t+k]+x*e[t+E]+T*e[t+M]+S*e[t+P]}}return c}function X(e,t,r){let n=Array(r.length),i=Array(r.length);for(let e=r.length-1,o=1;e>=0;--e)i[e]=o,n[e]=t[r[e]],o*=n[e];let o=r.map((e,t)=>i[r.indexOf(t)]),s=new e.constructor(e.length);for(let r=0;r<e.length;++r){let n=0;for(let e=t.length-1,i=r;e>=0;--e)n+=i%t[e]*o[e],i=Math.floor(i/t[e]);s[n]=e[r]}return[s,n]}function Y(e){let t=er(e)[0],r=e.map(e=>Math.exp(e-t)),n=r.reduce((e,t)=>e+t,0);return r.map(e=>e/n)}function K(e){return Y(e).map(e=>Math.log(e))}function Q(e,t){let r=0;for(let n=0;n<e.length;++n)r+=e[n]*t[n];return r}function Z(e,t=0){return e=Array.from(e).map((e,t)=>[t,e]).sort((e,t)=>t[1]-e[1]),null!==t&&t>0&&(e=e.slice(0,t)),e}function J(e,t){return Q(e,t)/(ee(e)*ee(t))}function ee(e){return Math.sqrt(e.reduce((e,t)=>e+t*t,0))}function et(e){if(0===e.length)throw Error("Array must not be empty");let t=e[0],r=0;for(let n=1;n<e.length;++n)e[n]<t&&(t=e[n],r=n);return[t,r]}function er(e){if(0===e.length)throw Error("Array must not be empty");let t=e[0],r=0;for(let n=1;n<e.length;++n)e[n]>t&&(t=e[n],r=n);return[Number(t),r]}function en(e){return e>0&&(e&e-1)==0}class ei{constructor(e){if(this.size=0|e,this.size<=1||!en(this.size))throw Error("FFT size must be a power of two larger than 1");this._csize=e<<1,this.table=new Float64Array(2*this.size);for(let e=0;e<this.table.length;e+=2){const t=Math.PI*e/this.size;this.table[e]=Math.cos(t),this.table[e+1]=-Math.sin(t)}let t=0;for(let e=1;this.size>e;e<<=1)++t;this._width=t%2==0?t-1:t,this._bitrev=new Int32Array(1<<this._width);for(let e=0;e<this._bitrev.length;++e){this._bitrev[e]=0;for(let t=0;t<this._width;t+=2){const r=this._width-t-2;this._bitrev[e]|=(e>>>t&3)<<r}}}createComplexArray(){return new Float64Array(this._csize)}fromComplexArray(e,t){let r=t||Array(e.length>>>1);for(let t=0;t<e.length;t+=2)r[t>>>1]=e[t];return r}toComplexArray(e,t){let r=t||this.createComplexArray();for(let t=0;t<r.length;t+=2)r[t]=e[t>>>1],r[t+1]=0;return r}transform(e,t){if(e===t)throw Error("Input and output buffers must be different");this._transform4(e,t,1)}realTransform(e,t){if(e===t)throw Error("Input and output buffers must be different");this._realTransform4(e,t,1)}inverseTransform(e,t){if(e===t)throw Error("Input and output buffers must be different");this._transform4(e,t,-1);for(let t=0;t<e.length;++t)e[t]/=this.size}_transform4(e,t,r){let n,i,o=this._csize,s=1<<this._width,a=o/s<<1,l=this._bitrev;if(4===a)for(n=0,i=0;n<o;n+=a,++i){let r=l[i];this._singleTransform2(t,e,n,r,s)}else for(n=0,i=0;n<o;n+=a,++i){let o=l[i];this._singleTransform4(t,e,n,o,s,r)}let u=this.table;for(s>>=2;s>=2;s>>=2){let t=(a=o/s<<1)>>>2;for(n=0;n<o;n+=a){let i=n+t-1;for(let o=n,a=0;o<i;o+=2,a+=s){let n=o,i=n+t,s=i+t,l=s+t,c=e[n],d=e[n+1],h=e[i],p=e[i+1],f=e[s],g=e[s+1],m=e[l],_=e[l+1],b=u[a],y=r*u[a+1],w=h*b-p*y,v=h*y+p*b,x=u[2*a],T=r*u[2*a+1],S=f*x-g*T,A=f*T+g*x,O=u[3*a],k=r*u[3*a+1],E=m*O-_*k,M=m*k+_*O,P=c+S,I=d+A,C=c-S,F=d-A,D=w+E,$=v+M,L=r*(w-E),N=r*(v-M);e[n]=P+D,e[n+1]=I+$,e[i]=C+N,e[i+1]=F-L,e[s]=P-D,e[s+1]=I-$,e[l]=C-N,e[l+1]=F+L}}}}_singleTransform2(e,t,r,n,i){let o=e[n],s=e[n+1],a=e[n+i],l=e[n+i+1];t[r]=o+a,t[r+1]=s+l,t[r+2]=o-a,t[r+3]=s-l}_singleTransform4(e,t,r,n,i,o){let s=2*i,a=3*i,l=e[n],u=e[n+1],c=e[n+i],d=e[n+i+1],h=e[n+s],p=e[n+s+1],f=e[n+a],g=e[n+a+1],m=l+h,_=u+p,b=l-h,y=u-p,w=c+f,v=d+g,x=o*(c-f),T=o*(d-g);t[r]=m+w,t[r+1]=_+v,t[r+2]=b+T,t[r+3]=y-x,t[r+4]=m-w,t[r+5]=_-v,t[r+6]=b-T,t[r+7]=y+x}_realTransform4(e,t,r){let n,i,o=this._csize,s=1<<this._width,a=o/s<<1,l=this._bitrev;if(4===a)for(n=0,i=0;n<o;n+=a,++i){let r=l[i];this._singleRealTransform2(t,e,n,r>>>1,s>>>1)}else for(n=0,i=0;n<o;n+=a,++i){let o=l[i];this._singleRealTransform4(t,e,n,o>>>1,s>>>1,r)}let u=this.table;for(s>>=2;s>=2;s>>=2){let t=(a=o/s<<1)>>>1,i=t>>>1,l=i>>>1;for(n=0;n<o;n+=a)for(let o=0,a=0;o<=l;o+=2,a+=s){let s=n+o,c=s+i,d=c+i,h=d+i,p=e[s],f=e[s+1],g=e[c],m=e[c+1],_=e[d],b=e[d+1],y=e[h],w=e[h+1],v=p,x=f,T=u[a],S=r*u[a+1],A=g*T-m*S,O=g*S+m*T,k=u[2*a],E=r*u[2*a+1],M=_*k-b*E,P=_*E+b*k,I=u[3*a],C=r*u[3*a+1],F=y*I-w*C,D=y*C+w*I,$=v+M,L=x+P,N=v-M,R=x-P,j=A+F,z=O+D,B=r*(A-F),U=r*(O-D);if(e[s]=$+j,e[s+1]=L+z,e[c]=N+U,e[c+1]=R-B,0===o){e[d]=$-j,e[d+1]=L-z;continue}if(o===l)continue;let V=n+i-o,G=n+t-o;e[V]=N-r*U,e[V+1]=-R-r*B,e[G]=$-r*j,e[G+1]=-L+r*z}}let c=o>>>1;for(let t=2;t<c;t+=2)e[o-t]=e[t],e[o-t+1]=-e[t+1]}_singleRealTransform2(e,t,r,n,i){let o=e[n],s=e[n+i];t[r]=o+s,t[r+1]=0,t[r+2]=o-s,t[r+3]=0}_singleRealTransform4(e,t,r,n,i,o){let s=2*i,a=3*i,l=e[n],u=e[n+i],c=e[n+s],d=e[n+a],h=l+c,p=l-c,f=u+d,g=o*(u-d);t[r]=h+f,t[r+1]=0,t[r+2]=p,t[r+3]=-g,t[r+4]=h-f,t[r+5]=0,t[r+6]=p,t[r+7]=g}}class eo{constructor(e){const t=2*(e-1),r=2*(2*e-1),n=2**Math.ceil(Math.log2(r));this.bufferSize=n,this._a=t;const i=new Float64Array(r),o=new Float64Array(n);this._chirpBuffer=new Float64Array(n),this._buffer1=new Float64Array(n),this._buffer2=new Float64Array(n),this._outBuffer1=new Float64Array(n),this._outBuffer2=new Float64Array(n);const s=-2*Math.PI/e,a=Math.cos(s),l=Math.sin(s);for(let t=0;t<r>>1;++t){const r=(t+1-e)**2/2,n=Math.sqrt(a**2+l**2)**r,s=r*Math.atan2(l,a),u=2*t;i[u]=n*Math.cos(s),i[u+1]=n*Math.sin(s),o[u]=i[u],o[u+1]=-i[u+1]}this._slicedChirpBuffer=i.subarray(t,r),this._f=new ei(n>>1),this._f.transform(this._chirpBuffer,o)}_transform(e,t,r){let n=this._buffer1,i=this._buffer2,o=this._outBuffer1,s=this._outBuffer2,a=this._chirpBuffer,l=this._slicedChirpBuffer,u=this._a;if(r)for(let e=0;e<l.length;e+=2){let r=e+1,i=t[e>>1];n[e]=i*l[e],n[r]=i*l[r]}else for(let e=0;e<l.length;e+=2){let r=e+1;n[e]=t[e]*l[e]-t[r]*l[r],n[r]=t[e]*l[r]+t[r]*l[e]}this._f.transform(o,n);for(let e=0;e<a.length;e+=2){let t=e+1;i[e]=o[e]*a[e]-o[t]*a[t],i[t]=o[e]*a[t]+o[t]*a[e]}this._f.inverseTransform(s,i);for(let t=0;t<s.length;t+=2){let r=s[t+u],n=s[t+u+1],i=l[t],o=l[t+1];e[t]=r*i-n*o,e[t+1]=r*o+n*i}}transform(e,t){this._transform(e,t,!1)}realTransform(e,t){this._transform(e,t,!0)}}class es{constructor(e){this.fft_length=e,this.isPowerOfTwo=en(e),this.isPowerOfTwo?(this.fft=new ei(e),this.outputBufferSize=2*e):(this.fft=new eo(e),this.outputBufferSize=this.fft.bufferSize)}realTransform(e,t){this.fft.realTransform(e,t)}transform(e,t){this.fft.transform(e,t)}}function ea(e,t){if(t%2==0||t<=0)throw Error("Window size must be a positive odd number");let r=new e.constructor(e.length),n=new e.constructor(t),i=Math.floor(t/2);for(let t=0;t<e.length;++t){let o=0;for(let r=-i;r<=i;++r){let i=t+r;i<0?i=Math.abs(i):i>=e.length&&(i=2*(e.length-1)-i),n[o++]=e[i]}n.sort(),r[t]=n[i]}return r}function el(e,t){let r=Math.pow(10,t);return Math.round(e*r)/r}function eu(e){let t=Math.round(e);return Math.abs(e)%1==.5?t%2==0?t:t-1:t}e.s(["FFT",()=>es,"bankers_round",()=>eu,"cos_sim",()=>J,"dot",()=>Q,"getTopItems",()=>Z,"interpolate_data",()=>H,"log_softmax",()=>K,"magnitude",()=>ee,"max",()=>er,"medianFilter",()=>ea,"min",()=>et,"permute_data",()=>X,"round",()=>el,"softmax",()=>Y],32494);let ec=Object.freeze({float32:Float32Array,float64:Float64Array,string:Array,int8:Int8Array,uint8:Uint8Array,int16:Int16Array,uint16:Uint16Array,int32:Int32Array,uint32:Uint32Array,int64:BigInt64Array,uint64:BigUint64Array,bool:Uint8Array}),ed=t.Tensor;class eh{dims;type;data;size;constructor(...e){return e[0]instanceof ed?Object.assign(this,e[0]):Object.assign(this,new ed(e[0],e[1],e[2])),new Proxy(this,{get:(e,t)=>{if("string"==typeof t){let r=Number(t);if(Number.isInteger(r))return e._getitem(r)}return e[t]},set:(e,t,r)=>e[t]=r})}*[Symbol.iterator](){let[e,...t]=this.dims;if(t.length>0){let r=t.reduce((e,t)=>e*t);for(let n=0;n<e;++n)yield this._subarray(n,r,t)}else yield*this.data}_getitem(e){let[t,...r]=this.dims;if(e=ew(e,t),!(r.length>0))return new eh(this.type,[this.data[e]],r);{let t=r.reduce((e,t)=>e*t);return this._subarray(e,t,r)}}indexOf(e){for(let t=0;t<this.data.length;++t)if(this.data[t]==e)return t;return -1}_subarray(e,t,r){let n=e*t,i=(e+1)*t,o="subarray"in this.data?this.data.subarray(n,i):this.data.slice(n,i);return new eh(this.type,o,r)}item(){if(1!==this.data.length)throw Error(`a Tensor with ${this.data.length} elements cannot be converted to Scalar`);return this.data[0]}tolist(){return ep(this.data,this.dims)}sigmoid(){return this.clone().sigmoid_()}sigmoid_(){for(let e=0;e<this.data.length;++e)this.data[e]=1/(1+Math.exp(-this.data[e]));return this}mul(e){return this.clone().mul_(e)}mul_(e){for(let t=0;t<this.data.length;++t)this.data[t]*=e;return this}add(e){return this.clone().add_(e)}add_(e){for(let t=0;t<this.data.length;++t)this.data[t]+=e;return this}clone(){return new eh(this.type,this.data.slice(),this.dims.slice())}slice(...e){let t=[],r=[];for(let n=0;n<this.dims.length;++n){let i=e[n];if(null==i)r.push([0,this.dims[n]]),t.push(this.dims[n]);else if("number"==typeof i)i=ew(i,this.dims[n],n),r.push([i,i+1]);else if(Array.isArray(i)&&2===i.length){if(i[0]>i[1])throw Error(`Invalid slice: ${i}`);let e=[Math.max(i[0],0),Math.min(i[1],this.dims[n])];r.push(e),t.push(e[1]-e[0])}else throw Error(`Invalid slice: ${i}`)}let n=r.map(([e,t])=>t-e),i=n.reduce((e,t)=>e*t),o=new this.data.constructor(i),s=this.stride();for(let e=0;e<i;++e){let t=0;for(let i=n.length-1,o=e;i>=0;--i){let e=n[i];t+=(o%e+r[i][0])*s[i],o=Math.floor(o/e)}o[e]=this.data[t]}return new eh(this.type,o,t)}permute(...e){return ef(this,e)}transpose(...e){return this.permute(...e)}sum(e=null,t=!1){return this.norm(1,e,t)}norm(e="fro",t=null,r=!1){if("fro"===e)e=2;else if("string"==typeof e)throw Error(`Unsupported norm: ${e}`);if(null===t){let t=this.data.reduce((t,r)=>t+r**e,0)**(1/e);return new eh(this.type,[t],[])}t=ew(t,this.dims.length);let n=this.dims.slice();n[t]=1;let i=new this.data.constructor(this.data.length/this.dims[t]);for(let r=0;r<this.data.length;++r){let o=0;for(let e=this.dims.length-1,i=r,s=1;e>=0;--e){let r=this.dims[e];e!==t&&(o+=i%r*s,s*=n[e]),i=Math.floor(i/r)}i[o]+=this.data[r]**e}if(1!==e)for(let t=0;t<i.length;++t)i[t]=i[t]**(1/e);return r||n.splice(t,1),new eh(this.type,i,n)}normalize_(e=2,t=1){t=ew(t,this.dims.length);let r=this.norm(e,t,!0);for(let e=0;e<this.data.length;++e){let n=0;for(let r=this.dims.length-1,i=e,o=1;r>=0;--r){let e=this.dims[r];r!==t&&(n+=i%e*o,o*=this.dims[r]),i=Math.floor(i/e)}this.data[e]/=r.data[n]}return this}normalize(e=2,t=1){return this.clone().normalize_(e,t)}stride(){return eO(this.dims)}squeeze(e=null){return new eh(this.type,this.data,eb(this.dims,e))}squeeze_(e=null){return this.dims=eb(this.dims,e),this}unsqueeze(e=null){return new eh(this.type,this.data,ey(this.dims,e))}unsqueeze_(e=null){return this.dims=ey(this.dims,e),this}flatten_(e=0,t=-1){t=(t+this.dims.length)%this.dims.length;let r=this.dims.slice(0,e),n=this.dims.slice(e,t+1),i=this.dims.slice(t+1);return this.dims=[...r,n.reduce((e,t)=>e*t,1),...i],this}flatten(e=0,t=-1){return this.clone().flatten_(e,t)}view(...e){let t=-1;for(let r=0;r<e.length;++r)if(-1===e[r]){if(-1!==t)throw Error("Only one dimension can be inferred");t=r}if(-1!==t){let r=e.reduce((e,r,n)=>n!==t?e*r:e,1);e[t]=this.data.length/r}return new eh(this.type,this.data,e)}neg_(){for(let e=0;e<this.data.length;++e)this.data[e]=-this.data[e];return this}neg(){return this.clone().neg_()}clamp_(e,t){for(let r=0;r<this.data.length;++r)this.data[r]=Math.min(Math.max(this.data[r],e),t);return this}clamp(e,t){return this.clone().clamp_(e,t)}round_(){for(let e=0;e<this.data.length;++e)this.data[e]=Math.round(this.data[e]);return this}round(){return this.clone().round_()}to(e){if(this.type===e)return this;if(!ec.hasOwnProperty(e))throw Error(`Unsupported type: ${e}`);return new eh(e,ec[e].from(this.data),this.dims)}}function ep(e,t){let r=e.length;if(r!==t.reduce((e,t)=>e*t))throw Error(`cannot reshape array of size ${r} into shape (${t})`);let n=e;for(let e=t.length-1;e>=0;e--)n=n.reduce((r,n)=>{let i=r[r.length-1];return i.length<t[e]?i.push(n):r.push([n]),r},[[]]);return n[0]}function ef(e,t){let[r,n]=X(e.data,e.dims,t);return new eh(e.type,r,n)}function eg(e,[t,r],n="bilinear",i=!1){let o=e.dims.at(-3)??1,s=e.dims.at(-2),a=e.dims.at(-1),l=H(e.data,[o,s,a],[t,r],n,i);return new eh(e.type,l,[o,t,r])}function em(e,t){let r=[e.dims[0],e.dims[2]],n=new e.data.constructor(r[0]*r[1]),[i,o,s]=e.dims,a=0;for(let r=0;r<i;++r){let i=r*s*o;for(let l=0;l<s;++l){let u=0,c=0,d=r*o,h=i+l;for(let r=0;r<o;++r){let n=Number(t.data[d+r]);c+=n,u+=e.data[h+r*s]*n}let p=u/c;n[a++]=p}}return new eh(e.type,n,r)}function e_(e,t,{eps:r=1e-5}={}){if(2!==e.dims.length)throw Error("`layer_norm` currently only supports 2D input.");let[n,i]=e.dims;if(1!==t.length&&t[0]!==i)throw Error("`normalized_shape` must be a 1D array with shape `[input.dims[1]]`.");let[o,s]=eT(e,1,0,!0),a=new e.data.constructor(e.data.length);for(let t=0;t<n;++t){let n=t*i;for(let l=0;l<i;++l){let i=n+l;a[i]=(e.data[i]-s.data[t])/(o.data[t]+r)}}return new eh(e.type,a,e.dims)}function eb(e,t){return e=e.slice(),null===t?e=e.filter(e=>1!==e):"number"==typeof t?1===e[t]&&e.splice(t,1):Array.isArray(t)&&(e=e.filter((e,r)=>1!==e||!t.includes(r))),e}function ey(e,t){return t=ew(t,e.length+1),(e=e.slice()).splice(t,0,1),e}function ew(e,t,r=null){if(e<-t||e>=t)throw Error(`IndexError: index ${e} is out of bounds for dimension${null===r?"":" "+r} with size ${t}`);return e<0&&(e=(e%t+t)%t),e}function ev(e,t=0){t=ew(t,e[0].dims.length);let r=e[0].dims.slice();r[t]=e.reduce((e,r)=>e+r.dims[t],0);let n=r.reduce((e,t)=>e*t,1),i=new e[0].data.constructor(n),o=e[0].type;if(0===t){let t=0;for(let r of e)i.set(r.data,t),t+=r.data.length}else{let n=0;for(let o=0;o<e.length;++o){let s=e[o];for(let e=0;e<s.data.length;++e){let o=0;for(let i=s.dims.length-1,a=e,l=1;i>=0;--i){let e=s.dims[i],u=a%e;i===t&&(u+=n),o+=u*l,l*=r[i],a=Math.floor(a/e)}i[o]=s.data[e]}n+=s.dims[t]}}return new eh(o,i,r)}function ex(e,t=0){return ev(e.map(e=>e.unsqueeze(t)),t)}function eT(e,t=null,r=1,n=!1){if(null===t){let t=e.data.reduce((e,t)=>e+t,0)/e.data.length,n=Math.sqrt(e.data.reduce((e,r)=>e+(r-t)**2,0)/(e.data.length-r)),i=new eh(e.type,[t],[]);return[new eh(e.type,[n],[]),i]}t=ew(t,e.dims.length);let i=eS(e,t,n),o=e.dims.slice();o[t]=1;let s=new e.data.constructor(e.data.length/e.dims[t]);for(let r=0;r<e.data.length;++r){let n=0;for(let i=e.dims.length-1,s=r,a=1;i>=0;--i){let r=e.dims[i];i!==t&&(n+=s%r*a,a*=o[i]),s=Math.floor(s/r)}s[n]+=(e.data[r]-i.data[n])**2}for(let n=0;n<s.length;++n)s[n]=Math.sqrt(s[n]/(e.dims[t]-r));return n||o.splice(t,1),[new eh(e.type,s,o),i]}function eS(e,t=null,r=!1){if(null===t){let t=e.data.reduce((e,t)=>e+t,0);return new eh(e.type,[t/e.data.length],[])}t=ew(t,e.dims.length);let n=e.dims.slice();n[t]=1;let i=new e.data.constructor(e.data.length/e.dims[t]);for(let r=0;r<e.data.length;++r){let o=0;for(let i=e.dims.length-1,s=r,a=1;i>=0;--i){let r=e.dims[i];i!==t&&(o+=s%r*a,a*=n[i]),s=Math.floor(s/r)}i[o]+=e.data[r]}if(1!==e.dims[t])for(let r=0;r<i.length;++r)i[r]=i[r]/e.dims[t];return r||n.splice(t,1),new eh(e.type,i,n)}function eA(e){let[t,r]=e.dims,n=[t+1,r+1],i=new eh("float32",new Float32Array(n[0]*n[1]).fill(1/0),n),o=new eh("float32",new Float32Array(n[0]*n[1]).fill(-1),n);i[0].data[0]=0;for(let n=1;n<r+1;++n)for(let r=1;r<t+1;++r){let t,s,a=i[r-1][n-1].item(),l=i[r-1][n].item(),u=i[r][n-1].item();a<l&&a<u?(t=a,s=0):l<a&&l<u?(t=l,s=1):(t=u,s=2),i[r].data[n]=e[r-1][n-1].item()+t,o[r].data[n]=s}let s=t,a=r;o.data.fill(2,0,n[1]);for(let e=0;e<n[0];++e)o[e].data[0]=1;let l=[],u=[];for(;s>0||a>0;)switch(l.push(s-1),u.push(a-1),o[s][a].item()){case 0:--s,--a;break;case 1:--s;break;case 2:--a;break;default:throw Error(`Internal error in dynamic time warping. Unexpected trace[${s}, ${a}]. Please file a bug report.`)}return l.reverse(),u.reverse(),[l,u]}function eO(e){let t=Array(e.length);for(let r=e.length-1,n=1;r>=0;--r)t[r]=n,n*=e[r];return t}function ek(e){return new eh("int64",new BigInt64Array(e.reduce((e,t)=>e*t,1)).fill(1n),e)}function eE(e){return ek(e.dims)}function eM(e,t){if(2!==e.dims.length)throw Error("The tensor must have 2 dimensions");if(e.dims.at(-1)%8!=0)throw Error("The last dimension of the tensor must be a multiple of 8");if(!["binary","ubinary"].includes(t))throw Error("The precision must be either 'binary' or 'ubinary'");let r="binary"===t,n=r?"int8":"uint8",i=r?Int8Array:Uint8Array,o=e.data,s=new i(o.length/8);for(let e=0;e<o.length;++e){let t=+(o[e]>0),n=Math.floor(e/8),i=e%8;s[n]|=t<<7-i,r&&0===i&&(s[n]-=128)}return new eh(n,s,[e.dims[0],e.dims[1]/8])}e.s(["Tensor",()=>eh,"cat",()=>ev,"dynamicTimeWarping",()=>eA,"interpolate",()=>eg,"layer_norm",()=>e_,"mean",()=>eS,"mean_pooling",()=>em,"ones",()=>ek,"ones_like",()=>eE,"permute",()=>ef,"quantize_embeddings",()=>eM,"stack",()=>ex,"std_mean",()=>eT],86555);class eP{constructor(e=(e,t)=>e>t){this._heap=[],this._comparator=e}get size(){return this._heap.length}isEmpty(){return 0===this.size}peek(){return this._heap[0]}push(...e){return this.extend(e)}extend(e){for(let t of e)this._heap.push(t),this._siftUp();return this.size}pop(){let e=this.peek(),t=this.size-1;return t>0&&this._swap(0,t),this._heap.pop(),this._siftDown(),e}replace(e){let t=this.peek();return this._heap[0]=e,this._siftDown(),t}_parent(e){return(e+1>>>1)-1}_left(e){return(e<<1)+1}_right(e){return e+1<<1}_greater(e,t){return this._comparator(this._heap[e],this._heap[t])}_swap(e,t){let r=this._heap[e];this._heap[e]=this._heap[t],this._heap[t]=r}_siftUp(){let e=this.size-1;for(;e>0&&this._greater(e,this._parent(e));)this._swap(e,this._parent(e)),e=this._parent(e)}_siftDown(){let e=0;for(;this._left(e)<this.size&&this._greater(this._left(e),e)||this._right(e)<this.size&&this._greater(this._right(e),e);){let t=this._right(e)<this.size&&this._greater(this._right(e),this._left(e))?this._right(e):this._left(e);this._swap(e,t),e=t}}}class eI{constructor(){this.root=eC.default()}extend(e){for(let t of e)this.push(t)}push(e){let t=this.root;for(let r of e){let e=t.children.get(r);void 0===e&&(e=eC.default(),t.children.set(r,e)),t=e}t.isLeaf=!0}*commonPrefixSearch(e){let t=this.root,r="";for(let n=0;n<e.length&&void 0!==t;++n){let i=e[n];r+=i,void 0!==(t=t.children.get(i))&&t.isLeaf&&(yield r)}}}class eC{constructor(e,t){this.isLeaf=e,this.children=t}static default(){return new eC(!1,new Map)}}class eF{constructor(e,t,r){this.sentence=e,this.len=e.length,this.bosTokenId=t,this.eosTokenId=r,this.nodes=[],this.beginNodes=Array.from({length:this.len+1},()=>[]),this.endNodes=Array.from({length:this.len+1},()=>[]);const n=new eD(this.bosTokenId,0,0,0,0),i=new eD(this.eosTokenId,1,this.len,0,0);this.nodes.push(n.clone()),this.nodes.push(i.clone()),this.beginNodes[this.len].push(i),this.endNodes[0].push(n)}insert(e,t,r,n){let i=new eD(n,this.nodes.length,e,t,r);this.beginNodes[e].push(i),this.endNodes[e+t].push(i),this.nodes.push(i)}viterbi(){let e=this.len,t=0;for(;t<=e;){if(0==this.beginNodes[t].length)return[];for(let e of this.beginNodes[t]){e.prev=null;let r=0,n=null;for(let i of this.endNodes[t]){let t=i.backtraceScore+e.score;(null===n||t>r)&&(n=i.clone(),r=t)}if(null===n)return[];e.prev=n,e.backtraceScore=r}++t}let r=[],n=this.beginNodes[e][0].prev;if(null===n)return[];let i=n.clone();for(;null!==i.prev;)r.push(i.clone()),i=i.clone().prev.clone();return r.reverse(),r}piece(e){return this.sentence.slice(e.pos,e.pos+e.length)}tokens(){return this.viterbi().map(e=>this.piece(e))}tokenIds(){return this.viterbi().map(e=>e.tokenId)}}class eD{constructor(e,t,r,n,i){this.tokenId=e,this.nodeId=t,this.pos=r,this.length=n,this.score=i,this.prev=null,this.backtraceScore=0}clone(){let e=new eD(this.tokenId,this.nodeId,this.pos,this.length,this.score);return e.prev=this.prev,e.backtraceScore=this.backtraceScore,e}}var e$=Object.freeze({Text:"Text",NumericLiteral:"NumericLiteral",BooleanLiteral:"BooleanLiteral",StringLiteral:"StringLiteral",Identifier:"Identifier",Equals:"Equals",OpenParen:"OpenParen",CloseParen:"CloseParen",OpenStatement:"OpenStatement",CloseStatement:"CloseStatement",OpenExpression:"OpenExpression",CloseExpression:"CloseExpression",OpenSquareBracket:"OpenSquareBracket",CloseSquareBracket:"CloseSquareBracket",OpenCurlyBracket:"OpenCurlyBracket",CloseCurlyBracket:"CloseCurlyBracket",Comma:"Comma",Dot:"Dot",Colon:"Colon",Pipe:"Pipe",CallOperator:"CallOperator",AdditiveBinaryOperator:"AdditiveBinaryOperator",MultiplicativeBinaryOperator:"MultiplicativeBinaryOperator",ComparisonBinaryOperator:"ComparisonBinaryOperator",UnaryOperator:"UnaryOperator",Set:"Set",If:"If",For:"For",In:"In",Is:"Is",NotIn:"NotIn",Else:"Else",EndIf:"EndIf",ElseIf:"ElseIf",EndFor:"EndFor",And:"And",Or:"Or",Not:"UnaryOperator"}),eL=Object.freeze({set:e$.Set,for:e$.For,in:e$.In,is:e$.Is,if:e$.If,else:e$.Else,endif:e$.EndIf,elif:e$.ElseIf,endfor:e$.EndFor,and:e$.And,or:e$.Or,not:e$.Not,"not in":e$.NotIn,true:e$.BooleanLiteral,false:e$.BooleanLiteral}),eN=class{constructor(e,t){this.value=e,this.type=t}};function eR(e){return/\w/.test(e)}function ej(e){return/[0-9]/.test(e)}var ez=[["{%",e$.OpenStatement],["%}",e$.CloseStatement],["{{",e$.OpenExpression],["}}",e$.CloseExpression],["(",e$.OpenParen],[")",e$.CloseParen],["{",e$.OpenCurlyBracket],["}",e$.CloseCurlyBracket],["[",e$.OpenSquareBracket],["]",e$.CloseSquareBracket],[",",e$.Comma],[".",e$.Dot],[":",e$.Colon],["|",e$.Pipe],["<=",e$.ComparisonBinaryOperator],[">=",e$.ComparisonBinaryOperator],["==",e$.ComparisonBinaryOperator],["!=",e$.ComparisonBinaryOperator],["<",e$.ComparisonBinaryOperator],[">",e$.ComparisonBinaryOperator],["+",e$.AdditiveBinaryOperator],["-",e$.AdditiveBinaryOperator],["*",e$.MultiplicativeBinaryOperator],["/",e$.MultiplicativeBinaryOperator],["%",e$.MultiplicativeBinaryOperator],["=",e$.Equals]],eB=new Map([["n","\n"],["t","	"],["r","\r"],["b","\b"],["f","\f"],["v","\v"],["'","'"],['"','"'],["\\","\\"]]);function eU(e,t={}){return e.endsWith("\n")&&(e=e.slice(0,-1)),e=e.replace(/{#.*?#}/gs,"{##}"),t.lstrip_blocks&&(e=e.replace(/^[ \t]*({[#%])/gm,"$1")),t.trim_blocks&&(e=e.replace(/([#%]})\n/g,"$1")),e.replace(/{##}/g,"").replace(/-%}\s*/g,"%}").replace(/\s*{%-/g,"{%").replace(/-}}\s*/g,"}}").replace(/\s*{{-/g,"{{")}function eV(e,t={}){let r=[],n=eU(e,t),i=0,o=e=>{let t="";for(;e(n[i]);){if("\\"===n[i]){if(++i>=n.length)throw SyntaxError("Unexpected end of input");let e=n[i++],r=eB.get(e);if(void 0===r)throw SyntaxError(`Unexpected escaped character: ${e}`);t+=r;continue}if(t+=n[i++],i>=n.length)throw SyntaxError("Unexpected end of input")}return t};t:for(;i<n.length;){let e=r.at(-1)?.type;if(void 0===e||e===e$.CloseStatement||e===e$.CloseExpression){let e="";for(;i<n.length&&("{"!==n[i]||"%"!==n[i+1]&&"{"!==n[i+1]);)e+=n[i++];if(e.length>0){r.push(new eN(e,e$.Text));continue}}o(e=>/\s/.test(e));let t=n[i];if("-"===t||"+"===t){let e=r.at(-1)?.type;if(e===e$.Text||void 0===e)throw SyntaxError(`Unexpected character: ${t}`);switch(e){case e$.Identifier:case e$.NumericLiteral:case e$.BooleanLiteral:case e$.StringLiteral:case e$.CloseParen:case e$.CloseSquareBracket:break;default:{++i;let e=o(ej);r.push(new eN(`${t}${e}`,e.length>0?e$.NumericLiteral:e$.UnaryOperator));continue}}}for(let[e,t]of ez)if(n.slice(i,i+e.length)===e){r.push(new eN(e,t)),i+=e.length;continue t}if("'"===t||'"'===t){++i;let e=o(e=>e!==t);r.push(new eN(e,e$.StringLiteral)),++i;continue}if(ej(t)){let e=o(ej);r.push(new eN(e,e$.NumericLiteral));continue}if(eR(t)){let e=o(eR),t=Object.hasOwn(eL,e)?eL[e]:e$.Identifier;t===e$.In&&r.at(-1)?.type===e$.Not?(r.pop(),r.push(new eN("not in",e$.NotIn))):r.push(new eN(e,t));continue}throw SyntaxError(`Unexpected character: ${t}`)}return r}var eG=class{type="Statement"},eq=class extends eG{constructor(e){super(),this.body=e}type="Program"},eW=class extends eG{constructor(e,t,r){super(),this.test=e,this.body=t,this.alternate=r}type="If"},eH=class extends eG{constructor(e,t,r){super(),this.loopvar=e,this.iterable=t,this.body=r}type="For"},eX=class extends eG{constructor(e,t){super(),this.assignee=e,this.value=t}type="Set"},eY=class extends eG{type="Expression"},eK=class extends eY{constructor(e,t,r){super(),this.object=e,this.property=t,this.computed=r}type="MemberExpression"},eQ=class extends eY{constructor(e,t){super(),this.callee=e,this.args=t}type="CallExpression"},eZ=class extends eY{constructor(e){super(),this.value=e}type="Identifier"},eJ=class extends eY{constructor(e){super(),this.value=e}type="Literal"},e0=class extends eJ{type="NumericLiteral"},e1=class extends eJ{type="StringLiteral"},e2=class extends eJ{type="BooleanLiteral"},e3=class extends eJ{type="ArrayLiteral"},e4=class extends eJ{type="TupleLiteral"},e6=class extends eJ{type="ObjectLiteral"},e5=class extends eY{constructor(e,t,r){super(),this.operator=e,this.left=t,this.right=r}type="BinaryExpression"},e8=class extends eY{constructor(e,t){super(),this.operand=e,this.filter=t}type="FilterExpression"},e7=class extends eY{constructor(e,t,r){super(),this.operand=e,this.negate=t,this.test=r}type="TestExpression"},e9=class extends eY{constructor(e,t){super(),this.operator=e,this.argument=t}type="UnaryExpression"},te=class extends eY{constructor(e,t,r){super(),this.start=e,this.stop=t,this.step=r}type="SliceExpression"},tt=class extends eY{constructor(e,t){super(),this.key=e,this.value=t}type="KeywordArgumentExpression"};function tr(e){let t=new eq([]),r=0;function n(t,n){let i=e[r++];if(!i||i.type!==t)throw Error(`Parser Error: ${n}. ${i.type} !== ${t}.`);return i}function i(){switch(e[r].type){case e$.Text:return a();case e$.OpenStatement:return l();case e$.OpenExpression:return u();default:throw SyntaxError(`Unexpected token type: ${e[r].type}`)}}function o(...t){return r+t.length<=e.length&&t.some((t,n)=>t!==e[r+n].type)}function s(...t){return r+t.length<=e.length&&t.every((t,n)=>t===e[r+n].type)}function a(){return new e1(n(e$.Text,"Expected text token").value)}function l(){let t;switch(n(e$.OpenStatement,"Expected opening statement token"),e[r].type){case e$.Set:++r,t=c(),n(e$.CloseStatement,"Expected closing statement token");break;case e$.If:++r,t=d(),n(e$.OpenStatement,"Expected {% token"),n(e$.EndIf,"Expected endif token"),n(e$.CloseStatement,"Expected %} token");break;case e$.For:++r,t=p(),n(e$.OpenStatement,"Expected {% token"),n(e$.EndFor,"Expected endfor token"),n(e$.CloseStatement,"Expected %} token");break;default:throw SyntaxError(`Unknown statement type: ${e[r].type}`)}return t}function u(){n(e$.OpenExpression,"Expected opening expression token");let e=f();return n(e$.CloseExpression,"Expected closing expression token"),e}function c(){let e=f();return s(e$.Equals)?(++r,new eX(e,c())):e}function d(){let t=f();n(e$.CloseStatement,"Expected closing statement token");let o=[],a=[];for(;e[r]?.type!==e$.OpenStatement||e[r+1]?.type!==e$.ElseIf&&e[r+1]?.type!==e$.Else&&e[r+1]?.type!==e$.EndIf;)o.push(i());if(e[r]?.type===e$.OpenStatement&&e[r+1]?.type!==e$.EndIf)if(++r,s(e$.ElseIf))n(e$.ElseIf,"Expected elseif token"),a.push(d());else for(n(e$.Else,"Expected else token"),n(e$.CloseStatement,"Expected closing statement token");e[r]?.type!==e$.OpenStatement||e[r+1]?.type!==e$.EndIf;)a.push(i());return new eW(t,o,a)}function h(e=!1){let t=e?P:f,n=[t()],i=s(e$.Comma);for(;i&&(++r,n.push(t()),s(e$.Comma)););return i?new e4(n):n[0]}function p(){let e=h(!0);if(!(e instanceof eZ||e instanceof e4))throw SyntaxError(`Expected identifier/tuple for the loop variable, got ${e.type} instead`);n(e$.In,"Expected `in` keyword following loop variable");let t=f();n(e$.CloseStatement,"Expected closing statement token");let r=[];for(;o(e$.OpenStatement,e$.EndFor);)r.push(i());return new eH(e,t,r)}function f(){return g()}function g(){let e=m();if(s(e$.If)){++r;let t=m();return n(e$.Else,"Expected else token"),new eW(t,[e],[m()])}return e}function m(){let t=_();for(;s(e$.Or);){let n=e[r];++r,t=new e5(n,t,_())}return t}function _(){let t=b();for(;s(e$.And);){let n=e[r];++r,t=new e5(n,t,b())}return t}function b(){let t;for(;s(e$.Not);){let n=e[r];++r,t=new e9(n,b())}return t??y()}function y(){let t=w();for(;s(e$.ComparisonBinaryOperator)||s(e$.In)||s(e$.NotIn);){let n=e[r];++r,t=new e5(n,t,w())}return t}function w(){let t=k();for(;s(e$.AdditiveBinaryOperator);){let n=e[r];++r,t=new e5(n,t,k())}return t}function v(){let e=O();return s(e$.OpenParen)?x(e):e}function x(e){let t=new eQ(e,T());return s(e$.OpenParen)&&(t=x(t)),t}function T(){n(e$.OpenParen,"Expected opening parenthesis for arguments list");let e=S();return n(e$.CloseParen,"Expected closing parenthesis for arguments list"),e}function S(){let e=[];for(;!s(e$.CloseParen);){let t=f();if(s(e$.Equals)){if(++r,!(t instanceof eZ))throw SyntaxError("Expected identifier for keyword argument");t=new tt(t,f())}e.push(t),s(e$.Comma)&&++r}return e}function A(){let e=[],t=!1;for(;!s(e$.CloseSquareBracket);)s(e$.Colon)?(e.push(void 0),++r,t=!0):(e.push(f()),s(e$.Colon)&&(++r,t=!0));if(0===e.length)throw SyntaxError("Expected at least one argument for member/slice expression");if(t){if(e.length>3)throw SyntaxError("Expected 0-3 arguments for slice expression");return new te(...e)}return e[0]}function O(){let t=P();for(;s(e$.Dot)||s(e$.OpenSquareBracket);){let i,o=e[r];++r;let s=o.type!==e$.Dot;if(s)i=A(),n(e$.CloseSquareBracket,"Expected closing square bracket");else if("Identifier"!==(i=P()).type)throw SyntaxError("Expected identifier following dot operator");t=new eK(t,i,s)}return t}function k(){let t=E();for(;s(e$.MultiplicativeBinaryOperator);){let n=e[r];++r,t=new e5(n,t,E())}return t}function E(){let e=M();for(;s(e$.Is);){++r;let t=s(e$.Not);t&&++r;let n=P();if(n instanceof e2&&(n=new eZ(n.value.toString())),!(n instanceof eZ))throw SyntaxError("Expected identifier for the test");e=new e7(e,t,n)}return e}function M(){let e=v();for(;s(e$.Pipe);){++r;let t=P();if(!(t instanceof eZ))throw SyntaxError("Expected identifier for the filter");s(e$.OpenParen)&&(t=x(t)),e=new e8(e,t)}return e}function P(){let t=e[r];switch(t.type){case e$.NumericLiteral:return++r,new e0(Number(t.value));case e$.StringLiteral:return++r,new e1(t.value);case e$.BooleanLiteral:return++r,new e2("true"===t.value);case e$.Identifier:return++r,new eZ(t.value);case e$.OpenParen:{++r;let t=h();if(e[r].type!==e$.CloseParen)throw SyntaxError(`Expected closing parenthesis, got ${e[r].type} instead`);return++r,t}case e$.OpenSquareBracket:{++r;let e=[];for(;!s(e$.CloseSquareBracket);)e.push(f()),s(e$.Comma)&&++r;return++r,new e3(e)}case e$.OpenCurlyBracket:{++r;let e=new Map;for(;!s(e$.CloseCurlyBracket);){let t=f();n(e$.Colon,"Expected colon between key and value in object literal");let i=f();e.set(t,i),s(e$.Comma)&&++r}return++r,new e6(e)}default:throw SyntaxError(`Unexpected token: ${t.type}`)}}for(;r<e.length;)t.body.push(i());return t}function tn(e,t,r=1){void 0===t&&(t=e,e=0);let n=[];for(let i=e;i<t;i+=r)n.push(i);return n}function ti(e,t,r,n=1){let i=Math.sign(n);i>=0?(t=(t??=0)<0?Math.max(e.length+t,0):Math.min(t,e.length),r=(r??=e.length)<0?Math.max(e.length+r,0):Math.min(r,e.length)):(t=(t??=e.length-1)<0?Math.max(e.length+t,-1):Math.min(t,e.length-1),r=(r??=-1)<-1?Math.max(e.length+r,-1):Math.min(r,e.length-1));let o=[];for(let s=t;i*s<i*r;s+=n)o.push(e[s]);return o}function to(e){return e.replace(/\b\w/g,e=>e.toUpperCase())}var ts=class{type="RuntimeValue";value;builtins=new Map;constructor(e){this.value=e}__bool__(){return new tu(!!this.value)}},ta=class extends ts{type="NumericValue"},tl=class extends ts{type="StringValue";builtins=new Map([["upper",new tp(()=>new tl(this.value.toUpperCase()))],["lower",new tp(()=>new tl(this.value.toLowerCase()))],["strip",new tp(()=>new tl(this.value.trim()))],["title",new tp(()=>new tl(to(this.value)))],["length",new ta(this.value.length)]])},tu=class extends ts{type="BooleanValue"},tc=class extends ts{type="ObjectValue";__bool__(){return new tu(this.value.size>0)}builtins=new Map([["get",new tp(([e,t])=>{if(!(e instanceof tl))throw Error(`Object key must be a string: got ${e.type}`);return this.value.get(e.value)??t??new tf})],["items",new tp(()=>new td(Array.from(this.value.entries()).map(([e,t])=>new td([new tl(e),t]))))]])},td=class extends ts{type="ArrayValue";builtins=new Map([["length",new ta(this.value.length)]]);__bool__(){return new tu(this.value.length>0)}},th=class extends td{type="TupleValue"},tp=class extends ts{type="FunctionValue"},tf=class extends ts{type="NullValue"},tg=class extends ts{type="UndefinedValue"},tm=class{constructor(e){this.parent=e}variables=new Map([["namespace",new tp(e=>{if(0===e.length)return new tc(new Map);if(1!==e.length||!(e[0]instanceof tc))throw Error("`namespace` expects either zero arguments or a single object argument");return e[0]})]]);tests=new Map([["boolean",e=>"BooleanValue"===e.type],["callable",e=>e instanceof tp],["odd",e=>{if("NumericValue"!==e.type)throw Error(`Cannot apply test "odd" to type: ${e.type}`);return e.value%2!=0}],["even",e=>{if("NumericValue"!==e.type)throw Error(`Cannot apply test "even" to type: ${e.type}`);return e.value%2==0}],["false",e=>"BooleanValue"===e.type&&!e.value],["true",e=>"BooleanValue"===e.type&&e.value],["number",e=>"NumericValue"===e.type],["integer",e=>"NumericValue"===e.type&&Number.isInteger(e.value)],["iterable",e=>e instanceof td||e instanceof tl],["lower",e=>{let t=e.value;return"StringValue"===e.type&&t===t.toLowerCase()}],["upper",e=>{let t=e.value;return"StringValue"===e.type&&t===t.toUpperCase()}],["none",e=>"NullValue"===e.type],["defined",e=>"UndefinedValue"!==e.type],["undefined",e=>"UndefinedValue"===e.type],["equalto",(e,t)=>e.value===t.value]]);set(e,t){return this.declareVariable(e,tb(t))}declareVariable(e,t){if(this.variables.has(e))throw SyntaxError(`Variable already declared: ${e}`);return this.variables.set(e,t),t}setVariable(e,t){return this.variables.set(e,t),t}resolve(e){if(this.variables.has(e))return this;if(this.parent)return this.parent.resolve(e);throw Error(`Unknown variable: ${e}`)}lookupVariable(e){try{return this.resolve(e).variables.get(e)??new tg}catch{return new tg}}},t_=class{global;constructor(e){this.global=e??new tm}run(e){return this.evaluate(e,this.global)}evaluateBinaryExpression(e,t){let r=this.evaluate(e.left,t);switch(e.operator.value){case"and":return r.__bool__().value?this.evaluate(e.right,t):r;case"or":return r.__bool__().value?r:this.evaluate(e.right,t)}let n=this.evaluate(e.right,t);switch(e.operator.value){case"==":return new tu(r.value==n.value);case"!=":return new tu(r.value!=n.value)}if(r instanceof tg||n instanceof tg)throw Error("Cannot perform operation on undefined values");if(r instanceof tf||n instanceof tf)throw Error("Cannot perform operation on null values");if(r instanceof ta&&n instanceof ta)switch(e.operator.value){case"+":return new ta(r.value+n.value);case"-":return new ta(r.value-n.value);case"*":return new ta(r.value*n.value);case"/":return new ta(r.value/n.value);case"%":return new ta(r.value%n.value);case"<":return new tu(r.value<n.value);case">":return new tu(r.value>n.value);case">=":return new tu(r.value>=n.value);case"<=":return new tu(r.value<=n.value)}else if(r instanceof td&&n instanceof td){if("+"===e.operator.value)return new td(r.value.concat(n.value))}else if(n instanceof td){let t=void 0!==n.value.find(e=>e.value===r.value);switch(e.operator.value){case"in":return new tu(t);case"not in":return new tu(!t)}}if((r instanceof tl||n instanceof tl)&&"+"===e.operator.value)return new tl(r.value.toString()+n.value.toString());if(r instanceof tl&&n instanceof tl)switch(e.operator.value){case"in":return new tu(n.value.includes(r.value));case"not in":return new tu(!n.value.includes(r.value))}if(r instanceof tl&&n instanceof tc)switch(e.operator.value){case"in":return new tu(n.value.has(r.value));case"not in":return new tu(!n.value.has(r.value))}throw SyntaxError(`Unknown operator "${e.operator.value}" between ${r.type} and ${n.type}`)}evaluateFilterExpression(e,t){let r=this.evaluate(e.operand,t);if("Identifier"===e.filter.type){let t=e.filter;if(r instanceof td)switch(t.value){case"list":return r;case"first":return r.value[0];case"last":return r.value[r.value.length-1];case"length":return new ta(r.value.length);case"reverse":return new td(r.value.reverse());case"sort":return new td(r.value.sort((e,t)=>{if(e.type!==t.type)throw Error(`Cannot compare different types: ${e.type} and ${t.type}`);switch(e.type){case"NumericValue":return e.value-t.value;case"StringValue":return e.value.localeCompare(t.value);default:throw Error(`Cannot compare type: ${e.type}`)}}));default:throw Error(`Unknown ArrayValue filter: ${t.value}`)}if(r instanceof tl)switch(t.value){case"length":return new ta(r.value.length);case"upper":return new tl(r.value.toUpperCase());case"lower":return new tl(r.value.toLowerCase());case"title":return new tl(to(r.value));case"capitalize":return new tl(r.value.charAt(0).toUpperCase()+r.value.slice(1));case"trim":return new tl(r.value.trim());default:throw Error(`Unknown StringValue filter: ${t.value}`)}if(r instanceof ta)if("abs"===t.value)return new ta(Math.abs(r.value));else throw Error(`Unknown NumericValue filter: ${t.value}`);else if(r instanceof tc)switch(t.value){case"items":return new td(Array.from(r.value.entries()).map(([e,t])=>new td([new tl(e),t])));case"length":return new ta(r.value.size);default:throw Error(`Unknown ObjectValue filter: ${t.value}`)}throw Error(`Cannot apply filter "${t.value}" to type: ${r.type}`)}if("CallExpression"===e.filter.type){let n=e.filter;if("Identifier"!==n.callee.type)throw Error(`Unknown filter: ${n.callee.type}`);let i=n.callee.value;if(r instanceof td){if("selectattr"===i){let e;if(r.value.some(e=>!(e instanceof tc)))throw Error("`selectattr` can only be applied to array of objects");if(n.args.some(e=>"StringLiteral"!==e.type))throw Error("arguments of `selectattr` must be strings");let[i,o,s]=n.args.map(e=>this.evaluate(e,t));if(o){let r=t.tests.get(o.value);if(!r)throw Error(`Unknown test: ${o.value}`);e=r}else e=(...e)=>e[0].__bool__().value;return new td(r.value.filter(t=>{let r=t.value.get(i.value);return!!r&&e(r,s)}))}throw Error(`Unknown ArrayValue filter: ${i}`)}throw Error(`Cannot apply filter "${i}" to type: ${r.type}`)}throw Error(`Unknown filter: ${e.filter.type}`)}evaluateTestExpression(e,t){let r=this.evaluate(e.operand,t),n=t.tests.get(e.test.value);if(!n)throw Error(`Unknown test: ${e.test.value}`);let i=n(r);return new tu(e.negate?!i:i)}evaluateUnaryExpression(e,t){let r=this.evaluate(e.argument,t);if("not"===e.operator.value)return new tu(!r.value);throw SyntaxError(`Unknown operator: ${e.operator.value}`)}evalProgram(e,t){return this.evaluateBlock(e.body,t)}evaluateBlock(e,t){let r="";for(let n of e){let e=this.evaluate(n,t);"NullValue"!==e.type&&"UndefinedValue"!==e.type&&(r+=e.value)}return new tl(r)}evaluateIdentifier(e,t){return t.lookupVariable(e.value)}evaluateCallExpression(e,t){let r=[],n=new Map;for(let i of e.args)if("KeywordArgumentExpression"===i.type){let e=i;n.set(e.key.value,this.evaluate(e.value,t))}else r.push(this.evaluate(i,t));n.size>0&&r.push(new tc(n));let i=this.evaluate(e.callee,t);if("FunctionValue"!==i.type)throw Error(`Cannot call something that is not a function: got ${i.type}`);return i.value(r,t)}evaluateSliceExpression(e,t,r){if(!(e instanceof td||e instanceof tl))throw Error("Slice object must be an array or string");let n=this.evaluate(t.start,r),i=this.evaluate(t.stop,r),o=this.evaluate(t.step,r);if(!(n instanceof ta||n instanceof tg))throw Error("Slice start must be numeric or undefined");if(!(i instanceof ta||i instanceof tg))throw Error("Slice stop must be numeric or undefined");if(!(o instanceof ta||o instanceof tg))throw Error("Slice step must be numeric or undefined");return e instanceof td?new td(ti(e.value,n.value,i.value,o.value)):new tl(ti(Array.from(e.value),n.value,i.value,o.value).join(""))}evaluateMemberExpression(e,t){let r,n,i=this.evaluate(e.object,t);if(e.computed)if("SliceExpression"===e.property.type)return this.evaluateSliceExpression(i,e.property,t);else r=this.evaluate(e.property,t);else r=new tl(e.property.value);if(i instanceof tc){if(!(r instanceof tl))throw Error(`Cannot access property with non-string: got ${r.type}`);n=i.value.get(r.value)??i.builtins.get(r.value)}else if(i instanceof td||i instanceof tl)if(r instanceof ta)n=i.value.at(r.value),i instanceof tl&&(n=new tl(i.value.at(r.value)));else if(r instanceof tl)n=i.builtins.get(r.value);else throw Error(`Cannot access property with non-string/non-number: got ${r.type}`);else{if(!(r instanceof tl))throw Error(`Cannot access property with non-string: got ${r.type}`);n=i.builtins.get(r.value)}return n instanceof ts?n:new tg}evaluateSet(e,t){let r=this.evaluate(e.value,t);if("Identifier"===e.assignee.type){let n=e.assignee.value;t.setVariable(n,r)}else if("MemberExpression"===e.assignee.type){let n=e.assignee,i=this.evaluate(n.object,t);if(!(i instanceof tc))throw Error("Cannot assign to member of non-object");if("Identifier"!==n.property.type)throw Error("Cannot assign to member with non-identifier property");i.value.set(n.property.value,r)}else throw Error(`Invalid LHS inside assignment expression: ${JSON.stringify(e.assignee)}`);return new tf}evaluateIf(e,t){let r=this.evaluate(e.test,t);return this.evaluateBlock(r.__bool__().value?e.body:e.alternate,t)}evaluateFor(e,t){let r=new tm(t),n=this.evaluate(e.iterable,r);if(!(n instanceof td))throw Error(`Expected iterable type in for loop: got ${n.type}`);let i="";for(let t=0;t<n.value.length;++t){let o=new Map([["index",new ta(t+1)],["index0",new ta(t)],["revindex",new ta(n.value.length-t)],["revindex0",new ta(n.value.length-t-1)],["first",new tu(0===t)],["last",new tu(t===n.value.length-1)],["length",new ta(n.value.length)],["previtem",t>0?n.value[t-1]:new tg],["nextitem",t<n.value.length-1?n.value[t+1]:new tg]]);r.setVariable("loop",new tc(o));let s=n.value[t];if("Identifier"===e.loopvar.type)r.setVariable(e.loopvar.value,s);else if("TupleLiteral"===e.loopvar.type){let t=e.loopvar;if("ArrayValue"!==s.type)throw Error(`Cannot unpack non-iterable type: ${s.type}`);let n=s;if(t.value.length!==n.value.length)throw Error(`Too ${t.value.length>n.value.length?"few":"many"} items to unpack`);for(let e=0;e<t.value.length;++e){if("Identifier"!==t.value[e].type)throw Error(`Cannot unpack non-identifier type: ${t.value[e].type}`);r.setVariable(t.value[e].value,n.value[e])}}i+=this.evaluateBlock(e.body,r).value}return new tl(i)}evaluate(e,t){if(void 0===e)return new tg;switch(e.type){case"Program":return this.evalProgram(e,t);case"Set":return this.evaluateSet(e,t);case"If":return this.evaluateIf(e,t);case"For":return this.evaluateFor(e,t);case"NumericLiteral":return new ta(Number(e.value));case"StringLiteral":return new tl(e.value);case"BooleanLiteral":return new tu(e.value);case"ArrayLiteral":return new td(e.value.map(e=>this.evaluate(e,t)));case"TupleLiteral":return new th(e.value.map(e=>this.evaluate(e,t)));case"ObjectLiteral":{let r=new Map;for(let[n,i]of e.value){let e=this.evaluate(n,t);if(!(e instanceof tl))throw Error(`Object keys must be strings: got ${e.type}`);r.set(e.value,this.evaluate(i,t))}return new tc(r)}case"Identifier":return this.evaluateIdentifier(e,t);case"CallExpression":return this.evaluateCallExpression(e,t);case"MemberExpression":return this.evaluateMemberExpression(e,t);case"UnaryExpression":return this.evaluateUnaryExpression(e,t);case"BinaryExpression":return this.evaluateBinaryExpression(e,t);case"FilterExpression":return this.evaluateFilterExpression(e,t);case"TestExpression":return this.evaluateTestExpression(e,t);default:throw SyntaxError(`Unknown node type: ${e.type}`)}}};function tb(e){switch(typeof e){case"number":return new ta(e);case"string":return new tl(e);case"boolean":return new tu(e);case"object":if(null===e)return new tf;if(Array.isArray(e))return new td(e.map(tb));return new tc(new Map(Object.entries(e).map(([e,t])=>[e,tb(t)])));case"function":return new tp((t,r)=>tb(e(...t.map(e=>e.value))??null));default:throw Error(`Cannot convert to runtime value: ${e}`)}}var ty=class{parsed;constructor(e){const t=eV(e,{lstrip_blocks:!0,trim_blocks:!0});this.parsed=tr(t)}render(e){let t=new tm;for(let[r,n]of(t.set("false",!1),t.set("true",!0),t.set("raise_exception",e=>{throw Error(e)}),t.set("range",tn),Object.entries(e)))t.set(r,n);return new t_(t).run(this.parsed).value}};async function tw(e,t){let r=await Promise.all([G(e,"tokenizer.json",!0,t),G(e,"tokenizer_config.json",!0,t)]);return null!==t.legacy&&(r[1].legacy=t.legacy),r}function tv(e,t){let r=[],n=0;for(let i of e.matchAll(t)){let t=i[0];n<i.index&&r.push(e.slice(n,i.index)),t.length>0&&r.push(t),n=i.index+t.length}return n<e.length&&r.push(e.slice(n)),r}function tx(e,t=!0){if(void 0!==e.Regex){let t=e.Regex.replace(/\\([#&~])/g,"$1");for(let[e,r]of tI)t=t.replaceAll(e,r);return RegExp(t,"gu")}if(void 0===e.String)return console.warn("Unknown pattern type:",e),null;{let r=a(e.String);return RegExp(t?r:`(${r})`,"gu")}}function tT(e){return new Map(Object.entries(e))}function tS(e){let t=e.dims;switch(t.length){case 1:return e.tolist();case 2:if(1!==t[0])throw Error("Unable to decode tensor with `batch size !== 1`. Use `tokenizer.batch_decode(...)` for batched inputs.");return e.tolist()[0];default:throw Error(`Expected tensor to have 1-2 dimensions, got ${t.length}.`)}}function tA(e){return e.replace(/ \./g,".").replace(/ \?/g,"?").replace(/ \!/g,"!").replace(/ ,/g,",").replace(/ \' /g,"'").replace(/ n\'t/g,"n't").replace(/ \'m/g,"'m").replace(/ \'s/g,"'s").replace(/ \'ve/g,"'ve").replace(/ \'re/g,"'re")}function tO(e){return e.replace(/[\u0300-\u036f]/g,"")}function tk(e){return tO(e.toLowerCase())}function tE(e,t,r){let n=[],i=0;for(;i<e.length;){if(n.push(e[i]),(r.get(e[i])??t)!==t){++i;continue}for(;i<e.length&&(r.get(e[i])??t)===t;)++i}return n}function tM(e){return e.match(/\S+/g)||[]}let tP="\\p{P}\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E",tI=new Map([["(?i:'s|'t|'re|'ve|'m|'ll|'d)","(?:'([sS]|[tT]|[rR][eE]|[vV][eE]|[mM]|[lL][lL]|[dD]))"]]);class tC{constructor(e){this.content=e.content,this.id=e.id,this.single_word=e.single_word??!1,this.lstrip=e.lstrip??!1,this.rstrip=e.rstrip??!1,this.special=e.special??!1,this.normalized=e.normalized??null}}class tF extends l{constructor(e){super(),this.config=e,this.vocab=[],this.tokens_to_ids=new Map,this.unk_token_id=void 0,this.unk_token=void 0,this.end_of_word_suffix=void 0,this.fuse_unk=this.config.fuse_unk??!1}static fromConfig(e,...t){switch(e.type){case"WordPiece":return new tD(e);case"Unigram":return new t$(e,...t);case"BPE":return new tR(e);default:if(e.vocab)return new tj(e,...t);throw Error(`Unknown TokenizerModel type: ${e.type}`)}}_call(e){let t=this.encode(e);return this.fuse_unk&&(t=tE(t,this.unk_token_id,this.tokens_to_ids)),t}encode(e){throw Error("encode should be implemented in subclass.")}convert_tokens_to_ids(e){return e.map(e=>this.tokens_to_ids.get(e)??this.unk_token_id)}convert_ids_to_tokens(e){return e.map(e=>this.vocab[e]??this.unk_token)}}class tD extends tF{constructor(e){for(const[t,r]of(super(e),this.tokens_to_ids=tT(e.vocab),this.unk_token_id=this.tokens_to_ids.get(e.unk_token),this.unk_token=e.unk_token,this.max_input_chars_per_word=e.max_input_chars_per_word??100,this.vocab=Array(this.tokens_to_ids.size),this.tokens_to_ids))this.vocab[r]=t}encode(e){let t=[];for(let r of e){let e=[...r];if(e.length>this.max_input_chars_per_word){t.push(this.unk_token);continue}let n=!1,i=0,o=[];for(;i<e.length;){let t=e.length,r=null;for(;i<t;){let n=e.slice(i,t).join("");if(i>0&&(n=this.config.continuing_subword_prefix+n),this.tokens_to_ids.has(n)){r=n;break}--t}if(null===r){n=!0;break}o.push(r),i=t}n?t.push(this.unk_token):t.push(...o)}return t}}class t$ extends tF{constructor(e,t){super(e);const r=e.vocab.length;this.vocab=Array(r),this.scores=Array(r);for(let t=0;t<r;++t){const r=e.vocab[t];this.vocab[t]=r[0],this.scores[t]=r[1]}this.unk_token_id=e.unk_id,this.unk_token=this.vocab[e.unk_id],this.tokens_to_ids=new Map(this.vocab.map((e,t)=>[e,t])),this.bosToken=" ",this.bosTokenId=this.tokens_to_ids.get(this.bosToken),this.eosToken=t.eos_token,this.eosTokenId=this.tokens_to_ids.get(this.eosToken),this.unkToken=this.vocab[this.unk_token_id],this.minScore=et(this.scores)[0],this.unkScore=this.minScore-10,this.scores[this.unk_token_id]=this.unkScore,this.trie=new eI,this.trie.extend(this.vocab),this.fuse_unk=!0}populateNodes(e){let t=e.sentence,r=t.length,n=0;for(;n<r;){let r=1,i=!1,o=[];for(let s of this.trie.commonPrefixSearch(t.slice(n))){o.push(s);let t=this.tokens_to_ids.get(s),a=this.scores[t],l=s.length;e.insert(n,l,a,t),i||l!==r||(i=!0)}i||e.insert(n,r,this.unkScore,this.unk_token_id),n+=r}}tokenize(e){let t=new eF(e,this.bosTokenId,this.eosTokenId);return this.populateNodes(t),t.tokens()}encode(e){let t=[];for(let r of e){let e=this.tokenize(r);t.push(...e)}return t}}let tL=(()=>{let e=[...Array.from({length:94},(e,t)=>t+33),...Array.from({length:12},(e,t)=>t+161),...Array.from({length:82},(e,t)=>t+174)],t=e.slice(),r=0;for(let n=0;n<256;++n)e.includes(n)||(e.push(n),t.push(256+r),r+=1);let n=t.map(e=>String.fromCharCode(e));return Object.fromEntries(e.map((e,t)=>[e,n[t]]))})(),tN=s(tL);class tR extends tF{constructor(e){for(const[t,r]of(super(e),this.BPE_SPLIT_TOKEN=" ",this.tokens_to_ids=tT(e.vocab),this.unk_token_id=this.tokens_to_ids.get(e.unk_token),this.unk_token=e.unk_token,this.vocab=Array(this.tokens_to_ids.size),this.tokens_to_ids))this.vocab[r]=t;this.bpe_ranks=new Map(e.merges.map((e,t)=>[e,t])),this.merges=e.merges.map(e=>e.split(this.BPE_SPLIT_TOKEN)),this.end_of_word_suffix=e.end_of_word_suffix,this.continuing_subword_suffix=e.continuing_subword_suffix??null,this.byte_fallback=this.config.byte_fallback??!1,this.byte_fallback&&(this.text_encoder=new TextEncoder),this.ignore_merges=this.config.ignore_merges??!1,this.cache=new Map}bpe(e){if(0===e.length)return[];let t=this.cache.get(e);if(void 0!==t)return t;let r=Array.from(e);this.end_of_word_suffix&&(r[r.length-1]+=this.end_of_word_suffix);let n=[];if(r.length>1){let e=new eP((e,t)=>e.score<t.score),t={token:r[0],bias:0,prev:null,next:null},i=t;for(let t=1;t<r.length;++t){let n={bias:t/r.length,token:r[t],prev:i,next:null};i.next=n,this._add_node(e,i),i=n}for(;!e.isEmpty();){let r=e.pop();if(r.deleted||!r.next||r.next.deleted)continue;if(r.deleted=!0,r.next.deleted=!0,r.prev){let e={...r.prev};r.prev.deleted=!0,r.prev=e,e.prev?e.prev.next=e:t=e}let n={token:r.token+r.next.token,bias:r.bias,prev:r.prev,next:r.next.next};n.prev?(n.prev.next=n,this._add_node(e,n.prev)):t=n,n.next&&(n.next.prev=n,this._add_node(e,n))}for(let e=t;null!==e;e=e.next)n.push(e.token)}else n=r;if(this.continuing_subword_suffix)for(let e=0;e<n.length-1;++e)n[e]+=this.continuing_subword_suffix;return this.cache.set(e,n),n}_add_node(e,t){let r=this.bpe_ranks.get(t.token+this.BPE_SPLIT_TOKEN+t.next.token);void 0!==r&&(t.score=r+t.bias,e.push(t))}encode(e){let t=[];for(let r of e){if(this.ignore_merges&&this.tokens_to_ids.has(r)){t.push(r);continue}for(let e of this.bpe(r))this.tokens_to_ids.has(e)?t.push(e):this.byte_fallback?t.push(...Array.from(this.text_encoder.encode(e)).map(e=>`<0x${e.toString(16).toUpperCase().padStart(2,"0")}>`)):t.push(this.unk_token)}return t}}class tj extends tF{constructor(e,t){for(const[r,n]of(super(e),this.tokens_to_ids=tT(t.target_lang?e.vocab[t.target_lang]:e.vocab),this.bos_token=t.bos_token,this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=t.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.pad_token=t.pad_token,this.pad_token_id=this.tokens_to_ids.get(this.pad_token),this.unk_token=t.unk_token,this.unk_token_id=this.tokens_to_ids.get(this.unk_token),this.vocab=Array(this.tokens_to_ids.size),this.tokens_to_ids))this.vocab[n]=r}encode(e){return e}}class tz extends l{constructor(e){super(),this.config=e}static fromConfig(e){if(null===e)return null;switch(e.type){case"BertNormalizer":return new tK(e);case"Precompiled":return new rh(e);case"Sequence":return new tY(e);case"Replace":return new tB(e);case"NFC":return new tU(e);case"NFKC":return new tV(e);case"NFKD":return new tG(e);case"Strip":return new tq(e);case"StripAccents":return new tW(e);case"Lowercase":return new tH(e);case"Prepend":return new tX(e);default:throw Error(`Unknown Normalizer type: ${e.type}`)}}normalize(e){throw Error("normalize should be implemented in subclass.")}_call(e){return this.normalize(e)}}class tB extends tz{normalize(e){let t=tx(this.config.pattern);return null===t?e:e.replaceAll(t,this.config.content)}}class tU extends tz{normalize(e){return e=e.normalize("NFC")}}class tV extends tz{normalize(e){return e=e.normalize("NFKC")}}class tG extends tz{normalize(e){return e=e.normalize("NFKD")}}class tq extends tz{normalize(e){return this.config.strip_left&&this.config.strip_right?e=e.trim():(this.config.strip_left&&(e=e.trimStart()),this.config.strip_right&&(e=e.trimEnd())),e}}class tW extends tz{normalize(e){return e=tO(e)}}class tH extends tz{normalize(e){return e=e.toLowerCase()}}class tX extends tz{normalize(e){return e=this.config.prepend+e}}class tY extends tz{constructor(e){super(e),this.normalizers=e.normalizers.map(e=>tz.fromConfig(e))}normalize(e){return this.normalizers.reduce((e,t)=>t.normalize(e),e)}}class tK extends tz{_tokenize_chinese_chars(e){let t=[];for(let r=0;r<e.length;++r){let n=e[r],i=n.charCodeAt(0);this._is_chinese_char(i)?(t.push(" "),t.push(n),t.push(" ")):t.push(n)}return t.join("")}_is_chinese_char(e){return e>=19968&&e<=40959||e>=13312&&e<=19903||e>=131072&&e<=173791||e>=173824&&e<=177983||e>=177984&&e<=178207||e>=178208&&e<=183983||e>=63744&&e<=64255||e>=194560&&e<=195103}stripAccents(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}_is_control(e){switch(e){case"	":case"\n":case"\r":return!1;default:return/^\p{Cc}|\p{Cf}|\p{Co}|\p{Cs}$/u.test(e)}}_clean_text(e){let t=[];for(let r of e){let e=r.charCodeAt(0);0===e||65533===e||this._is_control(r)||(/^\s$/.test(r)?t.push(" "):t.push(r))}return t.join("")}normalize(e){return this.config.clean_text&&(e=this._clean_text(e)),this.config.handle_chinese_chars&&(e=this._tokenize_chinese_chars(e)),this.config.lowercase?(e=e.toLowerCase(),!1!==this.config.strip_accents&&(e=this.stripAccents(e))):this.config.strip_accents&&(e=this.stripAccents(e)),e}}class tQ extends l{static fromConfig(e){if(null===e)return null;switch(e.type){case"BertPreTokenizer":return new tZ(e);case"Sequence":return new rp(e);case"Whitespace":return new rf(e);case"WhitespaceSplit":return new rg(e);case"Metaspace":return new rc(e);case"ByteLevel":return new tJ(e);case"Split":return new t0(e);case"Punctuation":return new t1(e);case"Digits":return new t2(e);case"Replace":return new rm(e);default:throw Error(`Unknown PreTokenizer type: ${e.type}`)}}pre_tokenize_text(e,t){throw Error("pre_tokenize_text should be implemented in subclass.")}pre_tokenize(e,t){return(Array.isArray(e)?e.map(e=>this.pre_tokenize_text(e,t)):this.pre_tokenize_text(e,t)).flat()}_call(e,t){return this.pre_tokenize(e,t)}}class tZ extends tQ{constructor(e){super(),this.pattern=RegExp(`[^\\s${tP}]+|[${tP}]`,"gu")}pre_tokenize_text(e,t){return e.trim().match(this.pattern)||[]}}class tJ extends tQ{constructor(e){super(),this.config=e,this.add_prefix_space=this.config.add_prefix_space,this.trim_offsets=this.config.trim_offsets,this.use_regex=this.config.use_regex??!0,this.pattern=/'s|'t|'re|'ve|'m|'ll|'d| ?\p{L}+| ?\p{N}+| ?[^\s\p{L}\p{N}]+|\s+(?!\S)|\s+/gu,this.byte_encoder=tL,this.text_encoder=new TextEncoder}pre_tokenize_text(e,t){return this.add_prefix_space&&!e.startsWith(" ")&&(e=" "+e),(this.use_regex?e.match(this.pattern)||[]:[e]).map(e=>Array.from(this.text_encoder.encode(e),e=>this.byte_encoder[e]).join(""))}}class t0 extends tQ{constructor(e){super(),this.config=e,this.pattern=tx(this.config.pattern,this.config.invert)}pre_tokenize_text(e,t){return null===this.pattern?[]:this.config.invert?e.match(this.pattern)||[]:tv(e,this.pattern)}}class t1 extends tQ{constructor(e){super(),this.config=e,this.pattern=RegExp(`[^${tP}]+|[${tP}]+`,"gu")}pre_tokenize_text(e,t){return e.match(this.pattern)||[]}}class t2 extends tQ{constructor(e){super(),this.config=e;const t=`[^\\d]+|\\d${this.config.individual_digits?"":"+"}`;this.pattern=RegExp(t,"gu")}pre_tokenize_text(e,t){return e.match(this.pattern)||[]}}class t3 extends l{constructor(e){super(),this.config=e}static fromConfig(e){if(null===e)return null;switch(e.type){case"TemplateProcessing":return new t5(e);case"ByteLevel":return new t8(e);case"RobertaProcessing":return new t6(e);case"BertProcessing":return new t4(e);case"Sequence":return new t7(e);default:throw Error(`Unknown PostProcessor type: ${e.type}`)}}post_process(e){throw Error("post_process should be implemented in subclass.")}_call(e,...t){return this.post_process(e,...t)}}class t4 extends t3{constructor(e){super(e),this.cls=e.cls[0],this.sep=e.sep[0]}post_process(e,t=null,{add_special_tokens:r=!0}={}){r&&(e=f([this.cls],e,[this.sep]));let n=Array(e.length).fill(0);if(null!==t){let i=r&&this instanceof t6?[this.sep]:[],o=r?[this.sep]:[];e=f(e,i,t,o),n=f(n,Array(t.length+i.length+o.length).fill(1))}return{tokens:e,token_type_ids:n}}}class t6 extends t4{}class t5 extends t3{constructor(e){super(e),this.single=e.single,this.pair=e.pair}post_process(e,t=null,{add_special_tokens:r=!0}={}){let n=null===t?this.single:this.pair,i=[],o=[];for(let s of n)"SpecialToken"in s?r&&(i.push(s.SpecialToken.id),o.push(s.SpecialToken.type_id)):"Sequence"in s&&("A"===s.Sequence.id?(i=f(i,e),o=f(o,Array(e.length).fill(s.Sequence.type_id))):"B"===s.Sequence.id&&(i=f(i,t),o=f(o,Array(t.length).fill(s.Sequence.type_id))));return{tokens:i,token_type_ids:o}}}class t8 extends t3{post_process(e,t=null){return t&&(e=f(e,t)),{tokens:e}}}class t7 extends t3{constructor(e){super(e),this.processors=e.processors.map(e=>t3.fromConfig(e))}post_process(e,t=null,r={}){let n;for(let i of this.processors)if(i instanceof t8)e=i.post_process(e).tokens,t&&(t=i.post_process(t).tokens);else{let o=i.post_process(e,t,r);e=o.tokens,n=o.token_type_ids}return{tokens:e,token_type_ids:n}}}class t9 extends l{constructor(e){super(),this.config=e,this.added_tokens=[],this.end_of_word_suffix=null,this.trim_offsets=e.trim_offsets}static fromConfig(e){if(null===e)return null;switch(e.type){case"WordPiece":return new ri(e);case"Metaspace":return new rd(e);case"ByteLevel":return new ro(e);case"Replace":return new re(e);case"ByteFallback":return new rt(e);case"Fuse":return new rr(e);case"Strip":return new rn(e);case"Sequence":return new ra(e);case"CTC":return new rs(e);case"BPEDecoder":return new rl(e);default:throw Error(`Unknown Decoder type: ${e.type}`)}}_call(e){return this.decode(e)}decode(e){return this.decode_chain(e).join("")}decode_chain(e){throw Error("`decode_chain` should be implemented in subclass.")}}class re extends t9{decode_chain(e){let t=tx(this.config.pattern);return null===t?e:e.map(e=>e.replaceAll(t,this.config.content))}}class rt extends t9{constructor(e){super(e),this.text_decoder=new TextDecoder}decode_chain(e){let t=[],r=[];for(let n of e){let e=null;if(6===n.length&&n.startsWith("<0x")&&n.endsWith(">")){let t=parseInt(n.slice(3,5),16);isNaN(t)||(e=t)}if(null!==e)r.push(e);else{if(r.length>0){let e=this.text_decoder.decode(Uint8Array.from(r));t.push(e),r=[]}t.push(n)}}if(r.length>0){let e=this.text_decoder.decode(Uint8Array.from(r));t.push(e),r=[]}return t}}class rr extends t9{decode_chain(e){return[e.join("")]}}class rn extends t9{constructor(e){super(e),this.content=this.config.content,this.start=this.config.start,this.stop=this.config.stop}decode_chain(e){return e.map(e=>{let t=0;for(let r=0;r<this.start;++r)if(e[r]===this.content){t=r+1;continue}else break;let r=e.length;for(let t=0;t<this.stop;++t){let n=e.length-t-1;if(e[n]===this.content){r=n;continue}break}return e.slice(t,r)})}}class ri extends t9{constructor(e){super(e),this.cleanup=e.cleanup}decode_chain(e){return e.map((e,t)=>(0!==t&&(e=e.startsWith(this.config.prefix)?e.replace(this.config.prefix,""):" "+e),this.cleanup&&(e=tA(e)),e))}}class ro extends t9{constructor(e){super(e),this.byte_decoder=tN,this.text_decoder=new TextDecoder("utf-8",{fatal:!1,ignoreBOM:!0}),this.end_of_word_suffix=null}convert_tokens_to_string(e){let t=new Uint8Array([...e.join("")].map(e=>this.byte_decoder[e]));return this.text_decoder.decode(t)}decode_chain(e){let t=[],r=[];for(let n of e)void 0!==this.added_tokens.find(e=>e.content===n)?(r.length>0&&(t.push(this.convert_tokens_to_string(r)),r=[]),t.push(n)):r.push(n);return r.length>0&&t.push(this.convert_tokens_to_string(r)),t}}class rs extends t9{constructor(e){super(e),this.pad_token=this.config.pad_token,this.word_delimiter_token=this.config.word_delimiter_token,this.cleanup=this.config.cleanup}convert_tokens_to_string(e){if(0===e.length)return"";let t=[e[0]];for(let r=1;r<e.length;++r)e[r]!==t.at(-1)&&t.push(e[r]);let r=t.filter(e=>e!==this.pad_token).join("");return this.cleanup&&(r=tA(r).replaceAll(this.word_delimiter_token," ").trim()),r}decode_chain(e){return[this.convert_tokens_to_string(e)]}}class ra extends t9{constructor(e){super(e),this.decoders=e.decoders.map(e=>t9.fromConfig(e))}decode_chain(e){return this.decoders.reduce((e,t)=>t.decode_chain(e),e)}}class rl extends t9{constructor(e){super(e),this.suffix=this.config.suffix}decode_chain(e){return e.map((t,r)=>t.replaceAll(this.suffix,r===e.length-1?"":" "))}}class ru extends t9{decode_chain(e){let t="";for(let r=1;r<e.length;r+=2)t+=e[r];return[t]}}class rc extends tQ{constructor(e){super(),this.addPrefixSpace=e.add_prefix_space,this.replacement=e.replacement,this.strRep=e.str_rep||this.replacement,this.prepend_scheme=e.prepend_scheme??"always"}pre_tokenize_text(e,{section_index:t}={}){let r=e.replaceAll(" ",this.strRep);return this.addPrefixSpace&&!r.startsWith(this.replacement)&&("always"===this.prepend_scheme||"first"===this.prepend_scheme&&0===t)&&(r=this.strRep+r),[r]}}class rd extends t9{constructor(e){super(e),this.addPrefixSpace=e.add_prefix_space,this.replacement=e.replacement}decode_chain(e){let t=[];for(let r=0;r<e.length;++r){let n=e[r].replaceAll(this.replacement," ");this.addPrefixSpace&&0==r&&n.startsWith(" ")&&(n=n.substring(1)),t.push(n)}return t}}class rh extends tz{constructor(e){super(e),this.charsmap=e.precompiled_charsmap}normalize(e){return e=(e=(e=e.replace(/[\u0001-\u0008\u000B\u000E-\u001F\u007F\u008F\u009F]/gm,"")).replace(/[\u0009\u000A\u000C\u000D\u1680\u200B\u200C\u200E\u200F\u2028\u2029\u2581\uFEFF\uFFFD]/gm," ")).includes("")?e.split("").map(e=>e.normalize("NFKC")).join(""):e.normalize("NFKC")}}class rp extends tQ{constructor(e){super(),this.tokenizers=e.pretokenizers.map(e=>tQ.fromConfig(e))}pre_tokenize_text(e,t){return this.tokenizers.reduce((e,r)=>r.pre_tokenize(e,t),[e])}}class rf extends tQ{constructor(e){super()}pre_tokenize_text(e,t){return e.match(/\w+|[^\w\s]+/g)||[]}}class rg extends tQ{constructor(e){super()}pre_tokenize_text(e,t){return tM(e)}}class rm extends tQ{constructor(e){super(),this.config=e,this.pattern=tx(this.config.pattern),this.content=this.config.content}pre_tokenize_text(e,t){return null===this.pattern?[e]:[e.replaceAll(this.pattern,this.config.content)]}}let r_=["bos_token","eos_token","unk_token","sep_token","pad_token","cls_token","mask_token"];function rb(e,t,r,n){for(let i of Object.keys(e)){let o=t-e[i].length,s=r(i),a=Array(o).fill(s);e[i]="right"===n?f(e[i],a):f(a,e[i])}}function ry(e,t){for(let r of Object.keys(e))e[r].length=t}class rw extends l{return_token_type_ids=!1;_default_chat_template=`{% for message in messages %}{{'<|im_start|>' + message['role'] + '
' + message['content'] + '<|im_end|>' + '
'}}{% endfor %}{% if add_generation_prompt %}{{ '<|im_start|>assistant
' }}{% endif %}`;constructor(e,t){for(const r of(super(),this._tokenizer_config=t,this.normalizer=tz.fromConfig(e.normalizer),this.pre_tokenizer=tQ.fromConfig(e.pre_tokenizer),this.model=tF.fromConfig(e.model,t),this.post_processor=t3.fromConfig(e.post_processor),this.decoder=t9.fromConfig(e.decoder),this.special_tokens=[],this.all_special_ids=[],this.added_tokens=[],e.added_tokens)){const e=new tC(r);this.added_tokens.push(e),this.model.tokens_to_ids.set(e.content,e.id),this.model.vocab[e.id]=e.content,e.special&&(this.special_tokens.push(e.content),this.all_special_ids.push(e.id))}if(this.additional_special_tokens=t.additional_special_tokens??[],this.special_tokens.push(...this.additional_special_tokens),this.special_tokens=[...new Set(this.special_tokens)],this.decoder&&(this.decoder.added_tokens=this.added_tokens,this.decoder.end_of_word_suffix=this.model.end_of_word_suffix),this.added_tokens_regex=this.added_tokens.length>0?new RegExp(this.added_tokens.map(e=>`${e.lstrip?"\\s*":""}(${a(e.content)})${e.rstrip?"\\s*":""}`).join("|")):null,this.mask_token=this.getToken("mask_token"),this.mask_token_id=this.model.tokens_to_ids.get(this.mask_token),this.pad_token=this.getToken("pad_token","eos_token"),this.pad_token_id=this.model.tokens_to_ids.get(this.pad_token),this.sep_token=this.getToken("sep_token"),this.sep_token_id=this.model.tokens_to_ids.get(this.sep_token),this.unk_token=this.getToken("unk_token"),this.unk_token_id=this.model.tokens_to_ids.get(this.unk_token),this.model_max_length=t.model_max_length,this.remove_space=t.remove_space,this.clean_up_tokenization_spaces=t.clean_up_tokenization_spaces??!0,this.do_lowercase_and_remove_accent=t.do_lowercase_and_remove_accent??!1,this.padding_side="right",this.legacy=!1,this.chat_template=t.chat_template??null,Array.isArray(this.chat_template)){const e=Object.create(null);for(const{name:t,template:r}of this.chat_template){if("string"!=typeof t||"string"!=typeof r)throw Error('Chat template must be a list of objects with "name" and "template" properties');e[t]=r}this.chat_template=e}this._compiled_template_cache=new Map}getToken(...e){for(let t of e){let e=this._tokenizer_config[t];if(e)if("object"!=typeof e)return e;else if("AddedToken"===e.__type)return e.content;else throw Error(`Unknown token: ${e}`)}return null}static async from_pretrained(e,{progress_callback:t=null,config:r=null,cache_dir:n=null,local_files_only:i=!1,revision:o="main",legacy:s=null}={}){return new this(...await tw(e,{progress_callback:t,config:r,cache_dir:n,local_files_only:i,revision:o,legacy:s}))}_call(e,{text_pair:t=null,add_special_tokens:r=!0,padding:n=!1,truncation:i=null,max_length:o=null,return_tensor:s=!0,return_token_type_ids:a=null}={}){let l,u=Array.isArray(e);if(u){if(0===e.length)throw Error("text array must be non-empty");if(null!==t){if(Array.isArray(t)){if(e.length!==t.length)throw Error("text and text_pair must have the same length")}else throw Error("text_pair must also be an array");l=e.map((e,n)=>this._encode_plus(e,t[n],{add_special_tokens:r,return_token_type_ids:a}))}else l=e.map(e=>this._encode_plus(e,null,{add_special_tokens:r,return_token_type_ids:a}))}else{if(null==e)throw Error("text may not be null or undefined");if(Array.isArray(t))throw Error("When specifying `text_pair`, since `text` is a string, `text_pair` must also be a string (i.e., not an array).");l=[this._encode_plus(e,t,{add_special_tokens:r,return_token_type_ids:a})]}if(null===o?o="max_length"===n?this.model_max_length:er(l.map(e=>e.input_ids.length))[0]:i||console.warn("Truncation was not explicitly activated but `max_length` is provided a specific value, please use `truncation=true` to explicitly truncate examples to max length."),o=Math.min(o,this.model_max_length),n||i)for(let e=0;e<l.length;++e)if(l[e].input_ids.length===o)continue;else l[e].input_ids.length>o?i&&ry(l[e],o):n&&rb(l[e],o,e=>"input_ids"===e?this.pad_token_id:0,this.padding_side);let c={};if(s){if(!(n&&i)&&l.some(e=>{for(let t of Object.keys(e))if(e[t].length!==l[0][t]?.length)return!0;return!1}))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=true' and 'truncation=true' to have batched tensors with the same length.");let e=[l.length,l[0].input_ids.length];for(let t of Object.keys(l[0]))c[t]=new eh("int64",BigInt64Array.from(l.flatMap(e=>e[t]).map(BigInt)),e)}else{for(let e of Object.keys(l[0]))c[e]=l.map(t=>t[e]);if(!u)for(let e of Object.keys(c))c[e]=c[e][0]}return c}_encode_text(e){return null===e?null:(this.added_tokens_regex?e.split(this.added_tokens_regex).filter(e=>e):[e]).map((e,t)=>{if(void 0!==this.added_tokens.find(t=>t.content===e))return e;{if(!0===this.remove_space&&(e=e.trim().split(/\s+/).join(" ")),this.do_lowercase_and_remove_accent&&(e=tk(e)),null!==this.normalizer&&(e=this.normalizer(e)),0===e.length)return[];let r=null!==this.pre_tokenizer?this.pre_tokenizer(e,{section_index:t}):[e];return this.model(r)}}).flat()}_encode_plus(e,t=null,{add_special_tokens:r=!0,return_token_type_ids:n=null}={}){let i=this._encode_text(e),o=this._encode_text(t),s=this.post_processor?this.post_processor(i,o,{add_special_tokens:r}):{tokens:f(i??[],o??[])},a=this.model.convert_tokens_to_ids(s.tokens),l={input_ids:a,attention_mask:Array(a.length).fill(1)};return(n??this.return_token_type_ids)&&s.token_type_ids&&(l.token_type_ids=s.token_type_ids),l}encode(e,t=null,{add_special_tokens:r=!0,return_token_type_ids:n=null}={}){let{input_ids:i}=this._encode_plus(e,t,{add_special_tokens:r,return_token_type_ids:n});return i}batch_decode(e,t={}){return e instanceof eh&&(e=e.tolist()),e.map(e=>this.decode(e,t))}decode(e,t={}){if(e instanceof eh&&(e=tS(e)),!Array.isArray(e)||0===e.length||!c(e[0]))throw Error("token_ids must be a non-empty array of integers.");return this.decode_single(e,t)}decode_single(e,{skip_special_tokens:t=!1,clean_up_tokenization_spaces:r=null}){let n=this.model.convert_ids_to_tokens(e);t&&(n=n.filter(e=>!this.special_tokens.includes(e)));let i=this.decoder?this.decoder(n):n.join(" ");return this.decoder&&this.decoder.end_of_word_suffix&&(i=i.replaceAll(this.decoder.end_of_word_suffix," "),t&&(i=i.trim())),(r??this.clean_up_tokenization_spaces)&&(i=tA(i)),i}get default_chat_template(){return this._warned_about_chat_template||(console.warn("No chat template is defined for this tokenizer - using a default chat template that implements the ChatML format. If the default is not appropriate for your model, please set `tokenizer.chat_template` to an appropriate template. See https://huggingface.co/docs/transformers/main/chat_templating for more information."),this._warned_about_chat_template=!0),this._default_chat_template}apply_chat_template(e,{chat_template:t=null,add_generation_prompt:r=!1,tokenize:n=!0,padding:i=!1,truncation:o=!1,max_length:s=null,return_tensor:a=!0,tokenizer_kwargs:l={},...u}={}){if(this.chat_template&&"object"==typeof this.chat_template||null===this.chat_template&&this.default_chat_template&&"object"==typeof this.default_chat_template){let e=this.chat_template??this.default_chat_template;if(null!==t&&Object.hasOwn(e,t))t=e[t];else if(null===t&&"default"in e)t=e.default;else if(null===t)throw Error(`This model has multiple chat templates with no default specified! Please either pass a chat template or the name of the template you wish to use to the 'chat_template' argument. Available template names are ${Object.keys(e).sort()}.`)}else t??=this.chat_template??this.default_chat_template;if("string"!=typeof t)throw Error(`chat_template must be a string, but got ${typeof t}`);let c=this._compiled_template_cache.get(t);void 0===c&&(c=new ty(t),this._compiled_template_cache.set(t,c));let d=Object.create(null);for(let e of r_){let t=this.getToken(e);t&&(d[e]=t)}let h=c.render({messages:e,add_generation_prompt:r,...d,...u});return n?this._call(h,{add_special_tokens:!1,padding:i,truncation:o,max_length:s,return_tensor:a,...l}).input_ids:h}}class rv extends rw{return_token_type_ids=!0}class rx extends rw{return_token_type_ids=!0}class rT extends rw{return_token_type_ids=!0}class rS extends rw{return_token_type_ids=!0}class rA extends rw{return_token_type_ids=!0}class rO extends rw{return_token_type_ids=!0}class rk extends rw{return_token_type_ids=!0}class rE extends rw{return_token_type_ids=!0}class rM extends rw{return_token_type_ids=!0}class rP extends rw{}class rI extends rw{}class rC extends rw{return_token_type_ids=!0;constructor(e,t){super(e,t),console.warn('WARNING: `XLMTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}}class rF extends rw{return_token_type_ids=!0}class rD extends rw{}class r$ extends rw{_default_chat_template='{% for message in messages %}" "{{ message.content }}{{ eos_token }}" "{% endfor %}'}class rL extends rw{}class rN extends rw{constructor(e,t){super(e,t),this.languageRegex=/^[a-z]{2}_[A-Z]{2}$/,this.language_codes=this.special_tokens.filter(e=>this.languageRegex.test(e)),this.lang_to_token=e=>e}_build_translation_inputs(e,t,r){return rZ(this,e,t,r)}}class rR extends rN{}class rj extends rw{}class rz extends r${constructor(e,t){const r=".,!?",n=e.pre_tokenizer?.pretokenizers[0]?.pattern;n&&n.Regex===` ?[^(\\s|[${r}])]+`&&(n.Regex=` ?[^\\s${r}]+`),super(e,t)}}let rB="";class rU extends rw{_default_chat_template=`{% if messages[0]['role'] == 'system' %}{% set loop_messages = messages[1:] %}{% set system_message = messages[0]['content'] %}{% elif USE_DEFAULT_PROMPT == true and not '<<SYS>>' in messages[0]['content'] %}{% set loop_messages = messages %}{% set system_message = 'DEFAULT_SYSTEM_MESSAGE' %}{% else %}{% set loop_messages = messages %}{% set system_message = false %}{% endif %}{% for message in loop_messages %}{% if (message['role'] == 'user') != (loop.index0 % 2 == 0) %}{{ raise_exception('Conversation roles must alternate user/assistant/user/assistant/...') }}{% endif %}{% if loop.index0 == 0 and system_message != false %}{% set content = '<<SYS>>
' + system_message + '
<</SYS>>

' + message['content'] %}{% else %}{% set content = message['content'] %}{% endif %}{% if message['role'] == 'user' %}{{ bos_token + '[INST] ' + content.strip() + ' [/INST]' }}{% elif message['role'] == 'system' %}{{ '<<SYS>>
' + content.strip() + '
<</SYS>>

' }}{% elif message['role'] == 'assistant' %}{{ ' '  + content.strip() + ' ' + eos_token }}{% endif %}{% endfor %}`;DEFAULT_SYSTEM_PROMPT="You are a helpful, respectful and honest assistant. Always answer as helpfully as possible, while being safe. Your answers should not include any harmful, unethical, racist, sexist, toxic, dangerous, or illegal content. Please ensure that your responses are socially unbiased and positive in nature.\n\nIf a question does not make any sense, or is not factually coherent, explain why instead of answering something not correct. If you don't know the answer to a question, please don't share false information.";constructor(e,t){super(e,t),this.use_default_system_prompt=t.use_default_system_prompt??!1,this.legacy=t.legacy??!0,this.legacy||(this.normalizer=null,this.pre_tokenizer=new rc({replacement:rB,add_prefix_space:!0,prepend_scheme:"first"}))}_encode_text(e){if(null===e)return null;if(this.legacy||0===e.length)return super._encode_text(e);let t=super._encode_text(rB+e.replaceAll(rB," "));return t.length>1&&t[0]===rB&&this.special_tokens.includes(t[1])&&(t=t.slice(1)),t}get default_chat_template(){return super.default_chat_template.replaceAll("USE_DEFAULT_PROMPT",this.use_default_system_prompt?"true":"false").replaceAll("DEFAULT_SYSTEM_MESSAGE",this.DEFAULT_SYSTEM_PROMPT.replaceAll("\n","\\n").replaceAll("'","\\'"))}}class rV extends rU{}class rG extends rw{}class rq extends rw{}class rW extends rw{}class rH extends rw{}class rX extends rw{}class rY extends rw{}class rK extends rw{_default_chat_template="{% if messages[0]['role'] == 'system' %}{{ raise_exception('System role not supported') }}{% endif %}{% for message in messages %}{% if (message['role'] == 'user') != (loop.index0 % 2 == 0) %}{{ raise_exception('Conversation roles must alternate user/assistant/user/assistant/...') }}{% endif %}{% if (message['role'] == 'assistant') %}{% set role = 'model' %}{% else %}{% set role = message['role'] %}{% endif %}{{ '<start_of_turn>' + role + '\n' + message['content'] | trim + '<end_of_turn>\n' }}{% endfor %}{% if add_generation_prompt %}{{'<start_of_turn>model\n'}}{% endif %}"}class rQ extends rw{}function rZ(e,t,r,n){if(!("language_codes"in e)||!Array.isArray(e.language_codes))throw Error("Tokenizer must have `language_codes` attribute set and it should be an array of language ids.");if(!("languageRegex"in e)||!(e.languageRegex instanceof RegExp))throw Error("Tokenizer must have `languageRegex` attribute set and it should be a regular expression.");if(!("lang_to_token"in e)||"function"!=typeof e.lang_to_token)throw Error("Tokenizer must have `lang_to_token` attribute set and it should be a function.");let i=n.src_lang,o=n.tgt_lang;if(!e.language_codes.includes(o))throw Error(`Target language code "${o}" is not valid. Must be one of: {${e.language_codes.join(", ")}}`);if(void 0!==i){if(!e.language_codes.includes(i))throw Error(`Source language code "${i}" is not valid. Must be one of: {${e.language_codes.join(", ")}}`);for(let t of e.post_processor.config.single)if("SpecialToken"in t&&e.languageRegex.test(t.SpecialToken.id)){t.SpecialToken.id=e.lang_to_token(i);break}}return n.forced_bos_token_id=e.model.convert_tokens_to_ids([e.lang_to_token(o)])[0],e._call(t,r)}class rJ extends rw{constructor(e,t){super(e,t),this.languageRegex=/^[a-z]{3}_[A-Z][a-z]{3}$/,this.language_codes=this.special_tokens.filter(e=>this.languageRegex.test(e)),this.lang_to_token=e=>e}_build_translation_inputs(e,t,r){return rZ(this,e,t,r)}}class r0 extends rw{constructor(e,t){super(e,t),this.languageRegex=/^__[a-z]{2,3}__$/,this.language_codes=this.special_tokens.filter(e=>this.languageRegex.test(e)).map(e=>e.slice(2,-2)),this.lang_to_token=e=>`__${e}__`}_build_translation_inputs(e,t,r){return rZ(this,e,t,r)}}let r1=[["en","english"],["zh","chinese"],["de","german"],["es","spanish"],["ru","russian"],["ko","korean"],["fr","french"],["ja","japanese"],["pt","portuguese"],["tr","turkish"],["pl","polish"],["ca","catalan"],["nl","dutch"],["ar","arabic"],["sv","swedish"],["it","italian"],["id","indonesian"],["hi","hindi"],["fi","finnish"],["vi","vietnamese"],["he","hebrew"],["uk","ukrainian"],["el","greek"],["ms","malay"],["cs","czech"],["ro","romanian"],["da","danish"],["hu","hungarian"],["ta","tamil"],["no","norwegian"],["th","thai"],["ur","urdu"],["hr","croatian"],["bg","bulgarian"],["lt","lithuanian"],["la","latin"],["mi","maori"],["ml","malayalam"],["cy","welsh"],["sk","slovak"],["te","telugu"],["fa","persian"],["lv","latvian"],["bn","bengali"],["sr","serbian"],["az","azerbaijani"],["sl","slovenian"],["kn","kannada"],["et","estonian"],["mk","macedonian"],["br","breton"],["eu","basque"],["is","icelandic"],["hy","armenian"],["ne","nepali"],["mn","mongolian"],["bs","bosnian"],["kk","kazakh"],["sq","albanian"],["sw","swahili"],["gl","galician"],["mr","marathi"],["pa","punjabi"],["si","sinhala"],["km","khmer"],["sn","shona"],["yo","yoruba"],["so","somali"],["af","afrikaans"],["oc","occitan"],["ka","georgian"],["be","belarusian"],["tg","tajik"],["sd","sindhi"],["gu","gujarati"],["am","amharic"],["yi","yiddish"],["lo","lao"],["uz","uzbek"],["fo","faroese"],["ht","haitian creole"],["ps","pashto"],["tk","turkmen"],["nn","nynorsk"],["mt","maltese"],["sa","sanskrit"],["lb","luxembourgish"],["my","myanmar"],["bo","tibetan"],["tl","tagalog"],["mg","malagasy"],["as","assamese"],["tt","tatar"],["haw","hawaiian"],["ln","lingala"],["ha","hausa"],["ba","bashkir"],["jw","javanese"],["su","sundanese"]],r2=new Map(r1),r3=new Map([...r1.map(([e,t])=>[t,e]),["burmese","my"],["valencian","ca"],["flemish","nl"],["haitian","ht"],["letzeburgesch","lb"],["pushto","ps"],["panjabi","pa"],["moldavian","ro"],["moldovan","ro"],["sinhalese","si"],["castilian","es"]]);class r4 extends rw{_default_chat_template='{% for message in messages %}" "{{ message.content }}{{ eos_token }}" "{% endfor %}';_decode_asr(e,{return_timestamps:t=!1,return_language:r=!1,time_precision:n=null,force_full_sequences:i=!0}={}){if(null===n)throw Error("Must specify time_precision");let o=null,s="word"===t;function a(){return{language:o,timestamp:[null,null],text:""}}let l=[],u=a(),c=0,d=this.model.convert_tokens_to_ids(["<|notimestamps|>"])[0]+1,h=[],p=[],f=!1,g=null,m=new Set(this.all_special_ids);for(let r of e){let e=r.tokens,i=s?r.token_timestamps:null,_=null,b=d;if("stride"in r){let[t,i,o]=r.stride;if(c-=i,g=t-o,i&&(b=i/n+d),o)for(let t=e.length-1;t>=0;--t){let r=e[t];if(r>=d){if(null!==_&&(r-d)*n<g)break;_=r}}}let y=[],w=[];for(let r=0;r<e.length;++r){let g=e[r];if(m.has(g)){let e=this.decode([g]),r=r2.get(e.slice(2,-2));if(void 0!==r){if(null!==o&&r!==o&&!t){h.push(y);let e=this.findLongestCommonSequence(h)[0],t=this.decode(e);u.text=t,l.push(u),h=[],y=[],u=a()}o=u.language=r}}else if(g>=d){let e=el((g-d)*n+c,2);if(null!==_&&g>=_)f=!0;else if(f||h.length>0&&g<b)f=!1;else if(null===u.timestamp[0])u.timestamp[0]=e;else if(e===u.timestamp[0]);else{u.timestamp[1]=e,h.push(y),s&&p.push(w);let[t,r]=this.findLongestCommonSequence(h,p),n=this.decode(t);u.text=n,s&&(u.words=this.collateWordTimestamps(t,r,o)),l.push(u),h=[],y=[],p=[],w=[],u=a()}}else if(y.push(g),s){let e,t=el(i[r]+c,2);e=r+1<i.length?el(i[r+1]+c,2):null,w.push([t,e])}}if("stride"in r){let[e,t,n]=r.stride;c+=e-n}y.length>0?(h.push(y),s&&p.push(w)):h.every(e=>0===e.length)&&(u=a(),h=[],y=[],p=[],w=[])}if(h.length>0){if(i&&t)throw Error("Whisper did not predict an ending timestamp, which can happen if audio is cut off in the middle of a word. Also make sure WhisperTimeStampLogitsProcessor was used during generation.");let[e,r]=this.findLongestCommonSequence(h,p),n=this.decode(e);u.text=n,s&&(u.words=this.collateWordTimestamps(e,r,o)),l.push(u)}let _=Object.create(null),b=l.map(e=>e.text).join("");if(t||r){for(let e=0;e<l.length;++e){let n=l[e];t||delete n.timestamp,r||delete n.language}if(s){let e=[];for(let t of l)for(let r of t.words)e.push(r);_={chunks:e}}else _={chunks:l}}return[b,_]}findLongestCommonSequence(e,t=null){let r=e[0],n=r.length,i=[],o=Array.isArray(t)&&t.length>0,s=o?[]:null,a=o?t[0]:null;for(let l=1;l<e.length;++l){let u=e[l],c=0,d=[n,n,0,0],h=u.length;for(let e=1;e<n+h;++e){let t=e/1e4,i=Math.max(0,n-e),o=Math.min(n,n+h-e),s=r.slice(i,o),a=Math.max(0,e-n),l=Math.min(h,e),p=u.slice(a,l);if(s.length!==p.length)throw Error("There is a bug within whisper `decode_asr` function, please report it. Dropping to prevent bad inference.");let f=s.filter((e,t)=>e===p[t]).length,g=f/e+t;f>1&&g>c&&(c=g,d=[i,o,a,l])}let[p,f,g,m]=d,_=Math.floor((f+p)/2),b=Math.floor((m+g)/2);i.push(...r.slice(0,_)),n=(r=u.slice(b)).length,o&&(s.push(...a.slice(0,_)),a=t[l].slice(b))}return(i.push(...r),o)?(s.push(...a),[i,s]):[i,[]]}collateWordTimestamps(e,t,r){let[n,i,o]=this.combineTokensIntoWords(e,r),s=[];for(let e=0;e<n.length;++e){let r=o[e];s.push({text:n[e],timestamp:[t[r.at(0)][0],t[r.at(-1)][1]]})}return s}combineTokensIntoWords(e,t,r="\"'([{-",n="\"'.,!?:)]}"){let i,o,s;return["chinese","japanese","thai","lao","myanmar"].includes(t=t??"english")?[i,o,s]=this.splitTokensOnUnicode(e):[i,o,s]=this.splitTokensOnSpaces(e),this.mergePunctuations(i,o,s,r,n)}decode(e,t){let r;return t&&t.decode_with_timestamps?(e instanceof eh&&(e=tS(e)),r=this.decodeWithTimestamps(e,t)):r=super.decode(e,t),r}decodeWithTimestamps(e,t){let r=t?.time_precision??.02,n=Array.from(this.all_special_ids).at(-1)+1,i=[[]];for(let t of e)if(t>=n){let e=el((t-n)*r,2);i.push(`<|${e}|>`),i.push([])}else i[i.length-1].push(t);return(i=i.map(e=>"string"==typeof e?e:super.decode(e,t))).join("")}splitTokensOnUnicode(e){let t=this.decode(e,{decode_with_timestamps:!0}),r="",n=[],i=[],o=[],s=[],a=[],l=0;for(let u=0;u<e.length;++u){let c=e[u];s.push(c),a.push(u);let d=this.decode(s,{decode_with_timestamps:!0});d.includes(r)&&t[l+d.indexOf(r)]!==r||(n.push(d),i.push(s),o.push(a),s=[],a=[],l+=d.length)}return[n,i,o]}splitTokensOnSpaces(e){let[t,r,n]=this.splitTokensOnUnicode(e),i=[],o=[],s=[],a=RegExp(`^[${tP}]$`,"gu");for(let e=0;e<t.length;++e){let l=t[e],u=r[e],c=n[e],d=u[0]>=this.model.tokens_to_ids.get("<|endoftext|>"),h=l.startsWith(" "),p=l.trim(),f=a.test(p);if(d||h||f||0===i.length)i.push(l),o.push(u),s.push(c);else{let e=i.length-1;i[e]+=l,o[e].push(...u),s[e].push(...c)}}return[i,o,s]}mergePunctuations(e,t,r,n,i){let o=structuredClone(e),s=structuredClone(t),a=structuredClone(r),l=o.length-2,u=o.length-1;for(;l>=0;)o[l].startsWith(" ")&&n.includes(o[l].trim())?(o[u]=o[l]+o[u],s[u]=f(s[l],s[u]),a[u]=f(a[l],a[u]),o[l]="",s[l]=[],a[l]=[]):u=l,--l;for(l=0,u=1;u<o.length;)!o[l].endsWith(" ")&&i.includes(o[u])?(o[l]+=o[u],s[l]=f(s[l],s[u]),a[l]=f(a[l],a[u]),o[u]="",s[u]=[],a[u]=[]):l=u,++u;return[o.filter(e=>e),s.filter(e=>e.length>0),a.filter(e=>e.length>0)]}get_decoder_prompt_ids({language:e=null,task:t=null,no_timestamps:r=!0}={}){let n=[];if(e){e=e.toLowerCase();let t=r3.get(e);if(void 0===t)if(r2.has(e))t=e;else{let t=2===e.length?r2.keys():r2.values();throw Error(`Language "${e}" is not supported. Must be one of: ${JSON.stringify(t)}`)}let r=this.model.tokens_to_ids.get(`<|${t}|>`);if(void 0===r)throw Error(`Unable to find language "${t}" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.`);n.push(r)}else n.push(null);if(t){if("transcribe"!==(t=t.toLowerCase())&&"translate"!==t)throw Error(`Task "${t}" is not supported. Must be one of: ["transcribe", "translate"]`);let e=this.model.tokens_to_ids.get(`<|${t}|>`);if(void 0===e)throw Error(`Unable to find task "${t}" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.`);n.push(e)}else n.push(null);if(r){let e=this.model.tokens_to_ids.get("<|notimestamps|>");if(void 0===e)throw Error('Unable to find "<|notimestamps|>" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.');n.push(e)}return n.map((e,t)=>[t+1,e]).filter(e=>null!==e[1])}}class r6 extends rw{}class r5 extends rw{}class r8 extends rw{}class r7 extends rw{constructor(e,t){super(e,t),this.languageRegex=/^(>>\w+<<)\s*/g,this.supported_language_codes=this.model.vocab.filter(e=>this.languageRegex.test(e)),console.warn('WARNING: `MarianTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}_encode_text(e){if(null===e)return null;let[t,...r]=e.trim().split(this.languageRegex);if(0===r.length)return super._encode_text(t);if(2===r.length){let[e,t]=r;return this.supported_language_codes.includes(e)||console.warn(`Unsupported language code "${e}" detected, which may lead to unexpected behavior. Should be one of: ${JSON.stringify(this.supported_language_codes)}`),f([e],super._encode_text(t))}}}class r9 extends rw{}class ne extends rw{_default_chat_template="{% for message in messages %}{% if message['role'] == 'user' %}{{ ' ' }}{% endif %}{{ message['content'] }}{% if not loop.last %}{{ '  ' }}{% endif %}{% endfor %}{{ eos_token }}"}class nt extends ne{}class nr extends rw{}class nn extends rw{}class ni extends rw{constructor(e,t){super(e,t),this.decoder=new ru({})}}class no extends rw{}class ns{static TOKENIZER_CLASS_MAPPING={T5Tokenizer:rD,DistilBertTokenizer:rP,CamembertTokenizer:rI,DebertaTokenizer:rA,DebertaV2Tokenizer:rO,BertTokenizer:rv,HerbertTokenizer:rk,ConvBertTokenizer:rE,RoFormerTokenizer:rM,XLMTokenizer:rC,ElectraTokenizer:rF,MobileBertTokenizer:rT,SqueezeBertTokenizer:rS,AlbertTokenizer:rx,GPT2Tokenizer:r$,BartTokenizer:rL,MBartTokenizer:rN,MBart50Tokenizer:rR,RobertaTokenizer:rj,WhisperTokenizer:r4,CodeGenTokenizer:r6,CLIPTokenizer:r5,SiglipTokenizer:r8,MarianTokenizer:r7,BloomTokenizer:rz,NllbTokenizer:rJ,M2M100Tokenizer:r0,LlamaTokenizer:rU,CodeLlamaTokenizer:rV,XLMRobertaTokenizer:rG,MPNetTokenizer:rq,FalconTokenizer:rW,GPTNeoXTokenizer:rH,EsmTokenizer:rX,Wav2Vec2CTCTokenizer:r9,BlenderbotTokenizer:ne,BlenderbotSmallTokenizer:nt,SpeechT5Tokenizer:nr,NougatTokenizer:nn,VitsTokenizer:ni,Qwen2Tokenizer:rY,GemmaTokenizer:rK,Grok1Tokenizer:rQ,CohereTokenizer:no,PreTrainedTokenizer:rw};static async from_pretrained(e,{quantized:t=!0,progress_callback:r=null,config:n=null,cache_dir:i=null,local_files_only:o=!1,revision:s="main",legacy:a=null}={}){let[l,u]=await tw(e,{quantized:t,progress_callback:r,config:n,cache_dir:i,local_files_only:o,revision:s,legacy:a}),c=u.tokenizer_class?.replace(/Fast$/,"")??"PreTrainedTokenizer",d=this.TOKENIZER_CLASS_MAPPING[c];return d||(console.warn(`Unknown tokenizer class "${c}", attempting to construct from base class.`),d=rw),new d(l,u)}}async function na(e,t){return await G(e,"config.json",!0,t)}e.s(["AlbertTokenizer",()=>rx,"AutoTokenizer",()=>ns,"BartTokenizer",()=>rL,"BertTokenizer",()=>rv,"BlenderbotSmallTokenizer",()=>nt,"BlenderbotTokenizer",()=>ne,"BloomTokenizer",()=>rz,"CLIPTokenizer",()=>r5,"CamembertTokenizer",()=>rI,"CodeGenTokenizer",()=>r6,"CodeLlamaTokenizer",()=>rV,"CohereTokenizer",()=>no,"ConvBertTokenizer",()=>rE,"DebertaTokenizer",()=>rA,"DebertaV2Tokenizer",()=>rO,"DistilBertTokenizer",()=>rP,"ElectraTokenizer",()=>rF,"EsmTokenizer",()=>rX,"FalconTokenizer",()=>rW,"GPT2Tokenizer",()=>r$,"GPTNeoXTokenizer",()=>rH,"GemmaTokenizer",()=>rK,"Grok1Tokenizer",()=>rQ,"HerbertTokenizer",()=>rk,"LlamaTokenizer",()=>rU,"M2M100Tokenizer",()=>r0,"MBart50Tokenizer",()=>rR,"MBartTokenizer",()=>rN,"MPNetTokenizer",()=>rq,"MarianTokenizer",()=>r7,"MobileBertTokenizer",()=>rT,"NllbTokenizer",()=>rJ,"NougatTokenizer",()=>nn,"PreTrainedTokenizer",()=>rw,"Qwen2Tokenizer",()=>rY,"RoFormerTokenizer",()=>rM,"RobertaTokenizer",()=>rj,"SiglipTokenizer",()=>r8,"SpeechT5Tokenizer",()=>nr,"SqueezeBertTokenizer",()=>rS,"T5Tokenizer",()=>rD,"TokenizerModel",()=>tF,"VitsTokenizer",()=>ni,"Wav2Vec2CTCTokenizer",()=>r9,"WhisperTokenizer",()=>r4,"XLMRobertaTokenizer",()=>rG,"XLMTokenizer",()=>rC],57672),e.s(["ASTForAudioClassification",()=>oJ,"ASTModel",()=>oZ,"ASTPreTrainedModel",()=>oQ,"AlbertForMaskedLM",()=>ol,"AlbertForQuestionAnswering",()=>oa,"AlbertForSequenceClassification",()=>os,"AlbertModel",()=>oo,"AlbertPreTrainedModel",()=>oi,"AutoModel",()=>ub,"AutoModelForAudioClassification",()=>uL,"AutoModelForAudioFrameClassification",()=>uR,"AutoModelForCTC",()=>u$,"AutoModelForCausalLM",()=>uA,"AutoModelForDepthEstimation",()=>uU,"AutoModelForDocumentQuestionAnswering",()=>uj,"AutoModelForImageClassification",()=>uM,"AutoModelForImageFeatureExtraction",()=>uV,"AutoModelForImageMatting",()=>uz,"AutoModelForImageSegmentation",()=>uP,"AutoModelForImageToImage",()=>uB,"AutoModelForMaskGeneration",()=>uD,"AutoModelForMaskedLM",()=>uO,"AutoModelForObjectDetection",()=>uC,"AutoModelForQuestionAnswering",()=>uk,"AutoModelForSemanticSegmentation",()=>uI,"AutoModelForSeq2SeqLM",()=>uv,"AutoModelForSequenceClassification",()=>uy,"AutoModelForSpeechSeq2Seq",()=>ux,"AutoModelForTextToSpectrogram",()=>uT,"AutoModelForTextToWaveform",()=>uS,"AutoModelForTokenClassification",()=>uw,"AutoModelForVision2Seq",()=>uE,"AutoModelForXVector",()=>uN,"AutoModelForZeroShotObjectDetection",()=>uF,"BartForConditionalGeneration",()=>ow,"BartForSequenceClassification",()=>ov,"BartModel",()=>oy,"BartPretrainedModel",()=>ob,"BaseModelOutput",()=>n4,"BeitForImageClassification",()=>at,"BeitModel",()=>ae,"BeitPreTrainedModel",()=>s9,"BertForMaskedLM",()=>n8,"BertForQuestionAnswering",()=>ie,"BertForSequenceClassification",()=>n7,"BertForTokenClassification",()=>n9,"BertModel",()=>n5,"BertPreTrainedModel",()=>n6,"BlenderbotForConditionalGeneration",()=>oM,"BlenderbotModel",()=>oE,"BlenderbotPreTrainedModel",()=>ok,"BlenderbotSmallForConditionalGeneration",()=>oC,"BlenderbotSmallModel",()=>oI,"BlenderbotSmallPreTrainedModel",()=>oP,"BloomForCausalLM",()=>sL,"BloomModel",()=>s$,"BloomPreTrainedModel",()=>sD,"CLIPModel",()=>o6,"CLIPPreTrainedModel",()=>o4,"CLIPSegForImageSegmentation",()=>ss,"CLIPSegModel",()=>so,"CLIPSegPreTrainedModel",()=>si,"CLIPTextModelWithProjection",()=>o5,"CLIPVisionModelWithProjection",()=>o8,"CamembertForMaskedLM",()=>iA,"CamembertForQuestionAnswering",()=>iE,"CamembertForSequenceClassification",()=>iO,"CamembertForTokenClassification",()=>ik,"CamembertModel",()=>iS,"CamembertPreTrainedModel",()=>iT,"CausalLMOutput",()=>uK,"CausalLMOutputWithPast",()=>uQ,"ChineseCLIPModel",()=>sn,"ChineseCLIPPreTrainedModel",()=>sr,"ClapAudioModelWithProjection",()=>lj,"ClapModel",()=>lN,"ClapPreTrainedModel",()=>lL,"ClapTextModelWithProjection",()=>lR,"CodeGenForCausalLM",()=>sS,"CodeGenModel",()=>sT,"CodeGenPreTrainedModel",()=>sx,"ConvBertForMaskedLM",()=>ih,"ConvBertForQuestionAnswering",()=>im,"ConvBertForSequenceClassification",()=>ip,"ConvBertForTokenClassification",()=>ig,"ConvBertModel",()=>id,"ConvBertPreTrainedModel",()=>ic,"ConvNextForImageClassification",()=>aL,"ConvNextModel",()=>a$,"ConvNextPreTrainedModel",()=>aD,"ConvNextV2ForImageClassification",()=>aj,"ConvNextV2Model",()=>aR,"ConvNextV2PreTrainedModel",()=>aN,"DPTForDepthEstimation",()=>aO,"DPTModel",()=>aA,"DPTPreTrainedModel",()=>aS,"DebertaForMaskedLM",()=>iI,"DebertaForQuestionAnswering",()=>iD,"DebertaForSequenceClassification",()=>iC,"DebertaForTokenClassification",()=>iF,"DebertaModel",()=>iP,"DebertaPreTrainedModel",()=>iM,"DebertaV2ForMaskedLM",()=>iN,"DebertaV2ForQuestionAnswering",()=>iz,"DebertaV2ForSequenceClassification",()=>iR,"DebertaV2ForTokenClassification",()=>ij,"DebertaV2Model",()=>iL,"DebertaV2PreTrainedModel",()=>i$,"DeiTForImageClassification",()=>af,"DeiTModel",()=>ap,"DeiTPreTrainedModel",()=>ah,"DepthAnythingForDepthEstimation",()=>aE,"DepthAnythingPreTrainedModel",()=>ak,"DetrForObjectDetection",()=>ai,"DetrForSegmentation",()=>ao,"DetrModel",()=>an,"DetrObjectDetectionOutput",()=>as,"DetrPreTrainedModel",()=>ar,"DetrSegmentationOutput",()=>aa,"Dinov2ForImageClassification",()=>aU,"Dinov2Model",()=>aB,"Dinov2PreTrainedModel",()=>az,"DistilBertForMaskedLM",()=>iW,"DistilBertForQuestionAnswering",()=>iq,"DistilBertForSequenceClassification",()=>iV,"DistilBertForTokenClassification",()=>iG,"DistilBertModel",()=>iU,"DistilBertPreTrainedModel",()=>iB,"DonutSwinModel",()=>aF,"DonutSwinPreTrainedModel",()=>aC,"EfficientNetForImageClassification",()=>lQ,"EfficientNetModel",()=>lK,"EfficientNetPreTrainedModel",()=>lY,"ElectraForMaskedLM",()=>iy,"ElectraForQuestionAnswering",()=>ix,"ElectraForSequenceClassification",()=>iw,"ElectraForTokenClassification",()=>iv,"ElectraModel",()=>ib,"ElectraPreTrainedModel",()=>i_,"EsmForMaskedLM",()=>iY,"EsmForSequenceClassification",()=>iK,"EsmForTokenClassification",()=>iQ,"EsmModel",()=>iX,"EsmPreTrainedModel",()=>iH,"FalconForCausalLM",()=>l$,"FalconModel",()=>lD,"FalconPreTrainedModel",()=>lF,"FastViTForImageClassification",()=>sX,"FastViTModel",()=>sH,"FastViTPreTrainedModel",()=>sW,"GLPNForDepthEstimation",()=>aI,"GLPNModel",()=>aP,"GLPNPreTrainedModel",()=>aM,"GPT2LMHeadModel",()=>su,"GPT2Model",()=>sl,"GPT2PreTrainedModel",()=>sa,"GPTBigCodeForCausalLM",()=>sv,"GPTBigCodeModel",()=>sw,"GPTBigCodePreTrainedModel",()=>sy,"GPTJForCausalLM",()=>sb,"GPTJModel",()=>s_,"GPTJPreTrainedModel",()=>sm,"GPTNeoForCausalLM",()=>sh,"GPTNeoModel",()=>sd,"GPTNeoPreTrainedModel",()=>sc,"GPTNeoXForCausalLM",()=>sg,"GPTNeoXModel",()=>sf,"GPTNeoXPreTrainedModel",()=>sp,"HubertForCTC",()=>lh,"HubertForSequenceClassification",()=>lp,"HubertModel",()=>ld,"HubertPreTrainedModel",()=>lc,"ImageMattingOutput",()=>uZ,"LlamaForCausalLM",()=>sk,"LlamaModel",()=>sO,"LlamaPreTrainedModel",()=>sA,"LongT5ForConditionalGeneration",()=>of,"LongT5Model",()=>op,"LongT5PreTrainedModel",()=>oh,"M2M100ForConditionalGeneration",()=>a1,"M2M100Model",()=>a0,"M2M100PreTrainedModel",()=>aJ,"MBartForCausalLM",()=>oO,"MBartForConditionalGeneration",()=>oS,"MBartForSequenceClassification",()=>oA,"MBartModel",()=>oT,"MBartPreTrainedModel",()=>ox,"MPNetForMaskedLM",()=>i6,"MPNetForQuestionAnswering",()=>i7,"MPNetForSequenceClassification",()=>i5,"MPNetForTokenClassification",()=>i8,"MPNetModel",()=>i4,"MPNetPreTrainedModel",()=>i3,"MT5ForConditionalGeneration",()=>o_,"MT5Model",()=>om,"MT5PreTrainedModel",()=>og,"MarianMTModel",()=>aZ,"MarianModel",()=>aQ,"MarianPreTrainedModel",()=>aK,"MaskedLMOutput",()=>uX,"MistralForCausalLM",()=>lM,"MistralModel",()=>lE,"MistralPreTrainedModel",()=>lk,"MobileBertForMaskedLM",()=>i0,"MobileBertForQuestionAnswering",()=>i2,"MobileBertForSequenceClassification",()=>i1,"MobileBertModel",()=>iJ,"MobileBertPreTrainedModel",()=>iZ,"MobileViTForImageClassification",()=>sJ,"MobileViTModel",()=>sZ,"MobileViTPreTrainedModel",()=>sQ,"MobileViTV2ForImageClassification",()=>s2,"MobileViTV2Model",()=>s1,"MobileViTV2PreTrainedModel",()=>s0,"ModelOutput",()=>n3,"MptForCausalLM",()=>sj,"MptModel",()=>sR,"MptPreTrainedModel",()=>sN,"NomicBertModel",()=>ir,"NomicBertPreTrainedModel",()=>it,"OPTForCausalLM",()=>sU,"OPTModel",()=>sB,"OPTPreTrainedModel",()=>sz,"OwlViTForObjectDetection",()=>s6,"OwlViTModel",()=>s4,"OwlViTPreTrainedModel",()=>s3,"Owlv2ForObjectDetection",()=>s7,"Owlv2Model",()=>s8,"Owlv2PreTrainedModel",()=>s5,"PhiForCausalLM",()=>sF,"PhiModel",()=>sC,"PhiPreTrainedModel",()=>sI,"PreTrainedModel",()=>n2,"PretrainedMixin",()=>lZ,"QuestionAnsweringModelOutput",()=>uY,"Qwen2ForCausalLM",()=>sP,"Qwen2Model",()=>sM,"Qwen2PreTrainedModel",()=>sE,"ResNetForImageClassification",()=>a_,"ResNetModel",()=>am,"ResNetPreTrainedModel",()=>ag,"RoFormerForMaskedLM",()=>is,"RoFormerForQuestionAnswering",()=>iu,"RoFormerForSequenceClassification",()=>ia,"RoFormerForTokenClassification",()=>il,"RoFormerModel",()=>io,"RoFormerPreTrainedModel",()=>ii,"RobertaForMaskedLM",()=>o$,"RobertaForQuestionAnswering",()=>oR,"RobertaForSequenceClassification",()=>oL,"RobertaForTokenClassification",()=>oN,"RobertaModel",()=>oD,"RobertaPreTrainedModel",()=>oF,"SamImageSegmentationOutput",()=>aY,"SamModel",()=>aX,"SamPreTrainedModel",()=>aH,"SegformerForImageClassification",()=>lG,"SegformerForSemanticSegmentation",()=>lq,"SegformerModel",()=>lV,"SegformerPreTrainedModel",()=>lU,"Seq2SeqLMOutput",()=>uG,"SequenceClassifierOutput",()=>uq,"SiglipModel",()=>o9,"SiglipPreTrainedModel",()=>o7,"SiglipTextModel",()=>se,"SiglipVisionModel",()=>st,"SpeechT5ForSpeechToText",()=>lx,"SpeechT5ForTextToSpeech",()=>lT,"SpeechT5HifiGan",()=>lS,"SpeechT5Model",()=>lv,"SpeechT5PreTrainedModel",()=>lw,"SqueezeBertForMaskedLM",()=>ot,"SqueezeBertForQuestionAnswering",()=>on,"SqueezeBertForSequenceClassification",()=>or,"SqueezeBertModel",()=>oe,"SqueezeBertPreTrainedModel",()=>i9,"StableLmForCausalLM",()=>lX,"StableLmModel",()=>lH,"StableLmPreTrainedModel",()=>lW,"Starcoder2ForCausalLM",()=>lC,"Starcoder2Model",()=>lI,"Starcoder2PreTrainedModel",()=>lP,"Swin2SRForImageSuperResolution",()=>aT,"Swin2SRModel",()=>ax,"Swin2SRPreTrainedModel",()=>av,"SwinForImageClassification",()=>aw,"SwinModel",()=>ay,"SwinPreTrainedModel",()=>ab,"T5ForConditionalGeneration",()=>od,"T5Model",()=>oc,"T5PreTrainedModel",()=>ou,"TableTransformerForObjectDetection",()=>ac,"TableTransformerModel",()=>au,"TableTransformerObjectDetectionOutput",()=>ad,"TableTransformerPreTrainedModel",()=>al,"TokenClassifierOutput",()=>uH,"TrOCRForCausalLM",()=>lO,"TrOCRPreTrainedModel",()=>lA,"UniSpeechForCTC",()=>a9,"UniSpeechForSequenceClassification",()=>le,"UniSpeechModel",()=>a7,"UniSpeechPreTrainedModel",()=>a8,"UniSpeechSatForAudioFrameClassification",()=>lo,"UniSpeechSatForCTC",()=>ln,"UniSpeechSatForSequenceClassification",()=>li,"UniSpeechSatModel",()=>lr,"UniSpeechSatPreTrainedModel",()=>lt,"ViTForImageClassification",()=>sq,"ViTModel",()=>sG,"ViTPreTrainedModel",()=>sV,"VisionEncoderDecoderModel",()=>o3,"VitMatteForImageMatting",()=>sK,"VitMattePreTrainedModel",()=>sY,"VitsModel",()=>lB,"VitsModelOutput",()=>uJ,"VitsPreTrainedModel",()=>lz,"Wav2Vec2BertForCTC",()=>ll,"Wav2Vec2BertForSequenceClassification",()=>lu,"Wav2Vec2BertModel",()=>la,"Wav2Vec2BertPreTrainedModel",()=>ls,"Wav2Vec2ForAudioFrameClassification",()=>a5,"Wav2Vec2ForCTC",()=>a4,"Wav2Vec2ForSequenceClassification",()=>a6,"Wav2Vec2Model",()=>a3,"Wav2Vec2PreTrainedModel",()=>a2,"WavLMForAudioFrameClassification",()=>ly,"WavLMForCTC",()=>lm,"WavLMForSequenceClassification",()=>l_,"WavLMForXVector",()=>lb,"WavLMModel",()=>lg,"WavLMPreTrainedModel",()=>lf,"WhisperForConditionalGeneration",()=>o2,"WhisperModel",()=>o1,"WhisperPreTrainedModel",()=>o0,"XLMForQuestionAnswering",()=>oG,"XLMForSequenceClassification",()=>oU,"XLMForTokenClassification",()=>oV,"XLMModel",()=>oz,"XLMPreTrainedModel",()=>oj,"XLMRobertaForMaskedLM",()=>oH,"XLMRobertaForQuestionAnswering",()=>oK,"XLMRobertaForSequenceClassification",()=>oX,"XLMRobertaForTokenClassification",()=>oY,"XLMRobertaModel",()=>oW,"XLMRobertaPreTrainedModel",()=>oq,"XLMWithLMHeadModel",()=>oB,"XVectorOutput",()=>uW,"YolosForObjectDetection",()=>aq,"YolosModel",()=>aG,"YolosObjectDetectionOutput",()=>aW,"YolosPreTrainedModel",()=>aV],91441);class nl{constructor(e){this.model_type=null,this.is_encoder_decoder=!1,Object.assign(this,e)}static async from_pretrained(e,{progress_callback:t=null,config:r=null,cache_dir:n=null,local_files_only:i=!1,revision:o="main"}={}){return new this(r??await na(e,{progress_callback:t,config:r,cache_dir:n,local_files_only:i,revision:o}))}}class nu{static async from_pretrained(...e){return nl.from_pretrained(...e)}}e.s(["AutoConfig",()=>nu,"PretrainedConfig",()=>nl],29898);class nc extends l{constructor(){super(),this.processors=[]}push(e){this.processors.push(e)}extend(e){this.processors.push(...e)}_call(e,t){for(let r of t)this.processors.forEach(t=>t(e,r))}[Symbol.iterator](){return this.processors.values()}}class nd extends l{_call(e,t){throw Error("`_call` should be implemented in a subclass")}}class nh extends nd{constructor(e){super(),this.force_token_map=Object.fromEntries(e??[])}_call(e,t){let r=this.force_token_map[e.length];return d(r)&&(t.data.fill(-1/0),t.data[r]=0),t}}class np extends nd{constructor(e){super(),this.bos_token_id=e}_call(e,t){return 1===e.length&&(t.data.fill(-1/0),t.data[this.bos_token_id]=0),t}}class nf extends nd{constructor(e,t){super(),this.max_length=e,this.forced_eos_token_id=t}_call(e,t){}}class ng extends nd{constructor(e,t){super(),this.begin_suppress_tokens=e,this.begin_index=t}_call(e,t){if(e.length===this.begin_index)for(let e of this.begin_suppress_tokens)t.data[e]=-1/0;return t}}class nm extends nd{constructor(e){super(),this.eos_token_id=e.eos_token_id,this.no_timestamps_token_id=e.no_timestamps_token_id,this.timestamp_begin=this.no_timestamps_token_id+1,this.begin_index=(e.forced_decoder_ids||[]).length+2,e.forced_decoder_ids.slice(-1)[0][1]===this.no_timestamps_token_id&&(this.begin_index-=1),this.max_initial_timestamp_index=e.max_initial_timestamp_index}_call(e,t){let r=t.data;if(r[this.no_timestamps_token_id]=-1/0,e.length===this.begin_index-1)return r.fill(-1/0),r[this.timestamp_begin]=0,t;let n=e.slice(this.begin_index),i=n.length>=1&&n[n.length-1]>=this.timestamp_begin,o=n.length<2||n[n.length-2]>=this.timestamp_begin;if(i&&(o?r.subarray(this.timestamp_begin).fill(-1/0):r.subarray(0,this.eos_token_id).fill(-1/0)),e.length===this.begin_index&&null!==this.max_initial_timestamp_index){let e=this.timestamp_begin+this.max_initial_timestamp_index;r.subarray(e+1).fill(-1/0)}let s=K(r);return Math.log(s.subarray(this.timestamp_begin).map(Math.exp).reduce((e,t)=>e+t))>er(s.subarray(0,this.timestamp_begin))[0]&&r.subarray(0,this.timestamp_begin).fill(-1/0),t}}class n_ extends nd{constructor(e){super(),this.no_repeat_ngram_size=e}getNgrams(e){let t=e.length,r=[];for(let n=0;n<t+1-this.no_repeat_ngram_size;++n){let t=[];for(let r=0;r<this.no_repeat_ngram_size;++r)t.push(e[n+r]);r.push(t)}let n=new Map;for(let e of r){let t=JSON.stringify(e.slice(0,e.length-1)),r=n.get(t)??[];r.push(e[e.length-1]),n.set(t,r)}return n}getGeneratedNgrams(e,t){let r=t.slice(t.length+1-this.no_repeat_ngram_size,t.length);return e.get(JSON.stringify(r))??[]}calcBannedNgramTokens(e){let t=[];if(e.length+1<this.no_repeat_ngram_size)return t;{let t=this.getNgrams(e);return this.getGeneratedNgrams(t,e)}}_call(e,t){for(let r of this.calcBannedNgramTokens(e))t.data[r]=-1/0;return t}}class nb extends nd{constructor(e){super(),this.penalty=e}_call(e,t){for(let r of e)t.data[r]<0?t.data[r]*=this.penalty:t.data[r]/=this.penalty;return t}}class ny extends nd{constructor(e,t){super(),this.min_length=e,this.eos_token_id=Array.isArray(t)?t:[t]}_call(e,t){if(e.length<this.min_length)for(let e of this.eos_token_id)t.data[e]=-1/0;return t}}class nw extends nd{constructor(e,t,r){super(),this.prompt_length_to_skip=e,this.min_new_tokens=t,this.eos_token_id=Array.isArray(r)?r:[r]}_call(e,t){if(e.length-this.prompt_length_to_skip<this.min_new_tokens)for(let e of this.eos_token_id)t.data[e]=-1/0;return t}}class nv extends nd{constructor(e,t){super(),this.bad_words_ids=e,this.eos_token_id=Array.isArray(t)?t:[t]}_call(e,t){for(let r of this.bad_words_ids){let n=!0;for(let t=1;t<=r.length-1&&r.length<e.length;++t)if(r.at(-t-1)!==e.at(-t)){n=!1;break}n&&(t.data[r.at(-1)]=-1/0)}return t}}let nx=class{constructor(e={}){this.max_length=e.max_length??20,this.max_new_tokens=e.max_new_tokens??null,this.min_length=e.min_length??0,this.min_new_tokens=e.min_new_tokens??null,this.early_stopping=e.early_stopping??!1,this.max_time=e.max_time??null,this.do_sample=e.do_sample??!1,this.num_beams=e.num_beams??1,this.num_beam_groups=e.num_beam_groups??1,this.penalty_alpha=e.penalty_alpha??null,this.use_cache=e.use_cache??!0,this.temperature=e.temperature??1,this.top_k=e.top_k??50,this.top_p=e.top_p??1,this.typical_p=e.typical_p??1,this.epsilon_cutoff=e.epsilon_cutoff??0,this.eta_cutoff=e.eta_cutoff??0,this.diversity_penalty=e.diversity_penalty??0,this.repetition_penalty=e.repetition_penalty??1,this.encoder_repetition_penalty=e.encoder_repetition_penalty??1,this.length_penalty=e.length_penalty??1,this.no_repeat_ngram_size=e.no_repeat_ngram_size??0,this.bad_words_ids=e.bad_words_ids??null,this.force_words_ids=e.force_words_ids??null,this.renormalize_logits=e.renormalize_logits??!1,this.constraints=e.constraints??null,this.forced_bos_token_id=e.forced_bos_token_id??null,this.forced_eos_token_id=e.forced_eos_token_id??null,this.remove_invalid_values=e.remove_invalid_values??!1,this.exponential_decay_length_penalty=e.exponential_decay_length_penalty??null,this.suppress_tokens=e.suppress_tokens??null,this.begin_suppress_tokens=e.begin_suppress_tokens??null,this.forced_decoder_ids=e.forced_decoder_ids??null,this.num_return_sequences=e.num_return_sequences??1,this.output_attentions=e.output_attentions??!1,this.output_hidden_states=e.output_hidden_states??!1,this.output_scores=e.output_scores??!1,this.return_dict_in_generate=e.return_dict_in_generate??!1,this.pad_token_id=e.pad_token_id??null,this.bos_token_id=e.bos_token_id??null,this.eos_token_id=e.eos_token_id??null,this.encoder_no_repeat_ngram_size=e.encoder_no_repeat_ngram_size??0,this.decoder_start_token_id=e.decoder_start_token_id??null,this.generation_kwargs=e.generation_kwargs??{}}};class nT extends l{constructor(e){super(),this.generation_config=e}_call(e,t=-1){return this.sample(e,t)}sample(e,t){throw Error("sample should be implemented in subclasses.")}getLogits(e,t){let r=e.dims.at(-1),n=e.data;if(-1===t)n=n.slice(-r);else{let e=t*r;n=n.slice(e,e+r)}return this.generation_config.temperature>0&&(n=n.map(e=>e/this.generation_config.temperature)),n}randomSelect(e){let t=Math.random()*e.reduce((e,t)=>e+t,0);for(let r=0;r<e.length;++r)if((t-=e[r])<=0)return r;return 0}static getSampler(e){if(e.do_sample)return new nA(e);if(e.num_beams>1)return new nO(e);if(e.num_return_sequences>1)throw Error(`num_return_sequences has to be 1 when doing greedy search, but is ${e.num_return_sequences}.`);return new nS(e)}}class nS extends nT{sample(e,t=-1){return[[er(this.getLogits(e,t))[1],0]]}}class nA extends nT{sample(e,t=-1){let r=e.dims.at(-1);this.generation_config.top_k>0&&(r=Math.min(this.generation_config.top_k,r));let n=Z(this.getLogits(e,t),r),i=Y(n.map(e=>e[1]));return Array.from({length:this.generation_config.num_beams},()=>{let e=this.randomSelect(i);return[n[e][0],Math.log(i[e])]})}}class nO extends nT{sample(e,t=-1){let r=e.dims.at(-1);this.generation_config.top_k>0&&(r=Math.min(this.generation_config.top_k,r));let n=Z(this.getLogits(e,t),r),i=Y(n.map(e=>e[1]));return Array.from({length:this.generation_config.num_beams},(e,t)=>[n[t][0],Math.log(i[t])])}}let{InferenceSession:nk,Tensor:nE,env:nM}=t,nP=0,nI=1,nC=2,nF=3,nD=4,n$=5,nL=new Map,nN=new Map,nR=new Map;async function nj(e,t,r){let n=`onnx/${t}${r.quantized?"_quantized":""}.onnx`,i=await V(e,n,!0,r);try{return await nk.create(i,{executionProviders:x})}catch(e){if(1===x.length&&"wasm"===x[0])throw e;return console.warn(e),console.warn("Something went wrong during model construction (most likely a missing operation). Using `wasm` as a fallback. "),await nk.create(i,{executionProviders:["wasm"]})}}function nz(e,t){let r=Object.create(null),n=[];for(let i of e.inputNames){let e=t[i];if(!(e instanceof eh)){n.push(i);continue}r[i]=nM.wasm.proxy?e.clone():e}if(n.length>0)throw Error(`An error occurred during model execution: "Missing the following inputs: ${n.join(", ")}.`);let i=Object.keys(t).length,o=e.inputNames.length;if(i>o){let r=Object.keys(t).filter(t=>!e.inputNames.includes(t));console.warn(`WARNING: Too many inputs were provided (${i} > ${o}). The following inputs will be ignored: "${r.join(", ")}".`)}return r}async function nB(e,t){let r=nz(e,t);try{let t=await e.run(r);return t=nU(t)}catch(e){throw console.error(`An error occurred during model execution: "${e}".`),console.error("Inputs given to model:",r),e}}function nU(e){for(let t in e)e[t]instanceof nE?e[t]=new eh(e[t]):"object"==typeof e[t]&&nU(e[t]);return e}function nV(e){if(e instanceof eh)return e;if(0===e.length)throw Error("items must be non-empty");if(!Array.isArray(e[0]))return new eh("int64",BigInt64Array.from(e.map(e=>BigInt(e))),[1,e.length]);if(e.some(t=>t.length!==e[0].length))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=True' and/or 'truncation=True' to have batched tensors with the same length.");return new eh("int64",BigInt64Array.from(e.flat().map(e=>BigInt(e))),[e.length,e[0].length])}function nG(e,t){let r=e.config.pad_token_id??null,n=e.config.eos_token_id??null;c(n)&&(n=[n]);let i=-1!==t.indexOf(r),o=null===n||!n.includes(r);return i&&o?new eh("int64",BigInt64Array.from(t.data.map(e=>e!=r)),t.dims):eE(t)}function nq(e,t,r){if(!e.inputNames.includes("position_ids"))return;let n=new BigInt64Array(t.attention_mask.data.length);for(let e=0;e<t.attention_mask.dims[0];++e){let r=e*t.attention_mask.dims[1],i=BigInt(0);for(let e=0;e<t.attention_mask.dims[1];++e){let o=r+e;0n===t.attention_mask.data[o]?n[o]=BigInt(1):(n[o]=i,i+=t.attention_mask.data[o])}}t.position_ids=new eh("int64",n,t.attention_mask.dims),r&&(t.position_ids=t.position_ids.slice(null,-1).unsqueeze_(-1))}function nW(e){return new eh("bool",[e],[1])}async function nH(e,t){let{encoder_outputs:r,past_key_values:n}=t;r||(r=(await nQ(e,t)).last_hidden_state);let i={input_ids:t.decoder_input_ids,encoder_hidden_states:r},o=!!n;e.decoder_merged_session.inputNames.includes("use_cache_branch")&&(i.use_cache_branch=nW(o)),e.decoder_merged_session.inputNames.includes("encoder_attention_mask")&&(i.encoder_attention_mask=t.attention_mask),nq(e.decoder_merged_session,i,o),e.addPastKeyValues(i,n);let s=await nB(e.decoder_merged_session,i);return new uG({logits:s.logits,past_key_values:n=e.getPastKeyValues(s,n),encoder_outputs:r,...e.getAttentions(s)})}function nX(e,t,r,n){let i=[],o=0,s=e.requires_attention_mask??!0,a=r.decoder_input_ids??r.decoder_start_token_id??r.bos_token_id??r.eos_token_id;for(let r of(a instanceof eh?a=a.tolist().flat():Array.isArray(a)||(a=[a]),t)){r.dims=[1,...r.dims];let t={inputs:r,encoder_outputs:null,prev_model_outputs:null,output_token_ids:a,done:!1,score:0,id:o++};s&&(t.attention_mask=nG(e,r)),i.push(t)}return i}async function nY(e,t){let r=e.main_input_name,n=t.output_token_ids;t.prev_model_outputs&&(n=n.slice(-1));let i={[r]:t.inputs,decoder_input_ids:nV(n),encoder_outputs:t.encoder_outputs,past_key_values:t.prev_model_outputs?.past_key_values};t.attention_mask&&(i.attention_mask=t.attention_mask);let o=await e.forward(i);return t.prev_model_outputs=o,t.encoder_outputs=o.encoder_outputs,o}function nK(e,t){e.output_token_ids=[...e.output_token_ids,t]}async function nQ(e,t){let r=Object.create(null);for(let n of e.session.inputNames)r[n]=t[n];return e.session.inputNames.includes("token_type_ids")&&!r.token_type_ids&&(r.token_type_ids=new eh("int64",new BigInt64Array(r.input_ids.data.length),r.input_ids.dims)),await nB(e.session,r)}async function nZ(e,t){let{input_ids:r,past_key_values:n,attention_mask:i}=t,o={input_ids:r,attention_mask:i??nG(e,r)},s=!!n;e.session.inputNames.includes("use_cache_branch")&&(o.use_cache_branch=nW(s)),nq(e.session,o,s),e.addPastKeyValues(o,n);let a=await nB(e.session,o);return{logits:a.logits,past_key_values:n=e.getPastKeyValues(a,n)}}function nJ(e,t,r,n,i){let o=[],s=0;for(let r of t){let t,a=r.tolist().map(Number);r.dims=[1,...r.dims],i?(t=i[s]).dims=[1,...t.dims]:t=nG(e,r);let l={input:r,model_input_ids:r,attention_mask:t,prev_model_outputs:null,output_token_ids:a,num_output_tokens:n,done:!1,score:0,id:s++};o.push(l)}return o}async function n0(e,t){let r=new BigInt64Array(t.output_token_ids.length).fill(1n),n={input_ids:t.model_input_ids,attention_mask:new eh("int64",r,[1,r.length]),past_key_values:t.prev_model_outputs?.past_key_values},i=await e.forward(n);return t.prev_model_outputs=i,i}function n1(e,t){e.output_token_ids=[...e.output_token_ids,t],e.model_input_ids=new eh("int64",[BigInt(t)],[1,1])}class n2 extends l{main_input_name="input_ids";constructor(e,t){super(),this.config=e,this.session=t;const r=nR.get(this.constructor),n=nL.get(r);this.can_generate=!1,this._runBeam=null,this._getStartBeams=null,this._updateBeam=null,this._forward=null,n===nD?(this.can_generate=!0,this._runBeam=n0,this._getStartBeams=nJ,this._updateBeam=n1,this._forward=nZ):n===nC||n===nF?(this.can_generate=!0,this._runBeam=nY,this._getStartBeams=nX,this._updateBeam=nK,this._forward=nH):this._forward=nQ}async dispose(){let e=[];for(let t of Object.keys(this)){let r=this[t];r instanceof nk&&e.push(r.handler.dispose())}return await Promise.all(e)}static async from_pretrained(e,{quantized:t=!0,progress_callback:r=null,config:n=null,cache_dir:i=null,local_files_only:o=!1,revision:s="main",model_file_name:a=null}={}){let l,u={quantized:t,progress_callback:r,config:n,cache_dir:i,local_files_only:o,revision:s,model_file_name:a},c=nR.get(this),d=nL.get(c);return d===nD?l=await Promise.all([nu.from_pretrained(e,u),nj(e,u.model_file_name??"decoder_model_merged",u),G(e,"generation_config.json",!1,u)]):d===nC||d===nF?l=await Promise.all([nu.from_pretrained(e,u),nj(e,"encoder_model",u),nj(e,"decoder_model_merged",u),G(e,"generation_config.json",!1,u)]):d===n$?l=await Promise.all([nu.from_pretrained(e,u),nj(e,"vision_encoder",u),nj(e,"prompt_encoder_mask_decoder",u)]):d===nI?l=await Promise.all([nu.from_pretrained(e,u),nj(e,"encoder_model",u),nj(e,"decoder_model_merged",u)]):(d!==nP&&console.warn(`Model type for '${c??n?.model_type}' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose.`),l=await Promise.all([nu.from_pretrained(e,u),nj(e,u.model_file_name??"model",u)])),new this(...l)}async _call(e){return await this.forward(e)}async forward(e){return await this._forward(this,e)}_get_logits_processor(e,t,r=null){let n=new nc;if(null!==e.repetition_penalty&&1!==e.repetition_penalty&&n.push(new nb(e.repetition_penalty)),null!==e.no_repeat_ngram_size&&e.no_repeat_ngram_size>0&&n.push(new n_(e.no_repeat_ngram_size)),null!==e.bad_words_ids&&n.push(new nv(e.bad_words_ids,e.eos_token_id)),null!==e.min_length&&null!==e.eos_token_id&&e.min_length>0&&n.push(new ny(e.min_length,e.eos_token_id)),null!==e.min_new_tokens&&null!==e.eos_token_id&&e.min_new_tokens>0&&n.push(new nw(t,e.min_new_tokens,e.eos_token_id)),null!==e.forced_bos_token_id&&n.push(new np(e.forced_bos_token_id)),null!==e.forced_eos_token_id&&n.push(new nf(e.max_length,e.forced_eos_token_id)),null!==e.begin_suppress_tokens){let r=t>1||null===e.forced_bos_token_id?t:t+1;null!==e.forced_decoder_ids&&(r+=e.forced_decoder_ids[e.forced_decoder_ids.length-1][0]),n.push(new ng(e.begin_suppress_tokens,r))}return null!==e.forced_decoder_ids&&n.push(new nh(e.forced_decoder_ids)),null!==r&&n.extend(r),n}_get_generation_config(e){let t=new nx(this.config);return"generation_config"in this&&Object.assign(t,this.generation_config),null!==e&&Object.assign(t,e),t}async generate(e,t=null,r=null,{inputs_attention_mask:n=null}={}){let i;if(!this.can_generate){let e=nR.get(this.constructor),t=`The current model class (${e}) is not compatible with \`.generate()\`, as it doesn't have a language model head.`,r=this.config.model_type,n=l7.get(r)??l8.get(r)??l2.get(r)??ut.get(r);throw n&&(t+=` Please use the following class instead: '${n[0]}'`),Error(t)}if(!(e instanceof eh)&&!u(e)&&!Array.isArray(e))throw Error(`\`inputs\` must be a Tensor, TypedArray, or Array, but is "${e.constructor.name}".`);if(this.config.is_encoder_decoder)i=0;else if(0===(i=e instanceof eh?e.dims.at(-1):e.length))throw Error("Must supply a non-empty array of input token ids.");t=this._get_generation_config(t),r=r??new nc,r=this._get_logits_processor(t,i,r);let o=t.eos_token_id;null===o||Array.isArray(o)||(o=[o]);let s=1,a=1+(t.max_new_tokens??1/0),l=Number.isInteger(t.max_length)&&(t.max_new_tokens??null)===null,c=nT.getSampler(t),d=this.getStartBeams(e,t,s,n);for(;d.some(e=>!e.done)&&s<a;){let e=[];for(let n of d){if(n.done){e.push(n);continue}if(l&&n.output_token_ids.length>=t.max_length){n.done=!0,e.push(n);continue}let i=await this.runBeam(n);t.output_attentions&&this.addAttentionsToBeam(n,i),t.output_scores;let s=i.logits.slice(null,-1,null);for(let[t,i]of(r(n.output_token_ids,s),c(s))){let r={...n};this.updateBeam(r,t),r.score+=i,o&&o.includes(t)&&(r.done=!0),e.push(r)}}++s,d=(e=this.groupBeams(e).map(e=>e.sort((e,t)=>t.score-e.score).slice(0,t.num_beams))).flat(),t.callback_function&&t.callback_function(d)}let h=this.groupBeams(d),p=e=>h.map(r=>t.num_return_sequences>1?r.slice(0,t.num_return_sequences).map(t=>t[e]):[r[0][e]]).flat(),f=p("output_token_ids");return t.return_dict_in_generate?{sequences:f,decoder_attentions:p("decoder_attentions"),cross_attentions:p("cross_attentions")}:f}addAttentionsToBeam(e,t){if(this.config.is_encoder_decoder){if(!t.cross_attentions||0===t.cross_attentions.length)throw Error("`output_attentions` is true, but the model did not produce cross-attentions. This is most likely because the model was not exported with `output_attentions=True`.");e.cross_attentions||(e.cross_attentions=[]),e.cross_attentions.push(t.cross_attentions)}if(!t.decoder_attentions||0===t.decoder_attentions.length)throw Error("`output_attentions` is true, but the model did not produce decoder-attentions. This is most likely because the model was not exported with `output_attentions=True`.");e.decoder_attentions||(e.decoder_attentions=[]),e.decoder_attentions.push(t.decoder_attentions)}groupBeams(e){let t=Object.create(null);for(let r of e)void 0===t[r.id]?t[r.id]=[r]:t[r.id].push(r);return Object.values(t)}getPastKeyValues(e,t){let r=Object.create(null);for(let n in e)if(n.startsWith("present")){let i=n.replace("present","past_key_values");t&&n.includes("encoder")?r[i]=t[i]:r[i]=e[n]}return r}getAttentions(e){let t=Object.create(null);for(let r of["cross_attentions","decoder_attentions"]){let n=[];for(let t in e)t.startsWith(r)&&(n[t.split(".").pop()]=e[t]);t[r]=n}return t}addPastKeyValues(e,t){if(t)Object.assign(e,t);else{let t=1;if(this.config.is_encoder_decoder&&(this.add_encoder_pkv??!0)){let r=[t,this.num_encoder_heads,0,this.encoder_dim_kv],n=[t,this.num_decoder_heads,0,this.decoder_dim_kv];for(let t=0;t<this.num_decoder_layers;++t)e[`past_key_values.${t}.encoder.key`]=new eh("float32",[],r),e[`past_key_values.${t}.encoder.value`]=new eh("float32",[],r),e[`past_key_values.${t}.decoder.key`]=new eh("float32",[],n),e[`past_key_values.${t}.decoder.value`]=new eh("float32",[],n)}else if("falcon"===this.config.model_type){let r=[t*this.num_heads,0,this.dim_kv];for(let t=0;t<this.num_layers;++t)e[`past_key_values.${t}.key`]=new eh("float32",[],r),e[`past_key_values.${t}.value`]=new eh("float32",[],r)}else if(this.config.multi_query){let r=[t*this.num_heads,0,2*this.dim_kv];for(let t=0;t<this.num_layers;++t)e[`past_key_values.${t}.key_value`]=new eh("float32",[],r)}else if("bloom"===this.config.model_type){let r=[t*this.num_heads,this.dim_kv,0],n=[t*this.num_heads,0,this.dim_kv];for(let t=0;t<this.num_layers;++t)e[`past_key_values.${t}.key`]=new eh("float32",[],r),e[`past_key_values.${t}.value`]=new eh("float32",[],n)}else{let r=[t,this.num_heads,0,this.dim_kv];for(let t=0;t<this.num_layers;++t)e[`past_key_values.${t}.key`]=new eh("float32",[],r),e[`past_key_values.${t}.value`]=new eh("float32",[],r)}}}getStartBeams(e,t,r,n){return this._getStartBeams(this,e,t,r,n)}async runBeam(e){return await this._runBeam(this,e)}updateBeam(e,t){return this._updateBeam(e,t)}}class n3{}class n4 extends n3{constructor({last_hidden_state:e,hidden_states:t=null,attentions:r=null}){super(),this.last_hidden_state=e,this.hidden_states=t,this.attentions=r}}class n6 extends n2{}class n5 extends n6{}class n8 extends n6{async _call(e){return new uX(await super._call(e))}}class n7 extends n6{async _call(e){return new uq(await super._call(e))}}class n9 extends n6{async _call(e){return new uH(await super._call(e))}}class ie extends n6{async _call(e){return new uY(await super._call(e))}}class it extends n2{}class ir extends it{}class ii extends n2{}class io extends ii{}class is extends ii{async _call(e){return new uX(await super._call(e))}}class ia extends ii{async _call(e){return new uq(await super._call(e))}}class il extends ii{async _call(e){return new uH(await super._call(e))}}class iu extends ii{async _call(e){return new uY(await super._call(e))}}class ic extends n2{}class id extends ic{}class ih extends ic{async _call(e){return new uX(await super._call(e))}}class ip extends ic{async _call(e){return new uq(await super._call(e))}}class ig extends ic{async _call(e){return new uH(await super._call(e))}}class im extends ic{async _call(e){return new uY(await super._call(e))}}class i_ extends n2{}class ib extends i_{}class iy extends i_{async _call(e){return new uX(await super._call(e))}}class iw extends i_{async _call(e){return new uq(await super._call(e))}}class iv extends i_{async _call(e){return new uH(await super._call(e))}}class ix extends i_{async _call(e){return new uY(await super._call(e))}}class iT extends n2{}class iS extends iT{}class iA extends iT{async _call(e){return new uX(await super._call(e))}}class iO extends iT{async _call(e){return new uq(await super._call(e))}}class ik extends iT{async _call(e){return new uH(await super._call(e))}}class iE extends iT{async _call(e){return new uY(await super._call(e))}}class iM extends n2{}class iP extends iM{}class iI extends iM{async _call(e){return new uX(await super._call(e))}}class iC extends iM{async _call(e){return new uq(await super._call(e))}}class iF extends iM{async _call(e){return new uH(await super._call(e))}}class iD extends iM{async _call(e){return new uY(await super._call(e))}}class i$ extends n2{}class iL extends i${}class iN extends i${async _call(e){return new uX(await super._call(e))}}class iR extends i${async _call(e){return new uq(await super._call(e))}}class ij extends i${async _call(e){return new uH(await super._call(e))}}class iz extends i${async _call(e){return new uY(await super._call(e))}}class iB extends n2{}class iU extends iB{}class iV extends iB{async _call(e){return new uq(await super._call(e))}}class iG extends iB{async _call(e){return new uH(await super._call(e))}}class iq extends iB{async _call(e){return new uY(await super._call(e))}}class iW extends iB{async _call(e){return new uX(await super._call(e))}}class iH extends n2{}class iX extends iH{}class iY extends iH{async _call(e){return new uX(await super._call(e))}}class iK extends iH{async _call(e){return new uq(await super._call(e))}}class iQ extends iH{async _call(e){return new uH(await super._call(e))}}class iZ extends n2{}class iJ extends iZ{}class i0 extends iZ{async _call(e){return new uX(await super._call(e))}}class i1 extends iZ{async _call(e){return new uq(await super._call(e))}}class i2 extends iZ{async _call(e){return new uY(await super._call(e))}}class i3 extends n2{}class i4 extends i3{}class i6 extends i3{async _call(e){return new uX(await super._call(e))}}class i5 extends i3{async _call(e){return new uq(await super._call(e))}}class i8 extends i3{async _call(e){return new uH(await super._call(e))}}class i7 extends i3{async _call(e){return new uY(await super._call(e))}}class i9 extends n2{}class oe extends i9{}class ot extends i9{async _call(e){return new uX(await super._call(e))}}class or extends i9{async _call(e){return new uq(await super._call(e))}}class on extends i9{async _call(e){return new uY(await super._call(e))}}class oi extends n2{}class oo extends oi{}class os extends oi{async _call(e){return new uq(await super._call(e))}}class oa extends oi{async _call(e){return new uY(await super._call(e))}}class ol extends oi{async _call(e){return new uX(await super._call(e))}}class ou extends n2{}class oc extends ou{}class od extends ou{constructor(e,t,r,n){super(e,t),this.decoder_merged_session=r,this.generation_config=n,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class oh extends n2{}class op extends oh{}class of extends oh{constructor(e,t,r,n){super(e,t),this.decoder_merged_session=r,this.generation_config=n,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class og extends n2{}class om extends og{}class o_ extends og{constructor(e,t,r,n){super(e,t),this.decoder_merged_session=r,this.generation_config=n,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class ob extends n2{}class oy extends ob{}class ow extends ob{constructor(e,t,r,n){super(e,t),this.decoder_merged_session=r,this.generation_config=n,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class ov extends ob{async _call(e){return new uq(await super._call(e))}}class ox extends n2{}class oT extends ox{}class oS extends ox{constructor(e,t,r,n){super(e,t),this.decoder_merged_session=r,this.generation_config=n,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class oA extends ox{async _call(e){return new uq(await super._call(e))}}class oO extends ox{constructor(e,t,r){super(e,t),this.generation_config=r,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class ok extends n2{}class oE extends ok{}class oM extends ok{constructor(e,t,r,n){super(e,t),this.decoder_merged_session=r,this.generation_config=n,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class oP extends n2{}class oI extends oP{}class oC extends oP{constructor(e,t,r,n){super(e,t),this.decoder_merged_session=r,this.generation_config=n,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class oF extends n2{}class oD extends oF{}class o$ extends oF{async _call(e){return new uX(await super._call(e))}}class oL extends oF{async _call(e){return new uq(await super._call(e))}}class oN extends oF{async _call(e){return new uH(await super._call(e))}}class oR extends oF{async _call(e){return new uY(await super._call(e))}}class oj extends n2{}class oz extends oj{}class oB extends oj{async _call(e){return new uX(await super._call(e))}}class oU extends oj{async _call(e){return new uq(await super._call(e))}}class oV extends oj{async _call(e){return new uH(await super._call(e))}}class oG extends oj{async _call(e){return new uY(await super._call(e))}}class oq extends n2{}class oW extends oq{}class oH extends oq{async _call(e){return new uX(await super._call(e))}}class oX extends oq{async _call(e){return new uq(await super._call(e))}}class oY extends oq{async _call(e){return new uH(await super._call(e))}}class oK extends oq{async _call(e){return new uY(await super._call(e))}}class oQ extends n2{}class oZ extends oQ{}class oJ extends oQ{}class o0 extends n2{}class o1 extends o0{}class o2 extends o0{requires_attention_mask=!1;main_input_name="input_features";constructor(e,t,r,n){super(e,t),this.decoder_merged_session=r,this.generation_config=n,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}async generate(e,t=null,r=null){if(t=this._get_generation_config(t),t.return_timestamps??=!1,t.return_timestamps&&(r=[new nm(t)]),t.return_token_timestamps&&(t.output_attentions=!0,t.return_dict_in_generate=!0,"translate"===t.task&&console.warn("Token-level timestamps may not be reliable for task 'translate'."),!t.alignment_heads))throw Error("Model generation config has no `alignment_heads`, token-level timestamps not available. See https://gist.github.com/hollance/42e32852f24243b748ae6bc1f985b13a on how to add this property to the generation config.");let n=await super.generate(e,t,r);return t.return_token_timestamps&&t.alignment_heads&&(n.token_timestamps=this._extract_token_timestamps(n,t.alignment_heads,t.num_frames)),n}_extract_token_timestamps(e,t,r=null,n=.02){if(!e.cross_attentions)throw Error("Model outputs must contain cross attentions to extract timestamps. This is most likely because the model was not exported with `output_attentions=True`.");let i=this.config.median_filter_width;void 0===i&&(console.warn("Model config has no `median_filter_width`, using default value of 7."),i=7);let o=e.cross_attentions.map(e=>{let n=Array.from({length:this.config.decoder_layers},(t,r)=>ev(e.map(e=>e[r]),2)),o=ex(t.map(([e,t])=>r?n[e].slice(null,t,null,[0,r]):n[e].slice(null,t))),[s,a]=eT(o=o.transpose(1,0,2,3),-2,0,!0),l=o.clone();for(let e=0;e<l.dims[0];++e){let t=l[e];for(let r=0;r<t.dims[0];++r){let n=t[r],o=s[e][r][0],l=a[e][r][0];for(let e=0;e<n.dims[0];++e){let t=n[e];for(let e=0;e<t.data.length;++e)t.data[e]=(t.data[e]-l.data[e])/o.data[e];t.data.set(ea(t.data,i))}}}return eS(l,1)}),s=[e.sequences.length,e.sequences[0].length],a=new eh("float32",new Float32Array(s[0]*s[1]),s);for(let e=0;e<s[0];++e){let[t,r]=eA(o[e].neg().squeeze_(0)),i=f([1],Array.from({length:t.length-1},(e,r)=>t[r+1]-t[r])).map(e=>!!e),s=[];for(let e=0;e<i.length;++e)i[e]&&s.push(r[e]*n);a[e].data.set(s,1)}return a}}class o3 extends n2{main_input_name="pixel_values";constructor(e,t,r,n){super(e,t),this.decoder_merged_session=r,this.generation_config=n;const i=this.config.encoder,o=this.config.decoder,s=i.model_type;(lJ.get(s)??l0.get(s))||console.warn(`Model type for encoder '${s}' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose.`);const a=l7.get(o.model_type);if(!a)throw Error(`Unable to construct \`VisionEncoderDecoder\` due to unsupported decoder: "${this.config.decoder.model_type}"`);const l=new a[1](o,r,n);this.add_encoder_pkv="num_decoder_layers"in l,this.add_encoder_pkv?(this.num_decoder_layers=l.num_decoder_layers,this.num_decoder_heads=l.num_decoder_heads,this.decoder_dim_kv=l.decoder_dim_kv,this.num_encoder_layers=l.num_encoder_layers,this.num_encoder_heads=l.num_encoder_heads,this.encoder_dim_kv=l.encoder_dim_kv):(this.num_layers=l.num_layers,this.num_heads=l.num_heads,this.dim_kv=l.dim_kv)}}class o4 extends n2{}class o6 extends o4{}class o5 extends o4{static async from_pretrained(e,t={}){return t.model_file_name??="text_model",super.from_pretrained(e,t)}}class o8 extends o4{static async from_pretrained(e,t={}){return t.model_file_name??="vision_model",super.from_pretrained(e,t)}}class o7 extends n2{}class o9 extends o7{}class se extends o7{static async from_pretrained(e,t={}){return t.model_file_name??="text_model",super.from_pretrained(e,t)}}class st extends o4{static async from_pretrained(e,t={}){return t.model_file_name??="vision_model",super.from_pretrained(e,t)}}class sr extends n2{}class sn extends sr{}class si extends n2{}class so extends si{}class ss extends si{}class sa extends n2{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class sl extends sa{}class su extends sa{}class sc extends n2{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_heads,this.num_layers=this.config.num_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class sd extends sc{}class sh extends sc{}class sp extends n2{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class sf extends sp{}class sg extends sp{}class sm extends n2{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class s_ extends sm{}class sb extends sm{}class sy extends n2{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class sw extends sy{}class sv extends sy{}class sx extends n2{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class sT extends sx{}class sS extends sx{}class sA extends n2{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads??this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class sO extends sA{}class sk extends sA{}class sE extends n2{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads??this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class sM extends sE{}class sP extends sE{}class sI extends n2{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class sC extends sI{}class sF extends sI{}class sD extends n2{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.hidden_size/this.num_heads}}class s$ extends sD{}class sL extends sD{}class sN extends n2{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_heads,this.num_layers=this.config.n_layers,this.dim_kv=this.config.d_model/this.num_heads}}class sR extends sN{}class sj extends sN{}class sz extends n2{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class sB extends sz{}class sU extends sz{}class sV extends n2{}class sG extends sV{}class sq extends sV{async _call(e){return new uq(await super._call(e))}}class sW extends n2{}class sH extends sW{}class sX extends sW{async _call(e){return new uq(await super._call(e))}}class sY extends n2{}class sK extends sY{async _call(e){return new uZ(await super._call(e))}}class sQ extends n2{}class sZ extends sQ{}class sJ extends sQ{async _call(e){return new uq(await super._call(e))}}class s0 extends n2{}class s1 extends s0{}class s2 extends s0{async _call(e){return new uq(await super._call(e))}}class s3 extends n2{}class s4 extends s3{}class s6 extends s3{}class s5 extends n2{}class s8 extends s5{}class s7 extends s5{}class s9 extends n2{}class ae extends s9{}class at extends s9{async _call(e){return new uq(await super._call(e))}}class ar extends n2{}class an extends ar{}class ai extends ar{async _call(e){return new as(await super._call(e))}}class ao extends ar{async _call(e){return new aa(await super._call(e))}}class as extends n3{constructor({logits:e,pred_boxes:t}){super(),this.logits=e,this.pred_boxes=t}}class aa extends n3{constructor({logits:e,pred_boxes:t,pred_masks:r}){super(),this.logits=e,this.pred_boxes=t,this.pred_masks=r}}class al extends n2{}class au extends al{}class ac extends al{async _call(e){return new ad(await super._call(e))}}class ad extends as{}class ah extends n2{}class ap extends ah{}class af extends ah{async _call(e){return new uq(await super._call(e))}}class ag extends n2{}class am extends ag{}class a_ extends ag{async _call(e){return new uq(await super._call(e))}}class ab extends n2{}class ay extends ab{}class aw extends ab{async _call(e){return new uq(await super._call(e))}}class av extends n2{}class ax extends av{}class aT extends av{}class aS extends n2{}class aA extends aS{}class aO extends aS{}class ak extends n2{}class aE extends ak{}class aM extends n2{}class aP extends aM{}class aI extends aM{}class aC extends n2{}class aF extends aC{}class aD extends n2{}class a$ extends aD{}class aL extends aD{async _call(e){return new uq(await super._call(e))}}class aN extends n2{}class aR extends aN{}class aj extends aN{async _call(e){return new uq(await super._call(e))}}class az extends n2{}class aB extends az{}class aU extends az{async _call(e){return new uq(await super._call(e))}}class aV extends n2{}class aG extends aV{}class aq extends aV{async _call(e){return new aW(await super._call(e))}}class aW extends n3{constructor({logits:e,pred_boxes:t}){super(),this.logits=e,this.pred_boxes=t}}class aH extends n2{}class aX extends aH{constructor(e,t,r){super(e,t),this.prompt_encoder_mask_decoder=r}async get_image_embeddings({pixel_values:e}){return await nQ(this,{pixel_values:e})}async forward(e){if(e.image_embeddings&&e.image_positional_embeddings||(e={...e,...await this.get_image_embeddings(e)}),!e.input_labels){let t=e.input_points.dims.slice(0,-1),r=t.reduce((e,t)=>e*t,1);e.input_labels=new eh("int64",new BigInt64Array(r).fill(1n),t)}return await nB(this.prompt_encoder_mask_decoder,{input_points:e.input_points,input_labels:e.input_labels,image_embeddings:e.image_embeddings,image_positional_embeddings:e.image_positional_embeddings})}async _call(e){return new aY(await super._call(e))}}class aY extends n3{constructor({iou_scores:e,pred_masks:t}){super(),this.iou_scores=e,this.pred_masks=t}}class aK extends n2{}class aQ extends aK{}class aZ extends aK{constructor(e,t,r,n){super(e,t),this.decoder_merged_session=r,this.generation_config=n,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class aJ extends n2{}class a0 extends aJ{}class a1 extends aJ{constructor(e,t,r,n){super(e,t),this.decoder_merged_session=r,this.generation_config=n,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class a2 extends n2{}class a3 extends a2{}class a4 extends a2{async _call(e){return new uK(await super._call(e))}}class a6 extends a2{async _call(e){return new uq(await super._call(e))}}class a5 extends a2{async _call(e){return new uH(await super._call(e))}}class a8 extends n2{}class a7 extends a8{}class a9 extends a8{async _call(e){return new uK(await super._call(e))}}class le extends a8{async _call(e){return new uq(await super._call(e))}}class lt extends n2{}class lr extends lt{}class ln extends lt{async _call(e){return new uK(await super._call(e))}}class li extends lt{async _call(e){return new uq(await super._call(e))}}class lo extends lt{async _call(e){return new uH(await super._call(e))}}class ls extends n2{}class la extends ls{}class ll extends ls{async _call(e){return new uK(await super._call(e))}}class lu extends ls{async _call(e){return new uq(await super._call(e))}}class lc extends n2{}class ld extends a2{}class lh extends a2{async _call(e){return new uK(await super._call(e))}}class lp extends a2{async _call(e){return new uq(await super._call(e))}}class lf extends n2{}class lg extends lf{}class lm extends lf{async _call(e){return new uK(await super._call(e))}}class l_ extends lf{async _call(e){return new uq(await super._call(e))}}class lb extends lf{async _call(e){return new uW(await super._call(e))}}class ly extends lf{async _call(e){return new uH(await super._call(e))}}class lw extends n2{}class lv extends lw{}class lx extends lw{}class lT extends lw{constructor(e,t,r,n){super(e,t),this.decoder_merged_session=r,this.generation_config=n,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.hidden_size/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.hidden_size/this.num_encoder_heads}async generate_speech(e,t,{threshold:r=.5,minlenratio:n=0,maxlenratio:i=20,vocoder:o=null}={}){let s={input_ids:e},{encoder_outputs:a,encoder_attention_mask:l}=await nQ(this,s),u=a.dims[1]/this.config.reduction_factor,c=Math.floor(u*i),d=Math.floor(u*n),h=this.config.num_mel_bins,p=[],f=null,g=null,m=0;for(;;){let e;++m;let n={use_cache_branch:nW(!!g),output_sequence:e=g?g.output_sequence_out:new eh("float32",new Float32Array(h),[1,1,h]),encoder_attention_mask:l,speaker_embeddings:t,encoder_hidden_states:a};this.addPastKeyValues(n,f),g=await nB(this.decoder_merged_session,n),f=this.getPastKeyValues(g,f);let{prob:i,spectrum:o}=g;if(p.push(o),m>=d&&(Array.from(i.data).filter(e=>e>=r).length>0||m>=c))break}let _=ev(p),{waveform:b}=await nB(o.session,{spectrogram:_});return{spectrogram:_,waveform:b}}}class lS extends n2{main_input_name="spectrogram"}class lA extends n2{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_encoder_layers=this.num_decoder_layers=this.config.decoder_layers,this.num_encoder_heads=this.num_decoder_heads=this.config.decoder_attention_heads,this.encoder_dim_kv=this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads}}class lO extends lA{}class lk extends n2{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class lE extends lk{}class lM extends lk{}class lP extends n2{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class lI extends lP{}class lC extends lP{}class lF extends n2{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class lD extends lF{}class l$ extends lF{}class lL extends n2{}class lN extends lL{}class lR extends lL{static async from_pretrained(e,t={}){return t.model_file_name??="text_model",super.from_pretrained(e,t)}}class lj extends lL{static async from_pretrained(e,t={}){return t.model_file_name??="audio_model",super.from_pretrained(e,t)}}class lz extends n2{}class lB extends lz{async _call(e){return new uJ(await super._call(e))}}class lU extends n2{}class lV extends lU{}class lG extends lU{}class lq extends lU{}class lW extends n2{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class lH extends lW{}class lX extends lW{}class lY extends n2{}class lK extends lY{}class lQ extends lY{async _call(e){return new uq(await super._call(e))}}class lZ{static MODEL_CLASS_MAPPINGS=null;static BASE_IF_FAIL=!1;static async from_pretrained(e,{quantized:t=!0,progress_callback:r=null,config:n=null,cache_dir:i=null,local_files_only:o=!1,revision:s="main",model_file_name:a=null}={}){let l={quantized:t,progress_callback:r,config:n,cache_dir:i,local_files_only:o,revision:s,model_file_name:a};if(n=await nu.from_pretrained(e,l),l.config||(l.config=n),!this.MODEL_CLASS_MAPPINGS)throw Error("`MODEL_CLASS_MAPPINGS` not implemented for this type of `AutoClass`: "+this.name);for(let t of this.MODEL_CLASS_MAPPINGS){let r=t.get(n.model_type);if(r)return await r[1].from_pretrained(e,l)}if(this.BASE_IF_FAIL)return console.warn(`Unknown model class "${n.model_type}", attempting to construct from base class.`),await n2.from_pretrained(e,l);throw Error(`Unsupported model type: ${n.model_type}`)}}let lJ=new Map([["bert",["BertModel",n5]],["nomic_bert",["NomicBertModel",ir]],["roformer",["RoFormerModel",io]],["electra",["ElectraModel",ib]],["esm",["EsmModel",iX]],["convbert",["ConvBertModel",id]],["camembert",["CamembertModel",iS]],["deberta",["DebertaModel",iP]],["deberta-v2",["DebertaV2Model",iL]],["mpnet",["MPNetModel",i4]],["albert",["AlbertModel",oo]],["distilbert",["DistilBertModel",iU]],["roberta",["RobertaModel",oD]],["xlm",["XLMModel",oz]],["xlm-roberta",["XLMRobertaModel",oW]],["clap",["ClapModel",lN]],["clip",["CLIPModel",o6]],["clipseg",["CLIPSegModel",so]],["chinese_clip",["ChineseCLIPModel",sn]],["siglip",["SiglipModel",o9]],["mobilebert",["MobileBertModel",iJ]],["squeezebert",["SqueezeBertModel",oe]],["wav2vec2",["Wav2Vec2Model",a3]],["wav2vec2-bert",["Wav2Vec2BertModel",la]],["unispeech",["UniSpeechModel",a7]],["unispeech-sat",["UniSpeechSatModel",lr]],["hubert",["HubertModel",ld]],["wavlm",["WavLMModel",lg]],["audio-spectrogram-transformer",["ASTModel",oZ]],["vits",["VitsModel",lB]],["detr",["DetrModel",an]],["table-transformer",["TableTransformerModel",au]],["vit",["ViTModel",sG]],["fastvit",["FastViTModel",sH]],["mobilevit",["MobileViTModel",sZ]],["mobilevitv2",["MobileViTV2Model",s1]],["owlvit",["OwlViTModel",s4]],["owlv2",["Owlv2Model",s8]],["beit",["BeitModel",ae]],["deit",["DeiTModel",ap]],["convnext",["ConvNextModel",a$]],["convnextv2",["ConvNextV2Model",aR]],["dinov2",["Dinov2Model",aB]],["resnet",["ResNetModel",am]],["swin",["SwinModel",ay]],["swin2sr",["Swin2SRModel",ax]],["donut-swin",["DonutSwinModel",aF]],["yolos",["YolosModel",aG]],["dpt",["DPTModel",aA]],["glpn",["GLPNModel",aP]],["hifigan",["SpeechT5HifiGan",lS]],["efficientnet",["EfficientNetModel",lK]]]),l0=new Map([["t5",["T5Model",oc]],["longt5",["LongT5Model",op]],["mt5",["MT5Model",om]],["bart",["BartModel",oy]],["mbart",["MBartModel",oT]],["marian",["MarianModel",aQ]],["whisper",["WhisperModel",o1]],["m2m_100",["M2M100Model",a0]],["blenderbot",["BlenderbotModel",oE]],["blenderbot-small",["BlenderbotSmallModel",oI]]]),l1=new Map([["bloom",["BloomModel",s$]],["gpt2",["GPT2Model",sl]],["gptj",["GPTJModel",s_]],["gpt_bigcode",["GPTBigCodeModel",sw]],["gpt_neo",["GPTNeoModel",sd]],["gpt_neox",["GPTNeoXModel",sf]],["codegen",["CodeGenModel",sT]],["llama",["LlamaModel",sO]],["qwen2",["Qwen2Model",sM]],["phi",["PhiModel",sC]],["mpt",["MptModel",sR]],["opt",["OPTModel",sB]],["mistral",["MistralModel",lE]],["starcoder2",["Starcoder2Model",lI]],["falcon",["FalconModel",lD]]]),l2=new Map([["speecht5",["SpeechT5ForSpeechToText",lx]],["whisper",["WhisperForConditionalGeneration",o2]]]),l3=new Map([["speecht5",["SpeechT5ForTextToSpeech",lT]]]),l4=new Map([["vits",["VitsModel",lB]]]),l6=new Map([["bert",["BertForSequenceClassification",n7]],["roformer",["RoFormerForSequenceClassification",ia]],["electra",["ElectraForSequenceClassification",iw]],["esm",["EsmForSequenceClassification",iK]],["convbert",["ConvBertForSequenceClassification",ip]],["camembert",["CamembertForSequenceClassification",iO]],["deberta",["DebertaForSequenceClassification",iC]],["deberta-v2",["DebertaV2ForSequenceClassification",iR]],["mpnet",["MPNetForSequenceClassification",i5]],["albert",["AlbertForSequenceClassification",os]],["distilbert",["DistilBertForSequenceClassification",iV]],["roberta",["RobertaForSequenceClassification",oL]],["xlm",["XLMForSequenceClassification",oU]],["xlm-roberta",["XLMRobertaForSequenceClassification",oX]],["bart",["BartForSequenceClassification",ov]],["mbart",["MBartForSequenceClassification",oA]],["mobilebert",["MobileBertForSequenceClassification",i1]],["squeezebert",["SqueezeBertForSequenceClassification",or]]]),l5=new Map([["bert",["BertForTokenClassification",n9]],["roformer",["RoFormerForTokenClassification",il]],["electra",["ElectraForTokenClassification",iv]],["esm",["EsmForTokenClassification",iQ]],["convbert",["ConvBertForTokenClassification",ig]],["camembert",["CamembertForTokenClassification",ik]],["deberta",["DebertaForTokenClassification",iF]],["deberta-v2",["DebertaV2ForTokenClassification",ij]],["mpnet",["MPNetForTokenClassification",i8]],["distilbert",["DistilBertForTokenClassification",iG]],["roberta",["RobertaForTokenClassification",oN]],["xlm",["XLMForTokenClassification",oV]],["xlm-roberta",["XLMRobertaForTokenClassification",oY]]]),l8=new Map([["t5",["T5ForConditionalGeneration",od]],["longt5",["LongT5ForConditionalGeneration",of]],["mt5",["MT5ForConditionalGeneration",o_]],["bart",["BartForConditionalGeneration",ow]],["mbart",["MBartForConditionalGeneration",oS]],["marian",["MarianMTModel",aZ]],["m2m_100",["M2M100ForConditionalGeneration",a1]],["blenderbot",["BlenderbotForConditionalGeneration",oM]],["blenderbot-small",["BlenderbotSmallForConditionalGeneration",oC]]]),l7=new Map([["bloom",["BloomForCausalLM",sL]],["gpt2",["GPT2LMHeadModel",su]],["gptj",["GPTJForCausalLM",sb]],["gpt_bigcode",["GPTBigCodeForCausalLM",sv]],["gpt_neo",["GPTNeoForCausalLM",sh]],["gpt_neox",["GPTNeoXForCausalLM",sg]],["codegen",["CodeGenForCausalLM",sS]],["llama",["LlamaForCausalLM",sk]],["qwen2",["Qwen2ForCausalLM",sP]],["phi",["PhiForCausalLM",sF]],["mpt",["MptForCausalLM",sj]],["opt",["OPTForCausalLM",sU]],["mbart",["MBartForCausalLM",oO]],["mistral",["MistralForCausalLM",lM]],["starcoder2",["Starcoder2ForCausalLM",lC]],["falcon",["FalconForCausalLM",l$]],["trocr",["TrOCRForCausalLM",lO]],["stablelm",["StableLmForCausalLM",lX]]]),l9=new Map([["bert",["BertForMaskedLM",n8]],["roformer",["RoFormerForMaskedLM",is]],["electra",["ElectraForMaskedLM",iy]],["esm",["EsmForMaskedLM",iY]],["convbert",["ConvBertForMaskedLM",ih]],["camembert",["CamembertForMaskedLM",iA]],["deberta",["DebertaForMaskedLM",iI]],["deberta-v2",["DebertaV2ForMaskedLM",iN]],["mpnet",["MPNetForMaskedLM",i6]],["albert",["AlbertForMaskedLM",ol]],["distilbert",["DistilBertForMaskedLM",iW]],["roberta",["RobertaForMaskedLM",o$]],["xlm",["XLMWithLMHeadModel",oB]],["xlm-roberta",["XLMRobertaForMaskedLM",oH]],["mobilebert",["MobileBertForMaskedLM",i0]],["squeezebert",["SqueezeBertForMaskedLM",ot]]]),ue=new Map([["bert",["BertForQuestionAnswering",ie]],["roformer",["RoFormerForQuestionAnswering",iu]],["electra",["ElectraForQuestionAnswering",ix]],["convbert",["ConvBertForQuestionAnswering",im]],["camembert",["CamembertForQuestionAnswering",iE]],["deberta",["DebertaForQuestionAnswering",iD]],["deberta-v2",["DebertaV2ForQuestionAnswering",iz]],["mpnet",["MPNetForQuestionAnswering",i7]],["albert",["AlbertForQuestionAnswering",oa]],["distilbert",["DistilBertForQuestionAnswering",iq]],["roberta",["RobertaForQuestionAnswering",oR]],["xlm",["XLMForQuestionAnswering",oG]],["xlm-roberta",["XLMRobertaForQuestionAnswering",oK]],["mobilebert",["MobileBertForQuestionAnswering",i2]],["squeezebert",["SqueezeBertForQuestionAnswering",on]]]),ut=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",o3]]]),ur=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",o3]]]),un=new Map([["vit",["ViTForImageClassification",sq]],["fastvit",["FastViTForImageClassification",sX]],["mobilevit",["MobileViTForImageClassification",sJ]],["mobilevitv2",["MobileViTV2ForImageClassification",s2]],["beit",["BeitForImageClassification",at]],["deit",["DeiTForImageClassification",af]],["convnext",["ConvNextForImageClassification",aL]],["convnextv2",["ConvNextV2ForImageClassification",aj]],["dinov2",["Dinov2ForImageClassification",aU]],["resnet",["ResNetForImageClassification",a_]],["swin",["SwinForImageClassification",aw]],["segformer",["SegformerForImageClassification",lG]],["efficientnet",["EfficientNetForImageClassification",lQ]]]),ui=new Map([["detr",["DetrForObjectDetection",ai]],["table-transformer",["TableTransformerForObjectDetection",ac]],["yolos",["YolosForObjectDetection",aq]]]),uo=new Map([["owlvit",["OwlViTForObjectDetection",s6]],["owlv2",["Owlv2ForObjectDetection",s7]]]),us=new Map([["detr",["DetrForSegmentation",ao]],["clipseg",["CLIPSegForImageSegmentation",ss]]]),ua=new Map([["segformer",["SegformerForSemanticSegmentation",lq]]]),ul=new Map([["sam",["SamModel",aX]]]),uu=new Map([["wav2vec2",["Wav2Vec2ForCTC",a4]],["wav2vec2-bert",["Wav2Vec2BertForCTC",ll]],["unispeech",["UniSpeechForCTC",a9]],["unispeech-sat",["UniSpeechSatForCTC",ln]],["wavlm",["WavLMForCTC",lm]],["hubert",["HubertForCTC",lh]]]),uc=new Map([["wav2vec2",["Wav2Vec2ForSequenceClassification",a6]],["wav2vec2-bert",["Wav2Vec2BertForSequenceClassification",lu]],["unispeech",["UniSpeechForSequenceClassification",le]],["unispeech-sat",["UniSpeechSatForSequenceClassification",li]],["wavlm",["WavLMForSequenceClassification",l_]],["hubert",["HubertForSequenceClassification",lp]],["audio-spectrogram-transformer",["ASTForAudioClassification",oJ]]]),ud=new Map([["wavlm",["WavLMForXVector",lb]]]),uh=new Map([["unispeech-sat",["UniSpeechSatForAudioFrameClassification",lo]],["wavlm",["WavLMForAudioFrameClassification",ly]],["wav2vec2",["Wav2Vec2ForAudioFrameClassification",a5]]]),up=new Map([["vitmatte",["VitMatteForImageMatting",sK]]]),uf=new Map([["swin2sr",["Swin2SRForImageSuperResolution",aT]]]),ug=new Map([["dpt",["DPTForDepthEstimation",aO]],["depth_anything",["DepthAnythingForDepthEstimation",aE]],["glpn",["GLPNForDepthEstimation",aI]]]),um=new Map([["clip",["CLIPVisionModelWithProjection",o8]],["siglip",["SiglipVisionModel",st]]]),u_=[[lJ,nP],[l0,nI],[l1,nD],[l6,nP],[l5,nP],[l8,nC],[l2,nC],[l7,nD],[l9,nP],[ue,nP],[ut,nF],[un,nP],[us,nP],[ua,nP],[up,nP],[uf,nP],[ug,nP],[ui,nP],[uo,nP],[ul,n$],[uu,nP],[uc,nP],[l3,nC],[l4,nP],[ud,nP],[uh,nP],[um,nP]];for(let[e,t]of u_)for(let[r,n]of e.values())nL.set(r,t),nR.set(n,r),nN.set(r,n);for(let[e,t,r]of[["CLIPTextModelWithProjection",o5,nP],["SiglipTextModel",se,nP],["ClapTextModelWithProjection",lR,nP],["ClapAudioModelWithProjection",lj,nP]])nL.set(e,r),nR.set(t,e),nN.set(e,t);class ub extends lZ{static MODEL_CLASS_MAPPINGS=u_.map(e=>e[0]);static BASE_IF_FAIL=!0}class uy extends lZ{static MODEL_CLASS_MAPPINGS=[l6]}class uw extends lZ{static MODEL_CLASS_MAPPINGS=[l5]}class uv extends lZ{static MODEL_CLASS_MAPPINGS=[l8]}class ux extends lZ{static MODEL_CLASS_MAPPINGS=[l2]}class uT extends lZ{static MODEL_CLASS_MAPPINGS=[l3]}class uS extends lZ{static MODEL_CLASS_MAPPINGS=[l4]}class uA extends lZ{static MODEL_CLASS_MAPPINGS=[l7]}class uO extends lZ{static MODEL_CLASS_MAPPINGS=[l9]}class uk extends lZ{static MODEL_CLASS_MAPPINGS=[ue]}class uE extends lZ{static MODEL_CLASS_MAPPINGS=[ut]}class uM extends lZ{static MODEL_CLASS_MAPPINGS=[un]}class uP extends lZ{static MODEL_CLASS_MAPPINGS=[us]}class uI extends lZ{static MODEL_CLASS_MAPPINGS=[ua]}class uC extends lZ{static MODEL_CLASS_MAPPINGS=[ui]}class uF extends lZ{static MODEL_CLASS_MAPPINGS=[uo]}class uD extends lZ{static MODEL_CLASS_MAPPINGS=[ul]}class u$ extends lZ{static MODEL_CLASS_MAPPINGS=[uu]}class uL extends lZ{static MODEL_CLASS_MAPPINGS=[uc]}class uN extends lZ{static MODEL_CLASS_MAPPINGS=[ud]}class uR extends lZ{static MODEL_CLASS_MAPPINGS=[uh]}class uj extends lZ{static MODEL_CLASS_MAPPINGS=[ur]}class uz extends lZ{static MODEL_CLASS_MAPPINGS=[up]}class uB extends lZ{static MODEL_CLASS_MAPPINGS=[uf]}class uU extends lZ{static MODEL_CLASS_MAPPINGS=[ug]}class uV extends lZ{static MODEL_CLASS_MAPPINGS=[um]}class uG extends n3{constructor({logits:e,past_key_values:t,encoder_outputs:r,decoder_attentions:n=null,cross_attentions:i=null}){super(),this.logits=e,this.past_key_values=t,this.encoder_outputs=r,this.decoder_attentions=n,this.cross_attentions=i}}class uq extends n3{constructor({logits:e}){super(),this.logits=e}}class uW extends n3{constructor({logits:e,embeddings:t}){super(),this.logits=e,this.embeddings=t}}class uH extends n3{constructor({logits:e}){super(),this.logits=e}}class uX extends n3{constructor({logits:e}){super(),this.logits=e}}class uY extends n3{constructor({start_logits:e,end_logits:t}){super(),this.start_logits=e,this.end_logits=t}}class uK extends n3{constructor({logits:e}){super(),this.logits=e}}class uQ extends n3{constructor({logits:e,past_key_values:t}){super(),this.logits=e,this.past_key_values=t}}class uZ extends n3{constructor({alphas:e}){super(),this.alphas=e}}class uJ extends n3{constructor({waveform:e,spectrogram:t}){super(),this.waveform=e,this.spectrogram=t}}let u0="u">typeof self,u1=u0&&"DedicatedWorkerGlobalScope"===self.constructor.name;if(u0)r=(e,t)=>{if(!self.OffscreenCanvas)throw Error("OffscreenCanvas not supported by this browser.");return new self.OffscreenCanvas(e,t)},i=self.createImageBitmap,n=self.ImageData;else if(1)throw Error("Unable to load image processing library.");else i=async e=>{let t=(await e.metadata()).channels,{data:r,info:n}=await e.rotate().raw().toBuffer({resolveWithObject:!0}),i=new u4(new Uint8ClampedArray(r),n.width,n.height,n.channels);return void 0!==t&&t!==n.channels&&i.convert(t),i};let u2={0:"nearest",1:"lanczos",2:"bilinear",3:"bicubic",4:"box",5:"hamming"},u3=new Map([["png","image/png"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["gif","image/gif"]]);class u4{constructor(e,t,r,n){this.data=e,this.width=t,this.height=r,this.channels=n}get size(){return[this.width,this.height]}static async read(e){if(e instanceof u4)return e;if("string"==typeof e||e instanceof URL)return await this.fromURL(e);throw Error(`Unsupported input type: ${typeof e}`)}static async fromURL(e){let t=await R(e);if(200!==t.status)throw Error(`Unable to read image from "${e}" (${t.status} ${t.statusText})`);let r=await t.blob();return this.fromBlob(r)}static async fromBlob(e){if(u0){let t=await i(e),n=r(t.width,t.height).getContext("2d");return n.drawImage(t,0,0),new this(n.getImageData(0,0,t.width,t.height).data,t.width,t.height,4)}{let t=(void 0)(await e.arrayBuffer());return await i(t)}}static fromTensor(e,t="CHW"){if(3!==e.dims.length)throw Error(`Tensor should have 3 dimensions, but has ${e.dims.length} dimensions.`);if("CHW"===t)e=e.transpose(1,2,0);else if("HWC"===t);else throw Error(`Unsupported channel format: ${t}`);if(!(e.data instanceof Uint8ClampedArray||e.data instanceof Uint8Array))throw Error(`Unsupported tensor type: ${e.type}`);switch(e.dims[2]){case 1:case 2:case 3:case 4:return new u4(e.data,e.dims[1],e.dims[0],e.dims[2]);default:throw Error(`Unsupported number of channels: ${e.dims[2]}`)}}grayscale(){if(1===this.channels)return this;let e=new Uint8ClampedArray(this.width*this.height*1);switch(this.channels){case 3:case 4:for(let t=0,r=0;t<this.data.length;t+=this.channels){let n=this.data[t],i=this.data[t+1],o=this.data[t+2];e[r++]=Math.round(.2989*n+.587*i+.114*o)}break;default:throw Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,1)}rgb(){if(3===this.channels)return this;let e=new Uint8ClampedArray(this.width*this.height*3);switch(this.channels){case 1:for(let t=0,r=0;t<this.data.length;++t)e[r++]=this.data[t],e[r++]=this.data[t],e[r++]=this.data[t];break;case 4:for(let t=0,r=0;t<this.data.length;t+=4)e[r++]=this.data[t],e[r++]=this.data[t+1],e[r++]=this.data[t+2];break;default:throw Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,3)}rgba(){if(4===this.channels)return this;let e=new Uint8ClampedArray(this.width*this.height*4);switch(this.channels){case 1:for(let t=0,r=0;t<this.data.length;++t)e[r++]=this.data[t],e[r++]=this.data[t],e[r++]=this.data[t],e[r++]=255;break;case 3:for(let t=0,r=0;t<this.data.length;t+=3)e[r++]=this.data[t],e[r++]=this.data[t+1],e[r++]=this.data[t+2],e[r++]=255;break;default:throw Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,4)}async resize(e,t,{resample:n=2}={}){let o=u2[n]??n;if(u0){let n=this.channels,i=this.toCanvas(),o=r(e,t).getContext("2d");return o.drawImage(i,0,0,e,t),new u4(o.getImageData(0,0,e,t).data,e,t,4).convert(n)}{let r=this.toSharp();switch(o){case"box":case"hamming":("box"===o||"hamming"===o)&&(console.warn(`Resampling method ${o} is not yet supported. Using bilinear instead.`),o="bilinear");case"nearest":case"bilinear":case"bicubic":r=r.affine([e/this.width,0,0,t/this.height],{interpolator:o});break;case"lanczos":r=r.resize({width:e,height:t,fit:"fill",kernel:"lanczos3"});break;default:throw Error(`Resampling method ${o} is not supported.`)}return await i(r)}}async pad([e,t,n,o]){if(e=Math.max(e,0),t=Math.max(t,0),n=Math.max(n,0),o=Math.max(o,0),0===e&&0===t&&0===n&&0===o)return this;if(u0){let i=this.channels,s=this.toCanvas(),a=this.width+e+t,l=this.height+n+o,u=r(a,l).getContext("2d");return u.drawImage(s,0,0,this.width,this.height,e,n,a,l),new u4(u.getImageData(0,0,a,l).data,a,l,4).convert(i)}{let r=this.toSharp().extend({left:e,right:t,top:n,bottom:o});return await i(r)}}async crop([e,t,n,o]){if(e=Math.max(e,0),t=Math.max(t,0),n=Math.min(n,this.width-1),o=Math.min(o,this.height-1),0===e&&0===t&&n===this.width-1&&o===this.height-1)return this;let s=n-e+1,a=o-t+1;if(u0){let n=this.channels,i=this.toCanvas(),o=r(s,a).getContext("2d");return o.drawImage(i,e,t,s,a,0,0,s,a),new u4(o.getImageData(0,0,s,a).data,s,a,4).convert(n)}{let r=this.toSharp().extract({left:e,top:t,width:s,height:a});return await i(r)}}async center_crop(e,t){if(this.width===e&&this.height===t)return this;let n=(this.width-e)/2,o=(this.height-t)/2;if(u0){let i=this.channels,s=this.toCanvas(),a=r(e,t).getContext("2d"),l=0,u=0,c=0,d=0;return n>=0?l=n:c=-n,o>=0?u=o:d=-o,a.drawImage(s,l,u,e,t,c,d,e,t),new u4(a.getImageData(0,0,e,t).data,e,t,4).convert(i)}{let r=this.toSharp();if(n>=0&&o>=0)r=r.extract({left:Math.floor(n),top:Math.floor(o),width:e,height:t});else if(n<=0&&o<=0){let i=Math.floor(-o),s=Math.floor(-n);r=r.extend({top:i,left:s,right:e-this.width-s,bottom:t-this.height-i})}else{let i=[0,0],s=0;o<0?(i[0]=Math.floor(-o),i[1]=t-this.height-i[0]):s=Math.floor(o);let a=[0,0],l=0;n<0?(a[0]=Math.floor(-n),a[1]=e-this.width-a[0]):l=Math.floor(n),r=r.extend({top:i[0],bottom:i[1],left:a[0],right:a[1]}).extract({left:l,top:s,width:e,height:t})}return await i(r)}}async toBlob(e="image/png",t=1){if(!u0)throw Error("toBlob() is only supported in browser environments.");let r=this.toCanvas();return await r.convertToBlob({type:e,quality:t})}toTensor(e="CHW"){let t=new eh("uint8",new Uint8Array(this.data),[this.height,this.width,this.channels]);if("HWC"===e);else if("CHW"===e)t=t.permute(2,0,1);else throw Error(`Unsupported channel format: ${e}`);return t}toCanvas(){if(!u0)throw Error("toCanvas() is only supported in browser environments.");let e=this.clone().rgba(),t=r(e.width,e.height),i=new n(e.data,e.width,e.height);return t.getContext("2d").putImageData(i,0,0),t}_update(e,t,r,n=null){return this.data=e,this.width=t,this.height=r,null!==n&&(this.channels=n),this}clone(){return new u4(this.data.slice(),this.width,this.height,this.channels)}convert(e){if(this.channels===e)return this;switch(e){case 1:this.grayscale();break;case 3:this.rgb();break;case 4:this.rgba();break;default:throw Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this}async save(e){if(u0){if(u1)throw Error("Unable to save an image from a Web Worker.");let t=e.split(".").pop().toLowerCase(),r=u3.get(t)??"image/png",n=await this.toBlob(r),i=URL.createObjectURL(n),o=document.createElement("a");o.href=i,o.download=e,o.click(),o.remove()}else if(D.useFS){let t=this.toSharp();return await t.toFile(e)}else throw Error("Unable to save the image because filesystem is disabled in this environment.")}toSharp(){if(u0)throw Error("toSharp() is only supported in server-side environments.");return(void 0)(this.data,{raw:{width:this.width,height:this.height,channels:this.channels}})}}async function u6(e,t){let r;if("u"<typeof AudioContext)throw Error("Unable to load audio from path/URL since `AudioContext` is not available in your environment. Instead, audio data should be passed directly to the pipeline/processor. For more information and some example code, see https://huggingface.co/docs/transformers.js/guides/node-audio-processing.");let n=await (await R(e)).arrayBuffer(),i=new AudioContext({sampleRate:t});void 0===t&&console.warn(`No sampling rate provided, using default of ${i.sampleRate}Hz.`);let o=await i.decodeAudioData(n);if(2===o.numberOfChannels){let e=Math.sqrt(2),t=o.getChannelData(0),n=o.getChannelData(1);r=new Float32Array(t.length);for(let i=0;i<o.length;++i)r[i]=e*(t[i]+n[i])/2}else r=o.getChannelData(0);return r}function u5(e){if(e<1)return new Float64Array;if(1===e)return new Float64Array([1]);let t=e-1,r=Math.PI/t,n=new Float64Array(e);for(let i=0;i<e;++i){let e=2*i-t;n[i]=.5+.5*Math.cos(r*e)}return n}e.s(["RawImage",()=>u4],24377);let u8={htk:e=>2595*Math.log10(1+e/700),kaldi:e=>1127*Math.log(1+e/700),slaney:(e,t=1e3,r=15,n=27/Math.log(6.4))=>e>=t?r+Math.log(e/t)*n:3*e/200};function u7(e,t="htk"){let r=u8[t];if(!r)throw Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return"number"==typeof e?r(e):e.map(e=>r(e))}let u9={htk:e=>700*(10**(e/2595)-1),kaldi:e=>700*(Math.exp(e/1127)-1),slaney:(e,t=1e3,r=15,n=Math.log(6.4)/27)=>e>=r?t*Math.exp(n*(e-r)):200*e/3};function ce(e,t="htk"){let r=u9[t];if(!r)throw Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return"number"==typeof e?r(e):e.map(e=>r(e))}function ct(e,t){let r=Float64Array.from({length:t.length-1},(e,r)=>t[r+1]-t[r]),n=Array.from({length:e.length},()=>Array(t.length));for(let r=0;r<e.length;++r){let i=n[r];for(let n=0;n<t.length;++n)i[n]=t[n]-e[r]}let i=t.length-2,o=Array.from({length:i},()=>Array(e.length));for(let t=0;t<e.length;++t){let e=n[t];for(let n=0;n<i;++n){let i=-e[n]/r[n],s=e[n+2]/r[n+1];o[n][t]=Math.max(0,Math.min(i,s))}}return o}function cr(e,t,r){let n=(t-e)/(r-1);return Float64Array.from({length:r},(t,r)=>e+n*r)}function cn(e,t,r,n,i,o=null,s="htk",a=!1){let l;if(null!==o&&"slaney"!==o)throw Error('norm must be one of null or "slaney"');let u=cr(u7(r,s),u7(n,s),t+2),c=ce(u,s);if(a){let t=i/(2*e);l=u7(Float64Array.from({length:e},(e,r)=>r*t),s),c=u}else l=cr(0,Math.floor(i/2),e);let d=ct(l,c);if(null!==o&&"slaney"===o)for(let r=0;r<t;++r){let t=d[r],n=2/(c[r+2]-c[r]);for(let r=0;r<e;++r)t[r]*=n}return d}function ci(e,t,r){let n=new e.constructor(e.length+t+r),i=e.length-1;for(let r=0;r<e.length;++r)n[t+r]=e[r];for(let r=1;r<=t;++r)n[t-r]=e[m(r,i)];for(let o=1;o<=r;++o)n[i+t+o]=e[m(i-o,i)];return n}function co(e,t,r,n,i){if(r<=0)throw Error("reference must be greater than zero");if(n<=0)throw Error("min_value must be greater than zero");let o=Math.log10(r=Math.max(n,r));for(let r=0;r<e.length;++r)e[r]=t*Math.log10(Math.max(n,e[r])-o);if(null!==i){if(i<=0)throw Error("db_range must be greater than zero");let t=er(e)[0]-i;for(let r=0;r<e.length;++r)e[r]=Math.max(e[r],t)}return e}function cs(e,t=1,r=1e-5,n=null){return co(e,20,t,r,n)}function ca(e,t=1,r=1e-10,n=null){return co(e,10,t,r,n)}function cl(e,t,r,n,{fft_length:i=null,power:o=1,center:s=!0,pad_mode:a="reflect",onesided:l=!0,preemphasis:u=null,mel_filters:c=null,mel_floor:d=1e-10,log_mel:h=null,reference:p=1,min_value:f=1e-10,db_range:g=null,remove_dc_offset:m=null,max_num_frames:_=null,do_pad:b=!0,transpose:y=!1}={}){let w=t.length;if(null===i&&(i=r),r>i)throw Error(`frame_length (${r}) may not be larger than fft_length (${i})`);if(w!==r)throw Error(`Length of the window (${w}) must equal frame_length (${r})`);if(n<=0)throw Error("hop_length must be greater than zero");if(null===o&&null!==c)throw Error("You have provided `mel_filters` but `power` is `None`. Mel spectrogram computation is not yet supported for complex-valued spectrogram. Specify `power` to fix this issue.");if(s){if("reflect"!==a)throw Error(`pad_mode="${a}" not implemented yet.`);let t=Math.floor((i-1)/2)+1;e=ci(e,t,t)}let v=Math.floor(1+Math.floor((e.length-r)/n)),x=l?Math.floor(i/2)+1:i,T=v,S=v;null!==_&&(_>v?b&&(S=_):S=T=_);let A=new es(i),O=new Float64Array(i),k=new Float64Array(A.outputBufferSize),E=Array(T);for(let i=0;i<T;++i){let o=i*n;for(let t=0;t<r;++t)O[t]=e[o+t];if(m){let e=0;for(let t=0;t<r;++t)e+=O[t];let t=e/r;for(let e=0;e<r;++e)O[e]-=t}if(null!==u){for(let e=r-1;e>=1;--e)O[e]-=u*O[e-1];O[0]*=1-u}for(let e=0;e<t.length;++e)O[e]*=t[e];A.realTransform(k,O);let s=Array(x);for(let e=0;e<s.length;++e){let t=e<<1;s[e]=k[t]**2+k[t+1]**2}E[i]=s}if(null!==o&&2!==o){let e=2/o;for(let t=0;t<E.length;++t){let r=E[t];for(let t=0;t<r.length;++t)r[t]**=e}}let M=c.length,P=new Float32Array(M*S),I=y?[S,M]:[M,S];for(let e=0;e<M;++e){let t=c[e];for(let r=0;r<T;++r){let n=E[r],i=0;for(let e=0;e<x;++e)i+=t[e]*n[e];P[y?r*M+e:e*T+r]=Math.max(d,i)}}if(null!==o&&null!==h){let e=Math.min(P.length,T*M);switch(h){case"log":for(let t=0;t<e;++t)P[t]=Math.log(P[t]);break;case"log10":for(let t=0;t<e;++t)P[t]=Math.log10(P[t]);break;case"dB":if(1===o)cs(P,p,f,g);else if(2===o)ca(P,p,f,g);else throw Error(`Cannot use log_mel option '${h}' with power ${o}`);break;default:throw Error(`log_mel must be one of null, 'log', 'log10' or 'dB'. Got '${h}'`)}}return{data:P,dims:I}}function cu(e,t,{periodic:r=!0,frame_length:n=null,center:i=!0}={}){let o,s=r?e+1:e;switch(t){case"boxcar":o=new Float64Array(s).fill(1);break;case"hann":case"hann_window":o=u5(s);break;case"povey":o=u5(s).map(e=>Math.pow(e,.85));break;default:throw Error(`Unknown window type ${t}.`)}if(r&&(o=o.subarray(0,e)),null===n)return o;if(e>n)throw Error(`Length of the window (${e}) may not be larger than frame_length (${n})`);return o}function cc([e,t,r,n]){return[e-r/2,t-n/2,e+r/2,t+n/2]}function cd(e,t=.5,r=null,n=!1){let i=e.logits,o=e.pred_boxes,[s,a,l]=i.dims;if(null!==r&&r.length!==s)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let u=[];for(let e=0;e<s;++e){let s=null!==r?r[e]:null,c={boxes:[],classes:[],scores:[]},d=i[e],h=o[e];for(let e=0;e<a;++e){let r,i=d[e],o=[];if(n){r=i.sigmoid().data;for(let e=0;e<r.length;++e)r[e]>t&&o.push(e)}else{let e=er(i.data)[1];if(e===l-1)continue;o.push(e),r=Y(i.data)}for(let t of o){let n=h[e].data;n=cc(n),null!==s&&(n=n.map((e,t)=>e*s[(t+1)%2])),c.boxes.push(n),c.classes.push(t),c.scores.push(r[t])}}u.push(c)}return u}function ch(e,t){if(!(e instanceof Float32Array||e instanceof Float64Array))throw Error(`${t} expects input to be a Float32Array or a Float64Array, but got ${e?.constructor?.name??typeof e} instead. If using the feature extractor directly, remember to use \`read_audio(url, sampling_rate)\` to obtain the raw audio data of the file/url.`)}function cp(e,t,r=0,n=null){let i=e/t,o=eu(i)*t;return null!==n&&o>n&&(o=Math.floor(i)*t),o<r&&(o=Math.ceil(i)*t),o}function cf([e,t],r){return[Math.max(Math.floor(e/r),1)*r,Math.max(Math.floor(t/r),1)*r]}e.s(["hanning",()=>u5,"mel_filter_bank",()=>cn,"read_audio",()=>u6,"spectrogram",()=>cl,"window_function",()=>cu],59027);class cg extends l{constructor(e){super(),this.config=e}}class cm extends cg{constructor(e){super(e),this.image_mean=this.config.image_mean??this.config.mean,this.image_std=this.config.image_std??this.config.std,this.resample=this.config.resample??2,this.do_rescale=this.config.do_rescale??!0,this.rescale_factor=this.config.rescale_factor??1/255,this.do_normalize=this.config.do_normalize,this.do_resize=this.config.do_resize,this.do_thumbnail=this.config.do_thumbnail,this.size=this.config.size,this.size_divisibility=this.config.size_divisibility??this.config.size_divisor,this.do_center_crop=this.config.do_center_crop,this.crop_size=this.config.crop_size,this.do_convert_rgb=this.config.do_convert_rgb??!0,this.do_crop_margin=this.config.do_crop_margin,this.pad_size=this.config.pad_size,this.do_pad=this.config.do_pad,this.do_pad&&!this.pad_size&&this.size&&void 0!==this.size.width&&void 0!==this.size.height&&(this.pad_size=this.size),this.do_flip_channel_order=this.config.do_flip_channel_order??!1}async thumbnail(e,t,r=2){let n=e.height,i=e.width,o=t.height,s=t.width,a=Math.min(n,o),l=Math.min(i,s);return a===n&&l===i?e:(n>i?l=Math.floor(i*a/n):i>n&&(a=Math.floor(n*l/i)),await e.resize(l,a,{resample:r}))}async crop_margin(e,t=200){let r=e.clone().grayscale(),n=et(r.data)[0],i=er(r.data)[0]-n;if(0===i)return e;let o=t/255,s=r.width,a=r.height,l=0,u=0;for(let e=0;e<r.height;++e){let t=e*r.width;for(let c=0;c<r.width;++c)(r.data[t+c]-n)/i<o&&(s=Math.min(s,c),a=Math.min(a,e),l=Math.max(l,c),u=Math.max(u,e))}return e=await e.crop([s,a,l,u])}pad_image(e,t,r,{mode:n="constant",center:i=!1,constant_values:o=0}={}){let s,a,[l,u,c]=t;if("number"==typeof r?(s=r,a=r):(s=r.width,a=r.height),s!==u||a!==l){let r=new Float32Array(s*a*c);if(Array.isArray(o))for(let e=0;e<r.length;++e)r[e]=o[e%c];else 0!==o&&r.fill(o);let[d,h]=i?[Math.floor((s-u)/2),Math.floor((a-l)/2)]:[0,0];for(let t=0;t<l;++t){let n=(t+h)*s,i=t*u;for(let t=0;t<u;++t){let o=(n+t+d)*c,s=(i+t)*c;for(let t=0;t<c;++t)r[o+t]=e[s+t]}}if("symmetric"===n){if(i)throw Error("`center` padding is not supported when `mode` is set to `symmetric`.");let t=l-1,n=u-1;for(let i=0;i<a;++i){let o=i*s,a=m(i,t)*u;for(let t=0;t<s;++t){if(i<l&&t<u)continue;let s=(o+t)*c,d=(a+m(t,n))*c;for(let t=0;t<c;++t)r[s+t]=e[d+t]}}}e=r,t=[a,s,c]}return[e,t]}rescale(e){for(let t=0;t<e.length;++t)e[t]=this.rescale_factor*e[t]}get_resize_output_image_size(e,t){let r,n,[i,o]=e.size;if(this.do_thumbnail){let{height:e,width:n}=t;r=Math.min(e,n)}else Number.isInteger(t)?(r=t,n=this.config.max_size??r):void 0!==t&&(r=t.shortest_edge,n=t.longest_edge);if(void 0!==r||void 0!==n){let e=void 0===r?1:Math.max(r/i,r/o),t=i*e,s=o*e,a=void 0===n?1:Math.min(n/t,n/s),l=Math.floor(Number((t*a).toFixed(2))),u=Math.floor(Number((s*a).toFixed(2)));return void 0!==this.size_divisibility&&([l,u]=cf([l,u],this.size_divisibility)),[l,u]}if(void 0!==t&&void 0!==t.width&&void 0!==t.height){let e=t.width,r=t.height;if(this.config.keep_aspect_ratio&&this.config.ensure_multiple_of){let t=r/o,n=e/i;Math.abs(1-n)<Math.abs(1-t)?t=n:n=t,r=cp(t*o,this.config.ensure_multiple_of),e=cp(n*i,this.config.ensure_multiple_of)}return[e,r]}if(void 0!==this.size_divisibility)return cf([i,o],this.size_divisibility);throw Error(`Could not resize image due to unsupported \`this.size\` option in config: ${JSON.stringify(t)}`)}async resize(e){let[t,r]=this.get_resize_output_image_size(e,this.size);return await e.resize(t,r,{resample:this.resample})}async preprocess(e,{do_normalize:t=null,do_pad:r=null,do_convert_rgb:n=null,do_convert_grayscale:i=null,do_flip_channel_order:o=null}={}){this.do_crop_margin&&(e=await this.crop_margin(e));let[s,a]=e.size;if(n??this.do_convert_rgb?e=e.rgb():i&&(e=e.grayscale()),this.do_resize&&(e=await this.resize(e)),this.do_thumbnail&&(e=await this.thumbnail(e,this.size,this.resample)),this.do_center_crop){let t,r;Number.isInteger(this.crop_size)?(t=this.crop_size,r=this.crop_size):(t=this.crop_size.width,r=this.crop_size.height),e=await e.center_crop(t,r)}let l=[e.height,e.width],u=Float32Array.from(e.data),c=[e.height,e.width,e.channels];if(this.do_rescale&&this.rescale(u),t??this.do_normalize){let t=this.image_mean;Array.isArray(this.image_mean)||(t=Array(e.channels).fill(t));let r=this.image_std;if(Array.isArray(this.image_std)||(r=Array(e.channels).fill(t)),t.length!==e.channels||r.length!==e.channels)throw Error(`When set to arrays, the length of \`image_mean\` (${t.length}) and \`image_std\` (${r.length}) must match the number of channels in the image (${e.channels}).`);for(let n=0;n<u.length;n+=e.channels)for(let i=0;i<e.channels;++i)u[n+i]=(u[n+i]-t[i])/r[i]}if(r??this.do_pad){if(this.pad_size){let t=this.pad_image(u,[e.height,e.width,e.channels],this.pad_size);[u,c]=t}else if(this.size_divisibility){let[e,t]=cf([c[1],c[0]],this.size_divisibility);[u,c]=this.pad_image(u,c,{width:e,height:t})}}if(o??this.do_flip_channel_order){if(3!==c[2])throw Error("Flipping channel order is only supported for RGB images.");for(let e=0;e<u.length;e+=3){let t=u[e];u[e]=u[e+2],u[e+2]=t}}return{original_size:[a,s],reshaped_input_size:l,pixel_values:new eh("float32",u,c).permute(2,0,1)}}async _call(e){Array.isArray(e)||(e=[e]);let t=await Promise.all(e.map(e=>this.preprocess(e)));return{pixel_values:ex(t.map(e=>e.pixel_values),0),original_sizes:t.map(e=>e.original_size),reshaped_input_sizes:t.map(e=>e.reshaped_input_size)}}}class c_ extends cm{post_process_semantic_segmentation(e,t=null){let r=e.logits,n=r.dims[0];if(null!==t&&t.length!==n)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let i=[];for(let e=0;e<n;++e){let n=null!==t?t[e]:null,o=r[e];null!==n&&(o=eg(o,n,"bilinear",!1));let[s,a]=n??o.dims.slice(-2),l=new eh("int32",new Int32Array(s*a),[s,a]),u=o[0].data;for(let e=1;e<o.dims[0];++e){let t=o[e].data;for(let r=0;r<t.length;++r)t[r]>u[r]&&(u[r]=t[r],l.data[r]=e)}let c=Array(o.dims[0]),d=l.data;for(let e=0;e<d.length;++e){let t=d[e];c[t]=t}let h=c.filter(e=>void 0!==e);i.push({segmentation:l,labels:h})}return i}}class cb extends cm{}class cy extends cb{}class cw extends cm{}class cv extends cm{}class cx extends cm{}class cT extends cm{}class cS extends cm{}class cA extends cm{constructor(e){super(e),this.crop_pct=this.config.crop_pct??.875}async resize(e){let t=this.size?.shortest_edge;if(void 0===t)throw Error("Size dictionary must contain 'shortest_edge' key.");if(t<384){let r=Math.floor(t/this.crop_pct),[n,i]=this.get_resize_output_image_size(e,{shortest_edge:r});e=await e.resize(n,i,{resample:this.resample}),e=await e.center_crop(t,t)}else e=await e.resize(t,t,{resample:this.resample});return e}}class cO extends cA{}class ck extends cm{}class cE extends cm{}class cM extends cm{constructor(e){super(e),this.include_top=this.config.include_top??!0,this.include_top&&(this.image_std=this.image_std.map(e=>e*e))}}class cP extends cm{}class cI extends cP{}class cC extends cm{post_process_object_detection(...e){return cd(...e)}}class cF extends cC{}class cD extends cm{}class c$ extends cm{}class cL extends cm{pad_image(e,t,r,n={}){let[i,o,s]=t,a=this.image_mean;Array.isArray(this.image_mean)||(a=Array(s).fill(a));let l=this.image_std;Array.isArray(l)||(l=Array(s).fill(a));let u=a.map((e,t)=>-e/l[t]);return super.pad_image(e,t,r,{center:!0,constant_values:u,...n})}}class cN extends cL{}class cR extends cm{async _call(e){let t=await super._call(e),r=[t.pixel_values.dims[0],64,64],n=new eh("int64",new BigInt64Array(r.reduce((e,t)=>e*t)).fill(1n),r);return{...t,pixel_mask:n}}post_process_object_detection(...e){return cd(...e)}remove_low_and_no_objects(e,t,r,n){let i=[],o=[],s=[];for(let a=0;a<e.dims[0];++a){let l=e[a],u=t[a],c=er(l.data)[1];if(c===n)continue;let d=Y(l.data)[c];d>r&&(i.push(u),o.push(d),s.push(c))}return[i,o,s]}check_segment_validity(e,t,r,n=.5,i=.8){let o=[],s=0,a=0;for(let i=0;i<e.length;++i)e[i]===r&&(o.push(i),++s),t[r].data[i]>=n&&++a;let l=s>0&&a>0;return l&&(l=s/a>i),[l,o]}compute_segments(e,t,r,n,i,o=null,s=null){let[a,l]=s??e[0].dims,u=new eh("int32",new Int32Array(a*l),[a,l]),c=[];if(null!==s)for(let t=0;t<e.length;++t)e[t]=eg(e[t],s,"bilinear",!1);let d=new Int32Array(e[0].data.length),h=new Float32Array(e[0].data.length);for(let r=0;r<e.length;++r){let n=t[r];for(let t=0;t<e[r].data.length;++t)e[r].data[t]*=n,e[r].data[t]>h[t]&&(d[t]=r,h[t]=e[r].data[t])}let p=0;for(let o=0;o<r.length;++o){let s=r[o],[a,l]=this.check_segment_validity(d,e,o,n,i);if(a){for(let e of(++p,l))u.data[e]=p;c.push({id:p,label_id:s,score:t[o]})}}return[u,c]}post_process_panoptic_segmentation(e,t=.5,r=.5,n=.8,i=null,o=null){null===i&&(console.warn("`label_ids_to_fuse` unset. No instance will be fused."),i=new Set);let s=e.logits,a=e.pred_masks.sigmoid(),[l,u,c]=s.dims;if(c-=1,null!==o&&o.length!==l)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let d=[];for(let e=0;e<l;++e){let l=null!==o?o[e]:null,u=s[e],h=a[e],[p,f,g]=this.remove_low_and_no_objects(u,h,t,c);if(0===g.length){let[e,t]=l??h.dims.slice(-2),r=new eh("int32",new Int32Array(e*t).fill(-1),[e,t]);d.push({segmentation:r,segments_info:[]});continue}let[m,_]=this.compute_segments(p,f,g,r,n,i,l);d.push({segmentation:m,segments_info:_})}return d}post_process_instance_segmentation(){throw Error("Not implemented yet")}}class cj extends cm{post_process_object_detection(...e){return cd(...e)}}class cz extends cm{reshape_input_points(e,t,r){let n=h(e=structuredClone(e));if(3===n.length)n=[1,...n],e=[e];else if(4!==n.length)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");for(let n=0;n<e.length;++n){let i=t[n],o=r[n],s=[o[0]/i[0],o[1]/i[1]];for(let t=0;t<e[n].length;++t)for(let r=0;r<e[n][t].length;++r)for(let i=0;i<e[n][t][r].length;++i)e[n][t][r][i]*=s[i]}return new eh("float32",Float32Array.from(e.flat(1/0)),n)}add_input_labels(e,t){let r=h(e);if(2===r.length)r=[1,...r],e=[e];else if(3!==r.length)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");if(r.some((e,r)=>e!==t.dims[r]))throw Error(`The first ${r.length} dimensions of 'input_points' and 'input_labels' must be the same.`);return new eh("int64",e.flat(1/0).map(BigInt),r)}async _call(e,t=null,r=null){let n=await super._call(e);if(t&&(n.input_points=this.reshape_input_points(t,n.original_sizes,n.reshaped_input_sizes)),r){if(!n.input_points)throw Error("`input_points` must be provided if `input_labels` are provided.");n.input_labels=this.add_input_labels(r,n.input_points)}return n}post_process_masks(e,t,r,{mask_threshold:n=0,binarize:i=!0,pad_size:o=null}={}){let s=[],a=[(o=o??this.pad_size).height,o.width];for(let o=0;o<t.length;++o){let l=t[o],u=r[o],c=e[o],d=[];for(let e=0;e<c.dims[0];++e){let t=eg(c[e],a,"bilinear",!1);if(t=eg(t=t.slice(null,[0,u[0]],[0,u[1]]),l,"bilinear",!1),i){let e=new Uint8Array(t.data.length);for(let r=0;r<t.data.length;++r)t.data[r]>n&&(e[r]=1);t=new eh("bool",e,t.dims)}d.push(t)}s.push(ex(d))}return s}}class cB extends cm{pad_image(e,t,r,n={}){let[i,o,s]=t;return super.pad_image(e,t,{width:o+(r-o%r)%r,height:i+(r-i%r)%r},{mode:"symmetric",center:!1,constant_values:-1,...n})}}class cU extends cm{async _call(e,t){Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]);let r=await Promise.all(e.map(e=>this.preprocess(e))),n=await Promise.all(t.map(e=>this.preprocess(e,{do_normalize:!1,do_convert_rgb:!1,do_convert_grayscale:!0})));return{pixel_values:ex(r.map((e,t)=>ev([e.pixel_values,n[t].pixel_values],0)),0),original_sizes:r.map(e=>e.original_size),reshaped_input_sizes:r.map(e=>e.reshaped_input_size)}}}class cV extends cg{constructor(e){super(e),this.config.mel_filters??=cn(Math.floor(1+this.config.n_fft/2),this.config.feature_size,0,8e3,this.config.sampling_rate,"slaney","slaney"),this.window=cu(this.config.n_fft,"hann")}_extract_fbank_features(e){let{data:t,dims:r}=cl(e,this.window,this.config.n_fft,this.config.hop_length,{power:2,mel_filters:this.config.mel_filters,log_mel:"log10",max_num_frames:this.config.nb_max_frames}),n=er(t)[0];for(let e=0;e<t.length;++e)t[e]=(Math.max(t[e],n-8)+4)/4;return{data:t,dims:r}}async _call(e){let t;ch(e,"WhisperFeatureExtractor"),e.length>this.config.n_samples?(console.warn("Attempting to extract features for audio longer than 30 seconds. If using a pipeline to extract transcript from a long audio clip, remember to specify `chunk_length_s` and/or `stride_length_s`."),t=e.slice(0,this.config.n_samples)):(t=new Float32Array(this.config.n_samples)).set(e);let{data:r,dims:n}=this._extract_fbank_features(t);return{input_features:new eh("float32",r,[1,...n])}}}class cG extends cg{_zero_mean_unit_var_norm(e){let t=e.reduce((e,t)=>e+t,0)/e.length,r=e.reduce((e,r)=>e+(r-t)**2,0)/e.length;return e.map(e=>(e-t)/Math.sqrt(r+1e-7))}async _call(e){ch(e,"Wav2Vec2FeatureExtractor"),e instanceof Float64Array&&(e=new Float32Array(e));let t=e;this.config.do_normalize&&(t=this._zero_mean_unit_var_norm(t));let r=[1,t.length];return{input_values:new eh("float32",t,r),attention_mask:new eh("int64",new BigInt64Array(t.length).fill(1n),r)}}}class cq extends cg{constructor(e){super(e);const t=this.config.sampling_rate,r=cn(256,this.config.num_mel_bins,20,Math.floor(t/2),t,null,"kaldi",!0);for(let e=0;e<r.length;++e)r[e].push(0);this.mel_filters=r,this.window=cu(400,"povey",{periodic:!1})}_extract_fbank_features(e,t){return cl(e=e.map(e=>32768*e),this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:t,transpose:!0})}async _call(e,{padding:t=!0,pad_to_multiple_of:r=2,do_normalize_per_mel_bins:n=!0,return_attention_mask:i=!0}={}){let o;ch(e,"SeamlessM4TFeatureExtractor");let s=this._extract_fbank_features(e,this.config.max_length);if(n){let[e,t]=s.dims;for(let r=0;r<t;++r){let n=0;for(let i=0;i<e;++i)n+=s.data[i*t+r];let i=n/e,o=0;for(let n=0;n<e;++n)o+=(s.data[n*t+r]-i)**2;let a=Math.sqrt((o/=e-1)+1e-7);for(let n=0;n<e;++n){let e=n*t+r;s.data[e]=(s.data[e]-i)/a}}}if(t){let[e,t]=s.dims,n=e%r;if(n>0){let r=new Float32Array(t*(e+n));r.set(s.data),r.fill(this.config.padding_value,s.data.length);let a=e+n;s={data:r,dims:[a,t]},i&&(o=new eh("int64",new BigInt64Array(a),[1,a])).data.fill(1n,0,e)}}let[a,l]=s.dims,u=this.config.stride;if(0!=a%u)throw Error(`The number of frames (${a}) must be a multiple of the stride (${u}).`);let c=new eh("float32",s.data,s.dims).view(1,Math.floor(a/u),l*u),d={input_features:c};if(i){let e=c.dims[1],t=new eh("int64",new BigInt64Array(e),[1,e]);if(o)for(let e=1,r=0;e<a;e+=u,++r)t.data[r]=o.data[e];else t.data.fill(1n);d.attention_mask=t}return d}}class cW extends cg{constructor(e){super(e);const t=this.config.sampling_rate,r=cn(256,this.config.num_mel_bins,20,Math.floor(t/2),t,null,"kaldi",!0);for(let e=0;e<r.length;++e)r[e].push(0);this.mel_filters=r,this.window=cu(400,"hann",{periodic:!1}),this.mean=this.config.mean,this.std=this.config.std}_extract_fbank_features(e,t){return cl(e,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:t,transpose:!0})}async _call(e){ch(e,"ASTFeatureExtractor");let t=this._extract_fbank_features(e,this.config.max_length);if(this.config.do_normalize){let e=2*this.std;for(let r=0;r<t.data.length;++r)t.data[r]=(t.data[r]-this.mean)/e}return{input_values:new eh("float32",t.data,[1,...t.dims])}}}class cH extends cg{constructor(e){super(e),this.mel_filters=cn(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,null,"htk"),this.mel_filters_slaney=cn(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,"slaney","slaney"),this.window=cu(this.config.fft_window_size,"hann")}_get_input_mel(e,t,r,n){let i,o=!1,s=e.length-t;if(s>0)if("rand_trunc"===r){o=!0;let r=Math.floor(Math.random()*(s+1));e=e.subarray(r,r+t),(i=this._extract_fbank_features(e,this.mel_filters_slaney,this.config.nb_max_samples)).dims=[1,...i.dims]}else throw Error(`Truncation strategy "${r}" not implemented`);else{if(s<0){let r=new Float64Array(t);if(r.set(e),"repeat"===n)for(let n=e.length;n<t;n+=e.length)r.set(e.subarray(0,Math.min(e.length,t-n)),n);else if("repeatpad"===n)for(let t=e.length;t<-s;t+=e.length)r.set(e,t);e=r}if("fusion"===r)throw Error(`Truncation strategy "${r}" not implemented`);(i=this._extract_fbank_features(e,this.mel_filters_slaney,this.config.nb_max_samples)).dims=[1,...i.dims]}return{...i,longer:o}}_extract_fbank_features(e,t,r=null){return cl(e,this.window,this.config.fft_window_size,this.config.hop_length,{power:2,mel_filters:t,log_mel:"dB",max_num_frames:r,do_pad:!1,transpose:!0})}async _call(e,{max_length:t=null}={}){ch(e,"ClapFeatureExtractor");let r=this._get_input_mel(e,t??this.config.nb_max_samples,this.config.truncation,this.config.padding);return{input_features:new eh("float32",r.data,[1,...r.dims])}}}class cX extends cg{}class cY extends l{constructor(e){super(),this.feature_extractor=e}async _call(e,...t){return await this.feature_extractor(e,...t)}}class cK extends cY{async _call(...e){return await this.feature_extractor(...e)}post_process_masks(...e){return this.feature_extractor.post_process_masks(...e)}reshape_input_points(...e){return this.feature_extractor.reshape_input_points(...e)}}class cQ extends cY{async _call(e){return await this.feature_extractor(e)}}class cZ extends cY{async _call(e){return await this.feature_extractor(e)}}class cJ extends cY{async _call(e){return await this.feature_extractor(e)}}class c0 extends cY{}class c1{static FEATURE_EXTRACTOR_CLASS_MAPPING={ImageFeatureExtractor:cm,WhisperFeatureExtractor:cV,ViTFeatureExtractor:ck,MobileViTFeatureExtractor:cP,MobileViTImageProcessor:cI,OwlViTFeatureExtractor:cC,Owlv2ImageProcessor:cF,CLIPFeatureExtractor:cx,ChineseCLIPFeatureExtractor:cT,SiglipImageProcessor:cS,ConvNextFeatureExtractor:cA,ConvNextImageProcessor:cO,SegformerFeatureExtractor:c_,BitImageProcessor:cw,DPTImageProcessor:cy,DPTFeatureExtractor:cb,GLPNFeatureExtractor:cv,BeitFeatureExtractor:c$,DeiTFeatureExtractor:cD,DetrFeatureExtractor:cR,YolosFeatureExtractor:cj,DonutFeatureExtractor:cL,NougatImageProcessor:cN,EfficientNetImageProcessor:cM,ViTImageProcessor:cE,VitMatteImageProcessor:cU,SamImageProcessor:cz,Swin2SRImageProcessor:cB,Wav2Vec2FeatureExtractor:cG,SeamlessM4TFeatureExtractor:cq,SpeechT5FeatureExtractor:cX,ASTFeatureExtractor:cW,ClapFeatureExtractor:cH};static PROCESSOR_CLASS_MAPPING={WhisperProcessor:cQ,Wav2Vec2ProcessorWithLM:cZ,SamProcessor:cK,SpeechT5Processor:cJ,OwlViTProcessor:c0};static async from_pretrained(e,{progress_callback:t=null,config:r=null,cache_dir:n=null,local_files_only:i=!1,revision:o="main"}={}){let s=r??await G(e,"preprocessor_config.json",!0,{progress_callback:t,config:r,cache_dir:n,local_files_only:i,revision:o}),a=s.feature_extractor_type??s.image_processor_type,l=this.FEATURE_EXTRACTOR_CLASS_MAPPING[a];if(!l)if(void 0!==s.size)console.warn(`Feature extractor type "${a}" not found, assuming ImageFeatureExtractor due to size parameter in config.`),l=cm;else throw Error(`Unknown Feature Extractor type: ${a}`);return new(this.PROCESSOR_CLASS_MAPPING[s.processor_class]??cY)(new l(s))}}async function c2(e){return Array.isArray(e)||(e=[e]),await Promise.all(e.map(e=>u4.read(e)))}async function c3(e,t){return Array.isArray(e)||(e=[e]),await Promise.all(e.map(e=>"string"==typeof e||e instanceof URL?u6(e,t):e instanceof Float64Array?new Float32Array(e):e))}function c4(e,t){t&&(e=e.map(e=>0|e));let[r,n,i,o]=e;return{xmin:r,ymin:n,xmax:i,ymax:o}}e.s(["ASTFeatureExtractor",()=>cW,"AutoProcessor",()=>c1,"BeitFeatureExtractor",()=>c$,"BitImageProcessor",()=>cw,"CLIPFeatureExtractor",()=>cx,"ChineseCLIPFeatureExtractor",()=>cT,"ClapFeatureExtractor",()=>cH,"ConvNextFeatureExtractor",()=>cA,"ConvNextImageProcessor",()=>cO,"DPTFeatureExtractor",()=>cb,"DPTImageProcessor",()=>cy,"DeiTFeatureExtractor",()=>cD,"DetrFeatureExtractor",()=>cR,"DonutFeatureExtractor",()=>cL,"EfficientNetImageProcessor",()=>cM,"FeatureExtractor",()=>cg,"GLPNFeatureExtractor",()=>cv,"ImageFeatureExtractor",()=>cm,"MobileViTFeatureExtractor",()=>cP,"MobileViTImageProcessor",()=>cI,"NougatImageProcessor",()=>cN,"OwlViTFeatureExtractor",()=>cC,"OwlViTProcessor",()=>c0,"Owlv2ImageProcessor",()=>cF,"Processor",()=>cY,"SamImageProcessor",()=>cz,"SamProcessor",()=>cK,"SeamlessM4TFeatureExtractor",()=>cq,"SegformerFeatureExtractor",()=>c_,"SiglipImageProcessor",()=>cS,"SpeechT5FeatureExtractor",()=>cX,"SpeechT5Processor",()=>cJ,"Swin2SRImageProcessor",()=>cB,"ViTFeatureExtractor",()=>ck,"ViTImageProcessor",()=>cE,"VitMatteImageProcessor",()=>cU,"Wav2Vec2FeatureExtractor",()=>cG,"Wav2Vec2ProcessorWithLM",()=>cZ,"WhisperFeatureExtractor",()=>cV,"WhisperProcessor",()=>cQ,"YolosFeatureExtractor",()=>cj],5550);class c6 extends l{constructor({task:e,model:t,tokenizer:r=null,processor:n=null}){super(),this.task=e,this.model=t,this.tokenizer=r,this.processor=n}async dispose(){await this.model.dispose()}}class c5 extends c6{constructor(e){super(e)}async _call(e,{topk:t=1}={}){let r=this.tokenizer(e,{padding:!0,truncation:!0}),n=await this.model(r),i="multi_label_classification"===this.model.config.problem_type?e=>e.sigmoid().data:e=>Y(e.data),o=this.model.config.id2label,s=[];for(let e of n.logits){let r=Z(i(e),t).map(e=>({label:o[e[0]],score:e[1]}));1===t?s.push(...r):s.push(r)}return Array.isArray(e)||1===t?s:s[0]}}class c8 extends c6{constructor(e){super(e)}async _call(e,{ignore_labels:t=["O"]}={}){let r=Array.isArray(e),n=this.tokenizer(r?e:[e],{padding:!0,truncation:!0}),i=(await this.model(n)).logits,o=this.model.config.id2label,s=[];for(let e=0;e<i.dims[0];++e){let r=n.input_ids[e],a=i[e],l=[];for(let e=0;e<a.dims[0];++e){let n=a[e],i=er(n.data)[1],s=o?o[i]:`LABEL_${i}`;if(t.includes(s))continue;let u=this.tokenizer.decode([r[e].item()],{skip_special_tokens:!0});if(""===u)continue;let c=Y(n.data);l.push({entity:s,score:c[i],index:e,word:u,start:null,end:null})}s.push(l)}return r?s:s[0]}}class c7 extends c6{constructor(e){super(e)}async _call(e,t,{topk:r=1}={}){let n=this.tokenizer(e,{text_pair:t,padding:!0,truncation:!0}),i=await this.model(n),o=[];for(let e=0;e<i.start_logits.dims[0];++e){let t=n.input_ids[e],s=t.indexOf(this.tokenizer.sep_token_id),a=g(Array.from(Y(i.start_logits[e].data)).map((e,t)=>[e,t]).filter(e=>e[1]>s),Array.from(Y(i.end_logits[e].data)).map((e,t)=>[e,t]).filter(e=>e[1]>s)).filter(e=>e[0][1]<=e[1][1]).map(e=>[e[0][1],e[1][1],e[0][0]*e[1][0]]).sort((e,t)=>t[2]-e[2]);for(let e=0;e<Math.min(a.length,r);++e){let[r,n,i]=a[e],s=[...t].slice(r,n+1),l=this.tokenizer.decode(s,{skip_special_tokens:!0});o.push({answer:l,score:i})}}return 1===r?o[0]:o}}class c9 extends c6{constructor(e){super(e)}async _call(e,{topk:t=5}={}){let r=this.tokenizer(e,{padding:!0,truncation:!0}),n=await this.model(r),i=[];for(let e=0;e<r.input_ids.dims[0];++e){let o=r.input_ids[e],s=o.indexOf(this.tokenizer.mask_token_id);if(-1===s)throw Error(`Mask token (${this.tokenizer.mask_token}) not found in text.`);let a=Z(Y(n.logits[e][s].data),t);i.push(a.map(e=>{let t=[...o];return t[s]=e[0],{score:e[1],token:e[0],token_str:this.tokenizer.model.vocab[e[0]],sequence:this.tokenizer.decode(t,{skip_special_tokens:!0})}}))}return Array.isArray(e)?i:i[0]}}class de extends c6{_key="generated_text";constructor(e){super(e)}async _call(e,t={}){let r;Array.isArray(e)||(e=[e]),this.model.config.prefix&&(e=e.map(e=>this.model.config.prefix+e));let n=this.model.config.task_specific_params;n&&n[this.task]&&n[this.task].prefix&&(e=e.map(e=>n[this.task].prefix+e));let i=this.tokenizer,o={padding:!0,truncation:!0};r=this instanceof dr&&"_build_translation_inputs"in i?i._build_translation_inputs(e,o,t).input_ids:i(e,o).input_ids;let s=await this.model.generate(r,t);return i.batch_decode(s,{skip_special_tokens:!0}).map(e=>({[this._key]:e}))}}class dt extends de{_key="summary_text";constructor(e){super(e)}}class dr extends de{_key="translation_text";constructor(e){super(e)}}function dn(e){return Array.isArray(e)&&e.every(e=>"role"in e&&"content"in e)}class di extends c6{constructor(e){super(e)}async _call(e,t={}){let r,n,i=!1,o=!1;if("string"==typeof e)r=e=[e];else if(Array.isArray(e)&&e.every(e=>"string"==typeof e))i=!0,r=e;else{if(dn(e))e=[e];else if(Array.isArray(e)&&e.every(dn))i=!0;else throw Error("Input must be a string, an array of strings, a Chat, or an array of Chats");o=!0,r=e.map(e=>this.tokenizer.apply_chat_template(e,{tokenize:!1,add_generation_prompt:!0}))}let s=t.add_special_tokens??!1,a=!o&&(t.return_full_text??!0);this.tokenizer.padding_side="left";let{input_ids:l,attention_mask:u}=this.tokenizer(r,{add_special_tokens:s,padding:!0,truncation:!0}),c=await this.model.generate(l,t,null,{inputs_attention_mask:u}),d=this.tokenizer.batch_decode(c,{skip_special_tokens:!0});!a&&l.dims.at(-1)>0&&(n=this.tokenizer.batch_decode(l,{skip_special_tokens:!0}).map(e=>e.length));let h=Array.from({length:e.length},e=>[]);for(let t=0;t<d.length;++t){let r=Math.floor(t/c.length*e.length);n&&(d[t]=d[t].slice(n[r])),h[r].push({generated_text:o?[...e[r],{role:"assistant",content:d[t]}]:d[t]})}return i||1!==h.length?h:h[0]}}class ds extends c6{constructor(e){super(e),this.label2id=Object.fromEntries(Object.entries(this.model.config.label2id).map(([e,t])=>[e.toLowerCase(),t])),this.entailment_id=this.label2id.entailment,void 0===this.entailment_id&&(console.warn("Could not find 'entailment' in label2id mapping. Using 2 as entailment_id."),this.entailment_id=2),this.contradiction_id=this.label2id.contradiction??this.label2id.not_entailment,void 0===this.contradiction_id&&(console.warn("Could not find 'contradiction' in label2id mapping. Using 0 as contradiction_id."),this.contradiction_id=0)}async _call(e,t,{hypothesis_template:r="This example is {}.",multi_label:n=!1}={}){let i=Array.isArray(e);i||(e=[e]),Array.isArray(t)||(t=[t]);let o=t.map(e=>r.replace("{}",e)),s=n||1===t.length,a=[];for(let r of e){let e=[];for(let t of o){let n=this.tokenizer(r,{text_pair:t,padding:!0,truncation:!0}),i=await this.model(n);s?e.push([i.logits.data[this.contradiction_id],i.logits.data[this.entailment_id]]):e.push(i.logits.data[this.entailment_id])}let n=(s?e.map(e=>Y(e)[1]):Y(e)).map((e,t)=>[e,t]).sort((e,t)=>t[0]-e[0]);a.push({sequence:r,labels:n.map(e=>t[e[1]]),scores:n.map(e=>e[0])})}return i?a:a[0]}}class da extends c6{constructor(e){super(e)}async _call(e,{pooling:t="none",normalize:r=!1,quantize:n=!1,precision:i="binary"}={}){let o=this.tokenizer(e,{padding:!0,truncation:!0}),s=await this.model(o),a=s.last_hidden_state??s.logits??s.token_embeddings;if("none"===t);else if("mean"===t)a=em(a,o.attention_mask);else if("cls"===t)a=a.slice(null,0);else throw Error(`Pooling method '${t}' not supported.`);return r&&(a=a.normalize(2,-1)),n&&(a=eM(a,i)),a}}class dl extends c6{constructor(e){super(e)}async _call(e,{pool:t=null}={}){let r,n=await c2(e),{pixel_values:i}=await this.processor(n),o=await this.model({pixel_values:i});if(t){if(!("pooler_output"in o))throw Error("No pooled output was returned. Make sure the model has a 'pooler' layer when using the 'pool' option.");r=o.pooler_output}else r=o.last_hidden_state??o.logits??o.image_embeds;return r}}class du extends c6{constructor(e){super(e)}async _call(e,{topk:t=null}={}){let r=!Array.isArray(e),n=this.processor.feature_extractor.config.sampling_rate,i=await c3(e,n),o=this.model.config.id2label,s=[];for(let e of i){let r=await this.processor(e),n=Z(Y((await this.model(r)).logits[0].data),t).map(e=>({label:o[e[0]],score:e[1]}));1===t?s.push(...n):s.push(n)}return r&&1!==t?s[0]:s}}class dc extends c6{constructor(e){super(e)}async _call(e,t,{hypothesis_template:r="This is a sound of {}."}={}){let n=!Array.isArray(e);n&&(e=[e]);let i=t.map(e=>r.replace("{}",e)),o=this.tokenizer(i,{padding:!0,truncation:!0}),s=this.processor.feature_extractor.config.sampling_rate,a=await c3(e,s),l=[];for(let e of a){let r=await this.processor(e),n=Y((await this.model({...o,...r})).logits_per_audio.data);l.push([...n].map((e,r)=>({score:e,label:t[r]})))}return n?l[0]:l}}class dd extends c6{constructor(e){super(e)}async _call(e,t={}){switch(this.model.config.model_type){case"whisper":return this._call_whisper(e,t);case"wav2vec2":case"wav2vec2-bert":case"unispeech":case"unispeech-sat":case"hubert":return this._call_wav2vec2(e,t);default:throw Error(`AutomaticSpeechRecognitionPipeline does not support model type '${this.model.config.model_type}'.`)}}async _call_wav2vec2(e,t={}){t.language&&console.warn('`language` parameter is not yet supported for `wav2vec2` models, defaulting to "English".'),t.task&&console.warn('`task` parameter is not yet supported for `wav2vec2` models, defaulting to "transcribe".');let r=!Array.isArray(e);r&&(e=[e]);let n=this.processor.feature_extractor.config.sampling_rate,i=await c3(e,n),o=[];for(let e of i){let t=await this.processor(e),r=(await this.model(t)).logits[0],n=[];for(let e of r)n.push(er(e.data)[1]);let i=this.tokenizer.decode(n);o.push({text:i})}return r?o[0]:o}async _call_whisper(e,t={}){let r=t.return_timestamps??!1,n=t.chunk_length_s??0,i=t.chunk_callback??null,o=t.force_full_sequences??!1,s=t.stride_length_s??null;"word"===r&&(t.return_token_timestamps=!0);let a=p(t,"language",null),l=p(t,"task",null);if(a||l||r){if(t.forced_decoder_ids)throw Error("Cannot specify `language`/`task`/`return_timestamps` and `forced_decoder_ids` at the same time.");let e=this.tokenizer.get_decoder_prompt_ids({language:a,task:l,no_timestamps:!r});e.length>0&&(t.forced_decoder_ids=e)}let u=!Array.isArray(e);u&&(e=[e]);let c=this.processor.feature_extractor.config.chunk_length/this.model.config.max_source_positions,d=this.processor.feature_extractor.config.hop_length,h=this.processor.feature_extractor.config.sampling_rate,f=await c3(e,h),g=[];for(let e of f){let a=[];if(n>0){if(null===s)s=n/6;else if(n<=s)throw Error("`chunk_length_s` must be larger than `stride_length_s`.");let t=h*n,r=h*s,i=t-2*r,o=0;for(;o<e.length;){let n=e.subarray(o,o+t),s=await this.processor(n),l=0===o,u=o+i>=e.length;a.push({stride:[n.length,l?0:r,u?0:r],input_features:s.input_features,is_last:u}),o+=i}}else a=[{stride:[e.length,0,0],input_features:(await this.processor(e)).input_features,is_last:!0}];for(let e of a){t.num_frames=Math.floor(e.stride[0]/d);let n=await this.model.generate(e.input_features,t);"word"===r?(e.tokens=n.sequences[0],e.token_timestamps=n.token_timestamps.tolist()[0].map(e=>el(e,2))):e.tokens=n[0],e.stride=e.stride.map(e=>e/h),null!==i&&i(e)}let[l,u]=this.tokenizer._decode_asr(a,{time_precision:c,return_timestamps:r,force_full_sequences:o});g.push({text:l,...u})}return u?g[0]:g}}class dh extends c6{constructor(e){super(e)}async _call(e,t={}){let r=Array.isArray(e),n=await c2(e),{pixel_values:i}=await this.processor(n),o=[];for(let e of i){e.dims=[1,...e.dims];let r=await this.model.generate(e,t),n=this.tokenizer.batch_decode(r,{skip_special_tokens:!0}).map(e=>({generated_text:e.trim()}));o.push(n)}return r?o:o[0]}}class dp extends c6{constructor(e){super(e)}async _call(e,{topk:t=1}={}){let r=Array.isArray(e),n=await c2(e),{pixel_values:i}=await this.processor(n),o=await this.model({pixel_values:i}),s=this.model.config.id2label,a=[];for(let e of o.logits){let r=Z(Y(e.data),t).map(e=>({label:s[e[0]],score:e[1]}));1===t?a.push(...r):a.push(r)}return r||1===t?a:a[0]}}class df extends c6{constructor(e){super(e),this.subtasks_mapping={panoptic:"post_process_panoptic_segmentation",instance:"post_process_instance_segmentation",semantic:"post_process_semantic_segmentation"}}async _call(e,{threshold:t=.5,mask_threshold:r=.5,overlap_mask_area_threshold:n=.8,label_ids_to_fuse:i=null,target_sizes:o=null,subtask:s=null}={}){if(Array.isArray(e)&&1!==e.length)throw Error("Image segmentation pipeline currently only supports a batch size of 1.");let a=await c2(e),l=a.map(e=>[e.height,e.width]),{pixel_values:u,pixel_mask:c}=await this.processor(a),d=await this.model({pixel_values:u,pixel_mask:c}),h=null;if(null!==s)h=this.subtasks_mapping[s];else for(let[e,t]of Object.entries(this.subtasks_mapping))if(t in this.processor.feature_extractor){h=this.processor.feature_extractor[t].bind(this.processor.feature_extractor),s=e;break}let p=this.model.config.id2label,f=[];if("panoptic"===s||"instance"===s){let e=h(d,t,r,n,i,o??l)[0],s=e.segmentation;for(let t of e.segments_info){let e=new Uint8ClampedArray(s.data.length);for(let r=0;r<s.data.length;++r)s.data[r]===t.id&&(e[r]=255);let r=new u4(e,s.dims[1],s.dims[0],1);f.push({score:t.score,label:p[t.label_id],mask:r})}}else if("semantic"===s){let{segmentation:e,labels:t}=h(d,o??l)[0];for(let r of t){let t=new Uint8ClampedArray(e.data.length);for(let n=0;n<e.data.length;++n)e.data[n]===r&&(t[n]=255);let n=new u4(t,e.dims[1],e.dims[0],1);f.push({score:null,label:p[r],mask:n})}}else throw Error(`Subtask ${s} not supported.`);return f}}class dg extends c6{constructor(e){super(e)}async _call(e,t,{hypothesis_template:r="This is a photo of {}"}={}){let n=Array.isArray(e),i=await c2(e),o=t.map(e=>r.replace("{}",e)),s=this.tokenizer(o,{padding:"siglip"!==this.model.config.model_type||"max_length",truncation:!0}),{pixel_values:a}=await this.processor(i),l=await this.model({...s,pixel_values:a}),u="siglip"===this.model.config.model_type?e=>e.sigmoid().data:e=>Y(e.data),c=[];for(let e of l.logits_per_image){let r=[...u(e)].map((e,r)=>({score:e,label:t[r]}));r.sort((e,t)=>t.score-e.score),c.push(r)}return n?c:c[0]}}class dm extends c6{constructor(e){super(e)}async _call(e,{threshold:t=.9,percentage:r=!1}={}){let n=Array.isArray(e);if(n&&1!==e.length)throw Error("Object detection pipeline currently only supports a batch size of 1.");let i=await c2(e),o=r?null:i.map(e=>[e.height,e.width]),{pixel_values:s,pixel_mask:a}=await this.processor(i),l=await this.model({pixel_values:s,pixel_mask:a}),u=this.processor.feature_extractor.post_process_object_detection(l,t,o),c=this.model.config.id2label,d=u.map(e=>e.boxes.map((t,n)=>({score:e.scores[n],label:c[e.classes[n]],box:c4(t,!r)})));return n?d:d[0]}}class d_ extends c6{constructor(e){super(e)}async _call(e,t,{threshold:r=.1,topk:n=null,percentage:i=!1}={}){let o=Array.isArray(e),s=await c2(e),a=this.tokenizer(t,{padding:!0,truncation:!0}),l=await this.processor(s),u=[];for(let e=0;e<s.length;++e){let o=s[e],c=i?null:[[o.height,o.width]],d=l.pixel_values[e].unsqueeze_(0),h=await this.model({...a,pixel_values:d}),p=this.processor.feature_extractor.post_process_object_detection(h,r,c,!0)[0],f=p.boxes.map((e,r)=>({score:p.scores[r],label:t[p.classes[r]],box:c4(e,!i)})).sort((e,t)=>t.score-e.score);null!==n&&(f=f.slice(0,n)),u.push(f)}return o?u:u[0]}}class db extends c6{constructor(e){super(e)}async _call(e,t,r={}){let n=(await c2(e))[0],{pixel_values:i}=await this.processor(n),o=`<s_docvqa><s_question>${t}</s_question><s_answer>`,s=this.tokenizer(o,{add_special_tokens:!1,padding:!0,truncation:!0}).input_ids,a=await this.model.generate(i,{...r,decoder_input_ids:s,max_length:this.model.config.decoder.max_position_embeddings}),l=this.tokenizer.batch_decode(a)[0].match(/<s_answer>(.*?)<\/s_answer>/),u=null;return l&&l.length>=2&&(u=l[1].trim()),[{answer:u}]}}class dy extends c6{DEFAULT_VOCODER_ID="Xenova/speecht5_hifigan";constructor(e){super(e),this.vocoder=e.vocoder??null}async _call(e,{speaker_embeddings:t=null}={}){return this.processor?this._call_text_to_spectrogram(e,{speaker_embeddings:t}):this._call_text_to_waveform(e)}async _call_text_to_waveform(e){let t=this.tokenizer(e,{padding:!0,truncation:!0}),{waveform:r}=await this.model(t),n=this.model.config.sampling_rate;return{audio:r.data,sampling_rate:n}}async _call_text_to_spectrogram(e,{speaker_embeddings:t}){if(this.vocoder||(console.log("No vocoder specified, using default HifiGan vocoder."),this.vocoder=await ub.from_pretrained(this.DEFAULT_VOCODER_ID,{quantized:!1})),("string"==typeof t||t instanceof URL)&&(t=new Float32Array(await (await fetch(t)).arrayBuffer())),t instanceof Float32Array)t=new eh("float32",t,[1,t.length]);else if(!(t instanceof eh))throw Error("Speaker embeddings must be a `Tensor`, `Float32Array`, `string`, or `URL`.");let{input_ids:r}=this.tokenizer(e,{padding:!0,truncation:!0}),{waveform:n}=await this.model.generate_speech(r,t,{vocoder:this.vocoder}),i=this.processor.feature_extractor.config.sampling_rate;return{audio:n.data,sampling_rate:i}}}class dw extends c6{constructor(e){super(e)}async _call(e){let t=await c2(e),r=await this.processor(t),n=await this.model(r),i=[];for(let e of n.reconstruction){let t=e.squeeze().clamp_(0,1).mul_(255).round_().to("uint8");i.push(u4.fromTensor(t))}return i.length>1?i:i[0]}}class dv extends c6{constructor(e){super(e)}async _call(e){let t=await c2(e),r=await this.processor(t),{predicted_depth:n}=await this.model(r),i=[];for(let e=0;e<t.length;++e){let r=eg(n[e],t[e].size.reverse(),"bilinear",!1),o=r.mul_(255/er(r.data)[0]).to("uint8");i.push({predicted_depth:n[e],depth:u4.fromTensor(o)})}return i.length>1?i:i[0]}}let dx=Object.freeze({"text-classification":{tokenizer:ns,pipeline:c5,model:uy,default:{model:"Xenova/distilbert-base-uncased-finetuned-sst-2-english"},type:"text"},"token-classification":{tokenizer:ns,pipeline:c8,model:uw,default:{model:"Xenova/bert-base-multilingual-cased-ner-hrl"},type:"text"},"question-answering":{tokenizer:ns,pipeline:c7,model:uk,default:{model:"Xenova/distilbert-base-cased-distilled-squad"},type:"text"},"fill-mask":{tokenizer:ns,pipeline:c9,model:uO,default:{model:"Xenova/bert-base-uncased"},type:"text"},summarization:{tokenizer:ns,pipeline:dt,model:uv,default:{model:"Xenova/distilbart-cnn-6-6"},type:"text"},translation:{tokenizer:ns,pipeline:dr,model:uv,default:{model:"Xenova/t5-small"},type:"text"},"text2text-generation":{tokenizer:ns,pipeline:de,model:uv,default:{model:"Xenova/flan-t5-small"},type:"text"},"text-generation":{tokenizer:ns,pipeline:di,model:uA,default:{model:"Xenova/gpt2"},type:"text"},"zero-shot-classification":{tokenizer:ns,pipeline:ds,model:uy,default:{model:"Xenova/distilbert-base-uncased-mnli"},type:"text"},"audio-classification":{pipeline:du,model:uL,processor:c1,default:{model:"Xenova/wav2vec2-base-superb-ks"},type:"audio"},"zero-shot-audio-classification":{tokenizer:ns,pipeline:dc,model:ub,processor:c1,default:{model:"Xenova/clap-htsat-unfused"},type:"multimodal"},"automatic-speech-recognition":{tokenizer:ns,pipeline:dd,model:[ux,u$],processor:c1,default:{model:"Xenova/whisper-tiny.en"},type:"multimodal"},"text-to-audio":{tokenizer:ns,pipeline:dy,model:[uS,uT],processor:[c1,null],default:{model:"Xenova/speecht5_tts"},type:"text"},"image-to-text":{tokenizer:ns,pipeline:dh,model:uE,processor:c1,default:{model:"Xenova/vit-gpt2-image-captioning"},type:"multimodal"},"image-classification":{pipeline:dp,model:uM,processor:c1,default:{model:"Xenova/vit-base-patch16-224"},type:"multimodal"},"image-segmentation":{pipeline:df,model:[uP,uI],processor:c1,default:{model:"Xenova/detr-resnet-50-panoptic"},type:"multimodal"},"zero-shot-image-classification":{tokenizer:ns,pipeline:dg,model:ub,processor:c1,default:{model:"Xenova/clip-vit-base-patch32"},type:"multimodal"},"object-detection":{pipeline:dm,model:uC,processor:c1,default:{model:"Xenova/detr-resnet-50"},type:"multimodal"},"zero-shot-object-detection":{tokenizer:ns,pipeline:d_,model:uF,processor:c1,default:{model:"Xenova/owlvit-base-patch32"},type:"multimodal"},"document-question-answering":{tokenizer:ns,pipeline:db,model:uj,processor:c1,default:{model:"Xenova/donut-base-finetuned-docvqa"},type:"multimodal"},"image-to-image":{pipeline:dw,model:uB,processor:c1,default:{model:"Xenova/swin2SR-classical-sr-x2-64"},type:"image"},"depth-estimation":{pipeline:dv,model:uU,processor:c1,default:{model:"Xenova/dpt-large"},type:"image"},"feature-extraction":{tokenizer:ns,pipeline:da,model:ub,default:{model:"Xenova/all-MiniLM-L6-v2"},type:"text"},"image-feature-extraction":{processor:c1,pipeline:dl,model:[uV,ub],default:{model:"Xenova/vit-base-patch16-224-in21k"},type:"image"}}),dT=Object.freeze({"sentiment-analysis":"text-classification",ner:"token-classification",asr:"automatic-speech-recognition","text-to-speech":"text-to-audio",embeddings:"feature-extraction"});async function dS(e,t=null,{quantized:r=!0,progress_callback:n=null,config:i=null,cache_dir:s=null,local_files_only:a=!1,revision:l="main",model_file_name:u=null}={}){let c=dx[(e=dT[e]??e).split("_",1)[0]];if(!c)throw Error(`Unsupported pipeline: ${e}. Must be one of [${Object.keys(dx)}]`);t||(t=c.default.model,console.log(`No model specified. Using default model: "${t}".`));let d={quantized:r,progress_callback:n,config:i,cache_dir:s,local_files_only:a,revision:l,model_file_name:u},h=new Map([["tokenizer",c.tokenizer],["model",c.model],["processor",c.processor]]),p=await dA(h,t,d);return p.task=e,o(n,{status:"ready",task:e,model:t}),new c.pipeline(p)}async function dA(e,t,r){let n=Object.create(null),i=[];for(let[o,s]of e.entries()){let e;s&&(e=Array.isArray(s)?new Promise(async(e,n)=>{let i;for(let n of s){if(null===n)return void e(null);try{e(await n.from_pretrained(t,r));return}catch(e){i=e}}n(i)}):s.from_pretrained(t,r),n[o]=e,i.push(e))}for(let[e,t]of(await Promise.all(i),Object.entries(n)))n[e]=await t;return n}e.i(90916),e.i(25084),e.i(50590),e.i(91441),e.i(57672),e.i(5550),e.i(29898),e.i(59027),e.i(24377),e.i(86555),e.i(32494),e.s(["ASTFeatureExtractor",()=>cW,"ASTForAudioClassification",()=>oJ,"ASTModel",()=>oZ,"ASTPreTrainedModel",()=>oQ,"AlbertForMaskedLM",()=>ol,"AlbertForQuestionAnswering",()=>oa,"AlbertForSequenceClassification",()=>os,"AlbertModel",()=>oo,"AlbertPreTrainedModel",()=>oi,"AlbertTokenizer",()=>rx,"AudioClassificationPipeline",()=>du,"AutoConfig",()=>nu,"AutoModel",()=>ub,"AutoModelForAudioClassification",()=>uL,"AutoModelForAudioFrameClassification",()=>uR,"AutoModelForCTC",()=>u$,"AutoModelForCausalLM",()=>uA,"AutoModelForDepthEstimation",()=>uU,"AutoModelForDocumentQuestionAnswering",()=>uj,"AutoModelForImageClassification",()=>uM,"AutoModelForImageFeatureExtraction",()=>uV,"AutoModelForImageMatting",()=>uz,"AutoModelForImageSegmentation",()=>uP,"AutoModelForImageToImage",()=>uB,"AutoModelForMaskGeneration",()=>uD,"AutoModelForMaskedLM",()=>uO,"AutoModelForObjectDetection",()=>uC,"AutoModelForQuestionAnswering",()=>uk,"AutoModelForSemanticSegmentation",()=>uI,"AutoModelForSeq2SeqLM",()=>uv,"AutoModelForSequenceClassification",()=>uy,"AutoModelForSpeechSeq2Seq",()=>ux,"AutoModelForTextToSpectrogram",()=>uT,"AutoModelForTextToWaveform",()=>uS,"AutoModelForTokenClassification",()=>uw,"AutoModelForVision2Seq",()=>uE,"AutoModelForXVector",()=>uN,"AutoModelForZeroShotObjectDetection",()=>uF,"AutoProcessor",()=>c1,"AutoTokenizer",()=>ns,"AutomaticSpeechRecognitionPipeline",()=>dd,"BartForConditionalGeneration",()=>ow,"BartForSequenceClassification",()=>ov,"BartModel",()=>oy,"BartPretrainedModel",()=>ob,"BartTokenizer",()=>rL,"BaseModelOutput",()=>n4,"BeitFeatureExtractor",()=>c$,"BeitForImageClassification",()=>at,"BeitModel",()=>ae,"BeitPreTrainedModel",()=>s9,"BertForMaskedLM",()=>n8,"BertForQuestionAnswering",()=>ie,"BertForSequenceClassification",()=>n7,"BertForTokenClassification",()=>n9,"BertModel",()=>n5,"BertPreTrainedModel",()=>n6,"BertTokenizer",()=>rv,"BitImageProcessor",()=>cw,"BlenderbotForConditionalGeneration",()=>oM,"BlenderbotModel",()=>oE,"BlenderbotPreTrainedModel",()=>ok,"BlenderbotSmallForConditionalGeneration",()=>oC,"BlenderbotSmallModel",()=>oI,"BlenderbotSmallPreTrainedModel",()=>oP,"BlenderbotSmallTokenizer",()=>nt,"BlenderbotTokenizer",()=>ne,"BloomForCausalLM",()=>sL,"BloomModel",()=>s$,"BloomPreTrainedModel",()=>sD,"BloomTokenizer",()=>rz,"CLIPFeatureExtractor",()=>cx,"CLIPModel",()=>o6,"CLIPPreTrainedModel",()=>o4,"CLIPSegForImageSegmentation",()=>ss,"CLIPSegModel",()=>so,"CLIPSegPreTrainedModel",()=>si,"CLIPTextModelWithProjection",()=>o5,"CLIPTokenizer",()=>r5,"CLIPVisionModelWithProjection",()=>o8,"CamembertForMaskedLM",()=>iA,"CamembertForQuestionAnswering",()=>iE,"CamembertForSequenceClassification",()=>iO,"CamembertForTokenClassification",()=>ik,"CamembertModel",()=>iS,"CamembertPreTrainedModel",()=>iT,"CamembertTokenizer",()=>rI,"CausalLMOutput",()=>uK,"CausalLMOutputWithPast",()=>uQ,"ChineseCLIPFeatureExtractor",()=>cT,"ChineseCLIPModel",()=>sn,"ChineseCLIPPreTrainedModel",()=>sr,"ClapAudioModelWithProjection",()=>lj,"ClapFeatureExtractor",()=>cH,"ClapModel",()=>lN,"ClapPreTrainedModel",()=>lL,"ClapTextModelWithProjection",()=>lR,"CodeGenForCausalLM",()=>sS,"CodeGenModel",()=>sT,"CodeGenPreTrainedModel",()=>sx,"CodeGenTokenizer",()=>r6,"CodeLlamaTokenizer",()=>rV,"CohereTokenizer",()=>no,"ConvBertForMaskedLM",()=>ih,"ConvBertForQuestionAnswering",()=>im,"ConvBertForSequenceClassification",()=>ip,"ConvBertForTokenClassification",()=>ig,"ConvBertModel",()=>id,"ConvBertPreTrainedModel",()=>ic,"ConvBertTokenizer",()=>rE,"ConvNextFeatureExtractor",()=>cA,"ConvNextForImageClassification",()=>aL,"ConvNextImageProcessor",()=>cO,"ConvNextModel",()=>a$,"ConvNextPreTrainedModel",()=>aD,"ConvNextV2ForImageClassification",()=>aj,"ConvNextV2Model",()=>aR,"ConvNextV2PreTrainedModel",()=>aN,"DPTFeatureExtractor",()=>cb,"DPTForDepthEstimation",()=>aO,"DPTImageProcessor",()=>cy,"DPTModel",()=>aA,"DPTPreTrainedModel",()=>aS,"DebertaForMaskedLM",()=>iI,"DebertaForQuestionAnswering",()=>iD,"DebertaForSequenceClassification",()=>iC,"DebertaForTokenClassification",()=>iF,"DebertaModel",()=>iP,"DebertaPreTrainedModel",()=>iM,"DebertaTokenizer",()=>rA,"DebertaV2ForMaskedLM",()=>iN,"DebertaV2ForQuestionAnswering",()=>iz,"DebertaV2ForSequenceClassification",()=>iR,"DebertaV2ForTokenClassification",()=>ij,"DebertaV2Model",()=>iL,"DebertaV2PreTrainedModel",()=>i$,"DebertaV2Tokenizer",()=>rO,"DeiTFeatureExtractor",()=>cD,"DeiTForImageClassification",()=>af,"DeiTModel",()=>ap,"DeiTPreTrainedModel",()=>ah,"DepthAnythingForDepthEstimation",()=>aE,"DepthAnythingPreTrainedModel",()=>ak,"DepthEstimationPipeline",()=>dv,"DetrFeatureExtractor",()=>cR,"DetrForObjectDetection",()=>ai,"DetrForSegmentation",()=>ao,"DetrModel",()=>an,"DetrObjectDetectionOutput",()=>as,"DetrPreTrainedModel",()=>ar,"DetrSegmentationOutput",()=>aa,"Dinov2ForImageClassification",()=>aU,"Dinov2Model",()=>aB,"Dinov2PreTrainedModel",()=>az,"DistilBertForMaskedLM",()=>iW,"DistilBertForQuestionAnswering",()=>iq,"DistilBertForSequenceClassification",()=>iV,"DistilBertForTokenClassification",()=>iG,"DistilBertModel",()=>iU,"DistilBertPreTrainedModel",()=>iB,"DistilBertTokenizer",()=>rP,"DocumentQuestionAnsweringPipeline",()=>db,"DonutFeatureExtractor",()=>cL,"DonutSwinModel",()=>aF,"DonutSwinPreTrainedModel",()=>aC,"EfficientNetForImageClassification",()=>lQ,"EfficientNetImageProcessor",()=>cM,"EfficientNetModel",()=>lK,"EfficientNetPreTrainedModel",()=>lY,"ElectraForMaskedLM",()=>iy,"ElectraForQuestionAnswering",()=>ix,"ElectraForSequenceClassification",()=>iw,"ElectraForTokenClassification",()=>iv,"ElectraModel",()=>ib,"ElectraPreTrainedModel",()=>i_,"ElectraTokenizer",()=>rF,"EsmForMaskedLM",()=>iY,"EsmForSequenceClassification",()=>iK,"EsmForTokenClassification",()=>iQ,"EsmModel",()=>iX,"EsmPreTrainedModel",()=>iH,"EsmTokenizer",()=>rX,"FFT",()=>es,"FalconForCausalLM",()=>l$,"FalconModel",()=>lD,"FalconPreTrainedModel",()=>lF,"FalconTokenizer",()=>rW,"FastViTForImageClassification",()=>sX,"FastViTModel",()=>sH,"FastViTPreTrainedModel",()=>sW,"FeatureExtractionPipeline",()=>da,"FeatureExtractor",()=>cg,"FillMaskPipeline",()=>c9,"GLPNFeatureExtractor",()=>cv,"GLPNForDepthEstimation",()=>aI,"GLPNModel",()=>aP,"GLPNPreTrainedModel",()=>aM,"GPT2LMHeadModel",()=>su,"GPT2Model",()=>sl,"GPT2PreTrainedModel",()=>sa,"GPT2Tokenizer",()=>r$,"GPTBigCodeForCausalLM",()=>sv,"GPTBigCodeModel",()=>sw,"GPTBigCodePreTrainedModel",()=>sy,"GPTJForCausalLM",()=>sb,"GPTJModel",()=>s_,"GPTJPreTrainedModel",()=>sm,"GPTNeoForCausalLM",()=>sh,"GPTNeoModel",()=>sd,"GPTNeoPreTrainedModel",()=>sc,"GPTNeoXForCausalLM",()=>sg,"GPTNeoXModel",()=>sf,"GPTNeoXPreTrainedModel",()=>sp,"GPTNeoXTokenizer",()=>rH,"GemmaTokenizer",()=>rK,"Grok1Tokenizer",()=>rQ,"HerbertTokenizer",()=>rk,"HubertForCTC",()=>lh,"HubertForSequenceClassification",()=>lp,"HubertModel",()=>ld,"HubertPreTrainedModel",()=>lc,"ImageClassificationPipeline",()=>dp,"ImageFeatureExtractionPipeline",()=>dl,"ImageFeatureExtractor",()=>cm,"ImageMattingOutput",()=>uZ,"ImageSegmentationPipeline",()=>df,"ImageToImagePipeline",()=>dw,"ImageToTextPipeline",()=>dh,"LlamaForCausalLM",()=>sk,"LlamaModel",()=>sO,"LlamaPreTrainedModel",()=>sA,"LlamaTokenizer",()=>rU,"LongT5ForConditionalGeneration",()=>of,"LongT5Model",()=>op,"LongT5PreTrainedModel",()=>oh,"M2M100ForConditionalGeneration",()=>a1,"M2M100Model",()=>a0,"M2M100PreTrainedModel",()=>aJ,"M2M100Tokenizer",()=>r0,"MBart50Tokenizer",()=>rR,"MBartForCausalLM",()=>oO,"MBartForConditionalGeneration",()=>oS,"MBartForSequenceClassification",()=>oA,"MBartModel",()=>oT,"MBartPreTrainedModel",()=>ox,"MBartTokenizer",()=>rN,"MPNetForMaskedLM",()=>i6,"MPNetForQuestionAnswering",()=>i7,"MPNetForSequenceClassification",()=>i5,"MPNetForTokenClassification",()=>i8,"MPNetModel",()=>i4,"MPNetPreTrainedModel",()=>i3,"MPNetTokenizer",()=>rq,"MT5ForConditionalGeneration",()=>o_,"MT5Model",()=>om,"MT5PreTrainedModel",()=>og,"MarianMTModel",()=>aZ,"MarianModel",()=>aQ,"MarianPreTrainedModel",()=>aK,"MarianTokenizer",()=>r7,"MaskedLMOutput",()=>uX,"MistralForCausalLM",()=>lM,"MistralModel",()=>lE,"MistralPreTrainedModel",()=>lk,"MobileBertForMaskedLM",()=>i0,"MobileBertForQuestionAnswering",()=>i2,"MobileBertForSequenceClassification",()=>i1,"MobileBertModel",()=>iJ,"MobileBertPreTrainedModel",()=>iZ,"MobileBertTokenizer",()=>rT,"MobileViTFeatureExtractor",()=>cP,"MobileViTForImageClassification",()=>sJ,"MobileViTImageProcessor",()=>cI,"MobileViTModel",()=>sZ,"MobileViTPreTrainedModel",()=>sQ,"MobileViTV2ForImageClassification",()=>s2,"MobileViTV2Model",()=>s1,"MobileViTV2PreTrainedModel",()=>s0,"ModelOutput",()=>n3,"MptForCausalLM",()=>sj,"MptModel",()=>sR,"MptPreTrainedModel",()=>sN,"NllbTokenizer",()=>rJ,"NomicBertModel",()=>ir,"NomicBertPreTrainedModel",()=>it,"NougatImageProcessor",()=>cN,"NougatTokenizer",()=>nn,"OPTForCausalLM",()=>sU,"OPTModel",()=>sB,"OPTPreTrainedModel",()=>sz,"ObjectDetectionPipeline",()=>dm,"OwlViTFeatureExtractor",()=>cC,"OwlViTForObjectDetection",()=>s6,"OwlViTModel",()=>s4,"OwlViTPreTrainedModel",()=>s3,"OwlViTProcessor",()=>c0,"Owlv2ForObjectDetection",()=>s7,"Owlv2ImageProcessor",()=>cF,"Owlv2Model",()=>s8,"Owlv2PreTrainedModel",()=>s5,"PhiForCausalLM",()=>sF,"PhiModel",()=>sC,"PhiPreTrainedModel",()=>sI,"Pipeline",()=>c6,"PreTrainedModel",()=>n2,"PreTrainedTokenizer",()=>rw,"PretrainedConfig",()=>nl,"PretrainedMixin",()=>lZ,"Processor",()=>cY,"QuestionAnsweringModelOutput",()=>uY,"QuestionAnsweringPipeline",()=>c7,"Qwen2ForCausalLM",()=>sP,"Qwen2Model",()=>sM,"Qwen2PreTrainedModel",()=>sE,"Qwen2Tokenizer",()=>rY,"RawImage",()=>u4,"ResNetForImageClassification",()=>a_,"ResNetModel",()=>am,"ResNetPreTrainedModel",()=>ag,"RoFormerForMaskedLM",()=>is,"RoFormerForQuestionAnswering",()=>iu,"RoFormerForSequenceClassification",()=>ia,"RoFormerForTokenClassification",()=>il,"RoFormerModel",()=>io,"RoFormerPreTrainedModel",()=>ii,"RoFormerTokenizer",()=>rM,"RobertaForMaskedLM",()=>o$,"RobertaForQuestionAnswering",()=>oR,"RobertaForSequenceClassification",()=>oL,"RobertaForTokenClassification",()=>oN,"RobertaModel",()=>oD,"RobertaPreTrainedModel",()=>oF,"RobertaTokenizer",()=>rj,"SamImageProcessor",()=>cz,"SamImageSegmentationOutput",()=>aY,"SamModel",()=>aX,"SamPreTrainedModel",()=>aH,"SamProcessor",()=>cK,"SeamlessM4TFeatureExtractor",()=>cq,"SegformerFeatureExtractor",()=>c_,"SegformerForImageClassification",()=>lG,"SegformerForSemanticSegmentation",()=>lq,"SegformerModel",()=>lV,"SegformerPreTrainedModel",()=>lU,"Seq2SeqLMOutput",()=>uG,"SequenceClassifierOutput",()=>uq,"SiglipImageProcessor",()=>cS,"SiglipModel",()=>o9,"SiglipPreTrainedModel",()=>o7,"SiglipTextModel",()=>se,"SiglipTokenizer",()=>r8,"SiglipVisionModel",()=>st,"SpeechT5FeatureExtractor",()=>cX,"SpeechT5ForSpeechToText",()=>lx,"SpeechT5ForTextToSpeech",()=>lT,"SpeechT5HifiGan",()=>lS,"SpeechT5Model",()=>lv,"SpeechT5PreTrainedModel",()=>lw,"SpeechT5Processor",()=>cJ,"SpeechT5Tokenizer",()=>nr,"SqueezeBertForMaskedLM",()=>ot,"SqueezeBertForQuestionAnswering",()=>on,"SqueezeBertForSequenceClassification",()=>or,"SqueezeBertModel",()=>oe,"SqueezeBertPreTrainedModel",()=>i9,"SqueezeBertTokenizer",()=>rS,"StableLmForCausalLM",()=>lX,"StableLmModel",()=>lH,"StableLmPreTrainedModel",()=>lW,"Starcoder2ForCausalLM",()=>lC,"Starcoder2Model",()=>lI,"Starcoder2PreTrainedModel",()=>lP,"SummarizationPipeline",()=>dt,"Swin2SRForImageSuperResolution",()=>aT,"Swin2SRImageProcessor",()=>cB,"Swin2SRModel",()=>ax,"Swin2SRPreTrainedModel",()=>av,"SwinForImageClassification",()=>aw,"SwinModel",()=>ay,"SwinPreTrainedModel",()=>ab,"T5ForConditionalGeneration",()=>od,"T5Model",()=>oc,"T5PreTrainedModel",()=>ou,"T5Tokenizer",()=>rD,"TableTransformerForObjectDetection",()=>ac,"TableTransformerModel",()=>au,"TableTransformerObjectDetectionOutput",()=>ad,"TableTransformerPreTrainedModel",()=>al,"Tensor",()=>eh,"Text2TextGenerationPipeline",()=>de,"TextClassificationPipeline",()=>c5,"TextGenerationPipeline",()=>di,"TextToAudioPipeline",()=>dy,"TokenClassificationPipeline",()=>c8,"TokenClassifierOutput",()=>uH,"TokenizerModel",()=>tF,"TrOCRForCausalLM",()=>lO,"TrOCRPreTrainedModel",()=>lA,"TranslationPipeline",()=>dr,"UniSpeechForCTC",()=>a9,"UniSpeechForSequenceClassification",()=>le,"UniSpeechModel",()=>a7,"UniSpeechPreTrainedModel",()=>a8,"UniSpeechSatForAudioFrameClassification",()=>lo,"UniSpeechSatForCTC",()=>ln,"UniSpeechSatForSequenceClassification",()=>li,"UniSpeechSatModel",()=>lr,"UniSpeechSatPreTrainedModel",()=>lt,"ViTFeatureExtractor",()=>ck,"ViTForImageClassification",()=>sq,"ViTImageProcessor",()=>cE,"ViTModel",()=>sG,"ViTPreTrainedModel",()=>sV,"VisionEncoderDecoderModel",()=>o3,"VitMatteForImageMatting",()=>sK,"VitMatteImageProcessor",()=>cU,"VitMattePreTrainedModel",()=>sY,"VitsModel",()=>lB,"VitsModelOutput",()=>uJ,"VitsPreTrainedModel",()=>lz,"VitsTokenizer",()=>ni,"Wav2Vec2BertForCTC",()=>ll,"Wav2Vec2BertForSequenceClassification",()=>lu,"Wav2Vec2BertModel",()=>la,"Wav2Vec2BertPreTrainedModel",()=>ls,"Wav2Vec2CTCTokenizer",()=>r9,"Wav2Vec2FeatureExtractor",()=>cG,"Wav2Vec2ForAudioFrameClassification",()=>a5,"Wav2Vec2ForCTC",()=>a4,"Wav2Vec2ForSequenceClassification",()=>a6,"Wav2Vec2Model",()=>a3,"Wav2Vec2PreTrainedModel",()=>a2,"Wav2Vec2ProcessorWithLM",()=>cZ,"WavLMForAudioFrameClassification",()=>ly,"WavLMForCTC",()=>lm,"WavLMForSequenceClassification",()=>l_,"WavLMForXVector",()=>lb,"WavLMModel",()=>lg,"WavLMPreTrainedModel",()=>lf,"WhisperFeatureExtractor",()=>cV,"WhisperForConditionalGeneration",()=>o2,"WhisperModel",()=>o1,"WhisperPreTrainedModel",()=>o0,"WhisperProcessor",()=>cQ,"WhisperTokenizer",()=>r4,"XLMForQuestionAnswering",()=>oG,"XLMForSequenceClassification",()=>oU,"XLMForTokenClassification",()=>oV,"XLMModel",()=>oz,"XLMPreTrainedModel",()=>oj,"XLMRobertaForMaskedLM",()=>oH,"XLMRobertaForQuestionAnswering",()=>oK,"XLMRobertaForSequenceClassification",()=>oX,"XLMRobertaForTokenClassification",()=>oY,"XLMRobertaModel",()=>oW,"XLMRobertaPreTrainedModel",()=>oq,"XLMRobertaTokenizer",()=>rG,"XLMTokenizer",()=>rC,"XLMWithLMHeadModel",()=>oB,"XVectorOutput",()=>uW,"YolosFeatureExtractor",()=>cj,"YolosForObjectDetection",()=>aq,"YolosModel",()=>aG,"YolosObjectDetectionOutput",()=>aW,"YolosPreTrainedModel",()=>aV,"ZeroShotAudioClassificationPipeline",()=>dc,"ZeroShotClassificationPipeline",()=>ds,"ZeroShotImageClassificationPipeline",()=>dg,"ZeroShotObjectDetectionPipeline",()=>d_,"bankers_round",()=>eu,"cat",()=>ev,"cos_sim",()=>J,"dot",()=>Q,"dynamicTimeWarping",()=>eA,"env",0,D,"getTopItems",()=>Z,"hanning",()=>u5,"interpolate",()=>eg,"interpolate_data",()=>H,"layer_norm",()=>e_,"log_softmax",()=>K,"magnitude",()=>ee,"max",()=>er,"mean",()=>eS,"mean_pooling",()=>em,"medianFilter",()=>ea,"mel_filter_bank",()=>cn,"min",()=>et,"ones",()=>ek,"ones_like",()=>eE,"permute",()=>ef,"permute_data",()=>X,"pipeline",()=>dS,"quantize_embeddings",()=>eM,"read_audio",()=>u6,"round",()=>el,"softmax",()=>Y,"spectrogram",()=>cl,"stack",()=>ex,"std_mean",()=>eT,"window_function",()=>cu],58530)}]);
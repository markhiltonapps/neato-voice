(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,40469,e=>{"use strict";var t=e.i(76167),r=e.i(17961);let s=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:n="",children:l,iconNode:c,...d},h)=>(0,r.createElement)("svg",{ref:h,...i,width:t,height:t,stroke:e,strokeWidth:o?24*Number(a)/Number(t):a,className:s("lucide",n),...!l&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1})(d)&&{"aria-hidden":"true"},...d},[...c.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(l)?l:[l]])),n=(e,t)=>{let i=(0,r.forwardRef)(({className:i,...n},l)=>(0,r.createElement)(o,{ref:l,iconNode:t,className:s(`lucide-${a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,i),...n}));return i.displayName=a(e),i},l=n("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]),c=n("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),d=n("book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]),h=n("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function m({activeTab:e,setActiveTab:r}){let s=[{id:"home",label:"Home",icon:l},{id:"dictionary",label:"Dictionary",icon:d},{id:"history",label:"History",icon:c},{id:"help",label:"Help",icon:h}];return(0,t.jsxs)("div",{className:"w-64 h-full bg-[#f8f9fa] border-r border-gray-200 flex flex-col p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-8 px-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-black rounded-lg flex items-center justify-center text-white font-bold",children:"NV"}),(0,t.jsx)("span",{className:"text-xl font-bold text-gray-900",children:"Neato Voice"}),(0,t.jsx)("span",{className:"text-xs font-semibold text-blue-600 bg-blue-100 px-1.5 py-0.5 rounded ml-2",children:"Pro Trial"})]}),(0,t.jsx)("nav",{className:"flex-1 space-y-1",children:s.map(s=>(0,t.jsxs)("button",{onClick:()=>r(s.id),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${e===s.id?"bg-gray-200 text-gray-900":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[(0,t.jsx)(s.icon,{size:18}),s.label]},s.id))}),(0,t.jsxs)("div",{className:"mt-auto bg-white p-4 rounded-xl border border-gray-200 shadow-sm",children:[(0,t.jsx)("div",{className:"flex justify-between items-start mb-2",children:(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:"Pro Trial"})}),(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"1 of 30 days used"}),(0,t.jsx)("div",{className:"w-full bg-gray-100 rounded-full h-1.5",children:(0,t.jsx)("div",{className:"bg-black h-1.5 rounded-full",style:{width:"3.3%"}})})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"Upgrade to Neato Pro before your trial ends"}),(0,t.jsx)("button",{className:"w-full bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium py-2 rounded-lg transition-colors",children:"Upgrade"})]}),(0,t.jsx)("div",{className:"mt-4 flex flex-col gap-1 text-gray-400 px-1 border-t border-gray-200 pt-4",children:(0,t.jsxs)("button",{onClick:()=>r("settings"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${"settings"===e?"bg-gray-200 text-gray-900":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[(0,t.jsx)("div",{className:"flex items-center justify-center",children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),(0,t.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})}),"Settings"]})})]})}let g=n("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),x=n("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]),p=n("chart-no-axes-column-increasing",[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]]),u=n("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),y=n("megaphone",[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]]);function b({stats:e,lastTranscript:r,refinedTranscript:s,isRefining:a,refinementError:i}){let o=Math.floor(e.totalDictationTimeMs/6e4),n=Math.min(100,5*(e.dictionarySize||0)+2*(e.correctionsCount||0)+Math.floor(e.totalWords/100));return o>0&&e.totalWords,(0,t.jsxs)("div",{className:"p-8 bg-white h-full overflow-y-auto",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Speak naturally, write perfectly – in any app"}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Hold down the ",(0,t.jsx)("kbd",{className:"bg-gray-100 border border-gray-300 rounded px-1.5 py-0.5 text-sm font-mono text-gray-800",children:"Ctrl+Shift+Space"})," key, speak, and let go to insert spoken text."]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[(0,t.jsxs)("div",{className:"bg-white p-5 rounded-2xl border border-gray-100 shadow-sm flex flex-col justify-center items-center h-32 hover:shadow-md transition-shadow",title:"Your personalization score increases as you add dictionary words and use the app.",children:[(0,t.jsxs)("div",{className:"relative w-20 h-20 mb-2",children:[(0,t.jsx)("div",{className:"w-full h-full rounded-full border-4 border-blue-100"}),(0,t.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full flex items-center justify-center font-bold text-gray-900 text-xl",children:[n,"%"]})]}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"Overall personalization"})]}),(0,t.jsxs)("div",{className:"bg-white p-5 rounded-2xl border border-gray-100 shadow-sm flex flex-col justify-center h-32 hover:shadow-md transition-shadow",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(x,{size:18,className:"text-gray-400"}),(0,t.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:e.correctionsCount||0})]}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Corrections made"})]}),(0,t.jsxs)("div",{className:"bg-white p-5 rounded-2xl border border-gray-100 shadow-sm flex flex-col justify-center h-32 hover:shadow-md transition-shadow",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(p,{size:18,className:"text-gray-400"}),(0,t.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:(e.wordsThisWeek||0).toLocaleString()})]}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Words (This Week)"})]}),(0,t.jsxs)("div",{className:"bg-white p-5 rounded-2xl border border-gray-100 shadow-sm flex flex-col justify-center h-32 hover:shadow-md transition-shadow",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(g,{size:18,className:"text-gray-400"}),(0,t.jsxs)("span",{className:"text-2xl font-bold text-gray-900",children:[o," min"]})]}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Total dictation time"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[(0,t.jsxs)("div",{className:"bg-blue-50 p-6 rounded-2xl flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-bold text-gray-900 mb-1",children:"Refer friends"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Get $5 credit for Neato Pro for every invite."}),(0,t.jsx)("button",{disabled:!0,className:"bg-gray-100 text-gray-400 px-4 py-1.5 rounded-lg text-sm font-medium shadow-none cursor-not-allowed",children:"Coming Soon"})]}),(0,t.jsx)(u,{size:48,className:"text-blue-200"})]}),(0,t.jsxs)("div",{className:"bg-orange-50 p-6 rounded-2xl flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-bold text-gray-900 mb-1",children:"Affiliate program"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Earn 25% recurring commission for sharing Neato."}),(0,t.jsx)("button",{disabled:!0,className:"bg-gray-100 text-gray-400 px-4 py-1.5 rounded-lg text-sm font-medium shadow-none cursor-not-allowed",children:"Coming Soon"})]}),(0,t.jsx)(y,{size:48,className:"text-orange-200"})]})]}),(0,t.jsxs)("div",{className:"mt-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Last transcript"}),a?(0,t.jsx)("span",{className:"text-xs text-blue-600 font-bold animate-pulse",children:"✨ AI Refining..."}):i?(0,t.jsxs)("span",{className:"text-xs text-red-600 font-bold",children:["⚠️ Error: ",i]}):(0,t.jsx)("span",{className:"text-xs text-green-600 font-bold",children:"✓ Ready"})]}),(0,t.jsx)("div",{className:`bg-gray-50 p-4 rounded-xl border min-h-[100px] text-gray-600 whitespace-pre-wrap transition-colors ${i?"border-vault-rust/30":"border-gray-200"} ${a?"opacity-70":""}`,children:s||r||"No transcript yet. Try dictating something!"})]}),(0,t.jsx)("div",{className:"mt-8 text-xs text-gray-400",children:"Version 1.0.12 • Check for updates"})]})}function f(){return"electronAPI"in window&&window.electronAPI?.isElectron===!0?window.electronAPI:null}let v=n("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),w=n("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function j(){let[e,s]=(0,r.useState)([]),[a,i]=(0,r.useState)(""),[o,n]=(0,r.useState)(!0);(0,r.useEffect)(()=>{l()},[]);let l=async()=>{try{let e=f();if(e){let t=await e.getDictionary();s(t||[])}}catch(e){console.error("Failed to load dictionary:",e)}finally{n(!1)}},c=async e=>{if(e?.preventDefault(),a.trim())try{let e=f();if(e){let t=await e.addDictionaryWord(a.trim());s(t),i("")}}catch(e){console.error("Failed to add word:",e)}},h=async e=>{try{let t=f();if(t){let r=await t.removeDictionaryWord(e);s(r)}}catch(e){console.error("Failed to remove word:",e)}};return(0,t.jsxs)("div",{className:"p-8 bg-white h-full overflow-y-auto",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("div",{className:"bg-blue-100 p-2 rounded-lg text-blue-600",children:(0,t.jsx)(d,{size:24})}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Personal Dictionary"})]}),(0,t.jsx)("p",{className:"text-gray-600 max-w-2xl",children:"Add custom words, names, or technical terms here. Neato Voice will learn to recognize them more accurately during dictation."})]}),(0,t.jsxs)("div",{className:"max-w-xl",children:[(0,t.jsxs)("form",{onSubmit:c,className:"flex gap-2 mb-6",children:[(0,t.jsx)("input",{type:"text",value:a,onChange:e=>i(e.target.value),placeholder:"Enter a word or phrase...",className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}),(0,t.jsxs)("button",{type:"submit",disabled:!a.trim(),className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-xl hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,t.jsx)(w,{size:18}),"Add"]})]}),o?(0,t.jsx)("div",{className:"text-center py-8 text-gray-400",children:"Loading dictionary..."}):0===e.length?(0,t.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-2xl border border-dashed border-gray-200",children:[(0,t.jsx)("p",{className:"text-gray-500",children:"No custom words yet."}),(0,t.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:'Add names like "Neato" or "Antigravity"'})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 gap-2",children:e.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-100 group hover:border-gray-200 transition-colors",children:[(0,t.jsx)("span",{className:"font-medium text-gray-800",children:e}),(0,t.jsx)("button",{onClick:()=>h(e),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all opacity-0 group-hover:opacity-100",title:"Remove word",children:(0,t.jsx)(v,{size:16})})]},e))})]})]})}let k=n("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);function N(){let[e,s]=(0,r.useState)([]),[a,i]=(0,r.useState)("forever"),[o,n]=(0,r.useState)(!0);(0,r.useEffect)(()=>{l()},[]);let l=async()=>{let e=f();if(e)try{let[t,r]=await Promise.all([e.getHistory(),e.getRetentionSettings()]);s(t||[]),i(r||"forever")}catch(e){console.error("Failed to load history:",e)}finally{n(!1)}else n(!1)},d=async e=>{let t=e.target.value,r=f();r&&(await r.setRetentionSettings(t),i(t),s(await r.getHistory()||[]))},h=async()=>{if(!confirm("Are you sure you want to delete all history? This cannot be undone."))return;let e=f();e&&(await e.clearHistory(),s([]))};return(0,t.jsxs)("div",{className:"p-8 bg-white h-full flex flex-col",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("div",{className:"bg-purple-100 p-2 rounded-lg text-purple-600",children:(0,t.jsx)(c,{size:24})}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"History"})]}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:"Review your past dictations. Stored locally."})]}),(0,t.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"Auto-delete:"}),(0,t.jsxs)("select",{value:a,onChange:d,className:"bg-gray-50 border border-gray-200 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2",children:[(0,t.jsx)("option",{value:"never",children:"Never (Disable History)"}),(0,t.jsx)("option",{value:"24h",children:"After 24 Hours"}),(0,t.jsx)("option",{value:"1w",children:"After 1 Week"}),(0,t.jsx)("option",{value:"1m",children:"After 1 Month"}),(0,t.jsx)("option",{value:"forever",children:"Don't Auto-delete"})]})]}),e.length>0&&(0,t.jsxs)("button",{onClick:h,className:"text-red-500 text-xs hover:underline flex items-center gap-1",children:[(0,t.jsx)(v,{size:12})," Clear All History"]})]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto pr-2",children:o?(0,t.jsx)("div",{className:"text-center py-10 text-gray-400",children:"Loading history..."}):0===e.length?(0,t.jsxs)("div",{className:"text-center py-16 bg-gray-50 rounded-2xl border border-dashed border-gray-200",children:[(0,t.jsx)(g,{className:"mx-auto text-gray-300 mb-3",size:48}),(0,t.jsx)("p",{className:"text-gray-500 font-medium",children:"No history yet"}),(0,t.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Dictations will appear here based on your retention settings."})]}):(0,t.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,t.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100 hover:border-gray-300 transition-all group",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsxs)("span",{className:"text-xs font-medium text-gray-400 flex items-center gap-1",children:[(0,t.jsx)(g,{size:12})," ",new Date(e.timestamp).toLocaleString()]}),(0,t.jsx)("button",{onClick:()=>{var t;return t=e.text,void navigator.clipboard.writeText(t)},className:"text-blue-600 opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-blue-50 rounded",title:"Copy to clipboard",children:(0,t.jsx)(k,{size:16})})]}),(0,t.jsx)("p",{className:"text-gray-800 whitespace-pre-wrap leading-relaxed",children:e.text})]},e.id))})})]})}let S=n("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),C=n("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]]),R=n("languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]),A=n("keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),M=n("mouse-pointer-click",[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]]);function T(){let[e,s]=(0,r.useState)([]),[a,i]=(0,r.useState)("default"),[o,n]=(0,r.useState)(!1),[l,c]=(0,r.useState)("Spanish"),[d,h]=(0,r.useState)("");(0,r.useEffect)(()=>{m(),g()},[]);let m=async()=>{let e=f();if(e)try{let t=await e.getSettings();if(console.log("[Settings] Loaded:",t),t){let e=t.translation||{enabled:!1,targetLanguage:"Spanish"};n(!!e.enabled),c(e.targetLanguage||"Spanish"),t.microphoneId&&i(t.microphoneId)}}catch(e){console.error("[Settings] Load error:",e)}},g=async()=>{try{await navigator.mediaDevices.getUserMedia({audio:!0});let e=(await navigator.mediaDevices.enumerateDevices()).filter(e=>"audioinput"===e.kind).map(e=>({deviceId:e.deviceId,label:e.label||`Microphone ${e.deviceId.slice(0,5)}...`}));s(e)}catch(e){console.error("Failed to load devices",e)}},x=async e=>{try{console.log("[Settings] Saving updates:",e),h("Saving...");let t=f();if(t){let r={translation:{enabled:e.translationEnabled??o,targetLanguage:e.targetLanguage??l},microphoneId:e.microphoneId??a};await t.saveSettings(r),void 0!==e.translationEnabled&&n(e.translationEnabled),void 0!==e.targetLanguage&&c(e.targetLanguage),void 0!==e.microphoneId&&i(e.microphoneId),h("Saved!"),setTimeout(()=>h(""),2e3)}else console.warn("No Electron API found"),h("Error: No API")}catch(e){console.error("[Settings] Save failed:",e),h(`Error: ${e.message}`)}};return(0,t.jsxs)("div",{className:"p-8 bg-white h-full flex flex-col overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,t.jsx)("div",{className:"bg-gray-100 p-2 rounded-lg text-gray-700",children:(0,t.jsx)(S,{size:24})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"Configure your experience."})]})]}),(0,t.jsxs)("div",{className:"space-y-8 max-w-2xl",children:[(0,t.jsxs)("section",{className:"bg-gray-50 p-5 rounded-xl border border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4 text-gray-900 font-semibold",children:[(0,t.jsx)(C,{size:18}),(0,t.jsx)("h2",{children:"Microphone Input"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("label",{className:"block text-sm text-gray-600",children:"Select input device"}),(0,t.jsxs)("select",{value:a,onChange:e=>x({microphoneId:e.target.value}),className:"w-full bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5",children:[(0,t.jsx)("option",{value:"default",children:"Default System Microphone"}),e.map(e=>(0,t.jsx)("option",{value:e.deviceId,children:e.label},e.deviceId))]})]})]}),(0,t.jsxs)("section",{className:"bg-gray-50 p-5 rounded-xl border border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4 text-gray-900 font-semibold",children:[(0,t.jsx)(R,{size:18}),(0,t.jsx)("h2",{children:"Translation Mode"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Translate output automatically"}),(0,t.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:o,onChange:e=>x({translationEnabled:e.target.checked}),className:"sr-only peer"}),(0,t.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),o&&(0,t.jsxs)("div",{className:"animate-in fade-in slide-in-from-top-2 duration-200",children:[(0,t.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Target Language"}),(0,t.jsxs)("select",{value:l,onChange:e=>x({targetLanguage:e.target.value}),className:"w-full bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5",children:[(0,t.jsx)("option",{value:"Spanish",children:"Spanish"}),(0,t.jsx)("option",{value:"French",children:"French"}),(0,t.jsx)("option",{value:"German",children:"German"}),(0,t.jsx)("option",{value:"Italian",children:"Italian"}),(0,t.jsx)("option",{value:"Portuguese",children:"Portuguese"}),(0,t.jsx)("option",{value:"Chinese (Simplified)",children:"Chinese (Simplified)"}),(0,t.jsx)("option",{value:"Japanese",children:"Japanese"}),(0,t.jsx)("option",{value:"Korean",children:"Korean"}),(0,t.jsx)("option",{value:"Russian",children:"Russian"}),(0,t.jsx)("option",{value:"Dutch",children:"Dutch"})]}),(0,t.jsxs)("p",{className:"mt-2 text-xs text-gray-500",children:["Spoken text (English) will be translated to ",l," before pasting."]})]})]}),(0,t.jsxs)("section",{className:"bg-gray-50 p-5 rounded-xl border border-gray-200 opacity-75 relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-3 right-3 bg-yellow-100 text-yellow-800 text-xs font-bold px-2 py-1 rounded-full border border-yellow-200",children:"COMING SOON"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4 text-gray-900 font-semibold",children:[(0,t.jsx)(A,{size:18}),(0,t.jsx)("h2",{children:"Press-to-Talk"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-3",children:"Hold a key to speak instead of toggling on/off."}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Current Hotkey: Ctrl+Shift+Space (Toggle)"}),(0,t.jsx)("button",{disabled:!0,className:"bg-gray-200 text-gray-400 px-3 py-1 rounded text-sm cursor-not-allowed",children:"Configure"})]})]}),(0,t.jsxs)("section",{className:"bg-gray-50 p-5 rounded-xl border border-gray-200 opacity-75 relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-3 right-3 bg-yellow-100 text-yellow-800 text-xs font-bold px-2 py-1 rounded-full border border-yellow-200",children:"COMING SOON"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4 text-gray-900 font-semibold",children:[(0,t.jsx)(M,{size:18}),(0,t.jsx)("h2",{children:"Custom Hotkeys"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Customize the global shortcut to start/stop recording."})]})]}),d&&(0,t.jsx)("div",{className:"fixed bottom-8 right-8 bg-black text-white px-4 py-2 rounded-lg shadow-lg animate-in fade-in slide-in-from-bottom-2",children:d})]})}let E=n("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),I=n("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),P=n("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),z=n("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);function D(){return(0,t.jsx)("div",{className:"p-8 bg-gray-50 h-full overflow-y-auto custom-scrollbar",children:(0,t.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Help & Knowledge Base"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Everything you need to know to master Neato Voice."})]}),(0,t.jsx)(L,{icon:(0,t.jsx)(P,{className:"text-blue-500"}),title:"Getting Started",children:(0,t.jsx)("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm space-y-4",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"font-bold text-gray-900 mb-2 flex items-center gap-2",children:[(0,t.jsx)(A,{size:16})," Standard Dictation"]}),(0,t.jsx)("p",{className:"text-gray-600 mb-2",children:"To dictate text into any application (Word, Notepad, Slack, etc.):"}),(0,t.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-gray-600 ml-1",children:[(0,t.jsx)("li",{children:"Click inside the text field where you want to type."}),(0,t.jsxs)("li",{children:["Hold down ",(0,t.jsx)("kbd",{className:"bg-gray-100 border border-gray-300 rounded px-1.5 py-0.5 text-xs font-mono text-gray-800",children:"Ctrl + Shift + Space"}),"."]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Wait for the beep (or red icon)"}),", then speak clearly."]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Release"})," the keys when finished."]})]}),(0,t.jsxs)("div",{className:"mt-3 p-3 bg-blue-50 text-blue-800 rounded-lg text-sm flex gap-2 items-start",children:[(0,t.jsx)(I,{size:16,className:"mt-0.5 flex-shrink-0"}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Pro Tip:"})," There is a slight delay (0.5s) while the microphone warms up. If your first word is cut off, try pausing briefly after pressing the keys."]})]})]})})}),(0,t.jsx)(L,{icon:(0,t.jsx)(E,{className:"text-green-500"}),title:"Translation",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm space-y-4",children:[(0,t.jsx)("p",{className:"text-gray-600",children:"Neato Voice can translate your speech into another language in real-time."}),(0,t.jsxs)("div",{className:"border-l-4 border-green-100 pl-4 py-1",children:[(0,t.jsx)("h4",{className:"font-bold text-gray-900 text-sm mb-1",children:"Step 1: Configure Settings"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Go to the ",(0,t.jsx)("strong",{children:"Settings"}),' tab, enable "Translation", and select your Target Language (e.g., Spanish).']})]}),(0,t.jsxs)("div",{className:"border-l-4 border-green-100 pl-4 py-1",children:[(0,t.jsx)("h4",{className:"font-bold text-gray-900 text-sm mb-1",children:"Step 2: Use the Translation Hotkey"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Use the dedicated translation hotkey:"}),(0,t.jsx)("kbd",{className:"bg-gray-100 border border-gray-300 rounded px-1.5 py-0.5 text-sm font-mono text-gray-800",children:"Ctrl + Alt + Space"})]}),(0,t.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg text-sm text-green-800 flex items-start gap-2",children:[(0,t.jsx)(I,{size:16,className:"mt-0.5 flex-shrink-0"}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Tip:"})," You can dictate in English and have it appear in Spanish, or dictate in Spanish and have it appear in English (if your target is English)."]})]})]})}),(0,t.jsx)(L,{icon:(0,t.jsx)(S,{className:"text-orange-500"}),title:"Troubleshooting",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(H,{question:"Nothing happens when I press the hotkey",answer:"Ensure the app is running in the system tray. If Neato Voice is closed, the hotkeys won't work. Also, check if another application is using the same hotkey combination."}),(0,t.jsx)(H,{question:"The text types in the wrong place",answer:"Make sure your cursor is focused in the target text field BEFORE you verify the hotkey. Ideally, click the field, then look away and speak."}),(0,t.jsx)(H,{question:"It's not translating",answer:"1. Check Settings to ensure Translation is ON. 2. Verify you are using the correct hotkey (Ctrl + Alt + Space) for translation mode."}),(0,t.jsx)(H,{question:"My microphone isn't working",answer:"Go to Settings -> Microphone and ensure the correct input device is selected. You may need to restart the app after plugging in a new mic."})]})}),(0,t.jsx)(L,{icon:(0,t.jsx)(z,{className:"text-red-500"}),title:"Limitations & Quotas",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[(0,t.jsx)("h3",{className:"font-bold text-gray-900 mb-2",children:"Weekly Word Limit"}),(0,t.jsxs)("p",{className:"text-gray-600 mb-4",children:["The Free Plan includes ",(0,t.jsx)("strong",{children:"4,000 words per week"}),". This quota resets every 7 days."]}),(0,t.jsxs)("ul",{className:"list-disc list-inside text-sm text-gray-600 space-y-1",children:[(0,t.jsx)("li",{children:"Check your usage on the Dashboard stats."}),(0,t.jsx)("li",{children:"If you hit the limit, you will see a notification."}),(0,t.jsx)("li",{children:"Upgrade to Pro (Coming Soon) for unlimited dictation."})]})]})}),(0,t.jsx)("div",{className:"mt-8 text-center text-gray-400 text-sm",children:"Still need help? Email support@neatoventures.com"})]})})}function L({icon:e,title:s,children:a}){return(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,t.jsx)("div",{className:"p-2 bg-white rounded-lg shadow-sm border border-gray-100",children:r.default.cloneElement(e,{size:20})}),(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:s})]}),a]})}function H({question:e,answer:r}){return(0,t.jsxs)("div",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow",children:[(0,t.jsx)("h4",{className:"font-bold text-gray-900 mb-2 text-sm",children:e}),(0,t.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:r})]})}var W=e.i(17673),O=e.i(31001);class V{name="Whisper.js (Local)";isLocal=!0;transcriber=null;mediaRecorder=null;stream=null;transcriptCallback=null;errorCallback=null;stateCallback=null;isProcessing=!1;isSupported(){return"MediaRecorder"in window&&"AudioContext"in window}async initialize(){this.emitState("initializing");try{void 0===O.default?(window.process={env:{},versions:{node:"18.0.0"},platform:"browser"},console.log("Polyfilled process global for Whisper")):O.default.versions||(O.default.versions={node:"18.0.0"}),console.log("Importing @xenova/transformers...");let t=await e.A(400);console.log("Import result:",t);let r=t.pipeline,s=t.env;if(!s)throw Error("Transformers 'env' is null or undefined");console.log("Env found. Backends:",s.backends),s.allowLocalModels=!0,s.allowRemoteModels=!1,s.useBrowserCache=!1,s.localModelPath="./models/",s.backends?.onnx?.wasm?s.backends.onnx.wasm.wasmPaths="./wasm/":console.warn("env.backends.onnx.wasm is missing!"),console.log("Starting Whisper pipeline initialization (Offline)...");let a=new Promise((e,t)=>setTimeout(()=>t(Error("Whisper initialization timed out")),6e4));this.transcriber=await Promise.race([r("automatic-speech-recognition","Xenova/whisper-tiny.en",{quantized:!0,local_files_only:!0,progress_callback:e=>{console.log("Offline Load:",e)}}),a]),this.emitState("ready")}catch(e){throw console.error("Failed to initialize Whisper",e),this.errorCallback&&this.errorCallback(e),this.emitState("error"),e}}async startListening(e){if(!this.transcriber)throw Error("Whisper not initialized");try{this.stream=await navigator.mediaDevices.getUserMedia({audio:!0}),this.mediaRecorder=new MediaRecorder(this.stream);let e=[];this.mediaRecorder.ondataavailable=t=>{t.data.size>0&&e.push(t.data)},this.mediaRecorder.onstop=async()=>{this.emitState("processing");let t=new Blob(e,{type:"audio/webm"});await this.transcribeAudio(t),this.emitState("ready")},this.mediaRecorder.start(),this.emitState("listening")}catch(e){this.errorCallback&&this.errorCallback(e),this.emitState("error")}}async stopListening(){this.mediaRecorder&&"inactive"!==this.mediaRecorder.state&&(this.mediaRecorder.stop(),this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null))}async transcribeAudio(e){try{let t=new AudioContext,r=await e.arrayBuffer(),s=(await t.decodeAudioData(r)).getChannelData(0),a=await this.transcriber(s,{chunk_length_s:30,stride_length_s:5,language:"english",task:"transcribe",return_timestamps:!1}),i=a.text||(Array.isArray(a)?a[0].text:"");this.emitTranscript(i.trim(),!0)}catch(e){console.error("Transcription failed",e),this.errorCallback&&this.errorCallback(e)}}onTranscript(e){this.transcriptCallback=e}onError(e){this.errorCallback=e}onStateChange(e){this.stateCallback=e}cleanup(){this.stopListening(),this.transcriber=null}emitTranscript(e,t){this.transcriptCallback&&this.transcriptCallback({text:e,isFinal:t})}emitState(e){this.stateCallback&&this.stateCallback(e)}}class F{name="Web Speech API (Browser)";isLocal=!1;recognition;transcriptCallback=null;errorCallback=null;stateCallback=null;isSupported(){return"SpeechRecognition"in window||"webkitSpeechRecognition"in window}async initialize(){if(!this.isSupported())throw Error("Web Speech API not supported in this browser");let e=window.SpeechRecognition||window.webkitSpeechRecognition;this.recognition=new e,this.recognition&&(this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.lang="en-US",this.recognition.onresult=e=>{let t="";for(let r=e.resultIndex;r<e.results.length;++r)e.results[r].isFinal?this.emitTranscript(e.results[r][0].transcript,!0):t+=e.results[r][0].transcript;t&&this.emitTranscript(t,!1)},this.recognition.onerror=e=>{this.errorCallback&&this.errorCallback(Error(e.error)),this.emitState("error")},this.recognition.onstart=()=>this.emitState("listening"),this.recognition.onend=()=>this.emitState("ready")),this.emitState("ready")}async startListening(e){if(this.recognition)try{this.recognition.start()}catch(e){console.error("Failed to start recognition",e)}}async stopListening(){this.recognition&&this.recognition.stop()}onTranscript(e){this.transcriptCallback=e}onError(e){this.errorCallback=e}onStateChange(e){this.stateCallback=e}cleanup(){this.recognition&&(this.recognition.stop(),this.recognition=null)}emitTranscript(e,t){this.transcriptCallback&&this.transcriptCallback({text:e,isFinal:t})}emitState(e){this.stateCallback&&this.stateCallback(e)}}class _{name="Mock Provider (Testing)";isLocal=!0;transcriptCallback=null;errorCallback=null;stateCallback=null;isListening=!1;timeoutId=null;testPhrases=["i need to do three things one buy milk two call mom three finish the report","um this is a test uh you know to see if the refinement works","hello world this is a mock transcription for testing purposes"];currentPhraseIndex=0;isSupported(){return!0}async initialize(){console.log("[MockProvider] Initializing..."),this.emitState("ready")}async startListening(e){this.isListening||(console.log("[MockProvider] Starting mock transcription..."),this.isListening=!0,this.emitState("listening"),this.timeoutId=setTimeout(()=>{let e=this.testPhrases[this.currentPhraseIndex];this.currentPhraseIndex=(this.currentPhraseIndex+1)%this.testPhrases.length,console.log("[MockProvider] Emitting mock transcript:",e),this.emitTranscript(e,!0),this.isListening=!1,this.emitState("ready")},2e3))}async stopListening(){this.isListening&&(console.log("[MockProvider] Stopping mock transcription..."),this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.isListening=!1,this.emitState("ready"))}onTranscript(e){this.transcriptCallback=e}onError(e){this.errorCallback=e}onStateChange(e){this.stateCallback=e}cleanup(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.isListening=!1}emitTranscript(e,t){this.transcriptCallback&&this.transcriptCallback({text:e,isFinal:t})}emitState(e){this.stateCallback&&this.stateCallback(e)}}class U{name="AssemblyAI (Real-time)";isLocal=!1;transcriptCallback=null;errorCallback=null;stateCallback=null;transcriber=null;isRecording=!1;isSupported(){return"MediaRecorder"in window}async initialize(){console.log("[AssemblyAI] Initializing..."),this.emitState("ready")}async startListening(t){if(!this.isRecording)try{console.log("[AssemblyAI] Starting real-time transcription with SDK..."),this.isRecording=!0,this.emitState("listening");let{RealtimeTranscriber:t}=await e.A(27646);this.transcriber=new t({apiKey:"72bba0a97f1f494a975b04dde808546f",sampleRate:16e3}),this.transcriber.on("open",()=>{console.log("[AssemblyAI] Connection opened")}),this.transcriber.on("error",e=>{console.error("[AssemblyAI] Error:",e),this.emitError(e)}),this.transcriber.on("close",()=>{console.log("[AssemblyAI] Connection closed"),this.isRecording=!1,this.emitState("ready")}),this.transcriber.on("transcript.partial",e=>{e.text&&this.emitTranscript(e.text,!1)}),this.transcriber.on("transcript.final",e=>{e.text&&this.emitTranscript(e.text,!0)}),await this.transcriber.connect(),console.log("[AssemblyAI] Connected successfully");let r=await navigator.mediaDevices.getUserMedia({audio:{sampleRate:16e3,channelCount:1,echoCancellation:!0,noiseSuppression:!0}});this.transcriber.stream(r),console.log("[AssemblyAI] Streaming audio...")}catch(e){console.error("[AssemblyAI] Failed to start:",e),this.emitError(e),this.isRecording=!1,this.emitState("error")}}async stopListening(){if(this.isRecording){console.log("[AssemblyAI] Stopping transcription...");try{this.transcriber&&(await this.transcriber.close(),this.transcriber=null)}catch(e){console.error("[AssemblyAI] Error closing transcriber:",e)}this.isRecording=!1,this.emitState("ready")}}onTranscript(e){this.transcriptCallback=e}onError(e){this.errorCallback=e}onStateChange(e){this.stateCallback=e}cleanup(){this.stopListening()}emitTranscript(e,t){this.transcriptCallback&&e.trim()&&this.transcriptCallback({text:e,isFinal:t})}emitError(e){this.errorCallback&&this.errorCallback(e)}emitState(e){this.stateCallback&&this.stateCallback(e)}}class ${name="Deepgram (Real-time)";isLocal=!1;transcriptCallback=null;errorCallback=null;stateCallback=null;socket=null;mediaRecorder=null;isRecording=!1;isSupported(){return"MediaRecorder"in window}async initialize(){console.log("[Deepgram] Initializing..."),this.emitState("ready")}async startListening(e){if(!this.isRecording)try{console.log("[Deepgram] Requesting access token...");let t="";if(window.electronAPI){console.log("[Deepgram] Using Electron IPC for token");let e=window.electronAPI;e.getDeepgramApiKey?t=await e.getDeepgramApiKey():console.error("[Deepgram] Electron environment but no getDeepgramApiKey method")}if(!t)try{let e=await fetch("https://neato-voice.netlify.app/api/voice/token"),r=await e.json();if(!e.ok)throw Error(r.error||"Failed to get token");t=r.key}catch(e){if(console.error("[Deepgram] Failed to fetch token via API:",e),window.electronAPI)return void this.emitError(Error("Deepgram Token Error: IPC missing and API route unavailable in desktop mode."));throw e}console.log("[Deepgram] Starting real-time transcription..."),this.isRecording=!0,this.emitState("listening");let r=new URL("wss://api.deepgram.com/v1/listen");r.searchParams.append("model","nova-2"),r.searchParams.append("language","en-US"),r.searchParams.append("smart_format","true"),r.searchParams.append("punctuate","true"),r.searchParams.append("interim_results","true"),e?.keywords&&(e.keywords.forEach(e=>{e&&e.trim()&&r.searchParams.append("keywords",e.trim())}),console.log(`[Deepgram] Added ${e.keywords.length} keywords`)),this.socket=new WebSocket(r.toString(),["token",t]),this.socket.onopen=()=>{console.log("[Deepgram] WebSocket connected"),this.startAudioCapture()},this.socket.onmessage=e=>{try{let t=JSON.parse(e.data);if(t.channel?.alternatives?.[0]?.transcript){let e=t.channel.alternatives[0].transcript;if(e.trim()){let r=t.is_final||!1;console.log(`[Deepgram] ${r?"Final":"Partial"}: ${e}`),this.emitTranscript(e,r)}}}catch(e){console.error("[Deepgram] Error parsing message:",e)}},this.socket.onerror=e=>{console.error("[Deepgram] WebSocket error:",e),this.emitError(Error("WebSocket connection failed"))},this.socket.onclose=e=>{console.log("[Deepgram] WebSocket closed:",e.code,e.reason),this.isRecording=!1,this.emitState("ready")}}catch(e){console.error("[Deepgram] Failed to start:",e),this.emitError(e),this.isRecording=!1,this.emitState("error")}}async startAudioCapture(){try{let e=await navigator.mediaDevices.getUserMedia({audio:{channelCount:1,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}}),t=MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?"audio/webm;codecs=opus":"audio/webm";this.mediaRecorder=new MediaRecorder(e,{mimeType:t}),this.mediaRecorder.ondataavailable=e=>{e.data.size>0&&this.socket?.readyState===WebSocket.OPEN&&this.socket.send(e.data)},this.mediaRecorder.onerror=e=>{console.error("[Deepgram] MediaRecorder error:",e),this.emitError(Error("Audio recording failed"))},this.mediaRecorder.start(250),console.log("[Deepgram] Audio capture started with",t)}catch(e){console.error("[Deepgram] Failed to capture audio:",e),this.emitError(e)}}async stopListening(){this.isRecording&&(console.log("[Deepgram] Stopping transcription..."),this.mediaRecorder&&"inactive"!==this.mediaRecorder.state&&(this.mediaRecorder.stop(),this.mediaRecorder.stream.getTracks().forEach(e=>e.stop()),this.mediaRecorder=null),this.socket&&(this.socket.readyState===WebSocket.OPEN&&this.socket.send(JSON.stringify({type:"CloseStream"})),this.socket.close(),this.socket=null),this.isRecording=!1,this.emitState("ready"))}onTranscript(e){this.transcriptCallback=e}onError(e){this.errorCallback=e}onStateChange(e){this.stateCallback=e}cleanup(){this.stopListening()}emitTranscript(e,t){this.transcriptCallback&&e.trim()&&this.transcriptCallback({text:e,isFinal:t})}emitError(e){this.errorCallback&&this.errorCallback(e)}emitState(e){this.stateCallback&&this.stateCallback(e)}}async function q(e=["assemblyai"]){let t=[];for(let r of e){let e=function(e){switch(e){case"whisper":return new V;case"webspeech":return new F;case"mock":return new _;case"assemblyai":return new U;case"deepgram":return new $;default:return console.warn(`Unknown provider type ${e}, falling back to Deepgram`),new $}}(r);if(e.isSupported())try{return await e.initialize(),e}catch(e){console.warn(`Provider ${r} failed to initialize:`,e),t.push(e);continue}}throw Error(`No voice provider available. Errors: ${t.map(e=>e.message).join(", ")}`)}async function G(e){if(!e||!e.trim())return"";try{let t=await fetch("https://neato-voice.netlify.app/api/refine",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e})});if(!t.ok){let e=await t.json().catch(()=>({error:t.statusText}));throw Error(`Server Error (${t.status}): ${e.error||"Unknown Error"}`)}return(await t.json()).refinedText}catch(e){throw console.error("Refinement error:",e),e}}var B=e.i(21687),K=e.i(23178);function J(){let[e,s]=(0,r.useState)("home"),[a,i]=(0,r.useState)(""),[o,n]=(0,r.useState)(0),[l,c]=(0,r.useState)(!1),d=(0,K.useRouter)(),[h,g]=(0,r.useState)({totalDictationTimeMs:0,totalWords:0,wordsThisWeek:0,weekStartDate:new Date().toISOString()}),{recordingState:x}=(0,W.useVoiceStore)(),p=(0,W.useVoiceStore)(e=>e.refinedText),u=(0,W.useVoiceStore)(e=>e.rawTranscript);return(0,r.useEffect)(()=>{(async()=>{let e=(0,B.createClient)(),{data:{user:t}}=await e.auth.getUser();if(!t)return d.push("/login");i(t.email||"");let{data:r}=await e.from("profiles").select("credits_balance, role").eq("id",t.id).single();r&&(n(Number(r.credits_balance)),c("admin"===r.role))})()},[d]),(0,r.useEffect)(()=>{let e=f();if(e){e.getStats().then(g);let t=setInterval(()=>{e.getStats().then(e=>{g(e)})},5e3);return()=>clearInterval(t)}},[]),!function(){let{selectedProvider:e,setRecordingState:t,setError:s,appendRawTranscript:a,setAudioLevel:i}=(0,W.useVoiceStore)(),o=(0,r.useRef)(null),n=(0,r.useRef)(null),[l,c]=(0,r.useState)(!1),[d,h]=(0,r.useState)(0);(0,r.useEffect)(()=>{let e=!0;return async function(){h(.1);try{let r=[...new Set(["deepgram"])];if(o.current=await q(r),h(1),!e)return;o.current.onTranscript(e=>{e.isFinal&&(console.log(`[Hook] Final transcript received (length: ${e.text.length})`),a(e.text))}),o.current.onError(e=>{console.error("Provider error:",e),s(e.message)}),o.current.onStateChange(e=>{"uninitialized"!==e&&"initializing"!==e&&t("listening"===e?"recording":"processing"===e?"processing":"error"===e?"error":"idle")}),c(!0)}catch(t){console.error("Failed to initialize voice provider",t),e&&s(t.message)}}(),()=>{e=!1,o.current&&o.current.cleanup()}},[e,a,s,t]);let m=(0,r.useCallback)(async()=>{let e;if(!o.current||!l)return;W.useVoiceStore.getState().clearAll(),console.log("[Hook] Starting recording, transcript cleared");let r=[],s=f();if(s)try{let[t,a]=await Promise.all([s.getDictionary(),s.getSettings()]);r=t||[],e=a?.microphoneId,console.log(`[Hook] Loaded ${r.length} dictionary words, Mic: ${e||"default"}`)}catch(e){console.error("[Hook] Failed to load resources",e)}await o.current.startListening({keywords:r,deviceId:e}),n.current=Date.now(),t("recording"),s&&s.setRecordingState&&s.setRecordingState("recording")},[l,t]),g=(0,r.useCallback)(async()=>{if(!o.current||!l)return;await o.current.stopListening(),t("processing");let e=f();e&&e.setRecordingState&&e.setRecordingState("processing");try{let r=W.useVoiceStore.getState().rawTranscript;if(console.log("[Hook] Raw transcript length:",r.length),r&&r.trim()){let t=r,s=r;try{console.log("[Hook] Calling Web Refinement API..."),W.useVoiceStore.getState().setRefinementError(null),s=await G(r),console.log("[Hook] Refinement SUCCESS. Result len: "+s.length),W.useVoiceStore.getState().setRefinedText(s),t=s}catch(e){console.error("[Hook] Refinement Failed:",e),W.useVoiceStore.getState().setRefinementError(e.message||"Processing Error")}if(e){console.log("[Hook] Injecting text via Electron API..."),e.injectText(t);let r=t.trim().split(/\s+/).length,s=Date.now()-(n.current||Date.now());e.updateStats({durationMs:s,wordCount:r}).catch(e=>console.error("Failed to update stats:",e)),e.addHistoryEntry(t).catch(e=>console.error("Failed to save history:",e))}}else console.warn("[Hook] No transcript to refine");t("idle"),e&&e.setRecordingState&&setTimeout(()=>{e.setRecordingState("idle")},2500)}catch(e){console.error("[Hook] Critical error in stopRecording:",e),s(e.message||"Processing failed"),t("error")}},[l,t,s]);(0,r.useEffect)(()=>{let e=f();if(e&&e.onToggleRecording)return console.log("[Hook] Registering hotkey listener"),e.onToggleRecording((e,t)=>{console.log("[Hook] Hotkey triggered",t),t?.mode==="translation"?window.sessionStorage.setItem("temp_translation_mode","true"):window.sessionStorage.removeItem("temp_translation_mode");let r=W.useVoiceStore.getState().recordingState;"recording"===r?g():("idle"===r||"error"===r)&&m()}),()=>{e.removeToggleRecordingListener&&e.removeToggleRecordingListener()}},[m,g])}(),(0,t.jsxs)("div",{className:"flex h-screen w-screen overflow-hidden bg-vault-navy text-vault-paper font-sans",children:[(0,t.jsx)(m,{activeTab:e,setActiveTab:s}),(0,t.jsxs)("main",{className:"flex-1 h-full overflow-hidden relative flex flex-col",children:[(0,t.jsxs)("div",{className:"h-10 bg-vault-charcoal border-b border-vault-olive flex items-center justify-between px-4 text-xs font-mono",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{children:["OPERATOR: ",(0,t.jsx)("span",{className:"text-atom-amber",children:a})]}),(0,t.jsx)("a",{href:"/download",target:"_blank",className:"text-vault-dust hover:text-atom-green hover:underline",children:"⇩ DOWNLOAD_APP"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[l&&(0,t.jsx)("button",{onClick:()=>d.push("/admin"),className:"text-vault-rust hover:text-atom-amber hover:underline transition-colors mr-4",children:"[ADMIN PANEL]"}),(0,t.jsxs)("div",{children:["CREDITS: ",(0,t.jsxs)("span",{className:o<2?"text-vault-rust animate-pulse":"text-atom-green",children:["$",o.toFixed(2)]})]}),(0,t.jsx)("button",{onClick:()=>d.push("/pricing"),className:"border border-atom-teal text-atom-teal px-2 hover:bg-atom-teal hover:text-vault-navy transition-colors",children:"ADD FUNDS"})]})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-hidden relative",children:["home"===e&&(0,t.jsx)(b,{stats:h,lastTranscript:u,refinedTranscript:p,isRefining:"processing"===x,refinementError:null}),"dictionary"===e&&(0,t.jsx)(j,{}),"history"===e&&(0,t.jsx)(N,{}),"settings"===e&&(0,t.jsx)(T,{}),"help"===e&&(0,t.jsx)(D,{})]}),"idle"!==x&&(0,t.jsx)("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center crt-overlay",children:(0,t.jsxs)("div",{className:"bg-vault-charcoal border-2 border-atom-green p-8 rounded-lg shadow-[0_0_50px_rgba(57,255,20,0.2)] flex flex-col items-center animate-in fade-in zoom-in duration-200 min-w-[300px]",children:[(0,t.jsx)("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mb-6 border-4 ${"recording"===x?"border-vault-rust bg-vault-rust/20 text-vault-rust":"border-atom-teal bg-atom-teal/20 text-atom-teal"}`,children:"recording"===x?(0,t.jsx)("div",{className:"w-10 h-10 bg-vault-rust rounded-sm animate-pulse shadow-[0_0_20px_rgba(196,90,44,0.8)]"}):(0,t.jsx)("div",{className:"w-10 h-10 border-4 border-atom-teal border-t-transparent rounded-full animate-spin"})}),(0,t.jsx)("h2",{className:"text-2xl font-mono text-atom-green text-glow mb-2",children:"recording"===x?"RECORDING IN PROGRESS":"PROCESSING DATA..."}),(0,t.jsx)("p",{className:"text-vault-dust font-mono text-center max-w-md animate-pulse",children:u||"AWAITING AUDIO INPUT..."})]})})]})]})}e.s(["default",()=>J],40469)}]);